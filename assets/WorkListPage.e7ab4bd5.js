import{i as p,c as B,w as O,m as c,n as w,q as i,D as R,F as D,E as S,r as m,f as r,B as P,y as T,bi as V,v as a,A as E,x as M,b as N,G as q,I as F,H,p as g,o as $,l as A,z as j,ax as z}from"./index.11572179.js";import"./QImg.5a36287c.js";import"./QItemLabel.06f6b55b.js";import"./QSelect.44bc25a7.js";import{A as G}from"./AuthorItem.6c196834.js";/* empty css                                                                   */import{_ as J}from"./plugin-vue_export-helper.21dcd24c.js";import"./LocalStorage.0198308a.js";import{u as Q}from"./use-quasar.894b47c5.js";import"./axios.8f562e2b.js";import{Q as K}from"./QList.f13a658d.js";import{W as X}from"./WorkItem.bee3cc17.js";import"./myFuncts.7f91abf8.js";import{P as Y}from"./PageShell.f9f99083.js";import{Q as Z}from"./QForm.d7a15229.js";/* empty css               */import{W as C,A as ee}from"./lib.be306c2e.js";import"./QMenu.924c0b17.js";import"./position-engine.1bf61849.js";import"./selection.93775355.js";import"./rtl.276c3f1b.js";import"./format.de7e9769.js";/* empty css                                                               */import"./BtnDelete.3d55e9b3.js";import"./QTooltip.280a1a0c.js";import"./MainFooter.vue_vue_type_style_index_0_scoped_true_lang.55812a5a.js";import"./touch.9135741d.js";import"./QScrollArea.dd54d94c.js";import"./QLinearProgress.5ceb5230.js";/* empty css                                                    */import"./myAxios.d5d7b004.js";const te={__name:"WorkList",emits:["onDel"],setup(h,{emit:f}){const u=p("works"),s=p("searchText"),d=B(()=>{if(!s.value)return u.value;const l=s.value.toLowerCase();return u.value.filter(e=>(e.titleRu?e.titleRu.toLowerCase().includes(l):!1)||(e.titleEn?e.titleEn.toLowerCase().includes(l):!1))}),o=f;return O(s,(l,e)=>{console.log("Search text changed from",e,"to",l)}),(l,e)=>(c(),w(K,{separator:""},{default:i(()=>[(c(!0),R(D,null,S(d.value,v=>(c(),w(X,{key:v.id,work:v,onOnDel:e[0]||(e[0]=_=>o("onDel"))},null,8,["work"]))),128))]),_:1}))}},oe={__name:"WorkDialog",emits:["onSave"],setup(h,{emit:f}){const u=Q(),s=p("isOpenWorkDialog"),d=m(!1),o=p("work"),l=m();function e(){s.value=!1}const v=f;function _(){!b()||x()}async function x(){await C.add(u,o.value)&&(v("onSave"),e())}function k(){d.value=!1}function b(){return l.value.validate()}return(W,t)=>(c(),w(q,{modelValue:a(s),"onUpdate:modelValue":t[4]||(t[4]=n=>N(s)?s.value=n:null),onBeforeHide:k},{default:i(()=>[r(M,{bordered:"",class:"dialogArea"},{default:i(()=>[r(Z,{onSubmit:P(_,["prevent","stop"])},{default:i(()=>[r(T,null,{default:i(()=>[r(V,{modelValue:a(o).titleRu,"onUpdate:modelValue":t[0]||(t[0]=n=>a(o).titleRu=n),ref_key:"refTitle",ref:l,prefix:"RU",label:"\u0420\u0443\u0441\u0441\u043A\u043E\u0435 \u043D\u0430\u0437\u0432\u0430\u043D\u0438\u0435"},null,8,["modelValue"]),r(V,{modelValue:a(o).titleEn,"onUpdate:modelValue":t[1]||(t[1]=n=>a(o).titleEn=n),prefix:"EN",label:"\u041C\u0435\u0436\u0434\u0443\u043D\u0430\u0440\u043E\u0434\u043D\u043E\u0435 \u043D\u0430\u0437\u0432\u0430\u043D\u0438\u0435"},null,8,["modelValue"]),r(V,{modelValue:a(o).opus,"onUpdate:modelValue":t[2]||(t[2]=n=>a(o).opus=n),prefix:"Op.",label:"\u041E\u043F\u0443\u0441","stack-label":""},null,8,["modelValue"]),r(V,{modelValue:a(o).catalogIndex,"onUpdate:modelValue":t[3]||(t[3]=n=>a(o).catalogIndex=n),label:"\u041A\u0430\u0442\u0430\u043B\u043E\u0433. \u041D\u0430\u043F\u0440\u0438\u043C\u0435\u0440: BWV 123","stack-label":""},null,8,["modelValue"]),r(E,{type:"submit",label:"\u041E\u0442\u043F\u0440\u0430\u0432\u0438\u0442\u044C"})]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]))}};const ae={class:"centralCol"},le={__name:"WorkListPage",setup(h){const f=Q(),u=F();H();const s=m("");g("searchText",s);const d=m(!1);g("progress",d);const o=m([]);g("works",o);const l=p("selectedAuthorId"),e=p("selectedAuthor"),v=p("editMode"),_=m(!1);g("isOpenWorkDialog",_);const x=m(null);g("work",x);async function k(){d.value=!0;const t=await C.getListByAuthor(f,u.params.authorId);t&&(o.value=t),d.value=!1}async function b(){const t=await ee.get(f,l.value);t&&(e.value=t)}function W(){x.value={id:void 0,titleRu:"",titleEn:"",authorId:l.value,opus:"",icatno:""},_.value=!0}return $(()=>{l.value=u.params.authorId*1,b(),k(),console.log(e.value)}),(t,n)=>(c(),R(D,null,[r(Y,{"page-title":"\u041F\u0440\u043E\u0438\u0437\u0432\u0435\u0434\u0435\u043D\u0438\u044F "},{ToolPanel:i(()=>{var y,I,L;return[a(v)?(c(),w(E,{key:0,onClick:W,icon:"add",flat:"",round:""})):A("",!0),r(G,{id:a(l),iofEn:(y=a(e))==null?void 0:y.iofEn,iconUrl:(I=a(e))==null?void 0:I.iconUrl,fioRu:(L=a(e))==null?void 0:L.fioRu},null,8,["id","iofEn","iconUrl","fioRu"]),r(V,{modelValue:s.value,"onUpdate:modelValue":n[0]||(n[0]=U=>s.value=U),style:{width:"100%","max-width":"16em"},label:"\u0444\u0438\u043B\u044C\u0442\u0440","stack-label":"",clearable:""},{append:i(()=>[r(j,{name:"search"})]),_:1},8,["modelValue"])]}),PageContent:i(()=>[z("div",ae,[o.value.length?(c(),w(te,{key:0,onOnDel:k})):A("",!0)])]),_:1}),r(oe,{onOnSave:k})],64))}};var Oe=J(le,[["__scopeId","data-v-a2ff4c92"]]);export{Oe as default};
