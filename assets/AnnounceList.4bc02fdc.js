import{u as g}from"./use-quasar.0f4fe23d.js";import{a as A}from"./axios.ce00a07a.js";import{A as w}from"./AnnounceCard.fb0980b9.js";import{r as k,u as y,I as L,i as s,o as C,w as F,c as I,m as c,E as S,G as T,F as x,n as B,x as E}from"./index.ca51f9b8.js";import{n as Y}from"./myFuncts.0bfb5495.js";const q={__name:"AnnounceList",props:{method:String,evYear:Number,sort:k({})},setup(m){const i=String("https://api.sakh-orch.ru/"),l=g();y(),L();const p=s("compactCard"),n=s("announceList"),u=s("progress"),o=m;function r(){u.value=!0,A.post(i+"api/event/announce.php",{params:{method:o.method,year:o.evYear}}).then(e=>{var t,a;n.value=(a=(t=e==null?void 0:e.data)==null?void 0:t.data)!=null?a:[]}).catch(e=>{l.notify(Y(e)),n.value=[]}).finally(()=>{u.value=!1})}function _(e){}C(()=>{r()}),F(()=>o.evYear,()=>{r()});const d=(e,t)=>e.eventTime<t.eventTime?1:-1,v=(e,t)=>e.eventTime>t.eventTime?1:-1,f=I(()=>{if(!n.value||!n.value.length)return[];switch(o.sort){case"dateDesc":return[...n.value].sort(d);case"dateAsc":return[...n.value].sort(v);default:return n.value}});return(e,t)=>(c(!0),S(x,null,T(f.value,a=>(c(),B(w,{key:a.id,Announce:a,onIamDeleted:t[0]||(t[0]=h=>r()),onChangeShow:t[1]||(t[1]=h=>void 0),compact:E(p)},null,8,["Announce","compact"]))),128))}};export{q as _};
