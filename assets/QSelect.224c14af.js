import{V as fe,b4 as me,b5 as Ze,b6 as Ge,b7 as Je,X as qt,b8 as _t,Z as Dt,b9 as At,c as r,av as Ft,g as We,h as v,y as ue,ba as Ot,al as Bt,a0 as P,bb as Lt,r as q,bc as Tt,bd as Ne,w as te,an as G,au as H,be as Rt,bf as Ht,ai as Pt,aI as de,bg as Mt,ah as U,$ as Kt,am as pt,E as $t,ac as Et}from"./index.1ed4f0d9.js";import{Q as Qt,b as zt}from"./QImg.d3ea3630.js";import{Q as Nt}from"./QItemLabel.91ec210f.js";import{Q as jt}from"./QMenu.56bfa58f.js";import{u as je,a as Ut}from"./use-virtual-scroll.757b0b25.js";import{n as Ue}from"./format.de7e9769.js";var Xt=fe({name:"QField",inheritAttrs:!1,props:{...me,tag:{type:String,default:"label"}},emits:Ze,setup(){return Ge(Je({tagProp:!0}))}});const Zt={xs:8,sm:10,md:14,lg:20,xl:24};var Gt=fe({name:"QChip",props:{...qt,..._t,dense:Boolean,icon:String,iconRight:String,iconRemove:String,iconSelected:String,label:[String,Number],color:String,textColor:String,modelValue:{type:Boolean,default:!0},selected:{type:Boolean,default:null},square:Boolean,outline:Boolean,clickable:Boolean,removable:Boolean,removeAriaLabel:String,tabindex:[String,Number],disable:Boolean,ripple:{type:[Boolean,Object],default:!0}},emits:["update:modelValue","update:selected","remove","click"],setup(e,{slots:h,emit:i}){const{proxy:{$q:C}}=We(),B=Dt(e,C),c=At(e,Zt),x=r(()=>e.selected===!0||e.icon!==void 0),f=r(()=>e.selected===!0?e.iconSelected||C.iconSet.chip.selected:e.icon),b=r(()=>e.iconRemove||C.iconSet.chip.remove),D=r(()=>e.disable===!1&&(e.clickable===!0||e.selected!==null)),A=r(()=>{const o=e.outline===!0&&e.color||e.textColor;return"q-chip row inline no-wrap items-center"+(e.outline===!1&&e.color!==void 0?` bg-${e.color}`:"")+(o?` text-${o} q-chip--colored`:"")+(e.disable===!0?" disabled":"")+(e.dense===!0?" q-chip--dense":"")+(e.outline===!0?" q-chip--outline":"")+(e.selected===!0?" q-chip--selected":"")+(D.value===!0?" q-chip--clickable cursor-pointer non-selectable q-hoverable":"")+(e.square===!0?" q-chip--square":"")+(B.value===!0?" q-chip--dark q-dark":"")}),I=r(()=>{const o=e.disable===!0?{tabindex:-1,"aria-disabled":"true"}:{tabindex:e.tabindex||0},L={...o,role:"button","aria-hidden":"false","aria-label":e.removeAriaLabel||C.lang.label.remove};return{chip:o,remove:L}});function w(o){o.keyCode===13&&M(o)}function M(o){e.disable||(i("update:selected",!e.selected),i("click",o))}function V(o){(o.keyCode===void 0||o.keyCode===13)&&(P(o),e.disable===!1&&(i("update:modelValue",!1),i("remove")))}function K(){const o=[];D.value===!0&&o.push(v("div",{class:"q-focus-helper"})),x.value===!0&&o.push(v(ue,{class:"q-chip__icon q-chip__icon--left",name:f.value}));const L=e.label!==void 0?[v("div",{class:"ellipsis"},[e.label])]:void 0;return o.push(v("div",{class:"q-chip__content col row no-wrap items-center q-anchor--skip"},Ot(h.default,L))),e.iconRight&&o.push(v(ue,{class:"q-chip__icon q-chip__icon--right",name:e.iconRight})),e.removable===!0&&o.push(v(ue,{class:"q-chip__icon q-chip__icon--remove cursor-pointer",name:b.value,...I.value.remove,onClick:V,onKeyup:V})),o}return()=>{if(e.modelValue===!1)return;const o={class:A.value,style:c.value};return D.value===!0&&Object.assign(o,I.value.chip,{onClick:M,onKeyup:w}),Ft("div",o,K(),"ripple",e.ripple!==!1&&e.disable!==!0,()=>[[Bt,e.ripple]])}}});const Xe=e=>["add","add-unique","toggle"].includes(e),Jt=".*+?^${}()|[]\\",Wt=Object.keys(me);function ve(e,h){if(typeof e=="function")return e;const i=e!==void 0?e:h;return C=>C!==null&&typeof C=="object"&&i in C?C[i]:C}var au=fe({name:"QSelect",inheritAttrs:!1,props:{...je,...Lt,...me,modelValue:{required:!0},multiple:Boolean,displayValue:[String,Number],displayValueHtml:Boolean,dropdownIcon:String,options:{type:Array,default:()=>[]},optionValue:[Function,String],optionLabel:[Function,String],optionDisable:[Function,String],hideSelected:Boolean,hideDropdownIcon:Boolean,fillInput:Boolean,maxValues:[Number,String],optionsDense:Boolean,optionsDark:{type:Boolean,default:null},optionsSelectedClass:String,optionsHtml:Boolean,optionsCover:Boolean,menuShrink:Boolean,menuAnchor:String,menuSelf:String,menuOffset:Array,popupContentClass:String,popupContentStyle:[String,Array,Object],popupNoRouteDismiss:Boolean,useInput:Boolean,useChips:Boolean,newValueMode:{type:String,validator:Xe},mapOptions:Boolean,emitValue:Boolean,disableTabSelection:Boolean,inputDebounce:{type:[Number,String],default:500},inputClass:[Array,String,Object],inputStyle:[Array,String,Object],tabindex:{type:[String,Number],default:0},autocomplete:String,transitionShow:{},transitionHide:{},transitionDuration:{},behavior:{type:String,validator:e=>["default","menu","dialog"].includes(e),default:"default"},virtualScrollItemSize:je.virtualScrollItemSize.type,onNewValue:Function,onFilter:Function},emits:[...Ze,"add","remove","inputValue","keyup","keypress","keydown","popupShow","popupHide","filterAbort"],setup(e,{slots:h,emit:i}){const{proxy:C}=We(),{$q:B}=C,c=q(!1),x=q(!1),f=q(-1),b=q(""),D=q(!1),A=q(!1);let I=null,w=null,M,V,K,o=null,L,ge,F,he;const Ye=q(null),y=q(null),p=q(null),le=q(null),be=q(null),ye=Tt(e),Se=Mt(pe),O=r(()=>e.options.length),et=r(()=>e.virtualScrollItemSize===void 0?e.optionsDense===!0?24:48:e.virtualScrollItemSize),{virtualScrollSliceRange:tt,virtualScrollSliceSizeComputed:Ce,localResetVirtualScroll:ne,padVirtualScroll:ut,onVirtualScrollEvt:Ve,scrollTo:Ie,setVirtualScrollSize:ke}=Ut({virtualScrollLength:O,getVirtualScrollTarget:ft,getVirtualScrollEl:Me,virtualScrollItemSizeComputed:et}),n=Je(),g=r(()=>{const t=e.mapOptions===!0&&e.multiple!==!0,u=e.modelValue!==void 0&&(e.modelValue!==null||t===!0)?e.multiple===!0&&Array.isArray(e.modelValue)?e.modelValue:[e.modelValue]:[];if(e.mapOptions===!0){const l=e.mapOptions===!0&&M!==void 0?M:[],a=u.map(d=>vt(d,l));return e.modelValue===null&&t===!0?a.filter(d=>d!==null):a}return u}),lt=r(()=>{const t={};return Wt.forEach(u=>{const l=e[u];l!==void 0&&(t[u]=l)}),t}),J=r(()=>e.optionsDark===null?n.isDark.value:e.optionsDark),ae=r(()=>Ne(g.value)),nt=r(()=>{let t="q-field__input q-placeholder col";return e.hideSelected===!0||g.value.length===0?[t,e.inputClass]:(t+=" q-field__input--padding",e.inputClass===void 0?t:[t,e.inputClass])}),we=r(()=>(e.virtualScrollHorizontal===!0?"q-virtual-scroll--horizontal":"")+(e.popupContentClass?" "+e.popupContentClass:"")),X=r(()=>O.value===0),xe=r(()=>g.value.map(t=>k.value(t)).join(", ")),qe=r(()=>e.displayValue!==void 0?e.displayValue:xe.value),ie=r(()=>e.optionsHtml===!0?()=>!0:t=>t!=null&&t.html===!0),at=r(()=>e.displayValueHtml===!0||e.displayValue===void 0&&(e.optionsHtml===!0||g.value.some(ie.value))),_e=r(()=>n.focused.value===!0?e.tabindex:-1),De=r(()=>{const t={tabindex:e.tabindex,role:"combobox","aria-label":e.label,"aria-readonly":e.readonly===!0?"true":"false","aria-autocomplete":e.useInput===!0?"list":"none","aria-expanded":c.value===!0?"true":"false","aria-controls":`${n.targetUid.value}_lb`};return f.value>=0&&(t["aria-activedescendant"]=`${n.targetUid.value}_${f.value}`),t}),Ae=r(()=>({id:`${n.targetUid.value}_lb`,role:"listbox","aria-multiselectable":e.multiple===!0?"true":"false"})),Fe=r(()=>g.value.map((t,u)=>({index:u,opt:t,html:ie.value(t),selected:!0,removeAtIndex:dt,toggleOption:T,tabindex:_e.value}))),it=r(()=>{if(O.value===0)return[];const{from:t,to:u}=tt.value;return e.options.slice(t,u).map((l,a)=>{const d=$.value(l)===!0,s=re(l)===!0,S=t+a,m={clickable:!0,active:s,activeClass:ct.value,manualFocus:!0,focused:!1,disable:d,tabindex:-1,dense:e.optionsDense,dark:J.value,role:"option","aria-selected":s===!0?"true":"false",id:`${n.targetUid.value}_${S}`,onClick:()=>{T(l)}};return d!==!0&&(f.value===S&&(m.focused=!0),B.platform.is.desktop===!0&&(m.onMousemove=()=>{c.value===!0&&E(S)})),{index:S,opt:l,html:ie.value(l),label:k.value(l),selected:m.active,focused:m.focused,toggleOption:T,setOptionIndex:E,itemProps:m}})}),ot=r(()=>e.dropdownIcon!==void 0?e.dropdownIcon:B.iconSet.arrow.dropdown),rt=r(()=>e.optionsCover===!1&&e.outlined!==!0&&e.standout!==!0&&e.borderless!==!0&&e.rounded!==!0),ct=r(()=>e.optionsSelectedClass!==void 0?e.optionsSelectedClass:e.color!==void 0?`text-${e.color}`:""),_=r(()=>ve(e.optionValue,"value")),k=r(()=>ve(e.optionLabel,"label")),$=r(()=>ve(e.optionDisable,"disable")),W=r(()=>g.value.map(_.value)),st=r(()=>{const t={onInput:pe,onChange:Se,onKeydown:Pe,onKeyup:Re,onKeypress:He,onFocus:Le,onClick(u){V===!0&&U(u)}};return t.onCompositionstart=t.onCompositionupdate=t.onCompositionend=Se,t});te(g,t=>{M=t,e.useInput===!0&&e.fillInput===!0&&e.multiple!==!0&&n.innerLoading.value!==!0&&(x.value!==!0&&c.value!==!0||ae.value!==!0)&&(K!==!0&&j(),(x.value===!0||c.value===!0)&&Q(""))},{immediate:!0}),te(()=>e.fillInput,j),te(c,ce),te(O,xt);function Oe(t){return e.emitValue===!0?_.value(t):t}function oe(t){if(t!==-1&&t<g.value.length)if(e.multiple===!0){const u=e.modelValue.slice();i("remove",{index:t,value:u.splice(t,1)[0]}),i("update:modelValue",u)}else i("update:modelValue",null)}function dt(t){oe(t),n.focus()}function Be(t,u){const l=Oe(t);if(e.multiple!==!0){e.fillInput===!0&&Z(k.value(t),!0,!0),i("update:modelValue",l);return}if(g.value.length===0){i("add",{index:0,value:l}),i("update:modelValue",e.multiple===!0?[l]:l);return}if(u===!0&&re(t)===!0||e.maxValues!==void 0&&e.modelValue.length>=e.maxValues)return;const a=e.modelValue.slice();i("add",{index:a.length,value:l}),a.push(l),i("update:modelValue",a)}function T(t,u){if(n.editable.value!==!0||t===void 0||$.value(t)===!0)return;const l=_.value(t);if(e.multiple!==!0){u!==!0&&(Z(e.fillInput===!0?k.value(t):"",!0,!0),R()),y.value!==null&&y.value.focus(),(g.value.length===0||G(_.value(g.value[0]),l)!==!0)&&i("update:modelValue",e.emitValue===!0?l:t);return}if((V!==!0||D.value===!0)&&n.focus(),Le(),g.value.length===0){const s=e.emitValue===!0?l:t;i("add",{index:0,value:s}),i("update:modelValue",e.multiple===!0?[s]:s);return}const a=e.modelValue.slice(),d=W.value.findIndex(s=>G(s,l));if(d!==-1)i("remove",{index:d,value:a.splice(d,1)[0]});else{if(e.maxValues!==void 0&&a.length>=e.maxValues)return;const s=e.emitValue===!0?l:t;i("add",{index:a.length,value:s}),a.push(s)}i("update:modelValue",a)}function E(t){if(B.platform.is.desktop!==!0)return;const u=t!==-1&&t<O.value?t:-1;f.value!==u&&(f.value=u)}function Y(t=1,u){if(c.value===!0){let l=f.value;do l=Ue(l+t,-1,O.value-1);while(l!==-1&&l!==f.value&&$.value(e.options[l])===!0);f.value!==l&&(E(l),Ie(l),u!==!0&&e.useInput===!0&&e.fillInput===!0&&ee(l>=0?k.value(e.options[l]):L,!0))}}function vt(t,u){const l=a=>G(_.value(a),t);return e.options.find(l)||u.find(l)||t}function re(t){const u=_.value(t);return W.value.find(l=>G(l,u))!==void 0}function Le(t){e.useInput===!0&&y.value!==null&&(t===void 0||y.value===t.target&&t.target.value===xe.value)&&y.value.select()}function Te(t){Kt(t,27)===!0&&c.value===!0&&(U(t),R(),j()),i("keyup",t)}function Re(t){const{value:u}=t.target;if(t.keyCode!==void 0){Te(t);return}if(t.target.value="",I!==null&&(clearTimeout(I),I=null),w!==null&&(clearTimeout(w),w=null),j(),typeof u=="string"&&u.length!==0){const l=u.toLocaleLowerCase(),a=s=>{const S=e.options.find(m=>s.value(m).toLocaleLowerCase()===l);return S===void 0?!1:(g.value.indexOf(S)===-1?T(S):R(),!0)},d=s=>{a(_)!==!0&&(a(k)===!0||s===!0||Q(u,!0,()=>d(!0)))};d()}else n.clearValue(t)}function He(t){i("keypress",t)}function Pe(t){if(i("keydown",t),pt(t)===!0)return;const u=b.value.length!==0&&(e.newValueMode!==void 0||e.onNewValue!==void 0),l=t.shiftKey!==!0&&e.disableTabSelection!==!0&&e.multiple!==!0&&(f.value!==-1||u===!0);if(t.keyCode===27){de(t);return}if(t.keyCode===9&&l===!1){z();return}if(t.target===void 0||t.target.id!==n.targetUid.value||n.editable.value!==!0)return;if(t.keyCode===40&&n.innerLoading.value!==!0&&c.value===!1){P(t),N();return}if(t.keyCode===8&&(e.useChips===!0||e.clearable===!0)&&e.hideSelected!==!0&&b.value.length===0){e.multiple===!0&&Array.isArray(e.modelValue)===!0?oe(e.modelValue.length-1):e.multiple!==!0&&e.modelValue!==null&&i("update:modelValue",null);return}(t.keyCode===35||t.keyCode===36)&&(typeof b.value!="string"||b.value.length===0)&&(P(t),f.value=-1,Y(t.keyCode===36?1:-1,e.multiple)),(t.keyCode===33||t.keyCode===34)&&Ce.value!==void 0&&(P(t),f.value=Math.max(-1,Math.min(O.value,f.value+(t.keyCode===33?-1:1)*Ce.value.view)),Y(t.keyCode===33?1:-1,e.multiple)),(t.keyCode===38||t.keyCode===40)&&(P(t),Y(t.keyCode===38?-1:1,e.multiple));const a=O.value;if((F===void 0||he<Date.now())&&(F=""),a>0&&e.useInput!==!0&&t.key!==void 0&&t.key.length===1&&t.altKey===!1&&t.ctrlKey===!1&&t.metaKey===!1&&(t.keyCode!==32||F.length!==0)){c.value!==!0&&N(t);const d=t.key.toLocaleLowerCase(),s=F.length===1&&F[0]===d;he=Date.now()+1500,s===!1&&(P(t),F+=d);const S=new RegExp("^"+F.split("").map(se=>Jt.indexOf(se)!==-1?"\\"+se:se).join(".*"),"i");let m=f.value;if(s===!0||m<0||S.test(k.value(e.options[m]))!==!0)do m=Ue(m+1,-1,a-1);while(m!==f.value&&($.value(e.options[m])===!0||S.test(k.value(e.options[m]))!==!0));f.value!==m&&H(()=>{E(m),Ie(m),m>=0&&e.useInput===!0&&e.fillInput===!0&&ee(k.value(e.options[m]),!0)});return}if(!(t.keyCode!==13&&(t.keyCode!==32||e.useInput===!0||F!=="")&&(t.keyCode!==9||l===!1))){if(t.keyCode!==9&&P(t),f.value!==-1&&f.value<a){T(e.options[f.value]);return}if(u===!0){const d=(s,S)=>{if(S){if(Xe(S)!==!0)return}else S=e.newValueMode;if(Z("",e.multiple!==!0,!0),s==null)return;(S==="toggle"?T:Be)(s,S==="add-unique"),e.multiple!==!0&&(y.value!==null&&y.value.focus(),R())};if(e.onNewValue!==void 0?i("newValue",b.value,d):d(b.value),e.multiple!==!0)return}c.value===!0?z():n.innerLoading.value!==!0&&N()}}function Me(){return V===!0?be.value:p.value!==null&&p.value.contentEl!==null?p.value.contentEl:void 0}function ft(){return Me()}function mt(){return e.hideSelected===!0?[]:h["selected-item"]!==void 0?Fe.value.map(t=>h["selected-item"](t)).slice():h.selected!==void 0?[].concat(h.selected()):e.useChips===!0?Fe.value.map((t,u)=>v(Gt,{key:"option-"+u,removable:n.editable.value===!0&&$.value(t.opt)!==!0,dense:!0,textColor:e.color,tabindex:_e.value,onRemove(){t.removeAtIndex(u)}},()=>v("span",{class:"ellipsis",[t.html===!0?"innerHTML":"textContent"]:k.value(t.opt)}))):[v("span",{[at.value===!0?"innerHTML":"textContent"]:qe.value})]}function Ke(){if(X.value===!0)return h["no-option"]!==void 0?h["no-option"]({inputValue:b.value}):void 0;const t=h.option!==void 0?h.option:l=>v(zt,{key:l.index,...l.itemProps},()=>v(Qt,()=>v(Nt,()=>v("span",{[l.html===!0?"innerHTML":"textContent"]:l.label}))));let u=ut("div",it.value.map(t));return h["before-options"]!==void 0&&(u=h["before-options"]().concat(u)),Et(h["after-options"],u)}function gt(t,u){const l=u===!0?{...De.value,...n.splitAttrs.attributes.value}:void 0,a={ref:u===!0?y:void 0,key:"i_t",class:nt.value,style:e.inputStyle,value:b.value!==void 0?b.value:"",type:"search",...l,id:u===!0?n.targetUid.value:void 0,maxlength:e.maxlength,autocomplete:e.autocomplete,"data-autofocus":t===!0||e.autofocus===!0||void 0,disabled:e.disable===!0,readonly:e.readonly===!0,...st.value};return t!==!0&&V===!0&&(Array.isArray(a.class)===!0?a.class=[...a.class,"no-pointer-events"]:a.class+=" no-pointer-events"),v("input",a)}function pe(t){I!==null&&(clearTimeout(I),I=null),w!==null&&(clearTimeout(w),w=null),!(t&&t.target&&t.target.qComposing===!0)&&(ee(t.target.value||""),K=!0,L=b.value,n.focused.value!==!0&&(V!==!0||D.value===!0)&&n.focus(),e.onFilter!==void 0&&(I=setTimeout(()=>{I=null,Q(b.value)},e.inputDebounce)))}function ee(t,u){b.value!==t&&(b.value=t,u===!0||e.inputDebounce===0||e.inputDebounce==="0"?i("inputValue",t):w=setTimeout(()=>{w=null,i("inputValue",t)},e.inputDebounce))}function Z(t,u,l){K=l!==!0,e.useInput===!0&&(ee(t,!0),(u===!0||l!==!0)&&(L=t),u!==!0&&Q(t))}function Q(t,u,l){if(e.onFilter===void 0||u!==!0&&n.focused.value!==!0)return;n.innerLoading.value===!0?i("filterAbort"):(n.innerLoading.value=!0,A.value=!0),t!==""&&e.multiple!==!0&&g.value.length!==0&&K!==!0&&t===k.value(g.value[0])&&(t="");const a=setTimeout(()=>{c.value===!0&&(c.value=!1)},10);o!==null&&clearTimeout(o),o=a,i("filter",t,(d,s)=>{(u===!0||n.focused.value===!0)&&o===a&&(clearTimeout(o),typeof d=="function"&&d(),A.value=!1,H(()=>{n.innerLoading.value=!1,n.editable.value===!0&&(u===!0?c.value===!0&&R():c.value===!0?ce(!0):c.value=!0),typeof s=="function"&&H(()=>{s(C)}),typeof l=="function"&&H(()=>{l(C)})}))},()=>{n.focused.value===!0&&o===a&&(clearTimeout(o),n.innerLoading.value=!1,A.value=!1),c.value===!0&&(c.value=!1)})}function ht(){return v(jt,{ref:p,class:we.value,style:e.popupContentStyle,modelValue:c.value,fit:e.menuShrink!==!0,cover:e.optionsCover===!0&&X.value!==!0&&e.useInput!==!0,anchor:e.menuAnchor,self:e.menuSelf,offset:e.menuOffset,dark:J.value,noParentEvent:!0,noRefocus:!0,noFocus:!0,noRouteDismiss:e.popupNoRouteDismiss,square:rt.value,transitionShow:e.transitionShow,transitionHide:e.transitionHide,transitionDuration:e.transitionDuration,separateClosePopup:!0,...Ae.value,onScrollPassive:Ve,onBeforeShow:Ee,onBeforeHide:bt,onShow:yt},Ke)}function bt(t){Qe(t),z()}function yt(){ke()}function St(t){U(t),y.value!==null&&y.value.focus(),D.value=!0,window.scrollTo(window.pageXOffset||window.scrollX||document.body.scrollLeft||0,0)}function Ct(t){U(t),H(()=>{D.value=!1})}function Vt(){const t=[v(Xt,{class:`col-auto ${n.fieldClass.value}`,...lt.value,for:n.targetUid.value,dark:J.value,square:!0,loading:A.value,itemAligned:!1,filled:!0,stackLabel:b.value.length!==0,...n.splitAttrs.listeners.value,onFocus:St,onBlur:Ct},{...h,rawControl:()=>n.getControl(!0),before:void 0,after:void 0})];return c.value===!0&&t.push(v("div",{ref:be,class:we.value+" scroll",style:e.popupContentStyle,...Ae.value,onClick:de,onScrollPassive:Ve},Ke())),v($t,{ref:le,modelValue:x.value,position:e.useInput===!0?"top":void 0,transitionShow:ge,transitionHide:e.transitionHide,transitionDuration:e.transitionDuration,noRouteDismiss:e.popupNoRouteDismiss,onBeforeShow:Ee,onBeforeHide:It,onHide:kt,onShow:wt},()=>v("div",{class:"q-select__dialog"+(J.value===!0?" q-select__dialog--dark q-dark":"")+(D.value===!0?" q-select__dialog--focused":"")},t))}function It(t){Qe(t),le.value!==null&&le.value.__updateRefocusTarget(n.rootRef.value.querySelector(".q-field__native > [tabindex]:last-child")),n.focused.value=!1}function kt(t){R(),n.focused.value===!1&&i("blur",t),j()}function wt(){const t=document.activeElement;(t===null||t.id!==n.targetUid.value)&&y.value!==null&&y.value!==t&&y.value.focus(),ke()}function z(){x.value!==!0&&(f.value=-1,c.value===!0&&(c.value=!1),n.focused.value===!1&&(o!==null&&(clearTimeout(o),o=null),n.innerLoading.value===!0&&(i("filterAbort"),n.innerLoading.value=!1,A.value=!1)))}function N(t){n.editable.value===!0&&(V===!0?(n.onControlFocusin(t),x.value=!0,H(()=>{n.focus()})):n.focus(),e.onFilter!==void 0?Q(b.value):(X.value!==!0||h["no-option"]!==void 0)&&(c.value=!0))}function R(){x.value=!1,z()}function j(){e.useInput===!0&&Z(e.multiple!==!0&&e.fillInput===!0&&g.value.length!==0&&k.value(g.value[0])||"",!0,!0)}function ce(t){let u=-1;if(t===!0){if(g.value.length!==0){const l=_.value(g.value[0]);u=e.options.findIndex(a=>G(_.value(a),l))}ne(u)}E(u)}function xt(t,u){c.value===!0&&n.innerLoading.value===!1&&(ne(-1,!0),H(()=>{c.value===!0&&n.innerLoading.value===!1&&(t>u?ne():ce(!0))}))}function $e(){x.value===!1&&p.value!==null&&p.value.updatePosition()}function Ee(t){t!==void 0&&U(t),i("popupShow",t),n.hasPopupOpen=!0,n.onControlFocusin(t)}function Qe(t){t!==void 0&&U(t),i("popupHide",t),n.hasPopupOpen=!1,n.onControlFocusout(t)}function ze(){V=B.platform.is.mobile!==!0&&e.behavior!=="dialog"?!1:e.behavior!=="menu"&&(e.useInput===!0?h["no-option"]!==void 0||e.onFilter!==void 0||X.value===!1:!0),ge=B.platform.is.ios===!0&&V===!0&&e.useInput===!0?"fade":e.transitionShow}return Rt(ze),Ht($e),ze(),Pt(()=>{I!==null&&clearTimeout(I),w!==null&&clearTimeout(w)}),Object.assign(C,{showPopup:N,hidePopup:R,removeAtIndex:oe,add:Be,toggleOption:T,getOptionIndex:()=>f.value,setOptionIndex:E,moveOptionSelection:Y,filter:Q,updateMenuPosition:$e,updateInputValue:Z,isOptionSelected:re,getEmittingOptionValue:Oe,isOptionDisabled:(...t)=>$.value.apply(null,t)===!0,getOptionValue:(...t)=>_.value.apply(null,t),getOptionLabel:(...t)=>k.value.apply(null,t)}),Object.assign(n,{innerValue:g,fieldClass:r(()=>`q-select q-field--auto-height q-select--with${e.useInput!==!0?"out":""}-input q-select--with${e.useChips!==!0?"out":""}-chips q-select--${e.multiple===!0?"multiple":"single"}`),inputRef:Ye,targetRef:y,hasValue:ae,showPopup:N,floatingLabel:r(()=>e.hideSelected!==!0&&ae.value===!0||typeof b.value=="number"||b.value.length!==0||Ne(e.displayValue)),getControlChild:()=>{if(n.editable.value!==!1&&(x.value===!0||X.value!==!0||h["no-option"]!==void 0))return V===!0?Vt():ht();n.hasPopupOpen===!0&&(n.hasPopupOpen=!1)},controlEvents:{onFocusin(t){n.onControlFocusin(t)},onFocusout(t){n.onControlFocusout(t,()=>{j(),z()})},onClick(t){if(de(t),V!==!0&&c.value===!0){z(),y.value!==null&&y.value.focus();return}N(t)}},getControl:t=>{const u=mt(),l=t===!0||x.value!==!0||V!==!0;if(e.useInput===!0)u.push(gt(t,l));else if(n.editable.value===!0){const d=l===!0?De.value:void 0;u.push(v("input",{ref:l===!0?y:void 0,key:"d_t",class:"q-select__focus-target",id:l===!0?n.targetUid.value:void 0,value:qe.value,readonly:!0,"data-autofocus":t===!0||e.autofocus===!0||void 0,...d,onKeydown:Pe,onKeyup:Te,onKeypress:He})),l===!0&&typeof e.autocomplete=="string"&&e.autocomplete.length!==0&&u.push(v("input",{class:"q-select__autocomplete-input",autocomplete:e.autocomplete,tabindex:-1,onKeyup:Re}))}if(ye.value!==void 0&&e.disable!==!0&&W.value.length!==0){const d=W.value.map(s=>v("option",{value:s,selected:!0}));u.push(v("select",{class:"hidden",name:ye.value,multiple:e.multiple},d))}const a=e.useInput===!0||l!==!0?void 0:n.splitAttrs.attributes.value;return v("div",{class:"q-field__native row items-center",...a,...n.splitAttrs.listeners.value},u)},getInnerAppend:()=>e.loading!==!0&&A.value!==!0&&e.hideDropdownIcon!==!0?[v(ue,{class:"q-select__dropdown-icon"+(c.value===!0?" rotate-180":""),name:ot.value})]:null}),Ge(n)}});export{au as Q,Gt as a};
