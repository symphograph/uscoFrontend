import{u as y}from"./myFuncts.0e97ec07.js";import{A as w}from"./AnnounceCard.1c56d55a.js";import{m as c}from"./announce.2e58aef3.js";import{d as k,i as u,o as B,w as A,c as F,m as i,C as L,D as g,F as h,n as C,u as _}from"./index.7ebe9bab.js";const H=k({__name:"AnnounceList",props:{method:{},year:{},sort:{}},setup(m){const r=y(),d=u("compactCard"),a=u("announceList"),l=u("progress"),n=m;async function o(){var s;l.value=!0;let e;const t=(s=n.year)!=null?s:new Date().getFullYear();switch(n.method){case"futureList":e=await c.listFuture(r);break;case"listByYear":e=await c.listByYear(r,t);break;case"listByHall":e=await c.listByHall(r,t);break;default:e=void 0}a.value=e!=null?e:[],l.value=!1}B(()=>{o()}),A(()=>n.year,()=>{o()});const p=(e,t)=>e.eventTime<t.eventTime?1:-1,v=(e,t)=>e.eventTime>t.eventTime?1:-1,f=F(()=>{if(!a.value||!a.value.length)return[];switch(n.sort){case"dateDesc":return[...a.value].sort(p);case"dateAsc":return[...a.value].sort(v);default:return a.value}});return(e,t)=>(i(!0),L(h,null,g(f.value,s=>(i(),C(w,{key:s.id,announce:s,onIamDeleted:t[0]||(t[0]=D=>o()),compact:_(d)},null,8,["announce","compact"]))),128))}});export{H as _};
