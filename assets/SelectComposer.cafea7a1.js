import{Q as I}from"./QImg.89a0bf99.js";import{I as V,r as _,i as d,w,o as C,m as A,n as N,c4 as b,x as a,q as r,f as n,Q as k,cq as y,t as L,v as R,l as E,b as P}from"./index.2e8fec5e.js";import{Q as U}from"./QItemLabel.4bcd9886.js";import{Q as B}from"./QItem.46438e8b.js";import{Q as D}from"./QSelect.832ec479.js";import{A as T}from"./AuthorItem.d0730730.js";/* empty css                                                                   */import{_ as q}from"./plugin-vue_export-helper.21dcd24c.js";const z={__name:"SelectComposer",emits:["itSel"],setup(F,{emit:h}){const g=V(),Q=_(),c=d("AuthorSelectList"),u=_([...c.value]),S=h,f=d("selectedAuthorId"),m=d("selectedAuthor"),l=d("loadingAuthors");function x(p,t,e){t(()=>{if(!p){u.value=[...c.value];return}const s=p.toLowerCase();let i=[...c.value];p&&(i=i.filter(o=>(o.fioRu?o.fioRu.toLowerCase().includes(s):!1)||(o.iofEn?o.iofEn.toLowerCase().includes(s):!1))),u.value=i})}return w(l,()=>{l.value||(u.value=[...c.value],console.log("loadingAuthors",l.value))}),C(()=>{}),(p,t)=>(A(),N(D,{options:u.value,ref_key:"refSelect",ref:Q,modelValue:a(f),"onUpdate:modelValue":[t[1]||(t[1]=e=>P(f)?f.value=e:null),t[2]||(t[2]=e=>S("itSel"))],"option-label":"fioRu","option-value":"id","map-options":"","emit-value":"","use-input":!a(l),"hide-selected":"","fill-input":"",autocomplete:"off","input-debounce":"0",onFilter:x,clearable:"",style:{width:"100%"},label:"\u041A\u043E\u043C\u043F\u043E\u0437\u0438\u0442\u043E\u0440",loading:a(l)},b({option:r(e=>{var s,i,o,v;return[n(T,y(e.itemProps,{id:(s=e.opt)==null?void 0:s.id,iofEn:(i=e.opt)==null?void 0:i.iofEn,iconUrl:(o=e.opt)==null?void 0:o.iconUrl,fioRu:(v=e.opt)==null?void 0:v.fioRu}),{sections:r(()=>[n(B,{side:""},{default:r(()=>[n(U,{caption:""},{default:r(()=>[L(R(e.opt.cntWorks),1)]),_:2},1024)]),_:2},1024)]),_:2},1040,["id","iofEn","iconUrl","fioRu"]),E("",!0)]}),_:2},[a(m)?{name:"prepend",fn:r(()=>[n(k,null,{default:r(()=>[n(I,{src:a(m).iconUrl,class:"authorAva",eager:"","no-spinner":"","no-transition":"","placeholder-src":"/img/avatars/init_ava.png",style:{width:"50px",cursor:"pointer"},onClick:t[0]||(t[0]=()=>a(g).push({path:"/lib/author/"+a(m).id}))},null,8,["src"])]),_:1})]),key:"0"}:void 0]),1032,["options","modelValue","use-input","loading"]))}};var Y=q(z,[["__scopeId","data-v-3a61243a"]]);export{Y as S};
