import{u as fn}from"./use-meta.1a563701.js";import{u as Mt}from"./use-quasar.182ec13c.js";import{api as Nt}from"./axios.5bf91f34.js";import{Q as mn}from"./QImg.c4f2f619.js";import{_ as bt,i as _e,s as M,f as de,g as Be,A as w,h as P,J as q,aw as St,c as Pe,a4 as J,F as Ut,D as Et,E as Pt,bc as Bt,bd as hn,G as Dt,b5 as Qt,ak as Lt,am as Zt,be as zt,r as E,bf as gn,w as pe,H as g,ar as Ue,I as Rt,L as wt,bg as Kt,W as gt,bh as yn,bb as _n,aH as pn,aU as Mn,a7 as yt,z as ge,a_ as Ee,a3 as Ct,u as Wt,d as bn,p as Xt,j as it,a as Dn}from"./index.57600a78.js";import{d as wn,b as Yt,n as _t}from"./myFuncts.24341304.js";import{S as kn,Q as xn}from"./SketchUploader.aa4c5140.js";import{Q as qt}from"./QSelect.556dfc7a.js";import{u as Sn}from"./use-cache.b0833c75.js";import{p as H}from"./format.3e32b8d9.js";import{Q as Cn}from"./rtl.36801386.js";import{u as Yn,c as qn}from"./position-engine.f677db17.js";import{T as Hn,C as Ht}from"./ClosePopup.9ce1da61.js";import{A as Vn}from"./AnnounceCard.e6dde117.js";import"./use-ratio.9478a7ec.js";import"./jwt-decode.esm.74bd4619.js";import"./QTooltip.02ded1c6.js";import"./get-emits-object.24798346.js";import"./QItemSection.27cec377.js";import"./touch.3df10340.js";const re=e=>(Et("data-v-a62d9886"),e=e(),Pt(),e),On={class:"eventbox"},$n={class:"eventboxin"},In={class:"text"},An={key:0},Tn=re(()=>w("br",null,null,-1)),jn=re(()=>w("br",null,null,-1)),Fn=["innerHTML"],Nn=re(()=>w("br",null,null,-1)),Un=re(()=>w("small",null," \u0423\u0432\u0430\u0436\u0430\u0435\u043C\u044B\u0435 \u043F\u043E\u0441\u0435\u0442\u0438\u0442\u0435\u043B\u0438, \u0443\u0431\u0435\u0434\u0438\u0442\u0435\u043B\u044C\u043D\u0430\u044F \u043F\u0440\u043E\u0441\u044C\u0431\u0430 \u0441\u043E\u0431\u043B\u044E\u0434\u0430\u0442\u044C \u043C\u0435\u0440\u044B \u0431\u0435\u0437\u043E\u043F\u0430\u0441\u043D\u043E\u0441\u0442\u0438 \u0432 \u0441\u0432\u044F\u0437\u0438 \u0441 \u0440\u0430\u0441\u043F\u0440\u043E\u0441\u0442\u0440\u0430\u043D\u0435\u043D\u0438\u0435\u043C \u043A\u043E\u0440\u043E\u043D\u0430\u0432\u0438\u0440\u0443\u0441\u043D\u043E\u0439 \u0438\u043D\u0444\u0435\u043A\u0446\u0438\u0438! ",-1)),En=re(()=>w("br",null,null,-1)),Pn=re(()=>w("br",null,null,-1)),Bn=re(()=>w("p",null,"\u0421\u043F\u0440\u0430\u0432\u043A\u0438 \u043F\u043E \u0442\u0435\u043B:",-1)),Qn=re(()=>w("div",{class:"tel"},[w("a",{href:"tel:+74242300518"},"+7-4242-300-518")],-1)),Ln=re(()=>w("br",null,null,-1)),Zn=re(()=>w("div",{class:"tel"},[w("a",{href:"tel:+79624163689"},"+7-962-416-36-89")],-1)),zn=re(()=>w("br",null,null,-1)),Rn={__name:"AnnounceDescr",setup(e){const o=String("https://api.sakh-orch.ru/"),v=Mt(),r=_e("Announce"),f=M(()=>{let y=v.platform.is.mobile?1080:480;return o+"/img/posters/poster/"+y+"/poster_"+r.value.id+".jpg?ver="+r.value.verString});function i(){return"https://vk.com/share.php?url="+o+"/event.php?evid="+String(r.value.id)+"&title="+String(r.value.progName)+"&noparse=true&image="+String(f)}return(y,s)=>(de(),Be(Ut,null,[w("div",On,[P(mn,{src:f.value},null,8,["src"])]),w("div",$n,[w("div",In,[q(r).progName?(de(),Be("p",An,[w("b",null,St(q(r).progName),1)])):Pe("",!0),Tn,w("p",null,[w("b",null,St(q(wn)(q(r).eventTime)),1)]),jn,w("div",{innerHTML:q(r).description},null,8,Fn),Nn,Un,En,Pn,Bn,Qn,Ln,Zn,zn,P(J,{href:i(),target:"_blank",color:"primary",icon:"ion-logo-vk",label:"\u041F\u043E\u0434\u0435\u043B\u0438\u0442\u044C\u0441\u044F"},null,8,["href"])])])],64))}};var Kn=bt(Rn,[["__scopeId","data-v-a62d9886"]]);const Me=[-61,9,38,199,426,686,756,818,1111,1181,1210,1635,2060,2097,2192,2262,2324,2394,2456,3178];function Wn(e,o,v){return Object.prototype.toString.call(e)==="[object Date]"&&(v=e.getDate(),o=e.getMonth()+1,e=e.getFullYear()),ea(kt(e,o,v))}function Vt(e,o,v){return Gt(Gn(e,o,v))}function Xn(e){return Jn(e)===0}function rt(e,o){return o<=6?31:o<=11||Xn(e)?30:29}function Jn(e){const o=Me.length;let v=Me[0],r,f,i,y,s;if(e<v||e>=Me[o-1])throw new Error("Invalid Jalaali year "+e);for(s=1;s<o&&(r=Me[s],f=r-v,!(e<r));s+=1)v=r;return y=e-v,f-y<6&&(y=y-f+F(f+4,33)*33),i=ne(ne(y+1,33)-1,4),i===-1&&(i=4),i}function Jt(e,o){const v=Me.length,r=e+621;let f=-14,i=Me[0],y,s,_,$,d;if(e<i||e>=Me[v-1])throw new Error("Invalid Jalaali year "+e);for(d=1;d<v&&(y=Me[d],s=y-i,!(e<y));d+=1)f=f+F(s,33)*8+F(ne(s,33),4),i=y;$=e-i,f=f+F($,33)*8+F(ne($,33)+3,4),ne(s,33)===4&&s-$===4&&(f+=1);const k=F(r,4)-F((F(r,100)+1)*3,4)-150,K=20+f-k;return o||(s-$<6&&($=$-s+F(s+4,33)*33),_=ne(ne($+1,33)-1,4),_===-1&&(_=4)),{leap:_,gy:r,march:K}}function Gn(e,o,v){const r=Jt(e,!0);return kt(r.gy,3,r.march)+(o-1)*31-F(o,7)*(o-7)+v-1}function ea(e){const o=Gt(e).gy;let v=o-621,r,f,i;const y=Jt(v,!1),s=kt(o,3,y.march);if(i=e-s,i>=0){if(i<=185)return f=1+F(i,31),r=ne(i,31)+1,{jy:v,jm:f,jd:r};i-=186}else v-=1,i+=179,y.leap===1&&(i+=1);return f=7+F(i,30),r=ne(i,30)+1,{jy:v,jm:f,jd:r}}function kt(e,o,v){let r=F((e+F(o-8,6)+100100)*1461,4)+F(153*ne(o+9,12)+2,5)+v-34840408;return r=r-F(F(e+100100+F(o-8,6),100)*3,4)+752,r}function Gt(e){let o=4*e+139361631;o=o+F(F(4*e+183187720,146097)*3,4)*4-3908;const v=F(ne(o,1461),4)*5+308,r=F(ne(v,153),5)+1,f=ne(F(v,153),12)+1;return{gy:F(o,1461)-100100+F(8-f,6),gm:f,gd:r}}function F(e,o){return~~(e/o)}function ne(e,o){return e-~~(e/o)*o}const ta=["gregorian","persian"],en={modelValue:{required:!0},mask:{type:String},locale:Object,calendar:{type:String,validator:e=>ta.includes(e),default:"gregorian"},landscape:Boolean,color:String,textColor:String,square:Boolean,flat:Boolean,bordered:Boolean,readonly:Boolean,disable:Boolean},tn=["update:modelValue"];function ve(e){return e.year+"/"+H(e.month)+"/"+H(e.day)}function nn(e,o){const v=M(()=>e.disable!==!0&&e.readonly!==!0),r=M(()=>v.value===!0?0:-1),f=M(()=>{const s=[];return e.color!==void 0&&s.push(`bg-${e.color}`),e.textColor!==void 0&&s.push(`text-${e.textColor}`),s.join(" ")});function i(){return e.locale!==void 0?{...o.lang.date,...e.locale}:o.lang.date}function y(s){const _=new Date,$=s===!0?null:0;if(e.calendar==="persian"){const d=Wn(_);return{year:d.jy,month:d.jm,day:d.jd}}return{year:_.getFullYear(),month:_.getMonth()+1,day:_.getDate(),hour:$,minute:$,second:$,millisecond:$}}return{editable:v,tabindex:r,headerClass:f,getLocale:i,getCurrentDate:y}}const an=864e5,na=36e5,pt=6e4,ln="YYYY-MM-DDTHH:mm:ss.SSSZ",aa=/\[((?:[^\]\\]|\\]|\\)*)\]|d{1,4}|M{1,4}|m{1,2}|w{1,2}|Qo|Do|D{1,4}|YY(?:YY)?|H{1,2}|h{1,2}|s{1,2}|S{1,3}|Z{1,2}|a{1,2}|[AQExX]/g,la=/(\[[^\]]*\])|d{1,4}|M{1,4}|m{1,2}|w{1,2}|Qo|Do|D{1,4}|YY(?:YY)?|H{1,2}|h{1,2}|s{1,2}|S{1,3}|Z{1,2}|a{1,2}|[AQExX]|([.*+:?^,\s${}()|\\]+)/g,mt={};function oa(e,o){const v="("+o.days.join("|")+")",r=e+v;if(mt[r]!==void 0)return mt[r];const f="("+o.daysShort.join("|")+")",i="("+o.months.join("|")+")",y="("+o.monthsShort.join("|")+")",s={};let _=0;const $=e.replace(la,k=>{switch(_++,k){case"YY":return s.YY=_,"(-?\\d{1,2})";case"YYYY":return s.YYYY=_,"(-?\\d{1,4})";case"M":return s.M=_,"(\\d{1,2})";case"MM":return s.M=_,"(\\d{2})";case"MMM":return s.MMM=_,y;case"MMMM":return s.MMMM=_,i;case"D":return s.D=_,"(\\d{1,2})";case"Do":return s.D=_++,"(\\d{1,2}(st|nd|rd|th))";case"DD":return s.D=_,"(\\d{2})";case"H":return s.H=_,"(\\d{1,2})";case"HH":return s.H=_,"(\\d{2})";case"h":return s.h=_,"(\\d{1,2})";case"hh":return s.h=_,"(\\d{2})";case"m":return s.m=_,"(\\d{1,2})";case"mm":return s.m=_,"(\\d{2})";case"s":return s.s=_,"(\\d{1,2})";case"ss":return s.s=_,"(\\d{2})";case"S":return s.S=_,"(\\d{1})";case"SS":return s.S=_,"(\\d{2})";case"SSS":return s.S=_,"(\\d{3})";case"A":return s.A=_,"(AM|PM)";case"a":return s.a=_,"(am|pm)";case"aa":return s.aa=_,"(a\\.m\\.|p\\.m\\.)";case"ddd":return f;case"dddd":return v;case"Q":case"d":case"E":return"(\\d{1})";case"Qo":return"(1st|2nd|3rd|4th)";case"DDD":case"DDDD":return"(\\d{1,3})";case"w":return"(\\d{1,2})";case"ww":return"(\\d{2})";case"Z":return s.Z=_,"(Z|[+-]\\d{2}:\\d{2})";case"ZZ":return s.ZZ=_,"(Z|[+-]\\d{2}\\d{2})";case"X":return s.X=_,"(-?\\d+)";case"x":return s.x=_,"(-?\\d{4,})";default:return _--,k[0]==="["&&(k=k.substring(1,k.length-1)),k.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}}),d={map:s,regex:new RegExp("^"+$)};return mt[r]=d,d}function on(e,o){return e!==void 0?e:o!==void 0?o.date:hn.date}function Ot(e,o=""){const v=e>0?"-":"+",r=Math.abs(e),f=Math.floor(r/60),i=r%60;return v+H(f)+o+H(i)}function We(e,o,v,r,f){const i={year:null,month:null,day:null,hour:null,minute:null,second:null,millisecond:null,timezoneOffset:null,dateHash:null,timeHash:null};if(f!==void 0&&Object.assign(i,f),e==null||e===""||typeof e!="string")return i;o===void 0&&(o=ln);const y=on(v,Bt.props),s=y.months,_=y.monthsShort,{regex:$,map:d}=oa(o,y),k=e.match($);if(k===null)return i;let K="";if(d.X!==void 0||d.x!==void 0){const Q=parseInt(k[d.X!==void 0?d.X:d.x],10);if(isNaN(Q)===!0||Q<0)return i;const Z=new Date(Q*(d.X!==void 0?1e3:1));i.year=Z.getFullYear(),i.month=Z.getMonth()+1,i.day=Z.getDate(),i.hour=Z.getHours(),i.minute=Z.getMinutes(),i.second=Z.getSeconds(),i.millisecond=Z.getMilliseconds()}else{if(d.YYYY!==void 0)i.year=parseInt(k[d.YYYY],10);else if(d.YY!==void 0){const Q=parseInt(k[d.YY],10);i.year=Q<0?Q:2e3+Q}if(d.M!==void 0){if(i.month=parseInt(k[d.M],10),i.month<1||i.month>12)return i}else d.MMM!==void 0?i.month=_.indexOf(k[d.MMM])+1:d.MMMM!==void 0&&(i.month=s.indexOf(k[d.MMMM])+1);if(d.D!==void 0){if(i.day=parseInt(k[d.D],10),i.year===null||i.month===null||i.day<1)return i;const Q=r!=="persian"?new Date(i.year,i.month,0).getDate():rt(i.year,i.month);if(i.day>Q)return i}d.H!==void 0?i.hour=parseInt(k[d.H],10)%24:d.h!==void 0&&(i.hour=parseInt(k[d.h],10)%12,(d.A&&k[d.A]==="PM"||d.a&&k[d.a]==="pm"||d.aa&&k[d.aa]==="p.m.")&&(i.hour+=12),i.hour=i.hour%24),d.m!==void 0&&(i.minute=parseInt(k[d.m],10)%60),d.s!==void 0&&(i.second=parseInt(k[d.s],10)%60),d.S!==void 0&&(i.millisecond=parseInt(k[d.S],10)*10**(3-k[d.S].length)),(d.Z!==void 0||d.ZZ!==void 0)&&(K=d.Z!==void 0?k[d.Z].replace(":",""):k[d.ZZ],i.timezoneOffset=(K[0]==="+"?-1:1)*(60*K.slice(1,3)+1*K.slice(3,5)))}return i.dateHash=H(i.year,6)+"/"+H(i.month)+"/"+H(i.day),i.timeHash=H(i.hour)+":"+H(i.minute)+":"+H(i.second)+K,i}function $t(e){const o=new Date(e.getFullYear(),e.getMonth(),e.getDate());o.setDate(o.getDate()-(o.getDay()+6)%7+3);const v=new Date(o.getFullYear(),0,4);v.setDate(v.getDate()-(v.getDay()+6)%7+3);const r=o.getTimezoneOffset()-v.getTimezoneOffset();o.setHours(o.getHours()-r);const f=(o-v)/(an*7);return 1+Math.floor(f)}function fe(e,o,v){const r=new Date(e),f=`set${v===!0?"UTC":""}`;switch(o){case"year":case"years":r[`${f}Month`](0);case"month":case"months":r[`${f}Date`](1);case"day":case"days":case"date":r[`${f}Hours`](0);case"hour":case"hours":r[`${f}Minutes`](0);case"minute":case"minutes":r[`${f}Seconds`](0);case"second":case"seconds":r[`${f}Milliseconds`](0)}return r}function ut(e,o,v){return(e.getTime()-e.getTimezoneOffset()*pt-(o.getTime()-o.getTimezoneOffset()*pt))/v}function un(e,o,v="days"){const r=new Date(e),f=new Date(o);switch(v){case"years":case"year":return r.getFullYear()-f.getFullYear();case"months":case"month":return(r.getFullYear()-f.getFullYear())*12+r.getMonth()-f.getMonth();case"days":case"day":case"date":return ut(fe(r,"day"),fe(f,"day"),an);case"hours":case"hour":return ut(fe(r,"hour"),fe(f,"hour"),na);case"minutes":case"minute":return ut(fe(r,"minute"),fe(f,"minute"),pt);case"seconds":case"second":return ut(fe(r,"second"),fe(f,"second"),1e3)}}function It(e){return un(e,fe(e,"year"),"days")+1}function At(e){if(e>=11&&e<=13)return`${e}th`;switch(e%10){case 1:return`${e}st`;case 2:return`${e}nd`;case 3:return`${e}rd`}return`${e}th`}const Tt={YY(e,o,v){const r=this.YYYY(e,o,v)%100;return r>=0?H(r):"-"+H(Math.abs(r))},YYYY(e,o,v){return v!=null?v:e.getFullYear()},M(e){return e.getMonth()+1},MM(e){return H(e.getMonth()+1)},MMM(e,o){return o.monthsShort[e.getMonth()]},MMMM(e,o){return o.months[e.getMonth()]},Q(e){return Math.ceil((e.getMonth()+1)/3)},Qo(e){return At(this.Q(e))},D(e){return e.getDate()},Do(e){return At(e.getDate())},DD(e){return H(e.getDate())},DDD(e){return It(e)},DDDD(e){return H(It(e),3)},d(e){return e.getDay()},dd(e,o){return this.dddd(e,o).slice(0,2)},ddd(e,o){return o.daysShort[e.getDay()]},dddd(e,o){return o.days[e.getDay()]},E(e){return e.getDay()||7},w(e){return $t(e)},ww(e){return H($t(e))},H(e){return e.getHours()},HH(e){return H(e.getHours())},h(e){const o=e.getHours();return o===0?12:o>12?o%12:o},hh(e){return H(this.h(e))},m(e){return e.getMinutes()},mm(e){return H(e.getMinutes())},s(e){return e.getSeconds()},ss(e){return H(e.getSeconds())},S(e){return Math.floor(e.getMilliseconds()/100)},SS(e){return H(Math.floor(e.getMilliseconds()/10))},SSS(e){return H(e.getMilliseconds(),3)},A(e){return this.H(e)<12?"AM":"PM"},a(e){return this.H(e)<12?"am":"pm"},aa(e){return this.H(e)<12?"a.m.":"p.m."},Z(e,o,v,r){const f=r==null?e.getTimezoneOffset():r;return Ot(f,":")},ZZ(e,o,v,r){const f=r==null?e.getTimezoneOffset():r;return Ot(f)},X(e){return Math.floor(e.getTime()/1e3)},x(e){return e.getTime()}};function rn(e,o,v,r,f){if(e!==0&&!e||e===1/0||e===-1/0)return;const i=new Date(e);if(isNaN(i))return;o===void 0&&(o=ln);const y=on(v,Bt.props);return o.replace(aa,(s,_)=>s in Tt?Tt[s](i,y,r,f):_===void 0?s:_.split("\\]").join("]"))}const Ce=20,ua=["Calendar","Years","Months"],jt=e=>ua.includes(e),ht=e=>/^-?[\d]+\/[0-1]\d$/.test(e),Ne=" \u2014 ";function ye(e){return e.year+"/"+H(e.month)}var ra=Dt({name:"QDate",props:{...en,...Qt,...Lt,multiple:Boolean,range:Boolean,title:String,subtitle:String,mask:{default:"YYYY/MM/DD"},defaultYearMonth:{type:String,validator:ht},yearsInMonthView:Boolean,events:[Array,Function],eventColor:[String,Function],emitImmediately:Boolean,options:[Array,Function],navigationMinYearMonth:{type:String,validator:ht},navigationMaxYearMonth:{type:String,validator:ht},noUnset:Boolean,firstDayOfWeek:[String,Number],todayBtn:Boolean,minimal:Boolean,defaultView:{type:String,default:"Calendar",validator:jt}},emits:[...tn,"rangeStart","rangeEnd","navigation"],setup(e,{slots:o,emit:v}){const{proxy:r}=wt(),{$q:f}=r,i=Zt(e,f),{getCache:y}=Sn(),{tabindex:s,headerClass:_,getLocale:$,getCurrentDate:d}=nn(e,f);let k;const K=zt(e),Q=Kt(K),Z=E(null),T=E(Te()),I=E($()),Ye=M(()=>Te()),me=M(()=>$()),x=M(()=>d()),u=E(lt(T.value,I.value)),V=E(e.defaultView),qe=f.lang.rtl===!0?"right":"left",N=E(qe.value),D=E(qe.value),O=u.value.year,ee=E(O-O%Ce-(O<0?Ce:0)),z=E(null),be=M(()=>{const t=e.landscape===!0?"landscape":"portrait";return`q-date q-date--${t} q-date--${t}-${e.minimal===!0?"minimal":"standard"}`+(i.value===!0?" q-date--dark q-dark":"")+(e.bordered===!0?" q-date--bordered":"")+(e.square===!0?" q-date--square no-border-radius":"")+(e.flat===!0?" q-date--flat no-shadow":"")+(e.disable===!0?" disabled":e.readonly===!0?" q-date--readonly":"")}),ae=M(()=>e.color||"primary"),oe=M(()=>e.textColor||"white"),X=M(()=>e.emitImmediately===!0&&e.multiple!==!0&&e.range!==!0),ce=M(()=>Array.isArray(e.modelValue)===!0?e.modelValue:e.modelValue!==null&&e.modelValue!==void 0?[e.modelValue]:[]),W=M(()=>ce.value.filter(t=>typeof t=="string").map(t=>Re(t,T.value,I.value)).filter(t=>t.dateHash!==null&&t.day!==null&&t.month!==null&&t.year!==null)),ue=M(()=>{const t=n=>Re(n,T.value,I.value);return ce.value.filter(n=>gn(n)===!0&&n.from!==void 0&&n.to!==void 0).map(n=>({from:t(n.from),to:t(n.to)})).filter(n=>n.from.dateHash!==null&&n.to.dateHash!==null&&n.from.dateHash<n.to.dateHash)}),He=M(()=>e.calendar!=="persian"?t=>new Date(t.year,t.month-1,t.day):t=>{const n=Vt(t.year,t.month,t.day);return new Date(n.gy,n.gm-1,n.gd)}),Qe=M(()=>e.calendar==="persian"?ve:(t,n,a)=>rn(new Date(t.year,t.month-1,t.day,t.hour,t.minute,t.second,t.millisecond),n===void 0?T.value:n,a===void 0?I.value:a,t.year,t.timezoneOffset)),he=M(()=>W.value.length+ue.value.reduce((t,n)=>t+1+un(He.value(n.to),He.value(n.from)),0)),De=M(()=>{if(e.title!==void 0&&e.title!==null&&e.title.length!==0)return e.title;if(z.value!==null){const a=z.value.init,m=He.value(a);return I.value.daysShort[m.getDay()]+", "+I.value.monthsShort[a.month-1]+" "+a.day+Ne+"?"}if(he.value===0)return Ne;if(he.value>1)return`${he.value} ${I.value.pluralDay}`;const t=W.value[0],n=He.value(t);return isNaN(n.valueOf())===!0?Ne:I.value.headerTitle!==void 0?I.value.headerTitle(n,t):I.value.daysShort[n.getDay()]+", "+I.value.monthsShort[t.month-1]+" "+t.day}),Xe=M(()=>W.value.concat(ue.value.map(n=>n.from)).sort((n,a)=>n.year-a.year||n.month-a.month)[0]),Le=M(()=>W.value.concat(ue.value.map(n=>n.to)).sort((n,a)=>a.year-n.year||a.month-n.month)[0]),Je=M(()=>{if(e.subtitle!==void 0&&e.subtitle!==null&&e.subtitle.length!==0)return e.subtitle;if(he.value===0)return Ne;if(he.value>1){const t=Xe.value,n=Le.value,a=I.value.monthsShort;return a[t.month-1]+(t.year!==n.year?" "+t.year+Ne+a[n.month-1]+" ":t.month!==n.month?Ne+a[n.month-1]:"")+" "+n.year}return W.value[0].year}),Ve=M(()=>{const t=[f.iconSet.datetime.arrowLeft,f.iconSet.datetime.arrowRight];return f.lang.rtl===!0?t.reverse():t}),Oe=M(()=>e.firstDayOfWeek!==void 0?Number(e.firstDayOfWeek):I.value.firstDayOfWeek),Ze=M(()=>{const t=I.value.daysShort,n=Oe.value;return n>0?t.slice(n,7).concat(t.slice(0,n)):t}),ie=M(()=>{const t=u.value;return e.calendar!=="persian"?new Date(t.year,t.month,0).getDate():rt(t.year,t.month)}),Ge=M(()=>typeof e.eventColor=="function"?e.eventColor:()=>e.eventColor),L=M(()=>{if(e.navigationMinYearMonth===void 0)return null;const t=e.navigationMinYearMonth.split("/");return{year:parseInt(t[0],10),month:parseInt(t[1],10)}}),R=M(()=>{if(e.navigationMaxYearMonth===void 0)return null;const t=e.navigationMaxYearMonth.split("/");return{year:parseInt(t[0],10),month:parseInt(t[1],10)}}),ze=M(()=>{const t={month:{prev:!0,next:!0},year:{prev:!0,next:!0}};return L.value!==null&&L.value.year>=u.value.year&&(t.year.prev=!1,L.value.year===u.value.year&&L.value.month>=u.value.month&&(t.month.prev=!1)),R.value!==null&&R.value.year<=u.value.year&&(t.year.next=!1,R.value.year===u.value.year&&R.value.month<=u.value.month&&(t.month.next=!1)),t}),$e=M(()=>{const t={};return W.value.forEach(n=>{const a=ye(n);t[a]===void 0&&(t[a]=[]),t[a].push(n.day)}),t}),et=M(()=>{const t={};return ue.value.forEach(n=>{const a=ye(n.from),m=ye(n.to);if(t[a]===void 0&&(t[a]=[]),t[a].push({from:n.from.day,to:a===m?n.to.day:void 0,range:n}),a<m){let h;const{year:A,month:p}=n.from,C=p<12?{year:A,month:p+1}:{year:A+1,month:1};for(;(h=ye(C))<=m;)t[h]===void 0&&(t[h]=[]),t[h].push({from:void 0,to:h===m?n.to.day:void 0,range:n}),C.month++,C.month>12&&(C.year++,C.month=1)}}),t}),we=M(()=>{if(z.value===null)return;const{init:t,initHash:n,final:a,finalHash:m}=z.value,[h,A]=n<=m?[t,a]:[a,t],p=ye(h),C=ye(A);if(p!==G.value&&C!==G.value)return;const j={};return p===G.value?(j.from=h.day,j.includeFrom=!0):j.from=1,C===G.value?(j.to=A.day,j.includeTo=!0):j.to=ie.value,j}),G=M(()=>ye(u.value)),st=M(()=>{const t={};if(e.options===void 0){for(let a=1;a<=ie.value;a++)t[a]=!0;return t}const n=typeof e.options=="function"?e.options:a=>e.options.includes(a);for(let a=1;a<=ie.value;a++){const m=G.value+"/"+H(a);t[a]=n(m)}return t}),dt=M(()=>{const t={};if(e.events===void 0)for(let n=1;n<=ie.value;n++)t[n]=!1;else{const n=typeof e.events=="function"?e.events:a=>e.events.includes(a);for(let a=1;a<=ie.value;a++){const m=G.value+"/"+H(a);t[a]=n(m)===!0&&Ge.value(m)}}return t}),Ie=M(()=>{let t,n;const{year:a,month:m}=u.value;if(e.calendar!=="persian")t=new Date(a,m-1,1),n=new Date(a,m-1,0).getDate();else{const h=Vt(a,m,1);t=new Date(h.gy,h.gm-1,h.gd);let A=m-1,p=a;A===0&&(A=12,p--),n=rt(p,A)}return{days:t.getDay()-Oe.value-1,endDay:n}}),ke=M(()=>{const t=[],{days:n,endDay:a}=Ie.value,m=n<0?n+7:n;if(m<6)for(let p=a-m;p<=a;p++)t.push({i:p,fill:!0});const h=t.length;for(let p=1;p<=ie.value;p++){const C={i:p,event:dt.value[p],classes:[]};st.value[p]===!0&&(C.in=!0,C.flat=!0),t.push(C)}if($e.value[G.value]!==void 0&&$e.value[G.value].forEach(p=>{const C=h+p-1;Object.assign(t[C],{selected:!0,unelevated:!0,flat:!1,color:ae.value,textColor:oe.value})}),et.value[G.value]!==void 0&&et.value[G.value].forEach(p=>{if(p.from!==void 0){const C=h+p.from-1,j=h+(p.to||ie.value)-1;for(let Ke=C;Ke<=j;Ke++)Object.assign(t[Ke],{range:p.range,unelevated:!0,color:ae.value,textColor:oe.value});Object.assign(t[C],{rangeFrom:!0,flat:!1}),p.to!==void 0&&Object.assign(t[j],{rangeTo:!0,flat:!1})}else if(p.to!==void 0){const C=h+p.to-1;for(let j=h;j<=C;j++)Object.assign(t[j],{range:p.range,unelevated:!0,color:ae.value,textColor:oe.value});Object.assign(t[C],{flat:!1,rangeTo:!0})}else{const C=h+ie.value-1;for(let j=h;j<=C;j++)Object.assign(t[j],{range:p.range,unelevated:!0,color:ae.value,textColor:oe.value})}}),we.value!==void 0){const p=h+we.value.from-1,C=h+we.value.to-1;for(let j=p;j<=C;j++)t[j].color=ae.value,t[j].editRange=!0;we.value.includeFrom===!0&&(t[p].editRangeFrom=!0),we.value.includeTo===!0&&(t[C].editRangeTo=!0)}u.value.year===x.value.year&&u.value.month===x.value.month&&(t[h+x.value.day-1].today=!0);const A=t.length%7;if(A>0){const p=7-A;for(let C=1;C<=p;C++)t.push({i:C,fill:!0})}return t.forEach(p=>{let C="q-date__calendar-item ";p.fill===!0?C+="q-date__calendar-item--fill":(C+=`q-date__calendar-item--${p.in===!0?"in":"out"}`,p.range!==void 0&&(C+=` q-date__range${p.rangeTo===!0?"-to":p.rangeFrom===!0?"-from":""}`),p.editRange===!0&&(C+=` q-date__edit-range${p.editRangeFrom===!0?"-from":""}${p.editRangeTo===!0?"-to":""}`),(p.range!==void 0||p.editRange===!0)&&(C+=` text-${p.color}`)),p.classes=C}),t}),Ae=M(()=>e.disable===!0?{"aria-disabled":"true"}:{});pe(()=>e.modelValue,t=>{if(k===t)k=0;else{const n=lt(T.value,I.value);B(n.year,n.month,n)}}),pe(V,()=>{Z.value!==null&&r.$el.contains(document.activeElement)===!0&&Z.value.focus()}),pe(()=>u.value.year+"|"+u.value.month,()=>{v("navigation",{year:u.value.year,month:u.value.month})}),pe(Ye,t=>{xt(t,I.value,"mask"),T.value=t}),pe(me,t=>{xt(T.value,t,"locale"),I.value=t});function tt(){const{year:t,month:n,day:a}=x.value,m={...u.value,year:t,month:n,day:a},h=$e.value[ye(m)];(h===void 0||h.includes(m.day)===!1)&&ct(m),xe(m.year,m.month)}function nt(t){jt(t)===!0&&(V.value=t)}function at(t,n){["month","year"].includes(t)&&(t==="month"?c:b)(n===!0?-1:1)}function xe(t,n){V.value="Calendar",B(t,n)}function Se(t,n){if(e.range===!1||!t){z.value=null;return}const a=Object.assign({...u.value},t),m=n!==void 0?Object.assign({...u.value},n):a;z.value={init:a,initHash:ve(a),final:m,finalHash:ve(m)},xe(a.year,a.month)}function Te(){return e.calendar==="persian"?"YYYY/MM/DD":e.mask}function Re(t,n,a){return We(t,n,a,e.calendar,{hour:0,minute:0,second:0,millisecond:0})}function lt(t,n){const a=Array.isArray(e.modelValue)===!0?e.modelValue:e.modelValue?[e.modelValue]:[];if(a.length===0)return l();const m=a[a.length-1],h=Re(m.from!==void 0?m.from:m,t,n);return h.dateHash===null?l():h}function l(){let t,n;if(e.defaultYearMonth!==void 0){const a=e.defaultYearMonth.split("/");t=parseInt(a[0],10),n=parseInt(a[1],10)}else{const a=x.value!==void 0?x.value:d();t=a.year,n=a.month}return{year:t,month:n,day:1,hour:0,minute:0,second:0,millisecond:0,dateHash:t+"/"+H(n)+"/01"}}function c(t){let n=u.value.year,a=Number(u.value.month)+t;a===13?(a=1,n++):a===0&&(a=12,n--),B(n,a),X.value===!0&&je("month")}function b(t){const n=Number(u.value.year)+t;B(n,u.value.month),X.value===!0&&je("year")}function Y(t){B(t,u.value.month),V.value=e.defaultView==="Years"?"Months":"Calendar",X.value===!0&&je("year")}function U(t){B(u.value.year,t),V.value="Calendar",X.value===!0&&je("month")}function te(t,n){const a=$e.value[n];(a!==void 0&&a.includes(t.day)===!0?vt:ct)(t)}function S(t){return{year:t.year,month:t.month,day:t.day}}function B(t,n,a){if(L.value!==null&&t<=L.value.year&&((n<L.value.month||t<L.value.year)&&(n=L.value.month),t=L.value.year),R.value!==null&&t>=R.value.year&&((n>R.value.month||t>R.value.year)&&(n=R.value.month),t=R.value.year),a!==void 0){const{hour:h,minute:A,second:p,millisecond:C,timezoneOffset:j,timeHash:Ke}=a;Object.assign(u.value,{hour:h,minute:A,second:p,millisecond:C,timezoneOffset:j,timeHash:Ke})}const m=t+"/"+H(n)+"/01";m!==u.value.dateHash&&(N.value=u.value.dateHash<m==(f.lang.rtl!==!0)?"left":"right",t!==u.value.year&&(D.value=N.value),gt(()=>{ee.value=t-t%Ce-(t<0?Ce:0),Object.assign(u.value,{year:t,month:n,day:1,dateHash:m})}))}function se(t,n,a){const m=t!==null&&t.length===1&&e.multiple===!1?t[0]:t;k=m;const{reason:h,details:A}=ot(n,a);v("update:modelValue",m,h,A)}function je(t){const n=W.value[0]!==void 0&&W.value[0].dateHash!==null?{...W.value[0]}:{...u.value};gt(()=>{n.year=u.value.year,n.month=u.value.month;const a=e.calendar!=="persian"?new Date(n.year,n.month,0).getDate():rt(n.year,n.month);n.day=Math.min(Math.max(1,n.day),a);const m=Fe(n);k=m;const{details:h}=ot("",n);v("update:modelValue",m,t,h)})}function ot(t,n){return n.from!==void 0?{reason:`${t}-range`,details:{...S(n.target),from:S(n.from),to:S(n.to)}}:{reason:`${t}-day`,details:S(n)}}function Fe(t,n,a){return t.from!==void 0?{from:Qe.value(t.from,n,a),to:Qe.value(t.to,n,a)}:Qe.value(t,n,a)}function ct(t){let n;if(e.multiple===!0)if(t.from!==void 0){const a=ve(t.from),m=ve(t.to),h=W.value.filter(p=>p.dateHash<a||p.dateHash>m),A=ue.value.filter(({from:p,to:C})=>C.dateHash<a||p.dateHash>m);n=h.concat(A).concat(t).map(p=>Fe(p))}else{const a=ce.value.slice();a.push(Fe(t)),n=a}else n=Fe(t);se(n,"add",t)}function vt(t){if(e.noUnset===!0)return;let n=null;if(e.multiple===!0&&Array.isArray(e.modelValue)===!0){const a=Fe(t);t.from!==void 0?n=e.modelValue.filter(m=>m.from!==void 0?m.from!==a.from&&m.to!==a.to:!0):n=e.modelValue.filter(m=>m!==a),n.length===0&&(n=null)}se(n,"remove",t)}function xt(t,n,a){const m=W.value.concat(ue.value).map(h=>Fe(h,t,n)).filter(h=>h.from!==void 0?h.from.dateHash!==null&&h.to.dateHash!==null:h.dateHash!==null);v("update:modelValue",(e.multiple===!0?m:m[0])||null,a)}function sn(){if(e.minimal!==!0)return g("div",{class:"q-date__header "+_.value},[g("div",{class:"relative-position"},[g(Ue,{name:"q-transition--fade"},()=>g("div",{key:"h-yr-"+Je.value,class:"q-date__header-subtitle q-date__header-link "+(V.value==="Years"?"q-date__header-link--active":"cursor-pointer"),tabindex:s.value,...y("vY",{onClick(){V.value="Years"},onKeyup(t){t.keyCode===13&&(V.value="Years")}})},[Je.value]))]),g("div",{class:"q-date__header-title relative-position flex no-wrap"},[g("div",{class:"relative-position col"},[g(Ue,{name:"q-transition--fade"},()=>g("div",{key:"h-sub"+De.value,class:"q-date__header-title-label q-date__header-link "+(V.value==="Calendar"?"q-date__header-link--active":"cursor-pointer"),tabindex:s.value,...y("vC",{onClick(){V.value="Calendar"},onKeyup(t){t.keyCode===13&&(V.value="Calendar")}})},[De.value]))]),e.todayBtn===!0?g(J,{class:"q-date__header-today self-start",icon:f.iconSet.datetime.today,flat:!0,size:"sm",round:!0,tabindex:s.value,onClick:tt}):null])])}function ft({label:t,type:n,key:a,dir:m,goTo:h,boundaries:A,cls:p}){return[g("div",{class:"row items-center q-date__arrow"},[g(J,{round:!0,dense:!0,size:"sm",flat:!0,icon:Ve.value[0],tabindex:s.value,disable:A.prev===!1,...y("go-#"+n,{onClick(){h(-1)}})})]),g("div",{class:"relative-position overflow-hidden flex flex-center"+p},[g(Ue,{name:"q-transition--jump-"+m},()=>g("div",{key:a},[g(J,{flat:!0,dense:!0,noCaps:!0,label:t,tabindex:s.value,...y("view#"+n,{onClick:()=>{V.value=n}})})]))]),g("div",{class:"row items-center q-date__arrow"},[g(J,{round:!0,dense:!0,size:"sm",flat:!0,icon:Ve.value[1],tabindex:s.value,disable:A.next===!1,...y("go+#"+n,{onClick(){h(1)}})})])]}const dn={Calendar:()=>[g("div",{key:"calendar-view",class:"q-date__view q-date__calendar"},[g("div",{class:"q-date__navigation row items-center no-wrap"},ft({label:I.value.months[u.value.month-1],type:"Months",key:u.value.month,dir:N.value,goTo:c,boundaries:ze.value.month,cls:" col"}).concat(ft({label:u.value.year,type:"Years",key:u.value.year,dir:D.value,goTo:b,boundaries:ze.value.year,cls:""}))),g("div",{class:"q-date__calendar-weekdays row items-center no-wrap"},Ze.value.map(t=>g("div",{class:"q-date__calendar-item"},[g("div",t)]))),g("div",{class:"q-date__calendar-days-container relative-position overflow-hidden"},[g(Ue,{name:"q-transition--slide-"+N.value},()=>g("div",{key:G.value,class:"q-date__calendar-days fit"},ke.value.map(t=>g("div",{class:t.classes},[t.in===!0?g(J,{class:t.today===!0?"q-date__today":"",dense:!0,flat:t.flat,unelevated:t.unelevated,color:t.color,textColor:t.textColor,label:t.i,tabindex:s.value,...y("day#"+t.i,{onClick:()=>{cn(t.i)},onMouseover:()=>{vn(t.i)}})},t.event!==!1?()=>g("div",{class:"q-date__event bg-"+t.event}):null):g("div",""+t.i)]))))])])],Months(){const t=u.value.year===x.value.year,n=m=>L.value!==null&&u.value.year===L.value.year&&L.value.month>m||R.value!==null&&u.value.year===R.value.year&&R.value.month<m,a=I.value.monthsShort.map((m,h)=>{const A=u.value.month===h+1;return g("div",{class:"q-date__months-item flex flex-center"},[g(J,{class:t===!0&&x.value.month===h+1?"q-date__today":null,flat:A!==!0,label:m,unelevated:A,color:A===!0?ae.value:null,textColor:A===!0?oe.value:null,tabindex:s.value,disable:n(h+1),...y("month#"+h,{onClick:()=>{U(h+1)}})})])});return e.yearsInMonthView===!0&&a.unshift(g("div",{class:"row no-wrap full-width"},[ft({label:u.value.year,type:"Years",key:u.value.year,dir:D.value,goTo:b,boundaries:ze.value.year,cls:" col"})])),g("div",{key:"months-view",class:"q-date__view q-date__months flex flex-center"},a)},Years(){const t=ee.value,n=t+Ce,a=[],m=h=>L.value!==null&&L.value.year>h||R.value!==null&&R.value.year<h;for(let h=t;h<=n;h++){const A=u.value.year===h;a.push(g("div",{class:"q-date__years-item flex flex-center"},[g(J,{key:"yr"+h,class:x.value.year===h?"q-date__today":null,flat:!A,label:h,dense:!0,unelevated:A,color:A===!0?ae.value:null,textColor:A===!0?oe.value:null,tabindex:s.value,disable:m(h),...y("yr#"+h,{onClick:()=>{Y(h)}})})]))}return g("div",{class:"q-date__view q-date__years flex flex-center"},[g("div",{class:"col-auto"},[g(J,{round:!0,dense:!0,flat:!0,icon:Ve.value[0],tabindex:s.value,disable:m(t),...y("y-",{onClick:()=>{ee.value-=Ce}})})]),g("div",{class:"q-date__years-content col self-stretch row items-center"},a),g("div",{class:"col-auto"},[g(J,{round:!0,dense:!0,flat:!0,icon:Ve.value[1],tabindex:s.value,disable:m(n),...y("y+",{onClick:()=>{ee.value+=Ce}})})])])}};function cn(t){const n={...u.value,day:t};if(e.range===!1){te(n,G.value);return}if(z.value===null){const a=ke.value.find(h=>h.fill!==!0&&h.i===t);if(e.noUnset!==!0&&a.range!==void 0){vt({target:n,from:a.range.from,to:a.range.to});return}if(a.selected===!0){vt(n);return}const m=ve(n);z.value={init:n,initHash:m,final:n,finalHash:m},v("rangeStart",S(n))}else{const a=z.value.initHash,m=ve(n),h=a<=m?{from:z.value.init,to:n}:{from:n,to:z.value.init};z.value=null,ct(a===m?n:{target:n,...h}),v("rangeEnd",{from:S(h.from),to:S(h.to)})}}function vn(t){if(z.value!==null){const n={...u.value,day:t};Object.assign(z.value,{final:n,finalHash:ve(n)})}}return Object.assign(r,{setToday:tt,setView:nt,offsetCalendar:at,setCalendarTo:xe,setEditingRange:Se}),()=>{const t=[g("div",{class:"q-date__content col relative-position"},[g(Ue,{name:"q-transition--fade"},dn[V.value])])],n=Rt(o.default);return n!==void 0&&t.push(g("div",{class:"q-date__actions"},n)),e.name!==void 0&&e.disable!==!0&&Q(t,"push"),g("div",{class:be.value,...Ae.value},[sn(),g("div",{ref:Z,class:"q-date__main col column",tabindex:-1},t)])}}}),Ft=Dt({name:"QPopupProxy",props:{...Yn,breakpoint:{type:[String,Number],default:450}},emits:["show","hide"],setup(e,{slots:o,emit:v,attrs:r}){const{proxy:f}=wt(),{$q:i}=f,y=E(!1),s=E(null),_=M(()=>parseInt(e.breakpoint,10)),{canShow:$}=qn({showing:y});function d(){return i.screen.width<_.value||i.screen.height<_.value?"dialog":"menu"}const k=E(d()),K=M(()=>k.value==="menu"?{maxHeight:"99vh"}:{});pe(()=>d(),T=>{y.value!==!0&&(k.value=T)});function Q(T){y.value=!0,v("show",T)}function Z(T){y.value=!1,k.value=d(),v("hide",T)}return Object.assign(f,{show(T){$(T)===!0&&s.value.show(T)},hide(T){s.value.hide(T)},toggle(T){s.value.toggle(T)}}),yn(f,"currentComponent",()=>({type:k.value,ref:s.value})),()=>{const T={ref:s,...K.value,...r,onShow:Q,onHide:Z};let I;return k.value==="dialog"?I=_n:(I=Cn,Object.assign(T,{target:e.target,contextMenu:e.contextMenu,noParentEvent:!0,separateClosePopup:!0})),g(I,T,o.default)}}});function ia(e,o){if(e.hour!==null){if(e.minute===null)return"minute";if(o===!0&&e.second===null)return"second"}return"hour"}function sa(){const e=new Date;return{hour:e.getHours(),minute:e.getMinutes(),second:e.getSeconds(),millisecond:e.getMilliseconds()}}var da=Dt({name:"QTime",props:{...Lt,...Qt,...en,mask:{default:null},format24h:{type:Boolean,default:null},defaultDate:{type:String,validator:e=>/^-?[\d]+\/[0-1]\d\/[0-3]\d$/.test(e)},options:Function,hourOptions:Array,minuteOptions:Array,secondOptions:Array,withSeconds:Boolean,nowBtn:Boolean},emits:tn,setup(e,{slots:o,emit:v}){const r=wt(),{$q:f}=r.proxy,i=Zt(e,f),{tabindex:y,headerClass:s,getLocale:_,getCurrentDate:$}=nn(e,f),d=zt(e),k=Kt(d);let K,Q;const Z=E(null),T=M(()=>Je()),I=M(()=>_()),Ye=M(()=>Ve()),me=We(e.modelValue,T.value,I.value,e.calendar,Ye.value),x=E(ia(me)),u=E(me),V=E(me.hour===null||me.hour<12),qe=M(()=>`q-time q-time--${e.landscape===!0?"landscape":"portrait"}`+(i.value===!0?" q-time--dark q-dark":"")+(e.disable===!0?" disabled":e.readonly===!0?" q-time--readonly":"")+(e.bordered===!0?" q-time--bordered":"")+(e.square===!0?" q-time--square no-border-radius":"")+(e.flat===!0?" q-time--flat no-shadow":"")),N=M(()=>{const l=u.value;return{hour:l.hour===null?"--":D.value===!0?H(l.hour):String(V.value===!0?l.hour===0?12:l.hour:l.hour>12?l.hour-12:l.hour),minute:l.minute===null?"--":H(l.minute),second:l.second===null?"--":H(l.second)}}),D=M(()=>e.format24h!==null?e.format24h:f.lang.date.format24h),O=M(()=>{const l=x.value==="hour",c=l===!0?12:60,b=u.value[x.value];let U=`rotate(${Math.round(b*(360/c))-180}deg) translateX(-50%)`;return l===!0&&D.value===!0&&u.value.hour>=12&&(U+=" scale(.7)"),{transform:U}}),ee=M(()=>u.value.hour!==null),z=M(()=>ee.value===!0&&u.value.minute!==null),be=M(()=>e.hourOptions!==void 0?l=>e.hourOptions.includes(l):e.options!==void 0?l=>e.options(l,null,null):null),ae=M(()=>e.minuteOptions!==void 0?l=>e.minuteOptions.includes(l):e.options!==void 0?l=>e.options(u.value.hour,l,null):null),oe=M(()=>e.secondOptions!==void 0?l=>e.secondOptions.includes(l):e.options!==void 0?l=>e.options(u.value.hour,u.value.minute,l):null),X=M(()=>{if(be.value===null)return null;const l=De(0,11,be.value),c=De(12,11,be.value);return{am:l,pm:c,values:l.values.concat(c.values)}}),ce=M(()=>ae.value!==null?De(0,59,ae.value):null),W=M(()=>oe.value!==null?De(0,59,oe.value):null),ue=M(()=>{switch(x.value){case"hour":return X.value;case"minute":return ce.value;case"second":return W.value}}),He=M(()=>{let l,c,b=0,Y=1;const U=ue.value!==null?ue.value.values:void 0;x.value==="hour"?D.value===!0?(l=0,c=23):(l=0,c=11,V.value===!1&&(b=12)):(l=0,c=55,Y=5);const te=[];for(let S=l,B=l;S<=c;S+=Y,B++){const se=S+b,je=U!==void 0&&U.includes(se)===!1,ot=x.value==="hour"&&S===0?D.value===!0?"00":"12":S;te.push({val:se,index:B,disable:je,label:ot})}return te}),Qe=M(()=>[[Hn,ie,void 0,{stop:!0,prevent:!0,mouse:!0}]]);pe(()=>e.modelValue,l=>{const c=We(l,T.value,I.value,e.calendar,Ye.value);(c.dateHash!==u.value.dateHash||c.timeHash!==u.value.timeHash)&&(u.value=c,c.hour===null?x.value="hour":V.value=c.hour<12)}),pe([T,I],()=>{gt(()=>{Te()})});function he(){const l={...$(),...sa()};Te(l),Object.assign(u.value,l),x.value="hour"}function De(l,c,b){const Y=Array.apply(null,{length:c+1}).map((U,te)=>{const S=te+l;return{index:S,val:b(S)===!0}}).filter(U=>U.val===!0).map(U=>U.index);return{min:Y[0],max:Y[Y.length-1],values:Y,threshold:c+1}}function Xe(l,c,b){const Y=Math.abs(l-c);return Math.min(Y,b-Y)}function Le(l,{min:c,max:b,values:Y,threshold:U}){if(l===c)return c;if(l<c||l>b)return Xe(l,c,U)<=Xe(l,b,U)?c:b;const te=Y.findIndex(se=>l<=se),S=Y[te-1],B=Y[te];return l-S<=B-l?S:B}function Je(){return e.calendar!=="persian"&&e.mask!==null?e.mask:`HH:mm${e.withSeconds===!0?":ss":""}`}function Ve(){if(typeof e.defaultDate!="string"){const l=$(!0);return l.dateHash=ve(l),l}return We(e.defaultDate,"YYYY/MM/DD",void 0,e.calendar)}function Oe(){return Mn(r)===!0||ue.value!==null&&(ue.value.values.length===0||x.value==="hour"&&D.value!==!0&&X.value[V.value===!0?"am":"pm"].values.length===0)}function Ze(){const l=Z.value,{top:c,left:b,width:Y}=l.getBoundingClientRect(),U=Y/2;return{top:c+U,left:b+U,dist:U*.7}}function ie(l){if(Oe()!==!0){if(l.isFirst===!0){K=Ze(),Q=L(l.evt,K);return}Q=L(l.evt,K,Q),l.isFinal===!0&&(K=!1,Q=null,Ge())}}function Ge(){x.value==="hour"?x.value="minute":e.withSeconds&&x.value==="minute"&&(x.value="second")}function L(l,c,b){const Y=pn(l),U=Math.abs(Y.top-c.top),te=Math.sqrt(Math.pow(Math.abs(Y.top-c.top),2)+Math.pow(Math.abs(Y.left-c.left),2));let S,B=Math.asin(U/te)*(180/Math.PI);if(Y.top<c.top?B=c.left<Y.left?90-B:270+B:B=c.left<Y.left?B+90:270-B,x.value==="hour"){if(S=B/30,X.value!==null){const se=D.value!==!0?V.value===!0:X.value.am.values.length!==0&&X.value.pm.values.length!==0?te>=c.dist:X.value.am.values.length!==0;S=Le(S+(se===!0?0:12),X.value[se===!0?"am":"pm"])}else S=Math.round(S),D.value===!0?te<c.dist?S<12&&(S+=12):S===12&&(S=0):V.value===!0&&S===12?S=0:V.value===!1&&S!==12&&(S+=12);D.value===!0&&(V.value=S<12)}else S=Math.round(B/6)%60,x.value==="minute"&&ce.value!==null?S=Le(S,ce.value):x.value==="second"&&W.value!==null&&(S=Le(S,W.value));return b!==S&&tt[x.value](S),S}const R={hour(){x.value="hour"},minute(){x.value="minute"},second(){x.value="second"}};function ze(l){l.keyCode===13&&nt()}function $e(l){l.keyCode===13&&at()}function et(l){Oe()!==!0&&(f.platform.is.desktop!==!0&&L(l,Ze()),Ge())}function we(l){Oe()!==!0&&L(l,Ze())}function G(l){if(l.keyCode===13)x.value="hour";else if([37,39].includes(l.keyCode)){const c=l.keyCode===37?-1:1;if(X.value!==null){const b=D.value===!0?X.value.values:X.value[V.value===!0?"am":"pm"].values;if(b.length===0)return;if(u.value.hour===null)Ie(b[0]);else{const Y=(b.length+b.indexOf(u.value.hour)+c)%b.length;Ie(b[Y])}}else{const b=D.value===!0?24:12,Y=D.value!==!0&&V.value===!1?12:0,U=u.value.hour===null?-c:u.value.hour;Ie(Y+(24+U+c)%b)}}}function st(l){if(l.keyCode===13)x.value="minute";else if([37,39].includes(l.keyCode)){const c=l.keyCode===37?-1:1;if(ce.value!==null){const b=ce.value.values;if(b.length===0)return;if(u.value.minute===null)ke(b[0]);else{const Y=(b.length+b.indexOf(u.value.minute)+c)%b.length;ke(b[Y])}}else{const b=u.value.minute===null?-c:u.value.minute;ke((60+b+c)%60)}}}function dt(l){if(l.keyCode===13)x.value="second";else if([37,39].includes(l.keyCode)){const c=l.keyCode===37?-1:1;if(W.value!==null){const b=W.value.values;if(b.length===0)return;if(u.value.seconds===null)Ae(b[0]);else{const Y=(b.length+b.indexOf(u.value.second)+c)%b.length;Ae(b[Y])}}else{const b=u.value.second===null?-c:u.value.second;Ae((60+b+c)%60)}}}function Ie(l){u.value.hour!==l&&(u.value.hour=l,Se())}function ke(l){u.value.minute!==l&&(u.value.minute=l,Se())}function Ae(l){u.value.second!==l&&(u.value.second=l,Se())}const tt={hour:Ie,minute:ke,second:Ae};function nt(){V.value===!1&&(V.value=!0,u.value.hour!==null&&(u.value.hour-=12,Se()))}function at(){V.value===!0&&(V.value=!1,u.value.hour!==null&&(u.value.hour+=12,Se()))}function xe(l){const c=e.modelValue;x.value!==l&&c!==void 0&&c!==null&&c!==""&&typeof c!="string"&&(x.value=l)}function Se(){if(be.value!==null&&be.value(u.value.hour)!==!0){u.value=We(),xe("hour");return}if(ae.value!==null&&ae.value(u.value.minute)!==!0){u.value.minute=null,u.value.second=null,xe("minute");return}if(e.withSeconds===!0&&oe.value!==null&&oe.value(u.value.second)!==!0){u.value.second=null,xe("second");return}u.value.hour===null||u.value.minute===null||e.withSeconds===!0&&u.value.second===null||Te()}function Te(l){const c=Object.assign({...u.value},l),b=e.calendar==="persian"?H(c.hour)+":"+H(c.minute)+(e.withSeconds===!0?":"+H(c.second):""):rn(new Date(c.year,c.month===null?null:c.month-1,c.day,c.hour,c.minute,c.second,c.millisecond),T.value,I.value,c.year,c.timezoneOffset);c.changed=b!==e.modelValue,v("update:modelValue",b,c)}function Re(){const l=[g("div",{class:"q-time__link "+(x.value==="hour"?"q-time__link--active":"cursor-pointer"),tabindex:y.value,onClick:R.hour,onKeyup:G},N.value.hour),g("div",":"),g("div",ee.value===!0?{class:"q-time__link "+(x.value==="minute"?"q-time__link--active":"cursor-pointer"),tabindex:y.value,onKeyup:st,onClick:R.minute}:{class:"q-time__link"},N.value.minute)];e.withSeconds===!0&&l.push(g("div",":"),g("div",z.value===!0?{class:"q-time__link "+(x.value==="second"?"q-time__link--active":"cursor-pointer"),tabindex:y.value,onKeyup:dt,onClick:R.second}:{class:"q-time__link"},N.value.second));const c=[g("div",{class:"q-time__header-label row items-center no-wrap",dir:"ltr"},l)];return D.value===!1&&c.push(g("div",{class:"q-time__header-ampm column items-between no-wrap"},[g("div",{class:"q-time__link "+(V.value===!0?"q-time__link--active":"cursor-pointer"),tabindex:y.value,onClick:nt,onKeyup:ze},"AM"),g("div",{class:"q-time__link "+(V.value!==!0?"q-time__link--active":"cursor-pointer"),tabindex:y.value,onClick:at,onKeyup:$e},"PM")])),g("div",{class:"q-time__header flex flex-center no-wrap "+s.value},c)}function lt(){const l=u.value[x.value];return g("div",{class:"q-time__content col relative-position"},[g(Ue,{name:"q-transition--scale"},()=>g("div",{key:"clock"+x.value,class:"q-time__container-parent absolute-full"},[g("div",{ref:Z,class:"q-time__container-child fit overflow-hidden"},[yt(g("div",{class:"q-time__clock cursor-pointer non-selectable",onClick:et,onMousedown:we},[g("div",{class:"q-time__clock-circle fit"},[g("div",{class:"q-time__clock-pointer"+(u.value[x.value]===null?" hidden":e.color!==void 0?` text-${e.color}`:""),style:O.value}),He.value.map(c=>g("div",{class:`q-time__clock-position row flex-center q-time__clock-pos-${c.index}`+(c.val===l?" q-time__clock-position--active "+s.value:c.disable===!0?" q-time__clock-position--disable":"")},[g("span",c.label)]))])]),Qe.value)])])),e.nowBtn===!0?g(J,{class:"q-time__now-button absolute",icon:f.iconSet.datetime.now,unelevated:!0,size:"sm",round:!0,color:e.color,textColor:e.textColor,tabindex:y.value,onClick:he}):null])}return r.proxy.setNow=he,()=>{const l=[lt()],c=Rt(o.default);return c!==void 0&&l.push(g("div",{class:"q-time__actions"},c)),e.name!==void 0&&e.disable!==!0&&k(l,"push"),g("div",{class:qe.value,tabindex:-1},[Re(),g("div",{class:"q-time__main col overflow-auto"},l)])}}});const ca={class:"q-pa-md",style:{"max-width":"300px",padding:"0"}},va={class:"row items-center justify-end"},fa={class:"row items-center justify-end"},ma={__name:"DateTime",props:{evDateTime:E("2019-02-01 12:44")},emits:["update:date"],setup(e,{emit:o}){const v=_e("Announce"),r=e,f=o;return E(r.evDateTime),(i,y)=>(de(),Be("div",ca,[P(Ee,{filled:"",modelValue:q(v).eventTime,"onUpdate:modelValue":[y[2]||(y[2]=s=>q(v).eventTime=s),y[3]||(y[3]=s=>f("update:date"))]},{prepend:ge(()=>[P(Ct,{name:"event",class:"cursor-pointer"},{default:ge(()=>[P(Ft,{cover:"","transition-show":"scale","transition-hide":"scale"},{default:ge(()=>[P(ra,{modelValue:q(v).eventTime,"onUpdate:modelValue":y[0]||(y[0]=s=>q(v).eventTime=s),mask:"YYYY-MM-DD HH:mm"},{default:ge(()=>[w("div",va,[yt(P(J,{label:"\u0417\u0430\u043A\u0440\u044B\u0442\u044C",color:"primary",flat:""},null,512),[[Ht]])])]),_:1},8,["modelValue"])]),_:1})]),_:1})]),append:ge(()=>[P(Ct,{name:"access_time",class:"cursor-pointer"},{default:ge(()=>[P(Ft,{cover:"","transition-show":"scale","transition-hide":"scale"},{default:ge(()=>[P(da,{modelValue:q(v).eventTime,"onUpdate:modelValue":y[1]||(y[1]=s=>q(v).eventTime=s),mask:"YYYY-MM-DD HH:mm",format24h:""},{default:ge(()=>[w("div",fa,[yt(P(J,{label:"\u0417\u0430\u043A\u0440\u044B\u0442\u044C",color:"primary",flat:""},null,512),[[Ht]])])]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]))}};const le=e=>(Et("data-v-14782a42"),e=e(),Pt(),e),ha={key:0,class:"eventsarea"},ga={class:"editArea"},ya={class:"card"},_a={class:"editor"},pa={style:{display:"flex","justify-content":"space-between"}},Ma=le(()=>w("br",null,null,-1)),ba=le(()=>w("hr",null,null,-1)),Da={class:"uploads"},wa={style:{width:"100%"}},ka=le(()=>w("br",null,null,-1)),xa=le(()=>w("hr",null,null,-1)),Sa={class:"uploads"},Ca=le(()=>w("div",{style:{display:"flex","justify-content":"space-between","flex-wrap":"wrap"}},null,-1)),Ya=le(()=>w("br",null,null,-1)),qa=le(()=>w("br",null,null,-1)),Ha=le(()=>w("br",null,null,-1)),Va=le(()=>w("br",null,null,-1)),Oa={class:"btns"},$a=le(()=>w("br",null,null,-1)),Ia=le(()=>w("hr",null,null,-1)),Aa=le(()=>w("br",null,null,-1)),Ta={__name:"AnnounceEditor",emits:["reload","posterUploaded"],setup(e,{emit:o}){const v=String("https://api.sakh-orch.ru/"),r=Mt();_e("lvl"),Wt();const f=bn();_e("editMode");const i=_e("Halls"),y=E("");Xt("pwUrl",y);const s=o,_={},$=_e("AccessToken"),d=_e("Announce");function k(){}const K=[{label:"\u0412\u0445\u043E\u0434 \u0441\u0432\u043E\u0431\u043E\u0434\u043D\u044B\u0439",value:2},{label:"\u0411\u0438\u043B\u0435\u0442\u044B \u0432 \u043F\u0440\u043E\u0434\u0430\u0436\u0435",value:3},{label:"\u0412\u0445\u043E\u0434 \u043F\u043E \u043F\u0440\u0438\u0433\u043B\u0430\u0441\u0438\u0442\u0435\u043B\u044C\u043D\u044B\u043C",value:4},{label:"\u041F\u0440\u043E\u0434\u0430\u0436\u0430 \u0437\u0430\u0432\u0435\u0440\u0448\u0435\u043D\u0430",value:5}];E(null);const Q=E(null),Z=E(null);function T(N){return{url:v+"api/event/poster.php",headers:[{name:"ACCESSTOKEN",value:$.value}],formFields:[{name:"announceId",value:d.value.id},{name:"method",value:"add"}]}}function I(N){r.notify(Yt("\u0417\u0430\u0433\u0440\u0443\u0436\u0435\u043D\u043E")),s("posterUploaded")}function Ye(N){var O,ee,z;let D=(z=(ee=JSON.parse((O=N==null?void 0:N.xhr)==null?void 0:O.response))==null?void 0:ee.error)!=null?z:"";r.notify(_t(null,D))}function me(){Z.value.saveData()}function x(){f.push({path:"/announces"})}function u(){s("reload")}function V(){Nt.post(v+"api/event/poster.php",{params:{method:"del",announceId:d.value.id}}).then(N=>{var D,O,ee;if(!((D=N==null?void 0:N.data)!=null&&D.result))throw new Error;s("posterUploaded"),r.notify(Yt((ee=(O=N==null?void 0:N.data)==null?void 0:O.result)!=null?ee:""))}).catch(N=>{r.notify(_t(N))})}function qe(){d.value.hallId=d.value.Hall.id}return(N,D)=>(de(),Be(Ut,null,[q(d)?(de(),Be("div",ha,[w("div",ga,[w("div",ya,[q(d).Hall.map?(de(),it(Vn,{key:0,onIamDeleted:x,onNewAnnounce:u,ref_key:"rAnnounceCard",ref:Z,Announce:q(d),pwUrl:y.value},null,8,["Announce","pwUrl"])):Pe("",!0)]),w("div",_a,[w("div",pa,[P(ma,{date:q(d).eventTime,"onUpdate:date":[D[0]||(D[0]=O=>q(d).eventTime=O),D[1]||(D[1]=O=>void 0)]},null,8,["date"])]),Ma,ba,w("div",Da,[w("div",wa,[P(kn,{id:q(d).id,type:"event",onOnUploaded:I},null,8,["id"])])]),ka,xa,w("div",Sa,[w("div",null,[P(xn,{modelValue:_,"onUpdate:modelValue":D[2]||(D[2]=O=>_=O),style:{"max-width":"300px"},label:"\u0417\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044C \u0430\u0444\u0438\u0448\u0443",factory:T,ref_key:"uploader2",ref:Q,onUploaded:I,onFailed:Ye},null,512)]),P(J,{label:"\u0423\u0434\u0430\u043B\u0438\u0442\u044C \u0430\u0444\u0438\u0448\u0443",icon:"delete",onClick:D[3]||(D[3]=O=>V())})]),Ca,P(Ee,{name:"progName",modelValue:q(d).progName,"onUpdate:modelValue":D[4]||(D[4]=O=>q(d).progName=O),label:"\u041D\u0430\u0437\u0432\u0430\u043D\u0438\u0435"},null,8,["modelValue"]),P(qt,{modelValue:q(d).Hall,"onUpdate:modelValue":[D[5]||(D[5]=O=>q(d).Hall=O),D[6]||(D[6]=O=>qe())],label:"\u041C\u0435\u0441\u0442\u043E \u043F\u0440\u043E\u0432\u0435\u0434\u0435\u043D\u0438\u044F","map-options":"","option-label":"name","option-value":"id",options:q(i)},null,8,["modelValue","options"]),P(qt,{modelValue:q(d).pay,"onUpdate:modelValue":D[7]||(D[7]=O=>q(d).pay=O),"emit-value":"","map-options":"",label:"\u0423\u0441\u043B\u043E\u0432\u0438\u044F \u0432\u0445\u043E\u0434\u0430",options:K},null,8,["modelValue"]),Ya,q(d).pay==3?(de(),it(Ee,{key:0,type:"text",modelValue:q(d).ticketLink,"onUpdate:modelValue":D[8]||(D[8]=O=>q(d).ticketLink=O),label:"\u0421\u0441\u044B\u043B\u043A\u0430 \u043D\u0430 \u043F\u0440\u043E\u0434\u0430\u0436\u0443 \u0431\u0438\u043B\u0435\u0442\u043E\u0432"},null,8,["modelValue"])):Pe("",!0),qa,P(Ee,{type:"number",modelValue:q(d).age,"onUpdate:modelValue":D[9]||(D[9]=O=>q(d).age=O),label:"\u0412\u043E\u0437\u0440\u0430\u0441\u0442\u043D\u044B\u0435 \u043E\u0433\u0440\u0430\u043D\u0438\u0447\u0435\u043D\u0438\u044F"},null,8,["modelValue"]),Ha,P(Ee,{name:"evDescr",modelValue:q(d).sdescr,"onUpdate:modelValue":D[10]||(D[10]=O=>q(d).sdescr=O),type:"textarea",label:"\u041A\u0440\u0430\u0442\u043A\u043E\u0435 \u043E\u043F\u0438\u0441\u0430\u043D\u0438\u0435"},null,8,["modelValue"]),Va,P(Ee,{name:"evText",modelValue:q(d).description,"onUpdate:modelValue":D[11]||(D[11]=O=>q(d).description=O),type:"textarea",label:"\u041E\u043F\u0438\u0441\u0430\u043D\u0438\u0435"},null,8,["modelValue"])])]),w("div",Oa,[P(J,{label:"\u0421\u043E\u0445\u0440\u0430\u043D\u0438\u0442\u044C",onClick:me})])])):Pe("",!0),$a,Ia,Aa],64))}};var ja=bt(Ta,[["__scopeId","data-v-14782a42"]]);const Fa={class:"content"},Na={class:"eventboxl"},Ua={__name:"AnnouncePage",setup(e){fn({title:"\u0410\u043D\u043E\u043D\u0441"});const v=Mt(),r=_e("editMode"),f=String("https://api.sakh-orch.ru/"),i=Wt(),y=E(null);Xt("Announce",y);function s(){Nt.post(f+"api/event/announce.php",{params:{method:"get",id:i.params.evid}}).then(_=>{var $,d;y.value=(d=($=_==null?void 0:_.data)==null?void 0:$.data)!=null?d:null,console.log("Announce loaded")}).catch(_=>{v.notify(_t(_))})}return Dn(()=>{s()}),(_,$)=>(de(),Be("div",Fa,[q(r)&&y.value?(de(),it(ja,{key:0,onPosterUploaded:s,onReload:s})):Pe("",!0),w("div",Na,[y.value?(de(),it(Kn,{key:0})):Pe("",!0)])]))}};var rl=bt(Ua,[["__scopeId","data-v-51438290"]]);export{rl as default};
