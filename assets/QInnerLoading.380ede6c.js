import{Q as k}from"./QTooltip.e504cb7d.js";import{i as P,m as f,n as p,q as l,f as e,y as M,z as x,t as o,D as ne,bl as H,B as c,x as J,b as oe,H as se,r as d,p as re,c as L,E as D,ax as u,l as _,a5 as K,v as j,F as z,ay as ue,V as de,X as ie,af as fe,Z as me,aM as pe,h as R,a4 as ce,g as ve}from"./index.42886fbc.js";import{Q as ge,a as ke,f as be}from"./style.54d56ffb.js";import{n as ye}from"./myFuncts.307cdec6.js";import{u as _e}from"./use-quasar.aa6207a9.js";import{m as Ce}from"./myAuth.5621b016.js";import{Q as i}from"./QItemLabel.7115a48b.js";import{a as B,Q as E}from"./QItem.a479c108.js";import{Q as Ue}from"./QList.3393327b.js";import{Q as O}from"./QImg.842befea.js";/* empty css               */import{_ as Qe}from"./plugin-vue_export-helper.21dcd24c.js";const Se={__name:"RecommendsDialog",emits:["confirmed"],setup(r,{emit:b}){const m=P("showRecommends"),C=b;function y(){C("confirmed"),m.value=!1}return(U,a)=>(f(),p(se,{modelValue:J(m),"onUpdate:modelValue":a[1]||(a[1]=v=>oe(m)?m.value=v:null)},{default:l(()=>[e(M,{className:"dialogArea"},{default:l(()=>[e(x,{class:"cardTitle"},{default:l(()=>[e(B,{dense:""},{default:l(()=>[e(i,null,{default:l(()=>a[2]||(a[2]=[o("\u0420\u0435\u043A\u043E\u043C\u0435\u043D\u0434\u0430\u0446\u0438\u0438 \u043A \u042D\u0441\u043A\u0438\u0437\u0443")])),_:1})]),_:1})]),_:1}),e(ne,{inset:""}),e(x,null,{default:l(()=>[e(Ue,null,{default:l(()=>[e(B,null,{default:l(()=>[e(E,null,{default:l(()=>[e(i,null,{default:l(()=>a[3]||(a[3]=[o("\u0421\u043E\u043E\u0442\u043D\u043E\u0448\u0435\u043D\u0438\u0435 \u0441\u0442\u043E\u0440\u043E\u043D:")])),_:1}),e(i,{caption:""},{default:l(()=>a[4]||(a[4]=[o("16:9 \u041D\u0430\u043F\u0440\u0438\u043C\u0435\u0440, 1920x1080")])),_:1}),e(i,{caption:""},{default:l(()=>a[5]||(a[5]=[o("\u0418\u0437\u043C\u0435\u043D\u0435\u043D\u0438\u0435 \u0441\u043E\u043E\u0442\u043D\u043E\u0448\u0435\u043D\u0438\u044F \u0441\u0442\u043E\u0440\u043E\u043D \u043A\u0440\u0430\u0439\u043D\u0435 \u043D\u0435\u0433\u0430\u0442\u0438\u0432\u043D\u043E \u0441\u043A\u0430\u0437\u044B\u0432\u0430\u0435\u0442\u0441\u044F \u043D\u0430 \u043A\u0430\u0447\u0435\u0441\u0442\u0432\u0435 \u0438\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u044F ")])),_:1})]),_:1})]),_:1}),e(B,null,{default:l(()=>[e(E,null,{default:l(()=>[e(i,null,{default:l(()=>a[6]||(a[6]=[o("\u0421\u043E\u0434\u0435\u0440\u0436\u0430\u043D\u0438\u0435:")])),_:1}),e(i,{caption:""},{default:l(()=>a[7]||(a[7]=[o(" \u042D\u0441\u043A\u0438\u0437 \u043F\u0440\u0438\u0437\u0432\u0430\u043D \u043E\u0442\u0440\u0430\u0436\u0430\u0442\u044C \u043E\u0441\u043D\u043E\u0432\u043D\u0443\u044E \u044D\u043C\u043E\u0446\u0438\u043E\u043D\u0430\u043B\u044C\u043D\u0443\u044E \u043C\u044B\u0441\u043B\u044C \u0432 \u0432\u0438\u0434\u0435 \u0440\u0438\u0441\u0443\u043D\u043A\u0430. ")])),_:1}),e(i,{caption:""},{default:l(()=>a[8]||(a[8]=[o(" \u0421\u043B\u0435\u0434\u0443\u0435\u0442 \u0438\u0437\u0431\u0435\u0433\u0430\u0442\u044C \u043D\u0430\u043B\u0438\u0447\u0438\u044F \u0432 \u043D\u0435\u043C \u043A\u0430\u043A\u043E\u0433\u043E-\u043B\u0438\u0431\u043E \u0442\u0435\u043A\u0441\u0442\u0430. \u0412 \u043E\u0441\u043E\u0431\u0435\u043D\u043D\u043E\u0441\u0442\u0438, \u0434\u0443\u0431\u043B\u0438\u0440\u0443\u044E\u0449\u0435\u0433\u043E \u0442\u0435\u0445\u043D\u0438\u0447\u0435\u0441\u043A\u0443\u044E \u0438\u043D\u0444\u043E\u0440\u043C\u0430\u0446\u0438\u044E, \u0442\u0430\u043A\u0443\u044E \u043A\u0430\u043A \u0432\u0440\u0435\u043C\u044F \u0438 \u043C\u0435\u0441\u0442\u043E. ")])),_:1}),e(i,{caption:""},{default:l(()=>a[9]||(a[9]=[o(" \u0418\u0441\u043A\u043B\u044E\u0447\u0435\u043D\u0438\u0435\u043C \u043C\u043E\u0436\u0435\u0442 \u0431\u044B\u0442\u044C \u043D\u0430\u0437\u0432\u0430\u043D\u0438\u0435 \u043A\u043E\u043D\u0446\u0435\u0440\u0442\u0430 \u0432 \u0442\u043E\u043C \u0441\u043B\u0443\u0447\u0430\u0435, \u0435\u0441\u043B\u0438 \u0435\u0433\u043E \u0448\u0440\u0438\u0444\u0442, \u0446\u0432\u0435\u0442 \u0438 \u043F\u0440\u043E\u0447\u0438\u0435 \u0441\u0432\u043E\u0439\u0441\u0442\u0432\u0430 \u0438\u043C\u0435\u044E\u0442 \u0432\u044B\u0441\u043E\u043A\u0443\u044E \u0445\u0443\u0434\u043E\u0436\u0435\u0441\u0442\u0432\u0435\u043D\u043D\u0443\u044E \u0446\u0435\u043D\u043D\u043E\u0441\u0442\u044C. ")])),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),e(x,null,{default:l(()=>[e(i,null,{default:l(()=>a[10]||(a[10]=[o("\u0425\u043E\u0440\u043E\u0448\u0438\u0439 \u043F\u0440\u0438\u043C\u0435\u0440")])),_:1}),e(O,{src:"/img/sketch/good-example.png",ratio:16/9})]),_:1}),e(x,null,{default:l(()=>[e(i,null,{default:l(()=>a[11]||(a[11]=[o("\u041F\u043B\u043E\u0445\u043E\u0439 \u043F\u0440\u0438\u043C\u0435\u0440")])),_:1}),e(O,{src:"/img/sketch/bad-example.jpg",ratio:16/9})]),_:1}),e(H,{align:"right"},{default:l(()=>[e(c,{class:"goldBtn",label:"\u041F\u043E\u043D\u044F\u0442\u043D\u043E",onClick:a[0]||(a[0]=v=>y())})]),_:1})]),_:1})]),_:1},8,["modelValue"]))}};const xe={class:"row no-wrap items-center q-pa-sm q-gutter-xs"},we={class:"col"},Re={class:"q-uploader__subtitle"},qe={__name:"SketchUploader",props:{id:Number,type:String},emits:["onUploaded"],setup(r,{emit:b}){const m=String("https://api.sakh-orch.ru/"),C=_e(),y=r,U=d(),a=d();d();const v={},q=b,Q=d(!1);re("showRecommends",Q);const S=d(!1),F=d(""),N=d("");d({src:"",type:""}),d({coordinates:null,image:null});const V=P("pwUrl");function X(){I()}let A="image/jpeg";function Z(s){F.value=URL.createObjectURL(s[0]),A=s[0].type}function I(){const{canvas:s}=U.value.getResult();s.toBlob(t=>{N.value=t,V.value=URL.createObjectURL(t)},A)}function $(){I();const s=a.value.queuedFiles[0],t=s.name.replace(/[\[\]]/g,"_"),g=new File([N.value],t,{type:s.type});a.value.reset(),a.value.addFiles([g]),a.value.upload()}function G(){F.value="",V.value=""}function W(s){var g,n,w;let t=(w=(n=JSON.parse((g=s==null?void 0:s.xhr)==null?void 0:g.response))==null?void 0:n.error)!=null?w:"";C.notify(ye(null,t))}function Y(){a.value.reset(),V.value="",q("onUploaded")}function h(){return{url:m+`api/${y.type}/sketch.php`,headers:[{name:"ACCESSTOKEN",value:Ce.self.AccessToken}],formFields:[{name:"id",value:y.id},{name:"method",value:"add"}]}}function ee({imageSize:s,visibleArea:t}){return{width:(t||s).width,height:(t||s).height}}function le(){S.value=!0}const te={left:0,top:0},T=d(!1),ae=L(()=>T.value?{}:{aspectRatio:1920/1080});return(s,t)=>{var g;return f(),D(z,null,[e(ke,{modelValue:v,"onUpdate:modelValue":t[2]||(t[2]=n=>v=n),accept:"image/*",style:{width:"100%"},factory:h,multiple:!1,"hide-upload-btn":"",ref_key:"refUploader",ref:a,onAdded:Z,onRemoved:G,onUploaded:Y,onFailed:W,onStart:t[3]||(t[3]=n=>{console.log(n)}),"no-thumbnails":""},{header:l(n=>[u("div",xe,[n.uploadedFiles.length>0?(f(),p(c,{key:0,icon:"done_all",onClick:n.removeUploadedFiles,round:"",dense:"",flat:""},{default:l(()=>[e(k,null,{default:l(()=>t[6]||(t[6]=[o("Remove Uploaded Files")])),_:1})]),_:2},1032,["onClick"])):_("",!0),n.isUploading?(f(),p(K,{key:1,class:"q-uploader__spinner"})):_("",!0),u("div",we,[t[7]||(t[7]=u("div",{class:"q-uploader__title"},"\u0417\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044C \u044D\u0441\u043A\u0438\u0437",-1)),u("div",Re,j(n.uploadSizeLabel)+" / "+j(n.uploadProgressLabel),1)]),S.value?(f(),D(z,{key:2},[n.canAddFiles?(f(),p(c,{key:0,type:"a",icon:"add_box",onClick:n.pickFiles,round:"",dense:"",flat:""},{default:l(()=>[e(ge),e(k,null,{default:l(()=>t[8]||(t[8]=[o("\u0412\u044B\u0431\u0440\u0430\u0442\u044C \u0444\u0430\u0439\u043B")])),_:1})]),_:2},1032,["onClick"])):_("",!0)],64)):(f(),p(c,{key:3,icon:"add_box",onClick:t[0]||(t[0]=w=>Q.value=!0),round:"",dense:"",flat:""},{default:l(()=>[e(k,null,{default:l(()=>t[9]||(t[9]=[o("\u0412\u044B\u0431\u0440\u0430\u0442\u044C \u0444\u0430\u0439\u043B")])),_:1})]),_:1})),n.canUpload?(f(),p(c,{key:4,icon:"cloud_upload",onClick:$,round:"",dense:"",flat:""},{default:l(()=>[e(k,null,{default:l(()=>t[10]||(t[10]=[o("\u0417\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044C")])),_:1})]),_:1})):_("",!0),n.isUploading?(f(),p(c,{key:5,icon:"clear",onClick:n.abort,round:"",dense:"",flat:""},{default:l(()=>[e(k,null,{default:l(()=>t[11]||(t[11]=[o("Abort Upload")])),_:1})]),_:2},1032,["onClick"])):_("",!0),e(c,{icon:"help",flat:"",round:"",onClick:t[1]||(t[1]=w=>Q.value=!0)},{default:l(()=>[e(k,null,{default:l(()=>t[12]||(t[12]=[o("\u0420\u0435\u043A\u043E\u043C\u0435\u043D\u0434\u0430\u0446\u0438\u0438 \u043A \u044D\u0441\u043A\u0438\u0437\u0443")])),_:1})]),_:1})])]),_:1},512),(g=a.value)!=null&&g.queuedFiles.length?(f(),p(M,{key:0,dark:"",style:{width:"100%"}},{default:l(()=>[e(x,null,{default:l(()=>[e(J(be),{class:"cropper",ref_key:"refCropper",ref:U,src:F.value,canvas:{width:1920,height:1080},"stencil-props":ae.value,"default-size":ee,"default-position":te,onChange:X},null,8,["src","stencil-props"])]),_:1}),e(H,{align:"between"},{default:l(()=>[e(ue,{modelValue:T.value,"onUpdate:modelValue":t[4]||(t[4]=n=>T.value=n),label:"\u0418\u0433\u043D\u043E\u0440\u0438\u0440\u043E\u0432\u0430\u0442\u044C \u0441\u043E\u043E\u0442\u043D\u043E\u0448\u0435\u043D\u0438\u0435 \u0441\u0442\u043E\u0440\u043E\u043D",color:"red"},{default:l(()=>[e(k,{self:"top middle",class:"bg-red text-black text-body2",delay:300},{default:l(()=>t[13]||(t[13]=[u("ul",null,[u("li",null,"\u041A\u0430\u0440\u0442\u0438\u043D\u043A\u0443 \u043C\u043E\u0436\u0435\u0442 \u0440\u0430\u0441\u0442\u044F\u043D\u0443\u0442\u044C \u0438\u043B\u0438 \u0441\u043F\u043B\u044E\u0449\u0438\u0442\u044C."),u("li",null,"\u041A\u0432\u0430\u0434\u0440\u0430\u0442\u044B \u0441\u0442\u0430\u043D\u0443\u0442 \u043F\u0440\u044F\u043C\u043E\u0443\u0433\u043E\u043B\u044C\u043D\u0438\u043A\u0430\u043C\u0438."),u("li",null,"\u041A\u0440\u0443\u0433\u0438 \u0441\u0442\u0430\u043D\u0443\u0442 \u043E\u0432\u0430\u043B\u0430\u043C\u0438."),u("li",null,"\u041B\u044E\u0434\u0438 \u0431\u0443\u0434\u0443\u0442 \u0432\u044B\u0433\u043B\u044F\u0434\u0435\u0442\u044C \u043D\u0435\u0435\u0441\u0442\u0435\u0441\u0442\u0432\u0435\u043D\u043D\u043E \u0442\u043E\u043B\u0441\u0442\u044B\u043C\u0438 \u0438\u043B\u0438 \u0445\u0443\u0434\u044B\u043C\u0438."),u("li",null,"\u0418\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u0435 \u043F\u043E\u0442\u0435\u0440\u044F\u0435\u0442 \u0447\u0435\u0442\u043A\u043E\u0441\u0442\u044C"),u("li",null,"\u0418\u0437\u043C\u0435\u043D\u0435\u043D\u0438\u0435 \u043F\u0440\u043E\u043F\u043E\u0440\u0446\u0438\u0439 \u0438\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u044F \u043C\u043E\u0436\u0435\u0442 \u0432\u043E\u0441\u043F\u0440\u0438\u043D\u0438\u043C\u0430\u0442\u044C\u0441\u044F \u043A\u0430\u043A \u0441\u043B\u0435\u0434\u0441\u0442\u0432\u0438\u0435 \u0443\u043F\u043E\u0442\u0440\u0435\u0431\u043B\u0435\u043D\u0438\u044F \u043D\u0430\u0440\u043A\u043E\u0442\u0438\u0447\u0435\u0441\u043A\u0438\u0445 \u0432\u0435\u0449\u0435\u0441\u0442\u0432")],-1)])),_:1})]),_:1},8,["modelValue"]),e(c,{label:"\u0413\u043E\u0442\u043E\u0432\u043E",color:"green",onClick:$})]),_:1})]),_:1})):_("",!0),e(Se,{onConfirmed:t[5]||(t[5]=n=>le())})],64)}}};var Ee=Qe(qe,[["__scopeId","data-v-976b4ba8"]]),Oe=de({name:"QInnerLoading",props:{...ie,...fe,showing:Boolean,color:String,size:{type:[String,Number],default:"42px"},label:String,labelClass:String,labelStyle:[String,Array,Object]},setup(r,{slots:b}){const m=ve(),C=me(r,m.proxy.$q),{transitionProps:y,transitionStyle:U}=pe(r),a=L(()=>"q-inner-loading q--avoid-card-border absolute-full column flex-center"+(C.value===!0?" q-inner-loading--dark":"")),v=L(()=>"q-inner-loading__label"+(r.labelClass!==void 0?` ${r.labelClass}`:""));function q(){const S=[R(K,{size:r.size,color:r.color})];return r.label!==void 0&&S.push(R("div",{class:v.value,style:r.labelStyle},[r.label])),S}function Q(){return r.showing===!0?R("div",{class:a.value,style:U.value},b.default!==void 0?b.default():q()):null}return()=>R(ce,y.value,Q)}});export{Oe as Q,Ee as S};
