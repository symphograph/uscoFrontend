import{Q as j}from"./QImg.82c99bb0.js";import{c as J,h as V,p as G,ac as W,r as b,z as o,D as u,N as R,i as Q,T as X,aR as Y,o as Z,S as ee,y,C as t,aU as ae,I as g,B as a,E as d,J as x,m as S,a3 as T,H as f,aV as s,a1 as p,A as w,F as B,K as te,_ as ne,R as I,O as le,P as oe}from"./index.3fe2b884.js";import{Q as q,a as D,b as L}from"./QItem.01445140.js";import{Q as ie}from"./QTooltip.eb5ec7e3.js";import{u as E}from"./use-quasar.96f986b3.js";import{api as H}from"./axios.d9966e86.js";import{a as N,n as $,b as re}from"./myFuncts.02e9a0a2.js";const se=["top","middle","bottom"];var P=J({name:"QBadge",props:{color:String,textColor:String,floating:Boolean,transparent:Boolean,multiLine:Boolean,outline:Boolean,rounded:Boolean,label:[Number,String],align:{type:String,validator:e=>se.includes(e)}},setup(e,{slots:m}){const _=V(()=>e.align!==void 0?{verticalAlign:e.align}:null),l=V(()=>{const c=e.outline===!0&&e.color||e.textColor;return`q-badge flex inline items-center no-wrap q-badge--${e.multiLine===!0?"multi":"single"}-line`+(e.outline===!0?" q-badge--outline":e.color!==void 0?` bg-${e.color}`:"")+(c!==void 0?` text-${c}`:"")+(e.floating===!0?" q-badge--floating":"")+(e.rounded===!0?" q-badge--rounded":"")+(e.transparent===!0?" q-badge--transparent":"")});return()=>G("div",{class:l.value,style:_.value,role:"status","aria-label":e.label},W(m.default,e.label!==void 0?[e.label]:[]))}});const ue={__name:"DialogConfirm",props:{color:b({}),label:b({}),message:b({}),title:b({})},emits:["onOk","Cancel","Dismiss"],setup(e,{emit:m}){const _=E();function l(c,i){_.dialog({title:i,message:c,cancel:!0,persistent:!0,html:!0}).onOk(()=>{}).onOk(()=>{m("onOk")}).onCancel(()=>{m("Cancel")}).onDismiss(()=>{m("Dismiss")})}return(c,i)=>(o(),u(R,{label:e.label,color:e.color,onClick:i[0]||(i[0]=C=>l(e.message,e.title))},null,8,["label","color"]))}};const A=e=>(le("data-v-5b3f27be"),e=e(),oe(),e),ce=["href"],de={class:"mapLink"},fe=["innerHTML"],me=["innerHTML"],ve=A(()=>f("div",null,null,-1)),ge=["href"],be=A(()=>f("span",{class:"mapLink"},"\u0421\u043C\u043E\u0442\u0440\u0435\u0442\u044C \u0432\u0438\u0434\u0435\u043E",-1)),he=A(()=>f("b",null,"\u0422\u0438\u0433\u0440\u0430\u043D \u0410\u0445\u043D\u0430\u0437\u0430\u0440\u044F\u043D",-1)),ye={__name:"AnnounceCard",props:{evData:b(!1)},emits:["newAnnounce","IamDeleted","changeShow"],setup(e,{expose:m,emit:_}){const l=e,c=String("https://api.sakh-orch.ru/"),i=E();Q("token"),X(),Y();const C=Q("editMode");m({saveData:O});const U=b(["","","\u0412\u0445\u043E\u0434 \u0441\u0432\u043E\u0431\u043E\u0434\u043D\u044B\u0439","\u0411\u0438\u043B\u0435\u0442\u044B \u0432 \u043F\u0440\u043E\u0434\u0430\u0436\u0435","\u0412\u0445\u043E\u0434 \u043F\u043E \u043F\u0440\u0438\u0433\u043B\u0430\u0441\u0438\u0442\u0435\u043B\u044C\u043D\u044B\u043C","\u041F\u0440\u043E\u0434\u0430\u0436\u0430 \u0437\u0430\u0432\u0435\u0440\u0448\u0435\u043D\u0430"]),k=b(l.evData),M=Q("Halls"),z=V(()=>{let n=480;return i.platform.is.mobile&&(n=1080),String("https://api.sakh-orch.ru/")+l.evData.TopPoster.folder+"/"+n+"/"+l.evData.TopPoster.fileName+"?ver="+l.evData.TopPoster.md5});Z(()=>{});function O(){H.post(c+"api/set/announce/announce.php",{params:{evdata:l.evData}}).then(n=>{var r,v;i.notify(N((v=(r=n==null?void 0:n.data)==null?void 0:r.result)!=null?v:""))}).catch(n=>{i.notify($(n))})}function F(){H.post(c+"api/set/announce/delannounce.php",{params:{id:l.evData.ev_id}}).then(n=>{var r,v;i.notify(N((v=(r=n==null?void 0:n.data)==null?void 0:r.result)!=null?v:null)),_("IamDeleted")}).catch(n=>{i.notify($(n))})}function K(){return l.evData.pay?l.evData.pay===3&&l.evData.complited?"\u041F\u0440\u043E\u0434\u0430\u0436\u0430 \u0437\u0430\u0432\u0435\u0440\u0448\u0435\u043D\u0430":U.value[l.evData.pay]:""}return(n,r)=>{const v=ee("router-link");return e.evData&&(e.evData.show||y(C))?(o(),u(ae,{key:0,square:"",class:"eventbox tdno",separator:""},{default:t(()=>[a(v,{to:"/announce/"+e.evData.ev_id},{default:t(()=>[a(j,{ratio:270/171,src:y(z)},null,8,["src"])]),_:1},8,["to"]),a(s,{color:"info","expand-separator":""},{default:t(()=>[e.evData.complited===!1?(o(),u(P,{key:0,class:"absolute bage",color:"green-6",rounded:"",transparent:""},{default:t(()=>[d(" \u0421\u043A\u043E\u0440\u043E ")]),_:1})):g("",!0),e.evData.age?(o(),u(P,{key:1,rounded:"",style:{"background-color":"orange"},floating:""},{default:t(()=>[d(x(e.evData.age+"+"),1)]),_:1})):g("",!0),S((o(),u(q,null,{default:t(()=>[a(D,{avatar:""},{default:t(()=>[a(T,{name:"schedule"})]),_:1}),a(D,null,{default:t(()=>[a(L,{caption:""},{default:t(()=>[d(x(y(re)(k.value.datetime)),1)]),_:1})]),_:1})]),_:1})),[[I]]),f("a",{href:y(M).find(h=>h.id===e.evData.hall_id).map,target:"_blank"},[S((o(),u(q,{clickable:""},{default:t(()=>[a(D,{avatar:""},{default:t(()=>[a(T,{color:"primary",name:"place"})]),_:1}),a(D,null,{default:t(()=>[a(L,{caption:""},{default:t(()=>[f("span",de,x(y(M).find(h=>h.id===e.evData.hall_id).name),1)]),_:1})]),_:1})]),_:1})),[[I]])],8,ce)]),_:1}),a(p,{inset:""}),a(s,null,{default:t(()=>[f("div",{class:"text-subtitle1 text-center prog-name",innerHTML:e.evData.prog_name},null,8,fe)]),_:1}),a(s,{class:"text-body2 text-center"},{default:t(()=>[f("div",{innerHTML:e.evData.sdescr},null,8,me)]),_:1}),a(s,{class:"space"},{default:t(()=>[ve]),_:1}),a(p,{inset:""}),e.evData.youtube_id?(o(),u(s,{key:0},{default:t(()=>[f("a",{href:"https://www.youtube.com/watch?v="+e.evData.youtube_id,target:"_blank"},[S((o(),u(q,{clickable:""},{default:t(()=>[a(D,{avatar:""},{default:t(()=>[a(T,{color:"primary",name:"ion-logo-youtube"})]),_:1}),a(D,null,{default:t(()=>[a(L,{caption:""},{default:t(()=>[be]),_:1})]),_:1})]),_:1})),[[I]])],8,ge)]),_:1})):g("",!0),e.evData.pay?(o(),w(B,{key:1},[a(p,{inset:""}),a(s,{class:"text-body2 text-center"},{default:t(()=>[e.evData.pay===3&&!e.evData.complited&&e.evData.ticket_link?(o(),u(R,{key:0,label:"\u041A\u0443\u043F\u0438\u0442\u044C \u0431\u0438\u043B\u0435\u0442",href:e.evData.ticket_link},null,8,["href"])):(o(),w(B,{key:1},[d(x(K()),1)],64))]),_:1})],64)):g("",!0),a(p,{inset:""}),a(s,{class:"text-body2 text-center"},{default:t(()=>[d(" \u0425\u0443\u0434\u043E\u0436\u0435\u0441\u0442\u0432\u0435\u043D\u043D\u044B\u0439 \u0440\u0443\u043A\u043E\u0432\u043E\u0434\u0438\u0442\u0435\u043B\u044C \u0438 \u0433\u043B\u0430\u0432\u043D\u044B\u0439 \u0434\u0438\u0440\u0438\u0436\u0435\u0440 - "),he,d(". ")]),_:1}),y(C)?(o(),w(B,{key:2},[k.value.Poster.exist?g("",!0):(o(),u(s,{key:0,class:"text-body2 text-center danger"},{default:t(()=>[d(" \u0410\u0444\u0438\u0448\u0430 \u043D\u0435 \u0437\u0430\u0433\u0440\u0443\u0436\u0435\u043D\u0430 ")]),_:1})),a(s,null,{default:t(()=>[a(te,{modelValue:k.value.show,"onUpdate:modelValue":[r[0]||(r[0]=h=>k.value.show=h),r[1]||(r[1]=h=>O(0))],label:"\u0432\u043A\u043B",color:"green","checked-icon":"check","unchecked-icon":"clear"},{default:t(()=>[a(ie,null,{default:t(()=>[d("\u041E\u043F\u0443\u0431\u043B\u0438\u043A\u043E\u0432\u0430\u0442\u044C")]),_:1})]),_:1},8,["modelValue"])]),_:1}),a(s,null,{default:t(()=>[a(ue,{onOnOk:F,label:"\u0423\u0434\u0430\u043B\u0438\u0442\u044C",color:"red",title:"\u0423\u0434\u0430\u043B\u0435\u043D\u0438\u0435 \u0430\u043D\u043E\u043D\u0441\u0430",message:`
          \u0411\u0443\u0434\u0435\u0442 \u0443\u0434\u0430\u043B\u0435\u043D\u0430 \u0437\u0430\u043F\u0438\u0441\u044C \u043E\u0431 \u0430\u043D\u043E\u043D\u0441\u0435 \u0438 \u0441\u0432\u044F\u0437\u0430\u043D\u043D\u044B\u0435 \u0441 \u043D\u0435\u0439 \u0438\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u044F.
          <br><span style='color: red'>
          \u042D\u0442\u043E \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0435 \u043D\u0435\u043B\u044C\u0437\u044F \u043E\u0442\u043C\u0435\u043D\u0438\u0442\u044C.</span><br>
          \u0412\u044B \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0442\u0435\u043B\u044C\u043D\u043E \u0445\u043E\u0442\u0438\u0442\u0435 \u044D\u0442\u043E \u0441\u0434\u0435\u043B\u0430\u0442\u044C?`})]),_:1})],64)):g("",!0)]),_:1})):g("",!0)}}};var Se=ne(ye,[["__scopeId","data-v-5b3f27be"]]);export{Se as A};
