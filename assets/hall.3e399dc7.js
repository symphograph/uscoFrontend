var g=Object.defineProperty;var p=(a,t,u)=>t in a?g(a,t,{enumerable:!0,configurable:!0,writable:!0,value:u}):a[t]=u;var r=(a,t,u)=>(p(a,typeof t!="symbol"?t+"":t,u),u);import{a as c}from"./axios.63d2f48d.js";import{n as h,a as m}from"./myFuncts.d4b02984.js";import{u as d}from"./myAxios.f72ca8da.js";class f{static getMapUrl(t){return`https://yandex.ru/maps/org/${t}`}}const i=class{constructor({id:t=-1,name:u="\u041D\u043E\u0432\u044B\u0439 \u0437\u0430\u043B",suggestId:e=0,suggest:n}={}){r(this,"id",-1);r(this,"name","\u041D\u043E\u0432\u044B\u0439 \u0437\u0430\u043B");r(this,"suggestId",0);r(this,"suggest");this.id=t,this.name=u,this.suggestId=e,this.suggest=n}async save(t){var n;const u=d.getApiUrl(i.path),e={method:this.id>0?"update":"add",id:this.id,name:this.name,suggestId:this.suggestId};try{const s=await c.post(u,{params:e});if(!((n=s==null?void 0:s.data)!=null&&n.result))throw new Error;return this.id=s.data.data.id,t.notify(h()),!0}catch(s){return t.notify(m(s)),!1}}async del(t){d.getApiUrl(i.path);const u={method:"del",id:this.id},e="\u041E\u0431\u044A\u0435\u043A\u0442 \u043D\u0435 \u0443\u0434\u0430\u043B\u0438\u043B\u0441\u044F";return await d.set(t,i.path,u,e)?(i.List.value=i.List.value.filter(s=>s.id!==this.id),!0):!1}getMapHref(){var u,e;const t=(e=(u=this.suggest)==null?void 0:u.oid)!=null?e:0;return f.getMapUrl(t)}static async getList(t){const u={method:"list"},e="\u0421\u043F\u0438\u0441\u043E\u043A \u0437\u0430\u043B\u043E\u0432 \u043D\u0435 \u0437\u0430\u0433\u0440\u0443\u0437\u0438\u043B\u0441\u044F";return(await d.getList(t,this.path,u,e)).map(s=>new i({id:s.id,name:s.name,suggestId:s.suggestId,suggest:s.suggest}))}static findById(t){return this.List.value.find(u=>u.id===t)||new i}};let o=i;r(o,"List"),r(o,"path","epoint/hall.php");export{o as H};
