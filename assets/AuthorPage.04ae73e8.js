import{I,H as P,i as v,r as N,p as E,o as B,m as c,n as p,q as i,f as r,ax as R,v as a,x as T,bi as _,y,bm as M,A as O,l as b,t as q,u as g}from"./index.f5e978c0.js";import{Q as D}from"./QItemLabel.4c832645.js";import{b as L}from"./QImg.628e9f39.js";import{P as U}from"./PageShell.bef0802e.js";import{S as W}from"./SelectComposer.ab01221d.js";import{P as $}from"./LocalStorage.a31cb3b4.js";import{u as j}from"./use-quasar.cdf0ea62.js";import{a as k}from"./axios.b6bdbb44.js";import{e as H,a as A,n as V}from"./myFuncts.28762f14.js";import{_ as K}from"./BtnDelete.921da25f.js";import{A as o}from"./lib.ab987395.js";import"./MainFooter.vue_vue_type_style_index_0_scoped_true_lang.990b59f1.js";import"./touch.9135741d.js";import"./selection.52642521.js";import"./QScrollArea.d29ff5ca.js";import"./plugin-vue_export-helper.21dcd24c.js";import"./format.de7e9769.js";import"./QLinearProgress.92cabfad.js";/* empty css                                                    */import"./QSelect.ed6de9a4.js";import"./QMenu.95cba417.js";import"./position-engine.93af21d7.js";import"./rtl.276c3f1b.js";import"./AuthorItem.68f5c219.js";/* empty css                                                               *//* empty css                                                                   */import"./QTooltip.7abf715f.js";import"./myAxios.e0606f23.js";const z={class:"centralCol"},Vt={__name:"AuthorPage",setup(F){const u=j(),m=I(),w=P(),f=String("https://sakh-orch.ru/stapi/"),s=v("editMode"),C=N(null);E("searchText",C);const n=v("selectedAuthorId");function Q(t){n.value=t.id,$.set("lastAuthor",t.id),m.params.id=t.id,w.push({path:"/lib/author/"+t.id}),h()}async function h(){!n.value||(o.selected.value=await o.get(u,n.value))}function S(){k.post(f+"epoint/lib/author.php",{params:{method:"update",id:m.params.id,author:selectedAuthor.value}}).then(t=>{var e,l,d;if(!((e=t==null?void 0:t.data)!=null&&e.result))throw new Error;u.notify(A((d=(l=t==null?void 0:t.data)==null?void 0:l.result)!=null?d:null))}).catch(t=>{u.notify(V(t))})}function x(){k.post(f+"epoint/lib/author.php",{params:{method:"del",workId:m.params.id}}).then(t=>{var e,l,d;if(!((e=t==null?void 0:t.data)!=null&&e.result))throw new Error;u.notify(A((d=(l=t==null?void 0:t.data)==null?void 0:l.result)!=null?d:null))}).catch(t=>{u.notify(V(t))})}return B(()=>{n.value=m.params.id*1,h()}),(t,e)=>(c(),p(U,{"page-title":"\u041A\u043E\u043C\u043F\u043E\u0437\u0438\u0442\u043E\u0440 "},{ToolPanel:i(()=>[r(W,{onItSel:Q})]),PageContent:i(()=>[R("div",z,[a(o).selected.value?(c(),p(T,{key:0},{default:i(()=>[r(y,null,{default:i(()=>[r(_,{modelValue:a(o).selected.value.fioRu,"onUpdate:modelValue":e[0]||(e[0]=l=>a(o).selected.value.fioRu=l),readonly:!a(s),label:"\u0424\u0430\u043C\u0438\u043B\u0438\u044F, \u0418\u043C\u044F \u041E\u0442\u0447\u0435\u0441\u0442\u0432\u043E"},null,8,["modelValue","readonly"]),r(_,{modelValue:a(o).selected.value.iofEn,"onUpdate:modelValue":e[1]||(e[1]=l=>a(o).selected.value.iofEn=l),readonly:!a(s),label:"Name LastName"},null,8,["modelValue","readonly"])]),_:1}),a(s)?(c(),p(M,{key:0,align:"right"},{default:i(()=>[r(O,{label:"\u0421\u043E\u0445\u0440\u0430\u043D\u0438\u0442\u044C",color:"green",onClick:S}),r(K,{label:"\u0423\u0434\u0430\u043B\u0438\u0442\u044C",title:"\u0423\u0434\u0430\u043B\u0438\u0442\u044C \u043A\u043E\u043C\u043F\u043E\u0437\u0438\u0442\u043E\u0440\u0430","throw-confirm":"",danger:"",onOnOk:x,tooltip:"\u0423\u0434\u0430\u043B\u0438\u0442\u044C \u043A\u043E\u043C\u043F\u043E\u0437\u0438\u0442\u043E\u0440\u0430"})]),_:1})):b("",!0),r(y,null,{default:i(()=>[r(L,{clickable:"",to:`/lib/works/${a(o).selected.value.id}`},{default:i(()=>[r(D,null,{default:i(()=>[q(g(a(o).selected.value.cntWorks)+" "+g(a(H)(a(o).selected.value.cntWorks,["\u043F\u0440\u043E\u0438\u0437\u0432\u0435\u0434\u0435\u043D\u0438\u0435","\u043F\u0440\u043E\u0438\u0437\u0432\u0435\u0434\u0435\u043D\u0438\u044F","\u043F\u0440\u043E\u0438\u0437\u0432\u0435\u0434\u0435\u043D\u0438\u0439"])),1)]),_:1})]),_:1},8,["to"])]),_:1})]),_:1})):b("",!0)])]),_:1}))}};export{Vt as default};
