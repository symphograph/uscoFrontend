import{u as _}from"./use-quasar.435d16fb.js";import{api as w}from"./axios.fcd61a1b.js";import{A as g}from"./AnnounceCard.ea4a2254.js";import{r as u,i as o,T as k,aR as D,o as L,w as M,h as A,z as c,A as F,G as B,y as i,F as N,D as R}from"./index.b0347da7.js";import{n as Y}from"./myFuncts.02e9a0a2.js";const C={__name:"AnnounceList",props:{sort:u(null),evYear:u(null),onlyNew:u(0)},setup(d){const r=d,m=String("https://api.sakh-orch.ru/"),p=_();o("token"),o("lvl"),k(),D();const v=o("editMode"),l=o("progress"),t=o("announceList");o("Halls");function s(){l.value=!0,w.post(m+"api/get/announces/announces.php",{params:{sort:r.sort,year:r.evYear,new:r.onlyNew}}).then(e=>{var a,n;t.value=(n=(a=e==null?void 0:e.data)==null?void 0:a.data)!=null?n:[]}).catch(e=>{p.notify(Y(e)),t.value=[]}).finally(()=>{l.value=!1})}L(()=>{s()}),M(()=>r.evYear,()=>{s()});const f=(e,a)=>e.datetime<a.datetime?1:-1,h=(e,a)=>e.datetime>a.datetime?1:-1,y=A(()=>{if(!t.value||!t.value.length)return[];switch(r.sort){case 0:return[...t.value].sort(f);case 1:return[...t.value].sort(h);default:return t.value}});return(e,a)=>(c(!0),F(N,null,B(i(y),n=>(c(),R(g,{key:n.ev_id,evData:n,editMode:i(v),onIamDeleted:s},null,8,["evData","editMode"]))),128))}};export{C as _};
