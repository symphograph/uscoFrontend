var Z=Object.defineProperty;var ee=(e,l,o)=>l in e?Z(e,l,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[l]=o;var E=(e,l,o)=>(ee(e,typeof l!="symbol"?l+"":l,o),o);import{a as te,b as Q,Q as m}from"./QImg.9acd5dae.js";import{V as ne,c as H,h as ae,ab as le,r as w,m as i,n as g,A as oe,i as ue,o as ie,J as se,v as S,q as n,x as re,l as c,f as t,ax as b,t as f,u as B,ak as O,z as D,y as v,D as A,C as I,F as p,ay as ce,al as U}from"./index.7551532c.js";import{Q as C}from"./QItemLabel.b098b72c.js";import{Q as de}from"./QTooltip.1d472130.js";import{u as z}from"./use-quasar.76d5ad23.js";import{b as me,c as fe,e as N,i as ge}from"./myFuncts.c8e6a03d.js";import{_ as ke}from"./BtnDelete.7ba2f2d4.js";import{b as ve}from"./axios.13a9dd52.js";import{u as $}from"./myAxios.e960540f.js";import{_ as ye}from"./plugin-vue_export-helper.21dcd24c.js";const he=["top","middle","bottom"];var _=ne({name:"QBadge",props:{color:String,textColor:String,floating:Boolean,transparent:Boolean,multiLine:Boolean,outline:Boolean,rounded:Boolean,label:[Number,String],align:{type:String,validator:e=>he.includes(e)}},setup(e,{slots:l}){const o=H(()=>e.align!==void 0?{verticalAlign:e.align}:null),s=H(()=>{const r=e.outline===!0&&e.color||e.textColor;return`q-badge flex inline items-center no-wrap q-badge--${e.multiLine===!0?"multi":"single"}-line`+(e.outline===!0?" q-badge--outline":e.color!==void 0?` bg-${e.color}`:"")+(r!==void 0?` text-${r}`:"")+(e.floating===!0?" q-badge--floating":"")+(e.rounded===!0?" q-badge--rounded":"")+(e.transparent===!0?" q-badge--transparent":"")});return()=>ae("div",{class:s.value,style:o.value,role:"status","aria-label":e.label},le(l.default,e.label!==void 0?[e.label]:[]))}});const be={__name:"DialogConfirm",props:{color:w({}),label:w({}),message:w({}),title:w({})},emits:["onOk","Cancel","Dismiss"],setup(e,{emit:l}){const o=z(),s=l;function r(q,y){o.dialog({title:y,message:q,cancel:!0,persistent:!0,html:!0,dark:!0}).onOk(()=>{}).onOk(()=>{s("onOk")}).onCancel(()=>{s("Cancel")}).onDismiss(()=>{s("Dismiss")})}return(q,y)=>(i(),g(oe,{label:e.label,color:e.color,onClick:y[0]||(y[0]=M=>r(e.message,e.title))},null,8,["label","color"]))}};class Ae{static getMapUrl(l){return`https://yandex.ru/maps/org/${l}`}}class L{static async del(l,o){const s={method:"del",id:o};return $.set(l,this.path,s)}static async hideOrShow(l,o,s){const r={method:s?"show":"hide",announceId:o};return $.set(l,this.path,r)}static async delSketch(l,o){const s={method:"delSketch",announceId:o};return $.set(l,this.path,s)}static async save(l,o){const s={method:"update",announce:o};return $.set(l,this.path,s)}static async getList(l){const o={method:"list"},s="\u0410\u043D\u043E\u043D\u0441\u044B \u043D\u0435 \u0437\u0430\u0433\u0440\u0443\u0437\u0438\u043B\u0438\u0441\u044C";return $.getList(l,this.path,o,s)}}E(L,"path","epoint/event/announce.php");const pe={class:"delBtnArea"},we={class:"mapLink"},xe=["innerHTML"],Se=["innerHTML"],Ce={__name:"AnnounceCard",props:{Announce:w(!1),pwUrl:String,compact:{type:Boolean,required:!1,default:!1}},emits:["newAnnounce","IamDeleted","changeShow","delSketch"],setup(e,{expose:l,emit:o}){const s=String("https://sakh-orch.ru/api/"),r=z(),y=ue("editModes").announce,M=o,T=w(null);function F(){return`https://radario.ru/buy-tickets/${u.Announce.radarioEventId}`}l({saveData:G});const R=w(["","","\u0412\u0445\u043E\u0434 \u0441\u0432\u043E\u0431\u043E\u0434\u043D\u044B\u0439","\u0411\u0438\u043B\u0435\u0442\u044B \u0432 \u043F\u0440\u043E\u0434\u0430\u0436\u0435","\u0412\u0445\u043E\u0434 \u043F\u043E \u043F\u0440\u0438\u0433\u043B\u0430\u0441\u0438\u0442\u0435\u043B\u044C\u043D\u044B\u043C","\u041F\u0440\u043E\u0434\u0430\u0436\u0430 \u0437\u0430\u0432\u0435\u0440\u0448\u0435\u043D\u0430"]),u=e,h=w(u.Announce);function j(){if(u.pwUrl)return u.pwUrl;let x=r.platform.is.mobile?1080:480;return u.Announce.sketch?ge(s,u.Announce.sketch.md5,u.Announce.sketch.ext,x):"/img/news/default_sketch.svg"}function G(){L.save(r,u.Announce)}async function J(){await L.del(r,u.Announce.id)&&M("IamDeleted")}async function P(){await L.hideOrShow(r,h.value.id,h.value.isShow)?M("changeShow",h.value.id):h.value.isShow=!h.value.isShow}function W(){return u.Announce.pay?u.Announce.pay===3&&u.Announce.completed?"\u041F\u0440\u043E\u0434\u0430\u0436\u0430 \u0437\u0430\u0432\u0435\u0440\u0448\u0435\u043D\u0430":R.value[u.Announce.pay]:""}async function K(){await L.delSketch(r,u.Announce.id)&&M("delSketch",u.Announce.id)}function X(){var a;if(!((a=u.Announce)!=null&&a.radarioEventId)||u.Announce.completed)return;ve.create().get(F(),{params:{distributionType:"api",skipEventsInGroup:!0}}).then(d=>{var k;(k=d==null?void 0:d.data)!=null&&k.result,console.log("radario loaded"),T.value=d.data.event.ticketCount}).catch(d=>{r.notify(me(d,"\u041A\u043E\u043B\u0438\u0447\u0435\u0441\u0442\u0432\u043E \u043E\u0441\u0442\u0430\u0432\u0448\u0438\u0445\u0441\u044F \u0431\u0438\u043B\u0435\u0442\u043E\u0432 \u043D\u0435 \u0437\u0430\u0433\u0440\u0443\u0437\u0438\u043B\u043E\u0441\u044C."))})}function Y(){var d;const x=u.Announce.Hall.suggest,a=(d=x==null?void 0:x.oid)!=null?d:0;return Ae.getMapUrl(a)}return ie(()=>{u.Announce.completed===!1&&X()}),(x,a)=>{const d=se("router-link");return e.Announce&&(e.Announce.isShow||S(y))?(i(),g(re,{key:0,square:"",class:"eventbox tdno",separator:""},{default:n(()=>[t(d,{to:"/announce/"+e.Announce.id},{default:n(()=>[b("div",pe,[S(y)&&!e.pwUrl?(i(),g(ke,{key:0,title:"\u0423\u0434\u0430\u043B\u0438\u0442\u044C \u044D\u0441\u043A\u0438\u0437",tooltip:"\u0423\u0434\u0430\u043B\u0438\u0442\u044C \u044D\u0441\u043A\u0438\u0437","throw-confirm":"",danger:"",onOnOk:a[0]||(a[0]=k=>K())})):c("",!0)]),t(te,{ratio:16/9,src:j(),fit:"fill"},{error:n(()=>a[3]||(a[3]=[b("img",{src:"/img/news/default_sketch.svg"},null,-1)])),_:1},8,["src"])]),_:1},8,["to"]),t(v,{color:"info","expand-separator":""},{default:n(()=>[e.Announce.completed===!1?(i(),g(_,{key:0,class:"absolute bage",color:"green-6",rounded:"",transparent:""},{default:n(()=>a[4]||(a[4]=[f(" \u0421\u043A\u043E\u0440\u043E ")])),_:1})):c("",!0),e.Announce.age?(i(),g(_,{key:1,rounded:"",style:{"background-color":"orange"},floating:""},{default:n(()=>[f(B(e.Announce.age+"+"),1)]),_:1})):c("",!0),O((i(),g(Q,{dense:""},{default:n(()=>[t(m,{avatar:""},{default:n(()=>[t(D,{name:"schedule"})]),_:1}),t(m,null,{default:n(()=>[t(C,{caption:""},{default:n(()=>[f(B(S(fe)(h.value.eventTime)),1)]),_:1})]),_:1})]),_:1})),[[U]]),O((i(),g(Q,{clickable:"",href:Y(),target:"_blank",dense:""},{default:n(()=>[t(m,{avatar:""},{default:n(()=>[t(D,{name:"place"})]),_:1}),t(m,null,{default:n(()=>[t(C,{caption:""},{default:n(()=>[b("span",we,B(e.Announce.Hall.name),1)]),_:1})]),_:1})]),_:1},8,["href"])),[[U]])]),_:1}),e.compact?c("",!0):(i(),A(p,{key:0},[t(I,{inset:""}),t(v,null,{default:n(()=>[b("div",{class:"text-subtitle1 text-center prog-name",innerHTML:e.Announce.progName},null,8,xe)]),_:1}),t(v,{class:"text-body2 text-center"},{default:n(()=>[b("div",{innerHTML:e.Announce.sdescr},null,8,Se)]),_:1}),t(v,{class:"space"},{default:n(()=>a[5]||(a[5]=[b("div",null,null,-1)])),_:1}),t(I,{inset:""}),e.Announce.youtubeId?(i(),g(v,{key:0},{default:n(()=>[O((i(),g(Q,{clickable:"",href:"https://www.youtube.com/watch?v="+e.Announce.youtubeId,target:"_blank"},{default:n(()=>[t(m,{avatar:""},{default:n(()=>[t(D,{name:"ion-logo-youtube"})]),_:1}),t(m,null,{default:n(()=>[t(C,{caption:""},{default:n(()=>a[6]||(a[6]=[b("span",{class:"mapLink"},"\u0421\u043C\u043E\u0442\u0440\u0435\u0442\u044C \u0432\u0438\u0434\u0435\u043E",-1)])),_:1})]),_:1})]),_:1},8,["href"])),[[U]])]),_:1})):c("",!0),e.Announce.pay?(i(),A(p,{key:1},[t(I,{inset:""}),t(v,{class:"text-body2 text-center"},{default:n(()=>[[3,4].includes(e.Announce.pay)&&!e.Announce.completed&&e.Announce.ticketLink?(i(),A(p,{key:0},[e.Announce.isShowTicketCount&&e.Announce.radarioEventId?(i(),A(p,{key:0},[t(Q,null,{default:n(()=>[t(m,null,{default:n(()=>{var k,V;return[f(B(`${S(N)((k=T.value)!=null?k:0,["\u041E\u0441\u0442\u0430\u043B\u0441\u044F","\u041E\u0441\u0442\u0430\u043B\u043E\u0441\u044C","\u041E\u0441\u0442\u0430\u043B\u043E\u0441\u044C"])} ${T.value} ${S(N)((V=T.value)!=null?V:0,["\u0431\u0438\u043B\u0435\u0442","\u0431\u0438\u043B\u0435\u0442\u0430","\u0431\u0438\u043B\u0435\u0442\u043E\u0432"])}`),1)]}),_:1})]),_:1}),t(I,{inset:"",spaced:""})],64)):c("",!0),t(Q,{clickable:"",href:e.Announce.ticketLink,target:"_blank",dense:"",style:{"text-align":"left"}},{default:n(()=>[e.Announce.pay===4?(i(),A(p,{key:0},[t(m,{avatar:""},{default:n(()=>[t(D,{name:"img:/img/uds.svg"})]),_:1}),t(m,null,{default:n(()=>[t(C,null,{default:n(()=>a[7]||(a[7]=[f("\u041F\u043E\u043B\u0443\u0447\u0438\u0442\u044C \u043F\u0440\u0438\u0433\u043B\u0430\u0441\u0438\u0442\u0435\u043B\u044C\u043D\u044B\u0439")])),_:1})]),_:1})],64)):c("",!0),e.Announce.pay===3?(i(),A(p,{key:1},[t(m,{avatar:""},{default:n(()=>[t(D,{name:"shopping_cart"})]),_:1}),t(m,null,{default:n(()=>[t(C,null,{default:n(()=>a[8]||(a[8]=[f("\u041A\u0443\u043F\u0438\u0442\u044C \u0431\u0438\u043B\u0435\u0442")])),_:1}),e.Announce.isPushkin?(i(),g(C,{key:0,caption:""},{default:n(()=>a[9]||(a[9]=[f("+ \u0414\u043E\u0441\u0442\u0443\u043F\u043D\u043E \u043F\u043E \u043F\u0443\u0448\u043A\u0438\u043D\u0441\u043A\u043E\u0439 \u043A\u0430\u0440\u0442\u0435")])),_:1})):c("",!0)]),_:1})],64)):c("",!0)]),_:1},8,["href"])],64)):(i(),A(p,{key:1},[f(B(W()),1)],64))]),_:1})],64)):c("",!0),t(I,{inset:""}),t(v,{class:"text-body2 text-center"},{default:n(()=>a[10]||(a[10]=[f(" \u0425\u0443\u0434\u043E\u0436\u0435\u0441\u0442\u0432\u0435\u043D\u043D\u044B\u0439 \u0440\u0443\u043A\u043E\u0432\u043E\u0434\u0438\u0442\u0435\u043B\u044C \u0438 \u0433\u043B\u0430\u0432\u043D\u044B\u0439 \u0434\u0438\u0440\u0438\u0436\u0435\u0440 - "),b("b",null,"\u0422\u0438\u0433\u0440\u0430\u043D \u0410\u0445\u043D\u0430\u0437\u0430\u0440\u044F\u043D",-1),f(". ")])),_:1}),S(y)?(i(),A(p,{key:2},[t(v,null,{default:n(()=>[t(ce,{modelValue:h.value.isShow,"onUpdate:modelValue":[a[1]||(a[1]=k=>h.value.isShow=k),a[2]||(a[2]=k=>P())],label:"\u0432\u043A\u043B",color:"green","checked-icon":"check","unchecked-icon":"clear"},{default:n(()=>[t(de,null,{default:n(()=>a[11]||(a[11]=[f("\u041E\u043F\u0443\u0431\u043B\u0438\u043A\u043E\u0432\u0430\u0442\u044C")])),_:1})]),_:1},8,["modelValue"])]),_:1}),t(v,null,{default:n(()=>[t(be,{onOnOk:J,label:"\u0423\u0434\u0430\u043B\u0438\u0442\u044C",color:"red",title:"\u0423\u0434\u0430\u043B\u0435\u043D\u0438\u0435 \u0430\u043D\u043E\u043D\u0441\u0430",message:`
          \u0411\u0443\u0434\u0435\u0442 \u0443\u0434\u0430\u043B\u0435\u043D\u0430 \u0437\u0430\u043F\u0438\u0441\u044C \u043E\u0431 \u0430\u043D\u043E\u043D\u0441\u0435 \u0438 \u0441\u0432\u044F\u0437\u0430\u043D\u043D\u044B\u0435 \u0441 \u043D\u0435\u0439 \u0438\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u044F.
          <br><span style='color: red'>
          \u042D\u0442\u043E \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0435 \u043D\u0435\u043B\u044C\u0437\u044F \u043E\u0442\u043C\u0435\u043D\u0438\u0442\u044C.</span><br>
          \u0412\u044B \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0442\u0435\u043B\u044C\u043D\u043E \u0445\u043E\u0442\u0438\u0442\u0435 \u044D\u0442\u043E \u0441\u0434\u0435\u043B\u0430\u0442\u044C?`})]),_:1})],64)):c("",!0)],64))]),_:1})):c("",!0)}}};var Ve=ye(Ce,[["__scopeId","data-v-7191c9ea"]]);export{Ve as A,L as m};
