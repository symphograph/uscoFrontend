import{Q as B}from"./QToolbarTitle.7965bc98.js";import{Q as V}from"./QToolbar.d8ee9930.js";import{Q as D}from"./QSpace.5e52cb1c.js";import{i as y,e as c,h as b,z as o,g as a,a$ as $,b0 as F,G as f,at as _,H as d,av as I,_ as M,u as N,aU as R,r as p,p as m,f as U,A as Q,aY as z,c as k,F as E,a5 as Y}from"./index.4c9b99a1.js";import{Q as A}from"./QSelect.ffec0497.js";import{Q as q}from"./QTooltip.40f3985b.js";import{Q as j}from"./QLinearProgress.313da236.js";import{_ as G}from"./AnnounceList.c53343e4.js";import{u as H}from"./jwt-decode.esm.a17afbe5.js";import{u as K}from"./use-meta.06e3aa02.js";import{api as O}from"./axios.73a146c0.js";import{g as J,d as W,n as X}from"./myFuncts.ea11ec4a.js";import{b as Z,Q as ee,a as w}from"./QItemLabel.156e8acc.js";import"./rtl.1637cb10.js";import"./position-engine.db985ba2.js";import"./format.3e32b8d9.js";import"./AnnounceCard.4ee94449.js";import"./QImg.79639ebe.js";import"./use-ratio.4927b82c.js";import"./BtnDelete.dba6ea95.js";const ae={__name:"SelectSort",setup(C){const s=y("sortType"),v=[{label:"\u0421\u043D\u0430\u0447\u0430\u043B\u0430 \u043D\u043E\u0432\u044B\u0435",value:"dateDesc",caption:"\u041F\u043E \u0443\u0431\u044B\u0432\u0430\u043D\u0438\u044E \u0434\u0430\u0442\u044B"},{label:"\u0421\u043D\u0430\u0447\u0430\u043B\u0430 \u0434\u0430\u0432\u043D\u0438\u0435",value:"dateAsc",caption:"\u041F\u043E \u0432\u043E\u0437\u0440\u0430\u0441\u0442\u0430\u043D\u0438\u044E \u0434\u0430\u0442\u044B"}];return(g,i)=>(c(),b(A,{modelValue:d(s),"onUpdate:modelValue":i[0]||(i[0]=r=>I(s)?s.value=r:null),borderless:"","map-options":"","emit-value":"",options:v},{option:o(r=>[a(Z,$(F(r.itemProps)),{default:o(()=>[a(ee,null,{default:o(()=>[a(w,null,{default:o(()=>[f(_(r.opt.label),1)]),_:2},1024),a(w,{caption:""},{default:o(()=>[f(_(r.opt.caption),1)]),_:2},1024)]),_:2},1024)]),_:2},1040)]),_:1},8,["modelValue"]))}};const te={class:"selectors"},oe={class:"gridArea"},re={__name:"AnnounceListPage",setup(C){const s=J("\u0410\u043D\u043E\u043D\u0441\u044B");K(s);const v=String("https://api.sakh-orch.ru/"),g=H();N();const i=R(),r=y("editMode"),l=p(!1);m("compactCard",l);const L=y("progress"),h=p("dateDesc");m("sortType",h);const u=p(new Date().getFullYear());m("evYear",u);const P=p([]);m("announceList",P);function S(){let e=[];for(let t=2018;t<=new Date().getFullYear();t++)e.push(t);return e.reverse()}function x(){O.post(v+"api/event/announce.php",{params:{method:"add"}}).then(e=>{var t,n,T;if(!((t=e==null?void 0:e.data)!=null&&t.result))throw new Error;g.notify(W((T=(n=e==null?void 0:e.data)==null?void 0:n.result)!=null?T:null)),i.push({path:"/announce/"+e.data.data.id})}).catch(e=>{g.notify(X(e))})}return(e,t)=>(c(),U(E,null,[Q("div",{class:z(["pageToolbar",e.$q.platform.is.desktop?"no-wrap":"wrap"])},[a(V,null,{default:o(()=>[a(B,null,{default:o(()=>[f(_(d(s).title),1)]),_:1})]),_:1}),a(V,null,{default:o(()=>[a(D),Q("div",te,[d(r)?(c(),b(Y,{key:0,label:"\u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C",onClick:x})):k("",!0),a(A,{modelValue:u.value,"onUpdate:modelValue":t[0]||(t[0]=n=>u.value=n),options:S(),"emit-value":"",borderless:""},null,8,["modelValue","options"]),a(ae),a(Y,{icon:l.value?"unfold_less":"unfold_more",flat:"",onClick:t[1]||(t[1]=n=>l.value=!l.value)},{default:o(()=>[a(q,null,{default:o(()=>[f(_(l.value?"\u041F\u043E\u0434\u0440\u043E\u0431\u043D\u043E":"\u041A\u0440\u0430\u0442\u043A\u043E"),1)]),_:1})]),_:1},8,["icon"])])]),_:1})],2),d(L)?(c(),b(j,{key:0,indeterminate:"",color:"secondary"})):k("",!0),Q("div",oe,[a(G,{evYear:u.value,method:"listByYear",sort:h.value},null,8,["evYear","sort"])])],64))}};var Ye=M(re,[["__scopeId","data-v-5795f16f"]]);export{Ye as default};
