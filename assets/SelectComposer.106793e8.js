import{a as x,Q as S}from"./QImg.17b0c661.js";import{G as h,r as f,i as C,w as V,k as w,o as I,ai as N,m as b,n as k,aY as y,u as o,p as r,f as u,Q as A,cq as L,q as R,t as U,l as B}from"./index.b51d6ac9.js";import{Q as E}from"./QItemLabel.44fa218d.js";import{Q as P}from"./QSelect.6c76a8de.js";import{A as D}from"./AuthorItem.6938789a.js";import{A as e}from"./lib.761978b0.js";import{_ as T}from"./plugin-vue_export-helper.21dcd24c.js";const q={__name:"SelectComposer",emits:["itSel"],setup(z,{emit:m}){const _=h(),v=f(),c=f([...e.list.value]),g=m,s=C("loadingAuthors");function Q(d,a,t){a(()=>{if(!d){c.value=[...e.list.value];return}const n=d.toLowerCase();let i=[...e.list.value];d&&(i=i.filter(l=>(l.fioRu?l.fioRu.toLowerCase().includes(n):!1)||(l.iofEn?l.iofEn.toLowerCase().includes(n):!1))),c.value=i})}return V(s,()=>{s.value||(c.value=[...e.list.value],console.log("loadingAuthors",s.value))}),w(()=>{}),I(()=>{}),N(()=>{e.selected.value=void 0}),(d,a)=>(b(),k(P,{options:c.value,ref_key:"refSelect",ref:v,modelValue:o(e).selected.value,"onUpdate:modelValue":[a[1]||(a[1]=t=>o(e).selected.value=t),a[2]||(a[2]=t=>g("itSel",o(e).selected.value))],"option-label":"fioRu","option-value":"id","map-options":"","use-input":!o(s),"hide-selected":"","fill-input":"",autocomplete:"off","input-debounce":"0",onFilter:Q,clearable:"",style:{width:"100%"},label:"\u041A\u043E\u043C\u043F\u043E\u0437\u0438\u0442\u043E\u0440",loading:o(s)},y({option:r(t=>{var n,i,l,p;return[u(D,L(t.itemProps,{id:(n=t.opt)==null?void 0:n.id,iofEn:(i=t.opt)==null?void 0:i.iofEn,iconUrl:(l=t.opt)==null?void 0:l.iconUrl,fioRu:(p=t.opt)==null?void 0:p.fioRu}),{sections:r(()=>[u(S,{side:""},{default:r(()=>[u(E,{caption:""},{default:r(()=>[R(U(t.opt.cntWorks),1)]),_:2},1024)]),_:2},1024)]),_:2},1040,["id","iofEn","iconUrl","fioRu"]),B("",!0)]}),_:2},[o(e).selected.value?{name:"prepend",fn:r(()=>[u(A,null,{default:r(()=>[u(x,{src:o(e).selected.value.iconUrl,class:"authorAva",eager:"","no-spinner":"","no-transition":"","placeholder-src":"/img/avatars/init_ava.png",style:{width:"50px",cursor:"pointer"},onClick:a[0]||(a[0]=()=>o(_).push({path:"/lib/author/"+o(e).selected.value.id}))},null,8,["src"])]),_:1})]),key:"0"}:void 0]),1032,["options","modelValue","use-input","loading"]))}};var K=T(q,[["__scopeId","data-v-45abfa50"]]);export{K as S};
