import{Q as X}from"./QImg.a677d81a.js";import{V as Y,c as U,h as Z,ab as ee,r as y,m as i,n as k,B as te,u as ne,I as ae,i as le,o as oe,J as ue,x as I,q as l,y as ie,l as c,f as n,ax as b,t as m,v as D,ak as $,A as p,z as g,E as x,D as _,F as w,ay as re,al as L}from"./index.ce393ff1.js";import{a as T,Q as s}from"./QItem.9e8d4258.js";import{Q}from"./QItemLabel.282235e0.js";import{Q as ce}from"./QTooltip.23344570.js";import{u as M}from"./use-quasar.07837a23.js";import{a as V,b as de}from"./axios.87a00e20.js";import{a as q,n as B,b as se,i as fe}from"./myFuncts.6448126e.js";import{_ as me}from"./BtnDelete.1cbcef2c.js";import{_ as ge}from"./plugin-vue_export-helper.21dcd24c.js";const ke=["top","middle","bottom"];var E=Y({name:"QBadge",props:{color:String,textColor:String,floating:Boolean,transparent:Boolean,multiLine:Boolean,outline:Boolean,rounded:Boolean,label:[Number,String],align:{type:String,validator:e=>ke.includes(e)}},setup(e,{slots:A}){const C=U(()=>e.align!==void 0?{verticalAlign:e.align}:null),d=U(()=>{const r=e.outline===!0&&e.color||e.textColor;return`q-badge flex inline items-center no-wrap q-badge--${e.multiLine===!0?"multi":"single"}-line`+(e.outline===!0?" q-badge--outline":e.color!==void 0?` bg-${e.color}`:"")+(r!==void 0?` text-${r}`:"")+(e.floating===!0?" q-badge--floating":"")+(e.rounded===!0?" q-badge--rounded":"")+(e.transparent===!0?" q-badge--transparent":"")});return()=>Z("div",{class:d.value,style:C.value,role:"status","aria-label":e.label},ee(A.default,e.label!==void 0?[e.label]:[]))}});const ye={__name:"DialogConfirm",props:{color:y({}),label:y({}),message:y({}),title:y({})},emits:["onOk","Cancel","Dismiss"],setup(e,{emit:A}){const C=M(),d=A;function r(S,v){C.dialog({title:v,message:S,cancel:!0,persistent:!0,html:!0,dark:!0}).onOk(()=>{}).onOk(()=>{d("onOk")}).onCancel(()=>{d("Cancel")}).onDismiss(()=>{d("Dismiss")})}return(S,v)=>(i(),k(te,{label:e.label,color:e.color,onClick:v[0]||(v[0]=N=>r(e.message,e.title))},null,8,["label","color"]))}};class ve{static getMapUrl(A){return`https://yandex.ru/maps/org/${A}`}}const he={class:"delBtnArea"},be={class:"mapLink"},Ae=["innerHTML"],xe=["innerHTML"],we={__name:"AnnounceCard",props:{Announce:y(!1),pwUrl:String,compact:{type:Boolean,required:!1,default:!1}},emits:["newAnnounce","IamDeleted","changeShow","delSketch"],setup(e,{expose:A,emit:C}){const d=String("https://api.sakh-orch.ru/"),r=M();ne(),ae();const S=le("editMode"),v=C,N=y(2316559),O=y(null);function H(){return`https://radario.ru/buy-tickets/${N.value}`}A({saveData:z});const R=y(["","","\u0412\u0445\u043E\u0434 \u0441\u0432\u043E\u0431\u043E\u0434\u043D\u044B\u0439","\u0411\u0438\u043B\u0435\u0442\u044B \u0432 \u043F\u0440\u043E\u0434\u0430\u0436\u0435","\u0412\u0445\u043E\u0434 \u043F\u043E \u043F\u0440\u0438\u0433\u043B\u0430\u0441\u0438\u0442\u0435\u043B\u044C\u043D\u044B\u043C","\u041F\u0440\u043E\u0434\u0430\u0436\u0430 \u0437\u0430\u0432\u0435\u0440\u0448\u0435\u043D\u0430"]),o=e,h=y(o.Announce);function F(){if(o.pwUrl)return o.pwUrl;let a=r.platform.is.mobile?1080:480;return o.Announce.sketch?fe(d,o.Announce.sketch.md5,o.Announce.sketch.ext,a):"error.err"}function z(){V.post(d+"api/event/announce.php",{params:{method:"update",announce:o.Announce}}).then(a=>{var t,u;r.notify(q((u=(t=a==null?void 0:a.data)==null?void 0:t.result)!=null?u:""))}).catch(a=>{r.notify(B(a))})}function j(){V.post(d+"api/event/announce.php",{params:{method:"del",id:o.Announce.id}}).then(a=>{var t,u,f;if(!((t=a==null?void 0:a.data)!=null&&t.result))throw new Error;r.notify(q((f=(u=a==null?void 0:a.data)==null?void 0:u.result)!=null?f:null)),v("IamDeleted")}).catch(a=>{r.notify(B(a))})}function G(){V.post(d+"api/event/announce.php",{params:{method:h.value.isShow?"show":"hide",announceId:h.value.id}}).then(a=>{var t;if(!((t=a==null?void 0:a.data)!=null&&t.result))throw new Error;v("changeShow",h.value.id)}).catch(a=>{r.notify(B(a)),h.value.isShow=!h.value.isShow}).finally(()=>{})}function J(){return o.Announce.pay?o.Announce.pay===3&&o.Announce.completed?"\u041F\u0440\u043E\u0434\u0430\u0436\u0430 \u0437\u0430\u0432\u0435\u0440\u0448\u0435\u043D\u0430":R.value[o.Announce.pay]:""}function K(){V.post(d+"api/event/sketch.php",{params:{method:"unlink",id:o.Announce.id}}).then(a=>{var t,u,f;if(!((t=a==null?void 0:a.data)!=null&&t.result))throw new Error;v("delSketch",o.Announce.id),r.notify(q((f=(u=a==null?void 0:a.data)==null?void 0:u.result)!=null?f:""))}).catch(a=>{r.notify(B(a))})}function P(){de.create().get(H(),{params:{distributionType:"api",skipEventsInGroup:!0}}).then(t=>{var u;(u=t==null?void 0:t.data)!=null&&u.result,O.value=t.data.event.ticketCount}).catch(t=>{r.notify(B(t))})}function W(){var u;const a=o.Announce.Hall.suggest,t=(u=a==null?void 0:a.oid)!=null?u:0;return ve.getMapUrl(t)}return oe(()=>{o.Announce.completed===!1&&P()}),(a,t)=>{const u=ue("router-link");return e.Announce&&(e.Announce.isShow||I(S))?(i(),k(ie,{key:0,square:"",class:"eventbox tdno",separator:""},{default:l(()=>[n(u,{to:"/announce/"+e.Announce.id},{default:l(()=>[b("div",he,[I(S)&&!e.pwUrl?(i(),k(me,{key:0,title:"\u0423\u0434\u0430\u043B\u0438\u0442\u044C \u044D\u0441\u043A\u0438\u0437",tooltip:"\u0423\u0434\u0430\u043B\u0438\u0442\u044C \u044D\u0441\u043A\u0438\u0437","throw-confirm":"",onOnOk:t[0]||(t[0]=f=>K())})):c("",!0)]),n(X,{ratio:16/9,src:F(),fit:"fill"},{error:l(()=>t[3]||(t[3]=[b("img",{src:"/img/news/default_sketch.svg"},null,-1)])),_:1},8,["src"])]),_:1},8,["to"]),n(g,{color:"info","expand-separator":""},{default:l(()=>[e.Announce.completed===!1?(i(),k(E,{key:0,class:"absolute bage",color:"green-6",rounded:"",transparent:""},{default:l(()=>t[4]||(t[4]=[m(" \u0421\u043A\u043E\u0440\u043E ")])),_:1})):c("",!0),e.Announce.age?(i(),k(E,{key:1,rounded:"",style:{"background-color":"orange"},floating:""},{default:l(()=>[m(D(e.Announce.age+"+"),1)]),_:1})):c("",!0),$((i(),k(T,{dense:""},{default:l(()=>[n(s,{avatar:""},{default:l(()=>[n(p,{name:"schedule"})]),_:1}),n(s,null,{default:l(()=>[n(Q,{caption:""},{default:l(()=>[m(D(I(se)(h.value.eventTime)),1)]),_:1})]),_:1})]),_:1})),[[L]]),$((i(),k(T,{clickable:"",href:W(),target:"_blank",dense:""},{default:l(()=>[n(s,{avatar:""},{default:l(()=>[n(p,{name:"place"})]),_:1}),n(s,null,{default:l(()=>[n(Q,{caption:""},{default:l(()=>[b("span",be,D(e.Announce.Hall.name),1)]),_:1})]),_:1})]),_:1},8,["href"])),[[L]])]),_:1}),e.compact?c("",!0):(i(),x(w,{key:0},[n(_,{inset:""}),n(g,null,{default:l(()=>[b("div",{class:"text-subtitle1 text-center prog-name",innerHTML:e.Announce.progName},null,8,Ae)]),_:1}),n(g,{class:"text-body2 text-center"},{default:l(()=>[b("div",{innerHTML:e.Announce.sdescr},null,8,xe)]),_:1}),n(g,{class:"space"},{default:l(()=>t[5]||(t[5]=[b("div",null,null,-1)])),_:1}),n(_,{inset:""}),e.Announce.youtubeId?(i(),k(g,{key:0},{default:l(()=>[$((i(),k(T,{clickable:"",href:"https://www.youtube.com/watch?v="+e.Announce.youtubeId,target:"_blank"},{default:l(()=>[n(s,{avatar:""},{default:l(()=>[n(p,{name:"ion-logo-youtube"})]),_:1}),n(s,null,{default:l(()=>[n(Q,{caption:""},{default:l(()=>t[6]||(t[6]=[b("span",{class:"mapLink"},"\u0421\u043C\u043E\u0442\u0440\u0435\u0442\u044C \u0432\u0438\u0434\u0435\u043E",-1)])),_:1})]),_:1})]),_:1},8,["href"])),[[L]])]),_:1})):c("",!0),e.Announce.pay?(i(),x(w,{key:1},[n(_,{inset:""}),n(g,{class:"text-body2 text-center"},{default:l(()=>[[3,4].includes(e.Announce.pay)&&!e.Announce.completed&&e.Announce.ticketLink?(i(),x(w,{key:0},[c("",!0),n(T,{clickable:"",href:e.Announce.ticketLink,target:"_blank",dense:"",style:{"text-align":"left"}},{default:l(()=>[e.Announce.pay===4?(i(),x(w,{key:0},[n(s,{avatar:""},{default:l(()=>[n(p,{name:"img:/img/uds.svg"})]),_:1}),n(s,null,{default:l(()=>[n(Q,null,{default:l(()=>t[7]||(t[7]=[m("\u041F\u043E\u043B\u0443\u0447\u0438\u0442\u044C \u043F\u0440\u0438\u0433\u043B\u0430\u0441\u0438\u0442\u0435\u043B\u044C\u043D\u044B\u0439")])),_:1})]),_:1})],64)):c("",!0),e.Announce.pay===3?(i(),x(w,{key:1},[n(s,{avatar:""},{default:l(()=>[n(p,{name:"shopping_cart"})]),_:1}),n(s,null,{default:l(()=>[n(Q,null,{default:l(()=>t[8]||(t[8]=[m("\u041A\u0443\u043F\u0438\u0442\u044C \u0431\u0438\u043B\u0435\u0442")])),_:1}),c("",!0)]),_:1})],64)):c("",!0)]),_:1},8,["href"])],64)):(i(),x(w,{key:1},[m(D(J()),1)],64))]),_:1})],64)):c("",!0),n(_,{inset:""}),n(g,{class:"text-body2 text-center"},{default:l(()=>t[10]||(t[10]=[m(" \u0425\u0443\u0434\u043E\u0436\u0435\u0441\u0442\u0432\u0435\u043D\u043D\u044B\u0439 \u0440\u0443\u043A\u043E\u0432\u043E\u0434\u0438\u0442\u0435\u043B\u044C \u0438 \u0433\u043B\u0430\u0432\u043D\u044B\u0439 \u0434\u0438\u0440\u0438\u0436\u0435\u0440 - "),b("b",null,"\u0422\u0438\u0433\u0440\u0430\u043D \u0410\u0445\u043D\u0430\u0437\u0430\u0440\u044F\u043D",-1),m(". ")])),_:1}),I(S)?(i(),x(w,{key:2},[n(g,null,{default:l(()=>[n(re,{modelValue:h.value.isShow,"onUpdate:modelValue":[t[1]||(t[1]=f=>h.value.isShow=f),t[2]||(t[2]=f=>G())],label:"\u0432\u043A\u043B",color:"green","checked-icon":"check","unchecked-icon":"clear"},{default:l(()=>[n(ce,null,{default:l(()=>t[11]||(t[11]=[m("\u041E\u043F\u0443\u0431\u043B\u0438\u043A\u043E\u0432\u0430\u0442\u044C")])),_:1})]),_:1},8,["modelValue"])]),_:1}),n(g,null,{default:l(()=>[n(ye,{onOnOk:j,label:"\u0423\u0434\u0430\u043B\u0438\u0442\u044C",color:"red",title:"\u0423\u0434\u0430\u043B\u0435\u043D\u0438\u0435 \u0430\u043D\u043E\u043D\u0441\u0430",message:`
          \u0411\u0443\u0434\u0435\u0442 \u0443\u0434\u0430\u043B\u0435\u043D\u0430 \u0437\u0430\u043F\u0438\u0441\u044C \u043E\u0431 \u0430\u043D\u043E\u043D\u0441\u0435 \u0438 \u0441\u0432\u044F\u0437\u0430\u043D\u043D\u044B\u0435 \u0441 \u043D\u0435\u0439 \u0438\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u044F.
          <br><span style='color: red'>
          \u042D\u0442\u043E \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0435 \u043D\u0435\u043B\u044C\u0437\u044F \u043E\u0442\u043C\u0435\u043D\u0438\u0442\u044C.</span><br>
          \u0412\u044B \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0442\u0435\u043B\u044C\u043D\u043E \u0445\u043E\u0442\u0438\u0442\u0435 \u044D\u0442\u043E \u0441\u0434\u0435\u043B\u0430\u0442\u044C?`})]),_:1})],64)):c("",!0)],64))]),_:1})):c("",!0)}}};var Le=ge(we,[["__scopeId","data-v-7f587cc3"]]);export{Le as A};
