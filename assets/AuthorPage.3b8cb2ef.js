import{H as C,G as V,i as k,r as P,I as S,c as N,o as B,m as u,n,p as o,f as e,ax as R,u as a,v as T,bi as g,x as f,z as h,bh as $,l as _,B as z,bm as E,q as M,t as w,y as U}from"./index.bc11f4d7.js";import{Q as W}from"./QItemLabel.6f822438.js";import{b as q,Q as b}from"./QImg.448eb956.js";import{P as D}from"./PageShell.60dd4b3f.js";import{S as L}from"./SelectComposer.8a81a980.js";import{P as O}from"./LocalStorage.a31f8fd7.js";import{u as j,e as G}from"./myFuncts.d4b02984.js";import"./axios.63d2f48d.js";import"./myAuth.8de88893.js";import{_ as H}from"./BtnDelete.307e8830.js";import{A as t}from"./lib.8923d048.js";import{_ as F}from"./plugin-vue_export-helper.21dcd24c.js";import"./MainFooter.vue_vue_type_style_index_0_scoped_true_lang.c49da512.js";import"./touch.9135741d.js";import"./selection.295e94e6.js";import"./QScrollArea.0b5361ec.js";import"./format.de7e9769.js";import"./QLinearProgress.1a146b15.js";/* empty css                                                    */import"./QSelect.8d95d6c1.js";import"./QMenu.9b09f739.js";import"./position-engine.6616cb3e.js";import"./use-virtual-scroll.18864eed.js";import"./rtl.276c3f1b.js";import"./AuthorItem.d222a757.js";import"./myAxios.f72ca8da.js";import"./QTooltip.dcd6f58a.js";const J={class:"centralCol"},K={__name:"AuthorPage",setup(X){const i=j(),d=C(),y=V(),m=k("editMode"),A=P(null);S("searchText",A);const s=k("selectedAuthorId");function Q(l){s.value=l.id,O.set("lastAuthor",l.id),d.params.id=l.id,y.push({path:"/lib/author/"+l.id}),c()}async function c(){!s.value||(t.selected.value=await t.get(i,s.value))}const v=N(()=>{const{wikiIdRu:l,wikiIdEn:r}=t.selected.value;return l?`https://ru.wikipedia.org/?curid=${l}`:r?`https://en.wikipedia.org/?curid=${r}`:""});async function I(){await t.update(i,t.selected.value)&&await c()}function x(){t.del(i,d.params.id)}return B(()=>{s.value=d.params.id*1,c()}),(l,r)=>(u(),n(D,{"page-title":"\u041A\u043E\u043C\u043F\u043E\u0437\u0438\u0442\u043E\u0440 "},{ToolPanel:o(()=>[e(L,{onItSel:Q})]),PageContent:o(()=>[R("div",J,[a(t).selected.value?(u(),n(T,{key:0},{default:o(()=>[e(f,null,{default:o(()=>[e(g,{modelValue:a(t).selected.value.fioRu,"onUpdate:modelValue":r[0]||(r[0]=p=>a(t).selected.value.fioRu=p),readonly:!a(m),label:"\u0424\u0430\u043C\u0438\u043B\u0438\u044F, \u0418\u043C\u044F \u041E\u0442\u0447\u0435\u0441\u0442\u0432\u043E"},null,8,["modelValue","readonly"]),e(g,{modelValue:a(t).selected.value.iofEn,"onUpdate:modelValue":r[1]||(r[1]=p=>a(t).selected.value.iofEn=p),readonly:!a(m),label:"Name LastName"},null,8,["modelValue","readonly"])]),_:1}),e(f,null,{default:o(()=>[v.value?(u(),n(h,{key:0,icon:"img:https://upload.wikimedia.org/wikipedia/commons/f/f6/Wikipedia-logo-v2-wordmark.svg",size:"6em",class:$(a(i).dark.isActive?"invert":void 0),href:v.value,target:"_blank"},null,8,["class","href"])):_("",!0)]),_:1}),e(z),a(m)?(u(),n(E,{key:0,align:"right"},{default:o(()=>[e(h,{label:"\u0421\u043E\u0445\u0440\u0430\u043D\u0438\u0442\u044C",color:"green",onClick:I}),e(H,{label:"\u0423\u0434\u0430\u043B\u0438\u0442\u044C",title:"\u0423\u0434\u0430\u043B\u0438\u0442\u044C \u043A\u043E\u043C\u043F\u043E\u0437\u0438\u0442\u043E\u0440\u0430","throw-confirm":"",danger:"",onOnOk:x,tooltip:"\u0423\u0434\u0430\u043B\u0438\u0442\u044C \u043A\u043E\u043C\u043F\u043E\u0437\u0438\u0442\u043E\u0440\u0430"})]),_:1})):_("",!0),e(f,null,{default:o(()=>[e(q,{clickable:"",to:`/lib/works/${a(t).selected.value.id}`},{default:o(()=>[e(b,null,{default:o(()=>[e(W,null,{default:o(()=>[M(w(a(t).selected.value.cntWorks)+" "+w(a(G)(a(t).selected.value.cntWorks,["\u043F\u0440\u043E\u0438\u0437\u0432\u0435\u0434\u0435\u043D\u0438\u0435","\u043F\u0440\u043E\u0438\u0437\u0432\u0435\u0434\u0435\u043D\u0438\u044F","\u043F\u0440\u043E\u0438\u0437\u0432\u0435\u0434\u0435\u043D\u0438\u0439"])),1)]),_:1})]),_:1}),e(b,{side:""},{default:o(()=>[e(U,{name:"open_in_new"})]),_:1})]),_:1},8,["to"])]),_:1})]),_:1})):_("",!0)])]),_:1}))}};var Ie=F(K,[["__scopeId","data-v-00f52a92"]]);export{Ie as default};
