import{a as V,Q as w}from"./QImg.9acd5dae.js";import{H as C,r as _,i as p,w as I,o as A,m as N,n as b,aY as k,v as a,q as r,f as n,Q as y,cq as L,t as R,u as E,l as P,b as U}from"./index.7551532c.js";import{Q as B}from"./QItemLabel.b098b72c.js";import{Q as D}from"./QSelect.0a2c364d.js";import{A as T}from"./AuthorItem.6ba73463.js";/* empty css                                                                   */import{_ as q}from"./plugin-vue_export-helper.21dcd24c.js";const z={__name:"SelectComposer",emits:["itSel"],setup(F,{emit:h}){const g=C(),Q=_(),u=p("AuthorSelectList"),c=_([...u.value]),S=h,f=p("selectedAuthorId"),m=p("selectedAuthor"),l=p("loadingAuthors");function x(d,t,e){t(()=>{if(!d){c.value=[...u.value];return}const s=d.toLowerCase();let i=[...u.value];d&&(i=i.filter(o=>(o.fioRu?o.fioRu.toLowerCase().includes(s):!1)||(o.iofEn?o.iofEn.toLowerCase().includes(s):!1))),c.value=i})}return I(l,()=>{l.value||(c.value=[...u.value],console.log("loadingAuthors",l.value))}),A(()=>{}),(d,t)=>(N(),b(D,{options:c.value,ref_key:"refSelect",ref:Q,modelValue:a(f),"onUpdate:modelValue":[t[1]||(t[1]=e=>U(f)?f.value=e:null),t[2]||(t[2]=e=>S("itSel"))],"option-label":"fioRu","option-value":"id","map-options":"","emit-value":"","use-input":!a(l),"hide-selected":"","fill-input":"",autocomplete:"off","input-debounce":"0",onFilter:x,clearable:"",style:{width:"100%"},label:"\u041A\u043E\u043C\u043F\u043E\u0437\u0438\u0442\u043E\u0440",loading:a(l)},k({option:r(e=>{var s,i,o,v;return[n(T,L(e.itemProps,{id:(s=e.opt)==null?void 0:s.id,iofEn:(i=e.opt)==null?void 0:i.iofEn,iconUrl:(o=e.opt)==null?void 0:o.iconUrl,fioRu:(v=e.opt)==null?void 0:v.fioRu}),{sections:r(()=>[n(w,{side:""},{default:r(()=>[n(B,{caption:""},{default:r(()=>[R(E(e.opt.cntWorks),1)]),_:2},1024)]),_:2},1024)]),_:2},1040,["id","iofEn","iconUrl","fioRu"]),P("",!0)]}),_:2},[a(m)?{name:"prepend",fn:r(()=>[n(y,null,{default:r(()=>[n(V,{src:a(m).iconUrl,class:"authorAva",eager:"","no-spinner":"","no-transition":"","placeholder-src":"/img/avatars/init_ava.png",style:{width:"50px",cursor:"pointer"},onClick:t[0]||(t[0]=()=>a(g).push({path:"/lib/author/"+a(m).id}))},null,8,["src"])]),_:1})]),key:"0"}:void 0]),1032,["options","modelValue","use-input","loading"]))}};var O=q(z,[["__scopeId","data-v-3a61243a"]]);export{O as S};
