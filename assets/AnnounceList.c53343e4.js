import{u as g}from"./jwt-decode.esm.a17afbe5.js";import{api as A}from"./axios.73a146c0.js";import{A as w}from"./AnnounceCard.4ee94449.js";import{r as k,u as y,aU as L,i as o,a as C,w as F,m as S,e as c,f as T,as as B,F as I,h as Y,H as _}from"./index.4c9b99a1.js";import{n as x}from"./myFuncts.ea11ec4a.js";const U={__name:"AnnounceList",props:{method:String,evYear:Number,sort:k({})},setup(i){const m=String("https://api.sakh-orch.ru/"),l=g();y(),L(),o("editMode");const u=o("progress"),p=o("compactCard"),a=o("announceList");o("Halls");const r=i;function s(){u.value=!0,A.post(m+"api/event/announce.php",{params:{method:r.method,year:r.evYear}}).then(e=>{var t,n;a.value=(n=(t=e==null?void 0:e.data)==null?void 0:t.data)!=null?n:[]}).catch(e=>{l.notify(x(e)),a.value=[]}).finally(()=>{u.value=!1})}function D(e){}C(()=>{s()}),F(()=>r.evYear,()=>{s()});const d=(e,t)=>e.eventTime<t.eventTime?1:-1,v=(e,t)=>e.eventTime>t.eventTime?1:-1,f=S(()=>{if(!a.value||!a.value.length)return[];switch(r.sort){case"dateDesc":return[...a.value].sort(d);case"dateAsc":return[...a.value].sort(v);default:return a.value}});return(e,t)=>(c(!0),T(I,null,B(f.value,n=>(c(),Y(w,{key:n.id,Announce:n,onIamDeleted:t[0]||(t[0]=h=>s()),onChangeShow:t[1]||(t[1]=h=>void 0),compact:_(p)},null,8,["Announce","compact"]))),128))}};export{U as _};
