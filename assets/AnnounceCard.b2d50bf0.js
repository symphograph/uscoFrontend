import{Q as j}from"./QImg.4ded629f.js";import{c as J,h as q,p as K,ac as G,r as g,z as o,D as c,N as $,i as k,S as W,aR as X,V as Y,y,C as a,aU as Z,I as v,_ as ee,B as t,E as d,J as D,m as C,a3 as Q,H as m,aV as s,a1 as _,A as S,F as w,K as te,R as I,O as ae,P as ne}from"./index.b9c3de56.js";import{Q as T,a as h,b as V}from"./QItem.17ed31da.js";import{Q as oe}from"./QTooltip.f7958ea6.js";import{u as P}from"./use-quasar.31d66723.js";import{api as M}from"./axios.512df4e1.js";import{a as le}from"./myFuncts.b846463d.js";const re=["top","middle","bottom"];var N=J({name:"QBadge",props:{color:String,textColor:String,floating:Boolean,transparent:Boolean,multiLine:Boolean,outline:Boolean,rounded:Boolean,label:[Number,String],align:{type:String,validator:e=>re.includes(e)}},setup(e,{slots:f}){const p=q(()=>e.align!==void 0?{verticalAlign:e.align}:null),n=q(()=>{const u=e.outline===!0&&e.color||e.textColor;return`q-badge flex inline items-center no-wrap q-badge--${e.multiLine===!0?"multi":"single"}-line`+(e.outline===!0?" q-badge--outline":e.color!==void 0?` bg-${e.color}`:"")+(u!==void 0?` text-${u}`:"")+(e.floating===!0?" q-badge--floating":"")+(e.rounded===!0?" q-badge--rounded":"")+(e.transparent===!0?" q-badge--transparent":"")});return()=>K("div",{class:n.value,style:p.value,role:"status","aria-label":e.label},G(f.default,e.label!==void 0?[e.label]:[]))}});const ie={__name:"DialogConfirm",props:{color:g({}),label:g({}),message:g({}),title:g({})},emits:["onOk","Cancel","Dismiss"],setup(e,{emit:f}){const p=P();function n(u,l){p.dialog({title:l,message:u,cancel:!0,persistent:!0,html:!0}).onOk(()=>{}).onOk(()=>{f("onOk")}).onCancel(()=>{f("Cancel")}).onDismiss(()=>{f("Dismiss")})}return(u,l)=>(o(),c($,{label:e.label,color:e.color,onClick:l[0]||(l[0]=x=>n(e.message,e.title))},null,8,["label","color"]))}};const L=e=>(ae("data-v-39dad930"),e=e(),ne(),e),se=["href"],ce={class:"mapLink"},ue=["innerHTML"],de=["innerHTML"],me=L(()=>m("div",null,null,-1)),fe=["href"],ve=L(()=>m("span",{class:"mapLink"},"\u0421\u043C\u043E\u0442\u0440\u0435\u0442\u044C \u0432\u0438\u0434\u0435\u043E",-1)),ge=L(()=>m("b",null,"\u0422\u0438\u0433\u0440\u0430\u043D \u0410\u0445\u043D\u0430\u0437\u0430\u0440\u044F\u043D",-1)),be={__name:"AnnounceCard",props:{evData:g(!1)},emits:["newAnnounce","IamDeleted","changeShow"],setup(e,{expose:f,emit:p}){const n=e,u=String("https://api.sakh-orch.ru/"),l=P(),x=k("token");k("lvl"),W(),X();const A=k("editMode");f({saveData:H});const R=g(["","","\u0412\u0445\u043E\u0434 \u0441\u0432\u043E\u0431\u043E\u0434\u043D\u044B\u0439","\u0411\u0438\u043B\u0435\u0442\u044B \u0432 \u043F\u0440\u043E\u0434\u0430\u0436\u0435","\u0412\u0445\u043E\u0434 \u043F\u043E \u043F\u0440\u0438\u0433\u043B\u0430\u0441\u0438\u0442\u0435\u043B\u044C\u043D\u044B\u043C","\u041F\u0440\u043E\u0434\u0430\u0436\u0430 \u0437\u0430\u0432\u0435\u0440\u0448\u0435\u043D\u0430"]),B=g(n.evData),O=k("Halls"),U=q(()=>{let r=480;return l.platform.is.mobile&&(r=1080),String("https://api.sakh-orch.ru/")+n.evData.TopPoster.folder+"/"+r+"/"+n.evData.TopPoster.fileName+"?ver="+n.evData.TopPoster.md5});function H(){M.post(u+"api/set/announce/announce.php",{params:{evdata:n.evData,token:x.value}}).then(r=>{if(r.data.result)return l.notify({type:"positive",position:"center",message:"\u0413\u043E\u0442\u043E\u0432\u043E",timeout:300,closeBtn:"\u041E\u043A"}),!0;let i="\u041E\u0439! \u041A\u0430\u043A\u0430\u044F \u0434\u043E\u0441\u0430\u0434\u0430!";r.data.error&&(i=r.data.error),l.notify({color:"negative",position:"center",message:i,icon:"report_problem",timeout:300,closeBtn:"\u0417\u0430\u043A\u0440\u044B\u0442\u044C"})}).catch(()=>{l.notify({color:"negative",position:"center",message:"\u0421\u0435\u0440\u0432\u0435\u0440 \u043D\u0435 \u043E\u0442\u0432\u0435\u0447\u0430\u0435\u0442",icon:"report_problem",closeBtn:"\u0417\u0430\u043A\u0440\u044B\u0442\u044C"})})}function E(){M.post(u+"api/set/announces/delannounce.php",{params:{id:n.evData.ev_id,token:x.value}}).then(r=>{if(r.data.result==="Ok")return l.notify({timeout:100,color:"positive",position:"center",message:"\u0413\u043E\u0442\u043E\u0432\u043E",closeBtn:"\u0417\u0430\u043A\u0440\u044B\u0442\u044C"}),p("IamDeleted"),!0;let i="\u041E\u0439! \u041A\u0430\u043A\u0430\u044F \u0434\u043E\u0441\u0430\u0434\u0430!";r.data.error&&(i=r.data.error),l.notify({color:"negative",position:"center",message:i,icon:"report_problem",closeBtn:"\u0417\u0430\u043A\u0440\u044B\u0442\u044C"})}).catch(()=>{l.notify({color:"negative",position:"center",message:"\u0421\u0435\u0440\u0432\u0435\u0440 \u043D\u0435 \u043E\u0442\u0432\u0435\u0447\u0430\u0435\u0442",icon:"report_problem"})})}function z(){return n.evData.pay?n.evData.pay===3&&n.evData.complited?"\u041F\u0440\u043E\u0434\u0430\u0436\u0430 \u0437\u0430\u0432\u0435\u0440\u0448\u0435\u043D\u0430":R.value[n.evData.pay]:""}return(r,i)=>{const F=Y("router-link");return e.evData&&(e.evData.show||y(A))?(o(),c(Z,{key:0,square:"",class:"eventbox tdno",separator:""},{default:a(()=>[t(F,{to:"/announce/"+e.evData.ev_id},{default:a(()=>[t(j,{ratio:270/171,src:y(U)},null,8,["src"])]),_:1},8,["to"]),t(s,{color:"info","expand-separator":""},{default:a(()=>[e.evData.complited===!1?(o(),c(N,{key:0,class:"absolute bage",color:"green-6",rounded:"",transparent:""},{default:a(()=>[d(" \u0421\u043A\u043E\u0440\u043E ")]),_:1})):v("",!0),e.evData.age?(o(),c(N,{key:1,rounded:"",style:{"background-color":"orange"},floating:""},{default:a(()=>[d(D(e.evData.age+"+"),1)]),_:1})):v("",!0),C((o(),c(T,null,{default:a(()=>[t(h,{avatar:""},{default:a(()=>[t(Q,{name:"schedule"})]),_:1}),t(h,null,{default:a(()=>[t(V,{caption:""},{default:a(()=>[d(D(y(le)(e.evData.datetime)),1)]),_:1})]),_:1})]),_:1})),[[I]]),m("a",{href:y(O).find(b=>b.id===e.evData.hall_id).map,target:"_blank"},[C((o(),c(T,{clickable:""},{default:a(()=>[t(h,{avatar:""},{default:a(()=>[t(Q,{color:"primary",name:"place"})]),_:1}),t(h,null,{default:a(()=>[t(V,{caption:""},{default:a(()=>[m("span",ce,D(y(O).find(b=>b.id===e.evData.hall_id).name),1)]),_:1})]),_:1})]),_:1})),[[I]])],8,se)]),_:1}),t(_,{inset:""}),t(s,null,{default:a(()=>[m("div",{class:"text-subtitle1 text-center prog-name",innerHTML:e.evData.prog_name},null,8,ue)]),_:1}),t(s,{class:"text-body2 text-center"},{default:a(()=>[m("div",{innerHTML:e.evData.sdescr},null,8,de)]),_:1}),t(s,{class:"space"},{default:a(()=>[me]),_:1}),t(_,{inset:""}),e.evData.youtube_id?(o(),c(s,{key:0},{default:a(()=>[m("a",{href:"https://www.youtube.com/watch?v="+e.evData.youtube_id,target:"_blank"},[C((o(),c(T,{clickable:""},{default:a(()=>[t(h,{avatar:""},{default:a(()=>[t(Q,{color:"primary",name:"ion-logo-youtube"})]),_:1}),t(h,null,{default:a(()=>[t(V,{caption:""},{default:a(()=>[ve]),_:1})]),_:1})]),_:1})),[[I]])],8,fe)]),_:1})):v("",!0),e.evData.pay?(o(),S(w,{key:1},[t(_,{inset:""}),t(s,{class:"text-body2 text-center"},{default:a(()=>[e.evData.pay===3&&!e.evData.complited&&e.evData.ticket_link?(o(),c($,{key:0,label:"\u041A\u0443\u043F\u0438\u0442\u044C \u0431\u0438\u043B\u0435\u0442",href:e.evData.ticket_link},null,8,["href"])):(o(),S(w,{key:1},[d(D(z()),1)],64))]),_:1})],64)):v("",!0),t(_,{inset:""}),t(s,{class:"text-body2 text-center"},{default:a(()=>[d(" \u0425\u0443\u0434\u043E\u0436\u0435\u0441\u0442\u0432\u0435\u043D\u043D\u044B\u0439 \u0440\u0443\u043A\u043E\u0432\u043E\u0434\u0438\u0442\u0435\u043B\u044C \u0438 \u0433\u043B\u0430\u0432\u043D\u044B\u0439 \u0434\u0438\u0440\u0438\u0436\u0435\u0440 - "),ge,d(". ")]),_:1}),y(A)?(o(),S(w,{key:2},[B.value.Poster.exist?v("",!0):(o(),c(s,{key:0,class:"text-body2 text-center danger"},{default:a(()=>[d(" \u0410\u0444\u0438\u0448\u0430 \u043D\u0435 \u0437\u0430\u0433\u0440\u0443\u0436\u0435\u043D\u0430 ")]),_:1})),t(s,null,{default:a(()=>[t(te,{modelValue:B.value.show,"onUpdate:modelValue":[i[0]||(i[0]=b=>B.value.show=b),i[1]||(i[1]=b=>H(0))],label:"\u0432\u043A\u043B",color:"green","checked-icon":"check","unchecked-icon":"clear"},{default:a(()=>[t(oe,null,{default:a(()=>[d("\u041E\u043F\u0443\u0431\u043B\u0438\u043A\u043E\u0432\u0430\u0442\u044C")]),_:1})]),_:1},8,["modelValue"])]),_:1}),t(s,null,{default:a(()=>[t(ie,{onOnOk:E,label:"\u0423\u0434\u0430\u043B\u0438\u0442\u044C",color:"red",title:"\u0423\u0434\u0430\u043B\u0435\u043D\u0438\u0435 \u0430\u043D\u043E\u043D\u0441\u0430",message:`
          \u0411\u0443\u0434\u0435\u0442 \u0443\u0434\u0430\u043B\u0435\u043D\u0430 \u0437\u0430\u043F\u0438\u0441\u044C \u043E\u0431 \u0430\u043D\u043E\u043D\u0441\u0435 \u0438 \u0441\u0432\u044F\u0437\u0430\u043D\u043D\u044B\u0435 \u0441 \u043D\u0435\u0439 \u0438\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u044F.
          <br><span style='color: red'>
          \u042D\u0442\u043E \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0435 \u043D\u0435\u043B\u044C\u0437\u044F \u043E\u0442\u043C\u0435\u043D\u0438\u0442\u044C.</span><br>
          \u0412\u044B \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0442\u0435\u043B\u044C\u043D\u043E \u0445\u043E\u0442\u0438\u0442\u0435 \u044D\u0442\u043E \u0441\u0434\u0435\u043B\u0430\u0442\u044C?`})]),_:1})],64)):v("",!0)]),_:1})):v("",!0)}}};var Be=ee(be,[["__scopeId","data-v-39dad930"]]);export{Be as A};
