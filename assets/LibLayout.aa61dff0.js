import{n as s}from"./myFuncts.eda7a4d2.js";import{a as h}from"./axios.ad5085a6.js";import{u as m}from"./use-quasar.2b1b4907.js";import{r as u,p as e,w as v,k as A,J as y,m as b,n as L}from"./index.bd97e9c1.js";const B={__name:"LibLayout",setup(g){const c=String("https://api.staff.sakh-orch.ru/"),d=m(),f=u(!1);e("libEditMode",f);const l=u([]);e("AuthorSelectList",l);const n=u(!1);e("loadingAuthors",n);const r=u(0);e("selectedAuthorId",r);const i=u(null);e("selectedAuthor",i),v(r,()=>{i.value=l.value.find(t=>t.id===r.value)});function p(){n.value=!0,h.post(c+"/api/lib/author.php",{params:{method:"all"}}).then(t=>{var o,a;l.value=(a=(o=t==null?void 0:t.data)==null?void 0:o.data)!=null?a:[]}).catch(t=>{l.value=[],d.notify(s(t))}).finally(()=>{n.value=!1})}function _(){h.post(c+"/api/lib/author.php",{params:{method:"get",id:r.value}}).then(t=>{var o,a;i.value=(a=(o=t==null?void 0:t.data)==null?void 0:o.data)!=null?a:void 0}).catch(t=>{i.value=void 0,d.notify(s(t))})}return e("loadAuthor",_),A(()=>{p()}),(t,o)=>{const a=y("router-view");return b(),L(a)}}};export{B as default};
