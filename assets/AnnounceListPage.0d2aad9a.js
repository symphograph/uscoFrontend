import{Q as B}from"./QToolbarTitle.a3293233.js";import{Q as V}from"./QToolbar.246d14da.js";import{Q as D}from"./QSpace.b4e0a77c.js";import{i as y,m as c,n as b,q as o,f as t,b3 as F,b4 as I,v as f,a1 as _,C as d,b as M,u as N,G as R,r as m,p,A as $,a7 as g,b0 as q,l as k,F as E,x as C}from"./index.7ddf54de.js";import{Q as w}from"./QSelect.ce6ecb16.js";import{Q as U}from"./QTooltip.79185bb0.js";import{Q as z}from"./QLinearProgress.f77bc0a4.js";import{_ as j}from"./AnnounceList.dcf48ac0.js";import{u as G}from"./use-quasar.bae2301b.js";import{u as K}from"./use-meta.34b46143.js";import{api as O}from"./axios.a22f84a8.js";import{g as H,a as J,n as W}from"./myFuncts.3679a5e3.js";import{Q as Y}from"./QItemLabel.af98036f.js";import{Q as X,a as Z}from"./QItem.cbdda9a5.js";import{_ as ee}from"./plugin-vue_export-helper.21dcd24c.js";import"./format.6e35a30b.js";import"./position-engine.da29bb58.js";import"./rtl.b51694b1.js";import"./AnnounceCard.d840ea7c.js";import"./QImg.b604589a.js";import"./use-ratio.18934406.js";import"./BtnDelete.384b0a1c.js";const te={__name:"SelectSort",setup(x){const s=y("sortType"),v=[{label:"\u0421\u043D\u0430\u0447\u0430\u043B\u0430 \u043D\u043E\u0432\u044B\u0435",value:"dateDesc",caption:"\u041F\u043E \u0443\u0431\u044B\u0432\u0430\u043D\u0438\u044E \u0434\u0430\u0442\u044B"},{label:"\u0421\u043D\u0430\u0447\u0430\u043B\u0430 \u0434\u0430\u0432\u043D\u0438\u0435",value:"dateAsc",caption:"\u041F\u043E \u0432\u043E\u0437\u0440\u0430\u0441\u0442\u0430\u043D\u0438\u044E \u0434\u0430\u0442\u044B"}];return(Q,i)=>(c(),b(w,{modelValue:d(s),"onUpdate:modelValue":i[0]||(i[0]=r=>M(s)?s.value=r:null),borderless:"","map-options":"","emit-value":"",options:v},{option:o(r=>[t(X,F(I(r.itemProps)),{default:o(()=>[t(Z,null,{default:o(()=>[t(Y,null,{default:o(()=>[f(_(r.opt.label),1)]),_:2},1024),t(Y,{caption:""},{default:o(()=>[f(_(r.opt.caption),1)]),_:2},1024)]),_:2},1024)]),_:2},1040)]),_:1},8,["modelValue"]))}};const ae={class:"selectors"},oe={class:"gridArea"},re={__name:"AnnounceListPage",setup(x){const s=H("\u0410\u043D\u043E\u043D\u0441\u044B");K(s);const v=String("https://api.sakh-orch.ru/"),Q=G();N();const i=R(),r=y("editMode"),l=m(!1);p("compactCard",l);const A=y("progress"),h=m("dateDesc");p("sortType",h);const u=m(new Date().getFullYear());p("evYear",u);const L=m([]);p("announceList",L);function P(){let e=[];for(let a=2018;a<=new Date().getFullYear();a++)e.push(a);return e.reverse()}function S(){O.post(v+"api/event/announce.php",{params:{method:"add"}}).then(e=>{var a,n,T;if(!((a=e==null?void 0:e.data)!=null&&a.result))throw new Error;Q.notify(J((T=(n=e==null?void 0:e.data)==null?void 0:n.result)!=null?T:null)),i.push({path:"/announce/"+e.data.data.id})}).catch(e=>{Q.notify(W(e))})}return(e,a)=>(c(),$(E,null,[g("div",{class:q(["pageToolbar",e.$q.platform.is.desktop?"no-wrap":"wrap"])},[t(V,null,{default:o(()=>[t(B,null,{default:o(()=>[f(_(d(s).title),1)]),_:1})]),_:1}),t(V,null,{default:o(()=>[t(D),g("div",ae,[d(r)?(c(),b(C,{key:0,label:"\u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C",onClick:S})):k("",!0),t(w,{modelValue:u.value,"onUpdate:modelValue":a[0]||(a[0]=n=>u.value=n),options:P(),"emit-value":"",borderless:""},null,8,["modelValue","options"]),t(te),t(C,{icon:l.value?"unfold_less":"unfold_more",flat:"",onClick:a[1]||(a[1]=n=>l.value=!l.value)},{default:o(()=>[t(U,null,{default:o(()=>[f(_(l.value?"\u041F\u043E\u0434\u0440\u043E\u0431\u043D\u043E":"\u041A\u0440\u0430\u0442\u043A\u043E"),1)]),_:1})]),_:1},8,["icon"])])]),_:1})],2),d(A)?(c(),b(z,{key:0,indeterminate:"",color:"secondary"})):k("",!0),g("div",oe,[t(j,{evYear:u.value,method:"listByYear",sort:h.value},null,8,["evYear","sort"])])],64))}};var we=ee(re,[["__scopeId","data-v-73719c07"]]);export{we as default};
