import{u as va}from"./use-meta.7bac38cb.js";import{u as Mt}from"./use-quasar.52847c26.js";import{api as Pt}from"./axios.2afd3ec2.js";import{Q as fa}from"./QImg.66244b92.js";import{r as P,h as D,z as re,A as Ue,H as C,D as Xe,y as T,I as qe,J as St,B as E,N as X,F as Ut,_ as Dt,O as Et,P as Bt,ba as Qt,bb as ma,c as pt,b3 as Zt,a as Lt,e as zt,bc as Rt,bd as ha,w as Me,p as h,X as Ne,s as Kt,v as bt,be as Xt,n as ht,bf as ga,b9 as ya,aC as _a,aW as Ma,m as gt,i as De,C as ye,aY as Pe,a3 as Ct,S as Jt,aR as Da,T as pa,o as ba}from"./index.fb830c72.js";import{b as wa,a as Yt,n as yt}from"./myFuncts.02e9a0a2.js";import{Q as qt}from"./QUploader.04d8278c.js";import{Q as Ht}from"./QSelect.75feac18.js";import{u as ka}from"./use-cache.b0833c75.js";import{p as V}from"./format.3e32b8d9.js";import{Q as xa}from"./rtl.e2f63c55.js";import{u as Sa,d as Ca}from"./position-engine.87f25f61.js";import{T as Ya}from"./TouchPan.37fad035.js";import{C as Vt}from"./ClosePopup.a7798bd5.js";import{A as qa}from"./AnnounceCard.3def500a.js";import"./use-ratio.f2decef5.js";import"./QItem.2a899fa4.js";import"./touch.70a9dd44.js";import"./QTooltip.f6a954f9.js";const ie=e=>(Et("data-v-635807b5"),e=e(),Bt(),e),Ha={class:"eventbox"},Va={class:"eventboxin"},Oa={class:"text"},Ia={key:0},$a=ie(()=>C("br",null,null,-1)),Ta=ie(()=>C("br",null,null,-1)),Aa=["innerHTML"],ja=ie(()=>C("br",null,null,-1)),Fa=ie(()=>C("small",null," \u0423\u0432\u0430\u0436\u0430\u0435\u043C\u044B\u0435 \u043F\u043E\u0441\u0435\u0442\u0438\u0442\u0435\u043B\u0438, \u0443\u0431\u0435\u0434\u0438\u0442\u0435\u043B\u044C\u043D\u0430\u044F \u043F\u0440\u043E\u0441\u044C\u0431\u0430 \u0441\u043E\u0431\u043B\u044E\u0434\u0430\u0442\u044C \u043C\u0435\u0440\u044B \u0431\u0435\u0437\u043E\u043F\u0430\u0441\u043D\u043E\u0441\u0442\u0438 \u0432 \u0441\u0432\u044F\u0437\u0438 \u0441 \u0440\u0430\u0441\u043F\u0440\u043E\u0441\u0442\u0440\u0430\u043D\u0435\u043D\u0438\u0435\u043C \u043A\u043E\u0440\u043E\u043D\u0430\u0432\u0438\u0440\u0443\u0441\u043D\u043E\u0439 \u0438\u043D\u0444\u0435\u043A\u0446\u0438\u0438! ",-1)),Na=ie(()=>C("br",null,null,-1)),Pa=ie(()=>C("br",null,null,-1)),Ua=ie(()=>C("p",null,"\u0421\u043F\u0440\u0430\u0432\u043A\u0438 \u043F\u043E \u0442\u0435\u043B:",-1)),Ea=ie(()=>C("div",{class:"tel"},[C("a",{href:"tel:+74242300518"},"+7-4242-300-518")],-1)),Ba=ie(()=>C("br",null,null,-1)),Qa=ie(()=>C("div",{class:"tel"},[C("a",{href:"tel:+79624163689"},"+7-962-416-36-89")],-1)),Za=ie(()=>C("br",null,null,-1)),La={__name:"AnnounceDescr",props:{evData:P(null)},setup(e){const l=e,c=String("https://api.sakh-orch.ru/"),i=Mt(),v=D(()=>{let _=480;return i.platform.is.mobile&&(_=1080),c+String(l.evData.Poster.folder)+"/"+String(_)+"/"+l.evData.TopPoster.fileName+"?ver="+l.evData.Poster.md5});function u(){return"https://vk.com/share.php?url="+c+"/event.php?evid="+String(l.evData.ev_id)+"&title="+String(l.evData.prog_name)+"&noparse=true&image="+String(v)}return(_,s)=>(re(),Ue(Ut,null,[C("div",Ha,[e.evData.verLink?(re(),Xe(fa,{key:0,ratio:e.evData.Poster.width/e.evData.Poster.height,"initial-ratio":"1080/1534",src:T(v)},null,8,["ratio","src"])):qe("",!0)]),C("div",Va,[C("div",Oa,[e.evData.prog_name?(re(),Ue("p",Ia,[C("b",null,St(e.evData.prog_name),1)])):qe("",!0),$a,C("p",null,[C("b",null,St(T(wa)(e.evData.datetime)),1)]),Ta,C("div",{innerHTML:e.evData.description},null,8,Aa),ja,Fa,Na,Pa,Ua,Ea,Ba,Qa,Za,E(X,{href:u(),target:"_blank",color:"primary",icon:"ion-logo-vk",label:"\u041F\u043E\u0434\u0435\u043B\u0438\u0442\u044C\u0441\u044F"},null,8,["href"])])])],64))}};var za=Dt(La,[["__scopeId","data-v-635807b5"]]);const pe=[-61,9,38,199,426,686,756,818,1111,1181,1210,1635,2060,2097,2192,2262,2324,2394,2456,3178];function Ra(e,l,c){return Object.prototype.toString.call(e)==="[object Date]"&&(c=e.getDate(),l=e.getMonth()+1,e=e.getFullYear()),Wa(wt(e,l,c))}function Ot(e,l,c){return Gt(Ja(e,l,c))}function Ka(e){return Xa(e)===0}function rt(e,l){return l<=6?31:l<=11||Ka(e)?30:29}function Xa(e){const l=pe.length;let c=pe[0],i,v,u,_,s;if(e<c||e>=pe[l-1])throw new Error("Invalid Jalaali year "+e);for(s=1;s<l&&(i=pe[s],v=i-c,!(e<i));s+=1)c=i;return _=e-c,v-_<6&&(_=_-v+F(v+4,33)*33),u=ae(ae(_+1,33)-1,4),u===-1&&(u=4),u}function Wt(e,l){const c=pe.length,i=e+621;let v=-14,u=pe[0],_,s,d,O,y;if(e<u||e>=pe[c-1])throw new Error("Invalid Jalaali year "+e);for(y=1;y<c&&(_=pe[y],s=_-u,!(e<_));y+=1)v=v+F(s,33)*8+F(ae(s,33),4),u=_;O=e-u,v=v+F(O,33)*8+F(ae(O,33)+3,4),ae(s,33)===4&&s-O===4&&(v+=1);const w=F(i,4)-F((F(i,100)+1)*3,4)-150,Z=20+v-w;return l||(s-O<6&&(O=O-s+F(s+4,33)*33),d=ae(ae(O+1,33)-1,4),d===-1&&(d=4)),{leap:d,gy:i,march:Z}}function Ja(e,l,c){const i=Wt(e,!0);return wt(i.gy,3,i.march)+(l-1)*31-F(l,7)*(l-7)+c-1}function Wa(e){const l=Gt(e).gy;let c=l-621,i,v,u;const _=Wt(c,!1),s=wt(l,3,_.march);if(u=e-s,u>=0){if(u<=185)return v=1+F(u,31),i=ae(u,31)+1,{jy:c,jm:v,jd:i};u-=186}else c-=1,u+=179,_.leap===1&&(u+=1);return v=7+F(u,30),i=ae(u,30)+1,{jy:c,jm:v,jd:i}}function wt(e,l,c){let i=F((e+F(l-8,6)+100100)*1461,4)+F(153*ae(l+9,12)+2,5)+c-34840408;return i=i-F(F(e+100100+F(l-8,6),100)*3,4)+752,i}function Gt(e){let l=4*e+139361631;l=l+F(F(4*e+183187720,146097)*3,4)*4-3908;const c=F(ae(l,1461),4)*5+308,i=F(ae(c,153),5)+1,v=ae(F(c,153),12)+1;return{gy:F(l,1461)-100100+F(8-v,6),gm:v,gd:i}}function F(e,l){return~~(e/l)}function ae(e,l){return e-~~(e/l)*l}const Ga=["gregorian","persian"],ea={modelValue:{required:!0},mask:{type:String},locale:Object,calendar:{type:String,validator:e=>Ga.includes(e),default:"gregorian"},landscape:Boolean,color:String,textColor:String,square:Boolean,flat:Boolean,bordered:Boolean,readonly:Boolean,disable:Boolean},ta=["update:modelValue"];function fe(e){return e.year+"/"+V(e.month)+"/"+V(e.day)}function aa(e,l){const c=D(()=>e.disable!==!0&&e.readonly!==!0),i=D(()=>c.value===!0?0:-1),v=D(()=>{const s=[];return e.color!==void 0&&s.push(`bg-${e.color}`),e.textColor!==void 0&&s.push(`text-${e.textColor}`),s.join(" ")});function u(){return e.locale!==void 0?{...l.lang.date,...e.locale}:l.lang.date}function _(s){const d=new Date,O=s===!0?null:0;if(e.calendar==="persian"){const y=Ra(d);return{year:y.jy,month:y.jm,day:y.jd}}return{year:d.getFullYear(),month:d.getMonth()+1,day:d.getDate(),hour:O,minute:O,second:O,millisecond:O}}return{editable:c,tabindex:i,headerClass:v,getLocale:u,getCurrentDate:_}}const na=864e5,en=36e5,_t=6e4,la="YYYY-MM-DDTHH:mm:ss.SSSZ",tn=/\[((?:[^\]\\]|\\]|\\)*)\]|d{1,4}|M{1,4}|m{1,2}|w{1,2}|Qo|Do|D{1,4}|YY(?:YY)?|H{1,2}|h{1,2}|s{1,2}|S{1,3}|Z{1,2}|a{1,2}|[AQExX]/g,an=/(\[[^\]]*\])|d{1,4}|M{1,4}|m{1,2}|w{1,2}|Qo|Do|D{1,4}|YY(?:YY)?|H{1,2}|h{1,2}|s{1,2}|S{1,3}|Z{1,2}|a{1,2}|[AQExX]|([.*+:?^,\s${}()|\\]+)/g,ft={};function nn(e,l){const c="("+l.days.join("|")+")",i=e+c;if(ft[i]!==void 0)return ft[i];const v="("+l.daysShort.join("|")+")",u="("+l.months.join("|")+")",_="("+l.monthsShort.join("|")+")",s={};let d=0;const O=e.replace(an,w=>{switch(d++,w){case"YY":return s.YY=d,"(-?\\d{1,2})";case"YYYY":return s.YYYY=d,"(-?\\d{1,4})";case"M":return s.M=d,"(\\d{1,2})";case"MM":return s.M=d,"(\\d{2})";case"MMM":return s.MMM=d,_;case"MMMM":return s.MMMM=d,u;case"D":return s.D=d,"(\\d{1,2})";case"Do":return s.D=d++,"(\\d{1,2}(st|nd|rd|th))";case"DD":return s.D=d,"(\\d{2})";case"H":return s.H=d,"(\\d{1,2})";case"HH":return s.H=d,"(\\d{2})";case"h":return s.h=d,"(\\d{1,2})";case"hh":return s.h=d,"(\\d{2})";case"m":return s.m=d,"(\\d{1,2})";case"mm":return s.m=d,"(\\d{2})";case"s":return s.s=d,"(\\d{1,2})";case"ss":return s.s=d,"(\\d{2})";case"S":return s.S=d,"(\\d{1})";case"SS":return s.S=d,"(\\d{2})";case"SSS":return s.S=d,"(\\d{3})";case"A":return s.A=d,"(AM|PM)";case"a":return s.a=d,"(am|pm)";case"aa":return s.aa=d,"(a\\.m\\.|p\\.m\\.)";case"ddd":return v;case"dddd":return c;case"Q":case"d":case"E":return"(\\d{1})";case"Qo":return"(1st|2nd|3rd|4th)";case"DDD":case"DDDD":return"(\\d{1,3})";case"w":return"(\\d{1,2})";case"ww":return"(\\d{2})";case"Z":return s.Z=d,"(Z|[+-]\\d{2}:\\d{2})";case"ZZ":return s.ZZ=d,"(Z|[+-]\\d{2}\\d{2})";case"X":return s.X=d,"(-?\\d+)";case"x":return s.x=d,"(-?\\d{4,})";default:return d--,w[0]==="["&&(w=w.substring(1,w.length-1)),w.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}}),y={map:s,regex:new RegExp("^"+O)};return ft[i]=y,y}function oa(e,l){return e!==void 0?e:l!==void 0?l.date:ma.date}function It(e,l=""){const c=e>0?"-":"+",i=Math.abs(e),v=Math.floor(i/60),u=i%60;return c+V(v)+l+V(u)}function Ke(e,l,c,i,v){const u={year:null,month:null,day:null,hour:null,minute:null,second:null,millisecond:null,timezoneOffset:null,dateHash:null,timeHash:null};if(v!==void 0&&Object.assign(u,v),e==null||e===""||typeof e!="string")return u;l===void 0&&(l=la);const _=oa(c,Qt.props),s=_.months,d=_.monthsShort,{regex:O,map:y}=nn(l,_),w=e.match(O);if(w===null)return u;let Z="";if(y.X!==void 0||y.x!==void 0){const B=parseInt(w[y.X!==void 0?y.X:y.x],10);if(isNaN(B)===!0||B<0)return u;const L=new Date(B*(y.X!==void 0?1e3:1));u.year=L.getFullYear(),u.month=L.getMonth()+1,u.day=L.getDate(),u.hour=L.getHours(),u.minute=L.getMinutes(),u.second=L.getSeconds(),u.millisecond=L.getMilliseconds()}else{if(y.YYYY!==void 0)u.year=parseInt(w[y.YYYY],10);else if(y.YY!==void 0){const B=parseInt(w[y.YY],10);u.year=B<0?B:2e3+B}if(y.M!==void 0){if(u.month=parseInt(w[y.M],10),u.month<1||u.month>12)return u}else y.MMM!==void 0?u.month=d.indexOf(w[y.MMM])+1:y.MMMM!==void 0&&(u.month=s.indexOf(w[y.MMMM])+1);if(y.D!==void 0){if(u.day=parseInt(w[y.D],10),u.year===null||u.month===null||u.day<1)return u;const B=i!=="persian"?new Date(u.year,u.month,0).getDate():rt(u.year,u.month);if(u.day>B)return u}y.H!==void 0?u.hour=parseInt(w[y.H],10)%24:y.h!==void 0&&(u.hour=parseInt(w[y.h],10)%12,(y.A&&w[y.A]==="PM"||y.a&&w[y.a]==="pm"||y.aa&&w[y.aa]==="p.m.")&&(u.hour+=12),u.hour=u.hour%24),y.m!==void 0&&(u.minute=parseInt(w[y.m],10)%60),y.s!==void 0&&(u.second=parseInt(w[y.s],10)%60),y.S!==void 0&&(u.millisecond=parseInt(w[y.S],10)*10**(3-w[y.S].length)),(y.Z!==void 0||y.ZZ!==void 0)&&(Z=y.Z!==void 0?w[y.Z].replace(":",""):w[y.ZZ],u.timezoneOffset=(Z[0]==="+"?-1:1)*(60*Z.slice(1,3)+1*Z.slice(3,5)))}return u.dateHash=V(u.year,6)+"/"+V(u.month)+"/"+V(u.day),u.timeHash=V(u.hour)+":"+V(u.minute)+":"+V(u.second)+Z,u}function $t(e){const l=new Date(e.getFullYear(),e.getMonth(),e.getDate());l.setDate(l.getDate()-(l.getDay()+6)%7+3);const c=new Date(l.getFullYear(),0,4);c.setDate(c.getDate()-(c.getDay()+6)%7+3);const i=l.getTimezoneOffset()-c.getTimezoneOffset();l.setHours(l.getHours()-i);const v=(l-c)/(na*7);return 1+Math.floor(v)}function me(e,l,c){const i=new Date(e),v=`set${c===!0?"UTC":""}`;switch(l){case"year":case"years":i[`${v}Month`](0);case"month":case"months":i[`${v}Date`](1);case"day":case"days":case"date":i[`${v}Hours`](0);case"hour":case"hours":i[`${v}Minutes`](0);case"minute":case"minutes":i[`${v}Seconds`](0);case"second":case"seconds":i[`${v}Milliseconds`](0)}return i}function ut(e,l,c){return(e.getTime()-e.getTimezoneOffset()*_t-(l.getTime()-l.getTimezoneOffset()*_t))/c}function ua(e,l,c="days"){const i=new Date(e),v=new Date(l);switch(c){case"years":case"year":return i.getFullYear()-v.getFullYear();case"months":case"month":return(i.getFullYear()-v.getFullYear())*12+i.getMonth()-v.getMonth();case"days":case"day":case"date":return ut(me(i,"day"),me(v,"day"),na);case"hours":case"hour":return ut(me(i,"hour"),me(v,"hour"),en);case"minutes":case"minute":return ut(me(i,"minute"),me(v,"minute"),_t);case"seconds":case"second":return ut(me(i,"second"),me(v,"second"),1e3)}}function Tt(e){return ua(e,me(e,"year"),"days")+1}function At(e){if(e>=11&&e<=13)return`${e}th`;switch(e%10){case 1:return`${e}st`;case 2:return`${e}nd`;case 3:return`${e}rd`}return`${e}th`}const jt={YY(e,l,c){const i=this.YYYY(e,l,c)%100;return i>=0?V(i):"-"+V(Math.abs(i))},YYYY(e,l,c){return c!=null?c:e.getFullYear()},M(e){return e.getMonth()+1},MM(e){return V(e.getMonth()+1)},MMM(e,l){return l.monthsShort[e.getMonth()]},MMMM(e,l){return l.months[e.getMonth()]},Q(e){return Math.ceil((e.getMonth()+1)/3)},Qo(e){return At(this.Q(e))},D(e){return e.getDate()},Do(e){return At(e.getDate())},DD(e){return V(e.getDate())},DDD(e){return Tt(e)},DDDD(e){return V(Tt(e),3)},d(e){return e.getDay()},dd(e,l){return this.dddd(e,l).slice(0,2)},ddd(e,l){return l.daysShort[e.getDay()]},dddd(e,l){return l.days[e.getDay()]},E(e){return e.getDay()||7},w(e){return $t(e)},ww(e){return V($t(e))},H(e){return e.getHours()},HH(e){return V(e.getHours())},h(e){const l=e.getHours();return l===0?12:l>12?l%12:l},hh(e){return V(this.h(e))},m(e){return e.getMinutes()},mm(e){return V(e.getMinutes())},s(e){return e.getSeconds()},ss(e){return V(e.getSeconds())},S(e){return Math.floor(e.getMilliseconds()/100)},SS(e){return V(Math.floor(e.getMilliseconds()/10))},SSS(e){return V(e.getMilliseconds(),3)},A(e){return this.H(e)<12?"AM":"PM"},a(e){return this.H(e)<12?"am":"pm"},aa(e){return this.H(e)<12?"a.m.":"p.m."},Z(e,l,c,i){const v=i==null?e.getTimezoneOffset():i;return It(v,":")},ZZ(e,l,c,i){const v=i==null?e.getTimezoneOffset():i;return It(v)},X(e){return Math.floor(e.getTime()/1e3)},x(e){return e.getTime()}};function ra(e,l,c,i,v){if(e!==0&&!e||e===1/0||e===-1/0)return;const u=new Date(e);if(isNaN(u))return;l===void 0&&(l=la);const _=oa(c,Qt.props);return l.replace(tn,(s,d)=>s in jt?jt[s](u,_,i,v):d===void 0?s:d.split("\\]").join("]"))}const Ye=20,ln=["Calendar","Years","Months"],Ft=e=>ln.includes(e),mt=e=>/^-?[\d]+\/[0-1]\d$/.test(e),Fe=" \u2014 ";function _e(e){return e.year+"/"+V(e.month)}var on=pt({name:"QDate",props:{...ea,...Zt,...Lt,multiple:Boolean,range:Boolean,title:String,subtitle:String,mask:{default:"YYYY/MM/DD"},defaultYearMonth:{type:String,validator:mt},yearsInMonthView:Boolean,events:[Array,Function],eventColor:[String,Function],emitImmediately:Boolean,options:[Array,Function],navigationMinYearMonth:{type:String,validator:mt},navigationMaxYearMonth:{type:String,validator:mt},noUnset:Boolean,firstDayOfWeek:[String,Number],todayBtn:Boolean,minimal:Boolean,defaultView:{type:String,default:"Calendar",validator:Ft}},emits:[...ta,"rangeStart","rangeEnd","navigation"],setup(e,{slots:l,emit:c}){const{proxy:i}=bt(),{$q:v}=i,u=zt(e,v),{getCache:_}=ka(),{tabindex:s,headerClass:d,getLocale:O,getCurrentDate:y}=aa(e,v);let w;const Z=Rt(e),B=Xt(Z),L=P(null),A=P(lt()),I=P(O()),we=D(()=>lt()),he=D(()=>O()),k=D(()=>y()),r=P(o(A.value,I.value)),H=P(e.defaultView),J=v.lang.rtl===!0?"right":"left",x=P(J.value),b=P(J.value),le=r.value.year,se=P(le-le%Ye-(le<0?Ye:0)),K=P(null),ke=D(()=>{const t=e.landscape===!0?"landscape":"portrait";return`q-date q-date--${t} q-date--${t}-${e.minimal===!0?"minimal":"standard"}`+(u.value===!0?" q-date--dark q-dark":"")+(e.bordered===!0?" q-date--bordered":"")+(e.square===!0?" q-date--square no-border-radius":"")+(e.flat===!0?" q-date--flat no-shadow":"")+(e.disable===!0?" disabled":e.readonly===!0?" q-date--readonly":"")}),ne=D(()=>e.color||"primary"),oe=D(()=>e.textColor||"white"),W=D(()=>e.emitImmediately===!0&&e.multiple!==!0&&e.range!==!0),ce=D(()=>Array.isArray(e.modelValue)===!0?e.modelValue:e.modelValue!==null&&e.modelValue!==void 0?[e.modelValue]:[]),R=D(()=>ce.value.filter(t=>typeof t=="string").map(t=>ze(t,A.value,I.value)).filter(t=>t.dateHash!==null&&t.day!==null&&t.month!==null&&t.year!==null)),ue=D(()=>{const t=a=>ze(a,A.value,I.value);return ce.value.filter(a=>ha(a)===!0&&a.from!==void 0&&a.to!==void 0).map(a=>({from:t(a.from),to:t(a.to)})).filter(a=>a.from.dateHash!==null&&a.to.dateHash!==null&&a.from.dateHash<a.to.dateHash)}),He=D(()=>e.calendar!=="persian"?t=>new Date(t.year,t.month-1,t.day):t=>{const a=Ot(t.year,t.month,t.day);return new Date(a.gy,a.gm-1,a.gd)}),Ee=D(()=>e.calendar==="persian"?fe:(t,a,n)=>ra(new Date(t.year,t.month-1,t.day,t.hour,t.minute,t.second,t.millisecond),a===void 0?A.value:a,n===void 0?I.value:n,t.year,t.timezoneOffset)),ge=D(()=>R.value.length+ue.value.reduce((t,a)=>t+1+ua(He.value(a.to),He.value(a.from)),0)),xe=D(()=>{if(e.title!==void 0&&e.title!==null&&e.title.length>0)return e.title;if(K.value!==null){const n=K.value.init,g=He.value(n);return I.value.daysShort[g.getDay()]+", "+I.value.monthsShort[n.month-1]+" "+n.day+Fe+"?"}if(ge.value===0)return Fe;if(ge.value>1)return`${ge.value} ${I.value.pluralDay}`;const t=R.value[0],a=He.value(t);return isNaN(a.valueOf())===!0?Fe:I.value.headerTitle!==void 0?I.value.headerTitle(a,t):I.value.daysShort[a.getDay()]+", "+I.value.monthsShort[t.month-1]+" "+t.day}),Je=D(()=>R.value.concat(ue.value.map(a=>a.from)).sort((a,n)=>a.year-n.year||a.month-n.month)[0]),Be=D(()=>R.value.concat(ue.value.map(a=>a.to)).sort((a,n)=>n.year-a.year||n.month-a.month)[0]),We=D(()=>{if(e.subtitle!==void 0&&e.subtitle!==null&&e.subtitle.length>0)return e.subtitle;if(ge.value===0)return Fe;if(ge.value>1){const t=Je.value,a=Be.value,n=I.value.monthsShort;return n[t.month-1]+(t.year!==a.year?" "+t.year+Fe+n[a.month-1]+" ":t.month!==a.month?Fe+n[a.month-1]:"")+" "+a.year}return R.value[0].year}),Ve=D(()=>{const t=[v.iconSet.datetime.arrowLeft,v.iconSet.datetime.arrowRight];return v.lang.rtl===!0?t.reverse():t}),Oe=D(()=>e.firstDayOfWeek!==void 0?Number(e.firstDayOfWeek):I.value.firstDayOfWeek),Qe=D(()=>{const t=I.value.daysShort,a=Oe.value;return a>0?t.slice(a,7).concat(t.slice(0,a)):t}),de=D(()=>{const t=r.value;return e.calendar!=="persian"?new Date(t.year,t.month,0).getDate():rt(t.year,t.month)}),Ge=D(()=>typeof e.eventColor=="function"?e.eventColor:()=>e.eventColor),Q=D(()=>{if(e.navigationMinYearMonth===void 0)return null;const t=e.navigationMinYearMonth.split("/");return{year:parseInt(t[0],10),month:parseInt(t[1],10)}}),z=D(()=>{if(e.navigationMaxYearMonth===void 0)return null;const t=e.navigationMaxYearMonth.split("/");return{year:parseInt(t[0],10),month:parseInt(t[1],10)}}),Ze=D(()=>{const t={month:{prev:!0,next:!0},year:{prev:!0,next:!0}};return Q.value!==null&&Q.value.year>=r.value.year&&(t.year.prev=!1,Q.value.year===r.value.year&&Q.value.month>=r.value.month&&(t.month.prev=!1)),z.value!==null&&z.value.year<=r.value.year&&(t.year.next=!1,z.value.year===r.value.year&&z.value.month<=r.value.month&&(t.month.next=!1)),t}),Ie=D(()=>{const t={};return R.value.forEach(a=>{const n=_e(a);t[n]===void 0&&(t[n]=[]),t[n].push(a.day)}),t}),et=D(()=>{const t={};return ue.value.forEach(a=>{const n=_e(a.from),g=_e(a.to);if(t[n]===void 0&&(t[n]=[]),t[n].push({from:a.from.day,to:n===g?a.to.day:void 0,range:a}),n<g){let m;const{year:$,month:M}=a.from,S=M<12?{year:$,month:M+1}:{year:$+1,month:1};for(;(m=_e(S))<=g;)t[m]===void 0&&(t[m]=[]),t[m].push({from:void 0,to:m===g?a.to.day:void 0,range:a}),S.month++,S.month>12&&(S.year++,S.month=1)}}),t}),Se=D(()=>{if(K.value===null)return;const{init:t,initHash:a,final:n,finalHash:g}=K.value,[m,$]=a<=g?[t,n]:[n,t],M=_e(m),S=_e($);if(M!==G.value&&S!==G.value)return;const j={};return M===G.value?(j.from=m.day,j.includeFrom=!0):j.from=1,S===G.value?(j.to=$.day,j.includeTo=!0):j.to=de.value,j}),G=D(()=>_e(r.value)),it=D(()=>{const t={};if(e.options===void 0){for(let n=1;n<=de.value;n++)t[n]=!0;return t}const a=typeof e.options=="function"?e.options:n=>e.options.includes(n);for(let n=1;n<=de.value;n++){const g=G.value+"/"+V(n);t[n]=a(g)}return t}),st=D(()=>{const t={};if(e.events===void 0)for(let a=1;a<=de.value;a++)t[a]=!1;else{const a=typeof e.events=="function"?e.events:n=>e.events.includes(n);for(let n=1;n<=de.value;n++){const g=G.value+"/"+V(n);t[n]=a(g)===!0&&Ge.value(g)}}return t}),$e=D(()=>{let t,a;const{year:n,month:g}=r.value;if(e.calendar!=="persian")t=new Date(n,g-1,1),a=new Date(n,g-1,0).getDate();else{const m=Ot(n,g,1);t=new Date(m.gy,m.gm-1,m.gd);let $=g-1,M=n;$===0&&($=12,M--),a=rt(M,$)}return{days:t.getDay()-Oe.value-1,endDay:a}}),Ce=D(()=>{const t=[],{days:a,endDay:n}=$e.value,g=a<0?a+7:a;if(g<6)for(let M=n-g;M<=n;M++)t.push({i:M,fill:!0});const m=t.length;for(let M=1;M<=de.value;M++){const S={i:M,event:st.value[M],classes:[]};it.value[M]===!0&&(S.in=!0,S.flat=!0),t.push(S)}if(Ie.value[G.value]!==void 0&&Ie.value[G.value].forEach(M=>{const S=m+M-1;Object.assign(t[S],{selected:!0,unelevated:!0,flat:!1,color:ne.value,textColor:oe.value})}),et.value[G.value]!==void 0&&et.value[G.value].forEach(M=>{if(M.from!==void 0){const S=m+M.from-1,j=m+(M.to||de.value)-1;for(let Re=S;Re<=j;Re++)Object.assign(t[Re],{range:M.range,unelevated:!0,color:ne.value,textColor:oe.value});Object.assign(t[S],{rangeFrom:!0,flat:!1}),M.to!==void 0&&Object.assign(t[j],{rangeTo:!0,flat:!1})}else if(M.to!==void 0){const S=m+M.to-1;for(let j=m;j<=S;j++)Object.assign(t[j],{range:M.range,unelevated:!0,color:ne.value,textColor:oe.value});Object.assign(t[S],{flat:!1,rangeTo:!0})}else{const S=m+de.value-1;for(let j=m;j<=S;j++)Object.assign(t[j],{range:M.range,unelevated:!0,color:ne.value,textColor:oe.value})}}),Se.value!==void 0){const M=m+Se.value.from-1,S=m+Se.value.to-1;for(let j=M;j<=S;j++)t[j].color=ne.value,t[j].editRange=!0;Se.value.includeFrom===!0&&(t[M].editRangeFrom=!0),Se.value.includeTo===!0&&(t[S].editRangeTo=!0)}r.value.year===k.value.year&&r.value.month===k.value.month&&(t[m+k.value.day-1].today=!0);const $=t.length%7;if($>0){const M=7-$;for(let S=1;S<=M;S++)t.push({i:S,fill:!0})}return t.forEach(M=>{let S="q-date__calendar-item ";M.fill===!0?S+="q-date__calendar-item--fill":(S+=`q-date__calendar-item--${M.in===!0?"in":"out"}`,M.range!==void 0&&(S+=` q-date__range${M.rangeTo===!0?"-to":M.rangeFrom===!0?"-from":""}`),M.editRange===!0&&(S+=` q-date__edit-range${M.editRangeFrom===!0?"-from":""}${M.editRangeTo===!0?"-to":""}`),(M.range!==void 0||M.editRange===!0)&&(S+=` text-${M.color}`)),M.classes=S}),t}),Te=D(()=>e.disable===!0?{"aria-disabled":"true"}:e.readonly===!0?{"aria-readonly":"true"}:{});Me(()=>e.modelValue,t=>{if(w===t)w=0;else{const a=o(A.value,I.value);ee(a.year,a.month,a)}}),Me(H,()=>{L.value!==null&&i.$el.contains(document.activeElement)===!0&&L.value.focus()}),Me(()=>r.value.year+"|"+r.value.month,()=>{c("navigation",{year:r.value.year,month:r.value.month})}),Me(we,t=>{xt(t,I.value,"mask"),A.value=t}),Me(he,t=>{xt(A.value,t,"locale"),I.value=t});function tt(){const t=k.value,a=Ie.value[_e(t)];(a===void 0||a.includes(t.day)===!1)&&dt(t),ve(t.year,t.month)}function at(t){Ft(t)===!0&&(H.value=t)}function nt(t,a){["month","year"].includes(t)&&(t==="month"?p:Y)(a===!0?-1:1)}function ve(t,a){H.value="Calendar",ee(t,a)}function Le(t,a){if(e.range===!1||!t){K.value=null;return}const n=Object.assign({...r.value},t),g=a!==void 0?Object.assign({...r.value},a):n;K.value={init:n,initHash:fe(n),final:g,finalHash:fe(g)},ve(n.year,n.month)}function lt(){return e.calendar==="persian"?"YYYY/MM/DD":e.mask}function ze(t,a,n){return Ke(t,a,n,e.calendar,{hour:0,minute:0,second:0,millisecond:0})}function o(t,a){const n=Array.isArray(e.modelValue)===!0?e.modelValue:e.modelValue?[e.modelValue]:[];if(n.length===0)return f();const g=n[n.length-1],m=ze(g.from!==void 0?g.from:g,t,a);return m.dateHash===null?f():m}function f(){let t,a;if(e.defaultYearMonth!==void 0){const n=e.defaultYearMonth.split("/");t=parseInt(n[0],10),a=parseInt(n[1],10)}else{const n=k.value!==void 0?k.value:y();t=n.year,a=n.month}return{year:t,month:a,day:1,hour:0,minute:0,second:0,millisecond:0,dateHash:t+"/"+V(a)+"/01"}}function p(t){let a=r.value.year,n=Number(r.value.month)+t;n===13?(n=1,a++):n===0&&(n=12,a--),ee(a,n),W.value===!0&&Ae("month")}function Y(t){const a=Number(r.value.year)+t;ee(a,r.value.month),W.value===!0&&Ae("year")}function N(t){ee(t,r.value.month),H.value=e.defaultView==="Years"?"Months":"Calendar",W.value===!0&&Ae("year")}function te(t){ee(r.value.year,t),H.value="Calendar",W.value===!0&&Ae("month")}function q(t,a){const n=Ie.value[a];(n!==void 0&&n.includes(t.day)===!0?ct:dt)(t)}function U(t){return{year:t.year,month:t.month,day:t.day}}function ee(t,a,n){if(Q.value!==null&&t<=Q.value.year&&(t=Q.value.year,a<Q.value.month&&(a=Q.value.month)),z.value!==null&&t>=z.value.year&&(t=z.value.year,a>z.value.month&&(a=z.value.month)),n!==void 0){const{hour:m,minute:$,second:M,millisecond:S,timezoneOffset:j,timeHash:Re}=n;Object.assign(r.value,{hour:m,minute:$,second:M,millisecond:S,timezoneOffset:j,timeHash:Re})}const g=t+"/"+V(a)+"/01";g!==r.value.dateHash&&(x.value=r.value.dateHash<g==(v.lang.rtl!==!0)?"left":"right",t!==r.value.year&&(b.value=x.value),ht(()=>{se.value=t-t%Ye-(t<0?Ye:0),Object.assign(r.value,{year:t,month:a,day:1,dateHash:g})}))}function ot(t,a,n){const g=t!==null&&t.length===1&&e.multiple===!1?t[0]:t;w=g;const{reason:m,details:$}=kt(a,n);c("update:modelValue",g,m,$)}function Ae(t){const a=R.value[0]!==void 0&&R.value[0].dateHash!==null?{...R.value[0]}:{...r.value};ht(()=>{a.year=r.value.year,a.month=r.value.month;const n=e.calendar!=="persian"?new Date(a.year,a.month,0).getDate():rt(a.year,a.month);a.day=Math.min(Math.max(1,a.day),n);const g=je(a);w=g;const{details:m}=kt("",a);c("update:modelValue",g,t,m)})}function kt(t,a){return a.from!==void 0?{reason:`${t}-range`,details:{...U(a.target),from:U(a.from),to:U(a.to)}}:{reason:`${t}-day`,details:U(a)}}function je(t,a,n){return t.from!==void 0?{from:Ee.value(t.from,a,n),to:Ee.value(t.to,a,n)}:Ee.value(t,a,n)}function dt(t){let a;if(e.multiple===!0)if(t.from!==void 0){const n=fe(t.from),g=fe(t.to),m=R.value.filter(M=>M.dateHash<n||M.dateHash>g),$=ue.value.filter(({from:M,to:S})=>S.dateHash<n||M.dateHash>g);a=m.concat($).concat(t).map(M=>je(M))}else{const n=ce.value.slice();n.push(je(t)),a=n}else a=je(t);ot(a,"add",t)}function ct(t){if(e.noUnset===!0)return;let a=null;if(e.multiple===!0&&Array.isArray(e.modelValue)===!0){const n=je(t);t.from!==void 0?a=e.modelValue.filter(g=>g.from!==void 0?g.from!==n.from&&g.to!==n.to:!0):a=e.modelValue.filter(g=>g!==n),a.length===0&&(a=null)}ot(a,"remove",t)}function xt(t,a,n){const g=R.value.concat(ue.value).map(m=>je(m,t,a)).filter(m=>m.from!==void 0?m.from.dateHash!==null&&m.to.dateHash!==null:m.dateHash!==null);c("update:modelValue",(e.multiple===!0?g:g[0])||null,n)}function ia(){if(e.minimal!==!0)return h("div",{class:"q-date__header "+d.value},[h("div",{class:"relative-position"},[h(Ne,{name:"q-transition--fade"},()=>h("div",{key:"h-yr-"+We.value,class:"q-date__header-subtitle q-date__header-link "+(H.value==="Years"?"q-date__header-link--active":"cursor-pointer"),tabindex:s.value,..._("vY",{onClick(){H.value="Years"},onKeyup(t){t.keyCode===13&&(H.value="Years")}})},[We.value]))]),h("div",{class:"q-date__header-title relative-position flex no-wrap"},[h("div",{class:"relative-position col"},[h(Ne,{name:"q-transition--fade"},()=>h("div",{key:"h-sub"+xe.value,class:"q-date__header-title-label q-date__header-link "+(H.value==="Calendar"?"q-date__header-link--active":"cursor-pointer"),tabindex:s.value,..._("vC",{onClick(){H.value="Calendar"},onKeyup(t){t.keyCode===13&&(H.value="Calendar")}})},[xe.value]))]),e.todayBtn===!0?h(X,{class:"q-date__header-today self-start",icon:v.iconSet.datetime.today,flat:!0,size:"sm",round:!0,tabindex:s.value,onClick:tt}):null])])}function vt({label:t,type:a,key:n,dir:g,goTo:m,boundaries:$,cls:M}){return[h("div",{class:"row items-center q-date__arrow"},[h(X,{round:!0,dense:!0,size:"sm",flat:!0,icon:Ve.value[0],tabindex:s.value,disable:$.prev===!1,..._("go-#"+a,{onClick(){m(-1)}})})]),h("div",{class:"relative-position overflow-hidden flex flex-center"+M},[h(Ne,{name:"q-transition--jump-"+g},()=>h("div",{key:n},[h(X,{flat:!0,dense:!0,noCaps:!0,label:t,tabindex:s.value,..._("view#"+a,{onClick:()=>{H.value=a}})})]))]),h("div",{class:"row items-center q-date__arrow"},[h(X,{round:!0,dense:!0,size:"sm",flat:!0,icon:Ve.value[1],tabindex:s.value,disable:$.next===!1,..._("go+#"+a,{onClick(){m(1)}})})])]}const sa={Calendar:()=>[h("div",{key:"calendar-view",class:"q-date__view q-date__calendar"},[h("div",{class:"q-date__navigation row items-center no-wrap"},vt({label:I.value.months[r.value.month-1],type:"Months",key:r.value.month,dir:x.value,goTo:p,boundaries:Ze.value.month,cls:" col"}).concat(vt({label:r.value.year,type:"Years",key:r.value.year,dir:b.value,goTo:Y,boundaries:Ze.value.year,cls:""}))),h("div",{class:"q-date__calendar-weekdays row items-center no-wrap"},Qe.value.map(t=>h("div",{class:"q-date__calendar-item"},[h("div",t)]))),h("div",{class:"q-date__calendar-days-container relative-position overflow-hidden"},[h(Ne,{name:"q-transition--slide-"+x.value},()=>h("div",{key:G.value,class:"q-date__calendar-days fit"},Ce.value.map(t=>h("div",{class:t.classes},[t.in===!0?h(X,{class:t.today===!0?"q-date__today":"",dense:!0,flat:t.flat,unelevated:t.unelevated,color:t.color,textColor:t.textColor,label:t.i,tabindex:s.value,..._("day#"+t.i,{onClick:()=>{da(t.i)},onMouseover:()=>{ca(t.i)}})},t.event!==!1?()=>h("div",{class:"q-date__event bg-"+t.event}):null):h("div",""+t.i)]))))])])],Months(){const t=r.value.year===k.value.year,a=g=>Q.value!==null&&r.value.year===Q.value.year&&Q.value.month>g||z.value!==null&&r.value.year===z.value.year&&z.value.month<g,n=I.value.monthsShort.map((g,m)=>{const $=r.value.month===m+1;return h("div",{class:"q-date__months-item flex flex-center"},[h(X,{class:t===!0&&k.value.month===m+1?"q-date__today":null,flat:$!==!0,label:g,unelevated:$,color:$===!0?ne.value:null,textColor:$===!0?oe.value:null,tabindex:s.value,disable:a(m+1),..._("month#"+m,{onClick:()=>{te(m+1)}})})])});return e.yearsInMonthView===!0&&n.unshift(h("div",{class:"row no-wrap full-width"},[vt({label:r.value.year,type:"Years",key:r.value.year,dir:b.value,goTo:Y,boundaries:Ze.value.year,cls:" col"})])),h("div",{key:"months-view",class:"q-date__view q-date__months flex flex-center"},n)},Years(){const t=se.value,a=t+Ye,n=[],g=m=>Q.value!==null&&Q.value.year>m||z.value!==null&&z.value.year<m;for(let m=t;m<=a;m++){const $=r.value.year===m;n.push(h("div",{class:"q-date__years-item flex flex-center"},[h(X,{key:"yr"+m,class:k.value.year===m?"q-date__today":null,flat:!$,label:m,dense:!0,unelevated:$,color:$===!0?ne.value:null,textColor:$===!0?oe.value:null,tabindex:s.value,disable:g(m),..._("yr#"+m,{onClick:()=>{N(m)}})})]))}return h("div",{class:"q-date__view q-date__years flex flex-center"},[h("div",{class:"col-auto"},[h(X,{round:!0,dense:!0,flat:!0,icon:Ve.value[0],tabindex:s.value,disable:g(t),..._("y-",{onClick:()=>{se.value-=Ye}})})]),h("div",{class:"q-date__years-content col self-stretch row items-center"},n),h("div",{class:"col-auto"},[h(X,{round:!0,dense:!0,flat:!0,icon:Ve.value[1],tabindex:s.value,disable:g(a),..._("y+",{onClick:()=>{se.value+=Ye}})})])])}};function da(t){const a={...r.value,day:t};if(e.range===!1){q(a,G.value);return}if(K.value===null){const n=Ce.value.find(m=>m.fill!==!0&&m.i===t);if(e.noUnset!==!0&&n.range!==void 0){ct({target:a,from:n.range.from,to:n.range.to});return}if(n.selected===!0){ct(a);return}const g=fe(a);K.value={init:a,initHash:g,final:a,finalHash:g},c("rangeStart",U(a))}else{const n=K.value.initHash,g=fe(a),m=n<=g?{from:K.value.init,to:a}:{from:a,to:K.value.init};K.value=null,dt(n===g?a:{target:a,...m}),c("rangeEnd",{from:U(m.from),to:U(m.to)})}}function ca(t){if(K.value!==null){const a={...r.value,day:t};Object.assign(K.value,{final:a,finalHash:fe(a)})}}return Object.assign(i,{setToday:tt,setView:at,offsetCalendar:nt,setCalendarTo:ve,setEditingRange:Le}),()=>{const t=[h("div",{class:"q-date__content col relative-position"},[h(Ne,{name:"q-transition--fade"},sa[H.value])])],a=Kt(l.default);return a!==void 0&&t.push(h("div",{class:"q-date__actions"},a)),e.name!==void 0&&e.disable!==!0&&B(t,"push"),h("div",{class:ke.value,...Te.value},[ia(),h("div",{ref:L,class:"q-date__main col column",tabindex:-1},t)])}}}),Nt=pt({name:"QPopupProxy",props:{...Sa,breakpoint:{type:[String,Number],default:450}},emits:["show","hide"],setup(e,{slots:l,emit:c,attrs:i}){const{proxy:v}=bt(),{$q:u}=v,_=P(!1),s=P(null),d=D(()=>parseInt(e.breakpoint,10)),{canShow:O}=Ca({showing:_});function y(){return u.screen.width<d.value||u.screen.height<d.value?"dialog":"menu"}const w=P(y()),Z=D(()=>w.value==="menu"?{maxHeight:"99vh"}:{});Me(()=>y(),A=>{_.value!==!0&&(w.value=A)});function B(A){_.value=!0,c("show",A)}function L(A){_.value=!1,w.value=y(),c("hide",A)}return Object.assign(v,{show(A){O(A)===!0&&s.value.show(A)},hide(A){s.value.hide(A)},toggle(A){s.value.toggle(A)}}),ga(v,"currentComponent",()=>({type:w.value,ref:s.value})),()=>{const A={ref:s,...Z.value,...i,onShow:B,onHide:L};let I;return w.value==="dialog"?I=ya:(I=xa,Object.assign(A,{target:e.target,contextMenu:e.contextMenu,noParentEvent:!0,separateClosePopup:!0})),h(I,A,l.default)}}});function un(e,l){if(e.hour!==null){if(e.minute===null)return"minute";if(l===!0&&e.second===null)return"second"}return"hour"}function rn(){const e=new Date;return{hour:e.getHours(),minute:e.getMinutes(),second:e.getSeconds(),millisecond:e.getMilliseconds()}}var sn=pt({name:"QTime",props:{...Lt,...Zt,...ea,mask:{default:null},format24h:{type:Boolean,default:null},defaultDate:{type:String,validator:e=>/^-?[\d]+\/[0-1]\d\/[0-3]\d$/.test(e)},options:Function,hourOptions:Array,minuteOptions:Array,secondOptions:Array,withSeconds:Boolean,nowBtn:Boolean},emits:ta,setup(e,{slots:l,emit:c}){const i=bt(),{$q:v}=i.proxy,u=zt(e,v),{tabindex:_,headerClass:s,getLocale:d,getCurrentDate:O}=aa(e,v),y=Rt(e),w=Xt(y);let Z,B;const L=P(null),A=D(()=>We()),I=D(()=>d()),we=D(()=>Ve()),he=Ke(e.modelValue,A.value,I.value,e.calendar,we.value),k=P(un(he)),r=P(he),H=P(he.hour===null||he.hour<12),J=D(()=>`q-time q-time--${e.landscape===!0?"landscape":"portrait"}`+(u.value===!0?" q-time--dark q-dark":"")+(e.disable===!0?" disabled":e.readonly===!0?" q-time--readonly":"")+(e.bordered===!0?" q-time--bordered":"")+(e.square===!0?" q-time--square no-border-radius":"")+(e.flat===!0?" q-time--flat no-shadow":"")),x=D(()=>{const o=r.value;return{hour:o.hour===null?"--":b.value===!0?V(o.hour):String(H.value===!0?o.hour===0?12:o.hour:o.hour>12?o.hour-12:o.hour),minute:o.minute===null?"--":V(o.minute),second:o.second===null?"--":V(o.second)}}),b=D(()=>e.format24h!==null?e.format24h:v.lang.date.format24h),le=D(()=>{const o=k.value==="hour",f=o===!0?12:60,p=r.value[k.value];let N=`rotate(${Math.round(p*(360/f))-180}deg) translateX(-50%)`;return o===!0&&b.value===!0&&r.value.hour>=12&&(N+=" scale(.7)"),{transform:N}}),se=D(()=>r.value.hour!==null),K=D(()=>se.value===!0&&r.value.minute!==null),ke=D(()=>e.hourOptions!==void 0?o=>e.hourOptions.includes(o):e.options!==void 0?o=>e.options(o,null,null):null),ne=D(()=>e.minuteOptions!==void 0?o=>e.minuteOptions.includes(o):e.options!==void 0?o=>e.options(r.value.hour,o,null):null),oe=D(()=>e.secondOptions!==void 0?o=>e.secondOptions.includes(o):e.options!==void 0?o=>e.options(r.value.hour,r.value.minute,o):null),W=D(()=>{if(ke.value===null)return null;const o=xe(0,11,ke.value),f=xe(12,11,ke.value);return{am:o,pm:f,values:o.values.concat(f.values)}}),ce=D(()=>ne.value!==null?xe(0,59,ne.value):null),R=D(()=>oe.value!==null?xe(0,59,oe.value):null),ue=D(()=>{switch(k.value){case"hour":return W.value;case"minute":return ce.value;case"second":return R.value}}),He=D(()=>{let o,f,p=0,Y=1;const N=ue.value!==null?ue.value.values:void 0;k.value==="hour"?b.value===!0?(o=0,f=23):(o=0,f=11,H.value===!1&&(p=12)):(o=0,f=55,Y=5);const te=[];for(let q=o,U=o;q<=f;q+=Y,U++){const ee=q+p,ot=N!==void 0&&N.includes(ee)===!1,Ae=k.value==="hour"&&q===0?b.value===!0?"00":"12":q;te.push({val:ee,index:U,disable:ot,label:Ae})}return te}),Ee=D(()=>[[Ya,de,void 0,{stop:!0,prevent:!0,mouse:!0}]]);Me(()=>e.modelValue,o=>{const f=Ke(o,A.value,I.value,e.calendar,we.value);(f.dateHash!==r.value.dateHash||f.timeHash!==r.value.timeHash)&&(r.value=f,f.hour===null?k.value="hour":H.value=f.hour<12)}),Me([A,I],()=>{ht(()=>{Le()})});function ge(){const o={...O(),...rn()};Le(o),Object.assign(r.value,o),k.value="hour"}function xe(o,f,p){const Y=Array.apply(null,{length:f+1}).map((N,te)=>{const q=te+o;return{index:q,val:p(q)===!0}}).filter(N=>N.val===!0).map(N=>N.index);return{min:Y[0],max:Y[Y.length-1],values:Y,threshold:f+1}}function Je(o,f,p){const Y=Math.abs(o-f);return Math.min(Y,p-Y)}function Be(o,{min:f,max:p,values:Y,threshold:N}){if(o===f)return f;if(o<f||o>p)return Je(o,f,N)<=Je(o,p,N)?f:p;const te=Y.findIndex(ee=>o<=ee),q=Y[te-1],U=Y[te];return o-q<=U-o?q:U}function We(){return e.calendar!=="persian"&&e.mask!==null?e.mask:`HH:mm${e.withSeconds===!0?":ss":""}`}function Ve(){if(typeof e.defaultDate!="string"){const o=O(!0);return o.dateHash=fe(o),o}return Ke(e.defaultDate,"YYYY/MM/DD",void 0,e.calendar)}function Oe(){return Ma(i)===!0||ue.value!==null&&(ue.value.values.length===0||k.value==="hour"&&b.value!==!0&&W.value[H.value===!0?"am":"pm"].values.length===0)}function Qe(){const o=L.value,{top:f,left:p,width:Y}=o.getBoundingClientRect(),N=Y/2;return{top:f+N,left:p+N,dist:N*.7}}function de(o){if(Oe()!==!0){if(o.isFirst===!0){Z=Qe(),B=Q(o.evt,Z);return}B=Q(o.evt,Z,B),o.isFinal===!0&&(Z=!1,B=null,Ge())}}function Ge(){k.value==="hour"?k.value="minute":e.withSeconds&&k.value==="minute"&&(k.value="second")}function Q(o,f,p){const Y=_a(o),N=Math.abs(Y.top-f.top),te=Math.sqrt(Math.pow(Math.abs(Y.top-f.top),2)+Math.pow(Math.abs(Y.left-f.left),2));let q,U=Math.asin(N/te)*(180/Math.PI);if(Y.top<f.top?U=f.left<Y.left?90-U:270+U:U=f.left<Y.left?U+90:270-U,k.value==="hour"){if(q=U/30,W.value!==null){const ee=b.value!==!0?H.value===!0:W.value.am.values.length>0&&W.value.pm.values.length>0?te>=f.dist:W.value.am.values.length>0;q=Be(q+(ee===!0?0:12),W.value[ee===!0?"am":"pm"])}else q=Math.round(q),b.value===!0?te<f.dist?q<12&&(q+=12):q===12&&(q=0):H.value===!0&&q===12?q=0:H.value===!1&&q!==12&&(q+=12);b.value===!0&&(H.value=q<12)}else q=Math.round(U/6)%60,k.value==="minute"&&ce.value!==null?q=Be(q,ce.value):k.value==="second"&&R.value!==null&&(q=Be(q,R.value));return p!==q&&tt[k.value](q),q}const z={hour(){k.value="hour"},minute(){k.value="minute"},second(){k.value="second"}};function Ze(o){o.keyCode===13&&at()}function Ie(o){o.keyCode===13&&nt()}function et(o){Oe()!==!0&&(v.platform.is.desktop!==!0&&Q(o,Qe()),Ge())}function Se(o){Oe()!==!0&&Q(o,Qe())}function G(o){if(o.keyCode===13)k.value="hour";else if([37,39].includes(o.keyCode)){const f=o.keyCode===37?-1:1;if(W.value!==null){const p=b.value===!0?W.value.values:W.value[H.value===!0?"am":"pm"].values;if(p.length===0)return;if(r.value.hour===null)$e(p[0]);else{const Y=(p.length+p.indexOf(r.value.hour)+f)%p.length;$e(p[Y])}}else{const p=b.value===!0?24:12,Y=b.value!==!0&&H.value===!1?12:0,N=r.value.hour===null?-f:r.value.hour;$e(Y+(24+N+f)%p)}}}function it(o){if(o.keyCode===13)k.value="minute";else if([37,39].includes(o.keyCode)){const f=o.keyCode===37?-1:1;if(ce.value!==null){const p=ce.value.values;if(p.length===0)return;if(r.value.minute===null)Ce(p[0]);else{const Y=(p.length+p.indexOf(r.value.minute)+f)%p.length;Ce(p[Y])}}else{const p=r.value.minute===null?-f:r.value.minute;Ce((60+p+f)%60)}}}function st(o){if(o.keyCode===13)k.value="second";else if([37,39].includes(o.keyCode)){const f=o.keyCode===37?-1:1;if(R.value!==null){const p=R.value.values;if(p.length===0)return;if(r.value.seconds===null)Te(p[0]);else{const Y=(p.length+p.indexOf(r.value.second)+f)%p.length;Te(p[Y])}}else{const p=r.value.second===null?-f:r.value.second;Te((60+p+f)%60)}}}function $e(o){r.value.hour!==o&&(r.value.hour=o,ve())}function Ce(o){r.value.minute!==o&&(r.value.minute=o,ve())}function Te(o){r.value.second!==o&&(r.value.second=o,ve())}const tt={hour:$e,minute:Ce,second:Te};function at(){H.value===!1&&(H.value=!0,r.value.hour!==null&&(r.value.hour-=12,ve()))}function nt(){H.value===!0&&(H.value=!1,r.value.hour!==null&&(r.value.hour+=12,ve()))}function ve(){if(ke.value!==null&&ke.value(r.value.hour)!==!0){r.value=Ke(),k.value="hour";return}if(ne.value!==null&&ne.value(r.value.minute)!==!0){r.value.minute=null,r.value.second=null,k.value="minute";return}if(e.withSeconds===!0&&oe.value!==null&&oe.value(r.value.second)!==!0){r.value.second=null,k.value="second";return}r.value.hour===null||r.value.minute===null||e.withSeconds===!0&&r.value.second===null||Le()}function Le(o){const f=Object.assign({...r.value},o),p=e.calendar==="persian"?V(f.hour)+":"+V(f.minute)+(e.withSeconds===!0?":"+V(f.second):""):ra(new Date(f.year,f.month===null?null:f.month-1,f.day,f.hour,f.minute,f.second,f.millisecond),A.value,I.value,f.year,f.timezoneOffset);f.changed=p!==e.modelValue,c("update:modelValue",p,f)}function lt(){const o=[h("div",{class:"q-time__link "+(k.value==="hour"?"q-time__link--active":"cursor-pointer"),tabindex:_.value,onClick:z.hour,onKeyup:G},x.value.hour),h("div",":"),h("div",se.value===!0?{class:"q-time__link "+(k.value==="minute"?"q-time__link--active":"cursor-pointer"),tabindex:_.value,onKeyup:it,onClick:z.minute}:{class:"q-time__link"},x.value.minute)];e.withSeconds===!0&&o.push(h("div",":"),h("div",K.value===!0?{class:"q-time__link "+(k.value==="second"?"q-time__link--active":"cursor-pointer"),tabindex:_.value,onKeyup:st,onClick:z.second}:{class:"q-time__link"},x.value.second));const f=[h("div",{class:"q-time__header-label row items-center no-wrap",dir:"ltr"},o)];return b.value===!1&&f.push(h("div",{class:"q-time__header-ampm column items-between no-wrap"},[h("div",{class:"q-time__link "+(H.value===!0?"q-time__link--active":"cursor-pointer"),tabindex:_.value,onClick:at,onKeyup:Ze},"AM"),h("div",{class:"q-time__link "+(H.value!==!0?"q-time__link--active":"cursor-pointer"),tabindex:_.value,onClick:nt,onKeyup:Ie},"PM")])),h("div",{class:"q-time__header flex flex-center no-wrap "+s.value},f)}function ze(){const o=r.value[k.value];return h("div",{class:"q-time__content col relative-position"},[h(Ne,{name:"q-transition--scale"},()=>h("div",{key:"clock"+k.value,class:"q-time__container-parent absolute-full"},[h("div",{ref:L,class:"q-time__container-child fit overflow-hidden"},[gt(h("div",{class:"q-time__clock cursor-pointer non-selectable",onClick:et,onMousedown:Se},[h("div",{class:"q-time__clock-circle fit"},[h("div",{class:"q-time__clock-pointer"+(r.value[k.value]===null?" hidden":e.color!==void 0?` text-${e.color}`:""),style:le.value}),He.value.map(f=>h("div",{class:`q-time__clock-position row flex-center q-time__clock-pos-${f.index}`+(f.val===o?" q-time__clock-position--active "+s.value:f.disable===!0?" q-time__clock-position--disable":"")},[h("span",f.label)]))])]),Ee.value)])])),e.nowBtn===!0?h(X,{class:"q-time__now-button absolute",icon:v.iconSet.datetime.now,unelevated:!0,size:"sm",round:!0,color:e.color,textColor:e.textColor,tabindex:_.value,onClick:ge}):null])}return i.proxy.setNow=ge,()=>{const o=[ze()],f=Kt(l.default);return f!==void 0&&o.push(h("div",{class:"q-time__actions"},f)),e.name!==void 0&&e.disable!==!0&&w(o,"push"),h("div",{class:J.value,tabindex:-1},[lt(),h("div",{class:"q-time__main col overflow-auto"},o)])}}});const dn={class:"q-pa-md",style:{"max-width":"300px",padding:"0"}},cn={class:"row items-center justify-end"},vn={class:"row items-center justify-end"},fn={__name:"DateTime",props:{evDateTime:P("2019-02-01 12:44")},emits:["update:date"],setup(e,{emit:l}){const c=e,i=De("evData");return P(c.evDateTime),(v,u)=>(re(),Ue("div",dn,[E(Pe,{filled:"",modelValue:T(i).datetime,"onUpdate:modelValue":[u[2]||(u[2]=_=>T(i).datetime=_),u[3]||(u[3]=_=>l("update:date"))]},{prepend:ye(()=>[E(Ct,{name:"event",class:"cursor-pointer"},{default:ye(()=>[E(Nt,{cover:"","transition-show":"scale","transition-hide":"scale"},{default:ye(()=>[E(on,{modelValue:T(i).datetime,"onUpdate:modelValue":u[0]||(u[0]=_=>T(i).datetime=_),mask:"YYYY-MM-DD HH:mm"},{default:ye(()=>[C("div",cn,[gt(E(X,{label:"\u0417\u0430\u043A\u0440\u044B\u0442\u044C",color:"primary",flat:""},null,512),[[Vt]])])]),_:1},8,["modelValue"])]),_:1})]),_:1})]),append:ye(()=>[E(Ct,{name:"access_time",class:"cursor-pointer"},{default:ye(()=>[E(Nt,{cover:"","transition-show":"scale","transition-hide":"scale"},{default:ye(()=>[E(sn,{modelValue:T(i).datetime,"onUpdate:modelValue":u[1]||(u[1]=_=>T(i).datetime=_),mask:"YYYY-MM-DD HH:mm",format24h:""},{default:ye(()=>[C("div",vn,[gt(E(X,{label:"\u0417\u0430\u043A\u0440\u044B\u0442\u044C",color:"primary",flat:""},null,512),[[Vt]])])]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]))}};const be=e=>(Et("data-v-6325e474"),e=e(),Bt(),e),mn={key:0,class:"eventsarea"},hn={class:"editArea"},gn={class:"card"},yn={class:"editor"},_n={style:{display:"flex","justify-content":"space-between"}},Mn=be(()=>C("br",null,null,-1)),Dn={class:"uploads"},pn={style:{display:"flex","justify-content":"space-between","flex-wrap":"wrap"}},bn=be(()=>C("br",null,null,-1)),wn=be(()=>C("br",null,null,-1)),kn=be(()=>C("br",null,null,-1)),xn=be(()=>C("br",null,null,-1)),Sn={class:"btns"},Cn=be(()=>C("br",null,null,-1)),Yn=be(()=>C("hr",null,null,-1)),qn=be(()=>C("br",null,null,-1)),Hn={__name:"AnnounceEditor",emits:["reload","posterUploaded"],setup(e,{emit:l}){const c=String("https://api.sakh-orch.ru/"),i=Mt(),v=De("token");De("lvl"),Jt();const u=Da();De("editMode");const _=De("Halls"),s={},d=De("evData");function O(){console.log(d)}const y=[{label:"\u0412\u0445\u043E\u0434 \u0441\u0432\u043E\u0431\u043E\u0434\u043D\u044B\u0439",value:2},{label:"\u0411\u0438\u043B\u0435\u0442\u044B \u0432 \u043F\u0440\u043E\u0434\u0430\u0436\u0435",value:3},{label:"\u0412\u0445\u043E\u0434 \u043F\u043E \u043F\u0440\u0438\u0433\u043B\u0430\u0441\u0438\u0442\u0435\u043B\u044C\u043D\u044B\u043C",value:4},{label:"\u041F\u0440\u043E\u0434\u0430\u0436\u0430 \u0437\u0430\u0432\u0435\u0440\u0448\u0435\u043D\u0430",value:5}],w=P(null),Z=P(null),B=P(null);function L(J){return{url:c+"api/upload/poster.php",headers:[{name:"AUTHORIZATION",value:v.value}],formFields:[{name:"id",value:d.value.ev_id}]}}function A(J){return{url:c+"api/upload/postertop.php",headers:[{name:"AUTHORIZATION",value:v.value}],formFields:[{name:"id",value:d.value.ev_id}]}}function I(J){i.notify(Yt("\u0417\u0430\u0433\u0440\u0443\u0436\u0435\u043D\u043E")),l("posterUploaded")}function we(J){var b,le,se;let x=(se=(le=JSON.parse((b=J==null?void 0:J.xhr)==null?void 0:b.response))==null?void 0:le.error)!=null?se:"";i.notify(yt(null,x))}function he(){B.value.saveData()}function k(){u.push({path:"/announces"})}function r(){l("reload")}function H(J){Pt.post(c+"api/set/announce/delposter.php",{params:{id:d.value.ev_id,istop:J}}).then(x=>{var b,le;l("posterUploaded"),i.notify(Yt((le=(b=x==null?void 0:x.data)==null?void 0:b.result)!=null?le:""))}).catch(x=>{i.notify(yt(x))})}return(J,x)=>(re(),Ue(Ut,null,[T(d)?(re(),Ue("div",mn,[C("div",hn,[C("div",gn,[T(d).map?(re(),Xe(qa,{key:0,editMode:J.$attrs.editMode,onIamDeleted:k,onNewAnnounce:r,ref_key:"rAnnounceCard",ref:B,evData:T(d)},null,8,["editMode","evData"])):qe("",!0)]),C("div",yn,[C("div",_n,[E(fn,{date:T(d).datetime,"onUpdate:date":[x[0]||(x[0]=b=>T(d).datetime=b),x[1]||(x[1]=b=>O())]},null,8,["date"])]),Mn,C("div",Dn,[C("div",null,[E(qt,{modelValue:s,"onUpdate:modelValue":x[2]||(x[2]=b=>s=b),style:{"max-width":"300px"},label:"\u0417\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044C \u044D\u0441\u043A\u0438\u0437 1080:684",factory:A,ref_key:"uploader",ref:w,onUploaded:I,onFailed:we},null,512)]),C("div",null,[E(qt,{modelValue:s,"onUpdate:modelValue":x[3]||(x[3]=b=>s=b),style:{"max-width":"300px"},label:"\u0417\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044C \u0430\u0444\u0438\u0448\u0443",factory:L,ref_key:"uploader2",ref:Z,onUploaded:I,onFailed:we},null,512)])]),C("div",pn,[E(X,{label:"\u0423\u0434\u0430\u043B\u0438\u0442\u044C \u044D\u0441\u043A\u0438\u0437",icon:"delete",onClick:x[4]||(x[4]=b=>H("top"))}),E(X,{label:"\u0423\u0434\u0430\u043B\u0438\u0442\u044C \u0430\u0444\u0438\u0448\u0443",icon:"delete",onClick:x[5]||(x[5]=b=>H("poster"))})]),E(Pe,{name:"progName",modelValue:T(d).prog_name,"onUpdate:modelValue":x[6]||(x[6]=b=>T(d).prog_name=b),label:"\u041D\u0430\u0437\u0432\u0430\u043D\u0438\u0435"},null,8,["modelValue"]),E(Ht,{modelValue:T(d).hall_id,"onUpdate:modelValue":x[7]||(x[7]=b=>T(d).hall_id=b),label:"\u041C\u0435\u0441\u0442\u043E \u043F\u0440\u043E\u0432\u0435\u0434\u0435\u043D\u0438\u044F","emit-value":"","map-options":"","option-label":"name","option-value":"id",options:T(_)},null,8,["modelValue","options"]),E(Ht,{modelValue:T(d).pay,"onUpdate:modelValue":x[8]||(x[8]=b=>T(d).pay=b),"emit-value":"","map-options":"",label:"\u0423\u0441\u043B\u043E\u0432\u0438\u044F \u0432\u0445\u043E\u0434\u0430",options:y},null,8,["modelValue"]),bn,T(d).pay==3?(re(),Xe(Pe,{key:0,type:"text",modelValue:T(d).ticket_link,"onUpdate:modelValue":x[9]||(x[9]=b=>T(d).ticket_link=b),label:"\u0421\u0441\u044B\u043B\u043A\u0430 \u043D\u0430 \u043F\u0440\u043E\u0434\u0430\u0436\u0443 \u0431\u0438\u043B\u0435\u0442\u043E\u0432"},null,8,["modelValue"])):qe("",!0),wn,E(Pe,{type:"number",modelValue:T(d).age,"onUpdate:modelValue":x[10]||(x[10]=b=>T(d).age=b),label:"\u0412\u043E\u0437\u0440\u0430\u0441\u0442\u043D\u044B\u0435 \u043E\u0433\u0440\u0430\u043D\u0438\u0447\u0435\u043D\u0438\u044F"},null,8,["modelValue"]),kn,E(Pe,{name:"evDescr",modelValue:T(d).sdescr,"onUpdate:modelValue":x[11]||(x[11]=b=>T(d).sdescr=b),type:"textarea",label:"\u041A\u0440\u0430\u0442\u043A\u043E\u0435 \u043E\u043F\u0438\u0441\u0430\u043D\u0438\u0435"},null,8,["modelValue"]),xn,E(Pe,{name:"evText",modelValue:T(d).description,"onUpdate:modelValue":x[12]||(x[12]=b=>T(d).description=b),type:"textarea",label:"\u041E\u043F\u0438\u0441\u0430\u043D\u0438\u0435"},null,8,["modelValue"])])]),C("div",Sn,[E(X,{label:"\u0421\u043E\u0445\u0440\u0430\u043D\u0438\u0442\u044C",onClick:he})])])):qe("",!0),Cn,Yn,qn],64))}};var Vn=Dt(Hn,[["__scopeId","data-v-6325e474"]]);const On={class:"content"},In={class:"eventboxl"},$n={__name:"AnnouncePage",setup(e){va({title:"\u0410\u043D\u043E\u043D\u0441"});const c=Mt(),i=De("editMode"),v=String("https://api.sakh-orch.ru/"),u=Jt();De("token");const _=P(null);pa("evData",_);function s(){Pt.post(v+"api/get/announces/announce.php",{params:{id:u.params.evid}}).then(d=>{var O,y;_.value=(y=(O=d==null?void 0:d.data)==null?void 0:O.data)!=null?y:null}).catch(d=>{c.notify(yt(d))})}return ba(()=>{s()}),(d,O)=>(re(),Ue("div",On,[T(i)&&_.value?(re(),Xe(Vn,{key:0,onPosterUploaded:s,onReload:s,editMode:T(i)},null,8,["editMode"])):qe("",!0),C("div",In,[_.value?(re(),Xe(za,{key:0,evData:_.value},null,8,["evData"])):qe("",!0)])]))}};var el=Dt($n,[["__scopeId","data-v-3ae655f4"]]);export{el as default};
