import{Q as qu,M as Hu}from"./QScrollArea.edf23b1f.js";import{u as Uu}from"./use-meta.6c10ebf2.js";import{u as de}from"./use-quasar.f463e671.js";import{c as Iu,a as _e}from"./axios.42d422c9.js";import{Q as q}from"./QItemLabel.36b7e39e.js";import{Q as M,b as z,a as au}from"./QImg.2e8349d1.js";import{V as Ou,X as $u,bb as Pu,Z as Fu,di as Qu,r as h,c as Y,w as Ie,aJ as Tu,W as Lu,h as W,g as Wu,dk as Ku,au as Nu,a6 as Ru,a4 as ju,ak as je,A as ee,i as se,m as c,D as L,f as e,q as u,v as i,bi as ce,z as we,ax as T,n as I,t as E,u as P,B as Oe,d as Se,b as Xe,G as vu,y as te,cq as Yu,l as K,E as $e,df as Ye,F as G,bm as he,x as Pe,k as Ge,bk as fu,bl as mu,o as Ze,p as le,C as ie,I as pu,H as zu,a as Ju,ay as nu}from"./index.e0f85654.js";import{Q as Fe}from"./QSelect.7622fe6b.js";import{Q as gu}from"./QTooltip.cd2ab7d7.js";import{T as Xu,d as Qe,b as _u}from"./MainFooter.vue_vue_type_style_index_0_scoped_true_lang.24bd73f4.js";import{a as Gu}from"./style.cfd95670.js";/* empty css               */import{u as ou,b as Zu,c as et,_ as Ue,g as ut,f as tt,Q as iu,a as lt}from"./QPopupProxy.d41904f4.js";import{p as Ce}from"./format.de7e9769.js";import{C as su}from"./ClosePopup.2954fd36.js";import{n as ve,a as du,i as at,c as nt,g as ot}from"./myFuncts.0887c750.js";import{A as it,m as st}from"./AnnounceCard.5c1e42e0.js";import{S as dt,Q as rt}from"./QInnerLoading.55594a54.js";import{m as ct}from"./myAuth.5621b016.js";import{Q as ze}from"./QList.e09df5eb.js";import{S as vt}from"./SelectComposer.63640db7.js";import{W as Ve,P as Je}from"./lib.beeda29a.js";import{_ as Te}from"./BtnDelete.456e0377.js";import{H as ge}from"./hall.6e952b76.js";import{_ as ru}from"./BtnMoveSort.76f4fed6.js";import{_ as eu}from"./plugin-vue_export-helper.21dcd24c.js";import{Q as ft}from"./QVideo.aea458df.js";import{_ as cu}from"./PhoneNumber.cde251d3.js";import"./QToolbarTitle.6adc56b2.js";import"./QLinearProgress.ca3f1b6e.js";import"./QMenu.71680b5c.js";import"./position-engine.6acbd510.js";import"./selection.289153d1.js";import"./rtl.276c3f1b.js";import"./touch.9135741d.js";import"./use-file.49ad3ea6.js";import"./get-emits-object.a3f16783.js";import"./use-render-cache.3aae9b27.js";import"./myAxios.8b50438a.js";import"./AuthorItem.f7420d9e.js";/* empty css                                                                   */function mt(l,O){if(l.hour!==null){if(l.minute===null)return"minute";if(O===!0&&l.second===null)return"second"}return"hour"}function pt(){const l=new Date;return{hour:l.getHours(),minute:l.getMinutes(),second:l.getSeconds(),millisecond:l.getMilliseconds()}}var gt=Ou({name:"QTime",props:{...$u,...Pu,...ou,modelValue:{required:!0,validator:l=>typeof l=="string"||l===null},mask:{...ou.mask,default:null},format24h:{type:Boolean,default:null},defaultDate:{type:String,validator:l=>/^-?[\d]+\/[0-1]\d\/[0-3]\d$/.test(l)},options:Function,hourOptions:Array,minuteOptions:Array,secondOptions:Array,withSeconds:Boolean,nowBtn:Boolean},emits:Zu,setup(l,{slots:O,emit:m}){const p=Wu(),{$q:v}=p.proxy,s=Fu(l,v),{tabindex:k,headerClass:F,getLocale:d,getCurrentDate:C}=et(l,v),f=Qu(l),y=Ku(f);let x,$;const J=h(null),H=Y(()=>Ee()),V=Y(()=>d()),w=Y(()=>hu()),N=Ue(l.modelValue,H.value,V.value,l.calendar,w.value),r=h(mt(N)),n=h(N),D=h(N.hour===null||N.hour<12),U=Y(()=>`q-time q-time--${l.landscape===!0?"landscape":"portrait"}`+(s.value===!0?" q-time--dark q-dark":"")+(l.disable===!0?" disabled":l.readonly===!0?" q-time--readonly":"")+(l.bordered===!0?" q-time--bordered":"")+(l.square===!0?" q-time--square no-border-radius":"")+(l.flat===!0?" q-time--flat no-shadow":"")),Q=Y(()=>{const t=n.value;return{hour:t.hour===null?"--":b.value===!0?Ce(t.hour):String(D.value===!0?t.hour===0?12:t.hour:t.hour>12?t.hour-12:t.hour),minute:t.minute===null?"--":Ce(t.minute),second:t.second===null?"--":Ce(t.second)}}),b=Y(()=>l.format24h!==null?l.format24h:v.lang.date.format24h),ke=Y(()=>{const t=r.value==="hour",a=t===!0?12:60,g=n.value[r.value];let R=`rotate(${Math.round(g*(360/a))-180}deg) translateX(-50%)`;return t===!0&&b.value===!0&&n.value.hour>=12&&(R+=" scale(.7)"),{transform:R}}),ae=Y(()=>n.value.hour!==null),j=Y(()=>ae.value===!0&&n.value.minute!==null),ne=Y(()=>l.hourOptions!==void 0?t=>l.hourOptions.includes(t):l.options!==void 0?t=>l.options(t,null,null):null),ye=Y(()=>l.minuteOptions!==void 0?t=>l.minuteOptions.includes(t):l.options!==void 0?t=>l.options(n.value.hour,t,null):null),be=Y(()=>l.secondOptions!==void 0?t=>l.secondOptions.includes(t):l.options!==void 0?t=>l.options(n.value.hour,n.value.minute,t):null),Z=Y(()=>{if(ne.value===null)return null;const t=A(0,11,ne.value),a=A(12,11,ne.value);return{am:t,pm:a,values:t.values.concat(a.values)}}),fe=Y(()=>ye.value!==null?A(0,59,ye.value):null),me=Y(()=>be.value!==null?A(0,59,be.value):null),Ae=Y(()=>{switch(r.value){case"hour":return Z.value;case"minute":return fe.value;case"second":return me.value}}),De=Y(()=>{let t,a,g=0,B=1;const R=Ae.value!==null?Ae.value.values:void 0;r.value==="hour"?b.value===!0?(t=0,a=23):(t=0,a=11,D.value===!1&&(g=12)):(t=0,a=55,B=5);const ue=[];for(let S=t,X=t;S<=a;S+=B,X++){const pe=S+g,Bu=R!==void 0&&R.includes(pe)===!1,Mu=r.value==="hour"&&S===0?b.value===!0?"00":"12":S;ue.push({val:pe,index:X,disable:Bu,label:Mu})}return ue}),_=Y(()=>[[Xu,ku,void 0,{stop:!0,prevent:!0,mouse:!0}]]);Ie(()=>l.modelValue,t=>{const a=Ue(t,H.value,V.value,l.calendar,w.value);(a.dateHash!==n.value.dateHash||a.timeHash!==n.value.timeHash)&&(n.value=a,a.hour===null?r.value="hour":D.value=a.hour<12)}),Ie([H,V],()=>{Nu(()=>{Re()})});function o(){const t={...C(),...pt()};Re(t),Object.assign(n.value,t),r.value="hour"}function A(t,a,g){const B=Array.apply(null,{length:a+1}).map((R,ue)=>{const S=ue+t;return{index:S,val:g(S)===!0}}).filter(R=>R.val===!0).map(R=>R.index);return{min:B[0],max:B[B.length-1],values:B,threshold:a+1}}function re(t,a,g){const B=Math.abs(t-a);return Math.min(B,g-B)}function oe(t,{min:a,max:g,values:B,threshold:R}){if(t===a)return a;if(t<a||t>g)return re(t,a,R)<=re(t,g,R)?a:g;const ue=B.findIndex(pe=>t<=pe),S=B[ue-1],X=B[ue];return t-S<=X-t?S:X}function Ee(){return l.calendar!=="persian"&&l.mask!==null?l.mask:`HH:mm${l.withSeconds===!0?":ss":""}`}function hu(){if(typeof l.defaultDate!="string"){const t=C(!0);return t.dateHash=ut(t),t}return Ue(l.defaultDate,"YYYY/MM/DD",void 0,l.calendar)}function Le(){return Ru(p)===!0||Ae.value!==null&&(Ae.value.values.length===0||r.value==="hour"&&b.value!==!0&&Z.value[D.value===!0?"am":"pm"].values.length===0)}function We(){const t=J.value,{top:a,left:g,width:B}=t.getBoundingClientRect(),R=B/2;return{top:a+R,left:g+R,dist:R*.7}}function ku(t){if(Le()!==!0){if(t.isFirst===!0){x=We(),$=Be(t.evt,x);return}$=Be(t.evt,x,$),t.isFinal===!0&&(x=!1,$=null,uu())}}function uu(){r.value==="hour"?r.value="minute":l.withSeconds&&r.value==="minute"&&(r.value="second")}function Be(t,a,g){const B=Tu(t),R=Math.abs(B.top-a.top),ue=Math.sqrt(Math.pow(Math.abs(B.top-a.top),2)+Math.pow(Math.abs(B.left-a.left),2));let S,X=Math.asin(R/ue)*(180/Math.PI);if(B.top<a.top?X=a.left<B.left?90-X:270+X:X=a.left<B.left?X+90:270-X,r.value==="hour"){if(S=X/30,Z.value!==null){const pe=b.value!==!0?D.value===!0:Z.value.am.values.length!==0&&Z.value.pm.values.length!==0?ue>=a.dist:Z.value.am.values.length!==0;S=oe(S+(pe===!0?0:12),Z.value[pe===!0?"am":"pm"])}else S=Math.round(S),b.value===!0?ue<a.dist?S<12&&(S+=12):S===12&&(S=0):D.value===!0&&S===12?S=0:D.value===!1&&S!==12&&(S+=12);b.value===!0&&(D.value=S<12)}else S=Math.round(X/6)%60,r.value==="minute"&&fe.value!==null?S=oe(S,fe.value):r.value==="second"&&me.value!==null&&(S=oe(S,me.value));return g!==S&&Vu[r.value](S),S}const Ke={hour(){r.value="hour"},minute(){r.value="minute"},second(){r.value="second"}};function yu(t){t.keyCode===13&&tu()}function bu(t){t.keyCode===13&&lu()}function Au(t){Le()!==!0&&(v.platform.is.desktop!==!0&&Be(t,We()),uu())}function Cu(t){Le()!==!0&&Be(t,We())}function Du(t){if(t.keyCode===13)r.value="hour";else if([37,39].includes(t.keyCode)){const a=t.keyCode===37?-1:1;if(Z.value!==null){const g=b.value===!0?Z.value.values:Z.value[D.value===!0?"am":"pm"].values;if(g.length===0)return;if(n.value.hour===null)Me(g[0]);else{const B=(g.length+g.indexOf(n.value.hour)+a)%g.length;Me(g[B])}}else{const g=b.value===!0?24:12,B=b.value!==!0&&D.value===!1?12:0,R=n.value.hour===null?-a:n.value.hour;Me(B+(24+R+a)%g)}}}function xu(t){if(t.keyCode===13)r.value="minute";else if([37,39].includes(t.keyCode)){const a=t.keyCode===37?-1:1;if(fe.value!==null){const g=fe.value.values;if(g.length===0)return;if(n.value.minute===null)qe(g[0]);else{const B=(g.length+g.indexOf(n.value.minute)+a)%g.length;qe(g[B])}}else{const g=n.value.minute===null?-a:n.value.minute;qe((60+g+a)%60)}}}function wu(t){if(t.keyCode===13)r.value="second";else if([37,39].includes(t.keyCode)){const a=t.keyCode===37?-1:1;if(me.value!==null){const g=me.value.values;if(g.length===0)return;if(n.value.seconds===null)He(g[0]);else{const B=(g.length+g.indexOf(n.value.second)+a)%g.length;He(g[B])}}else{const g=n.value.second===null?-a:n.value.second;He((60+g+a)%60)}}}function Me(t){n.value.hour!==t&&(n.value.hour=t,xe())}function qe(t){n.value.minute!==t&&(n.value.minute=t,xe())}function He(t){n.value.second!==t&&(n.value.second=t,xe())}const Vu={hour:Me,minute:qe,second:He};function tu(){D.value===!1&&(D.value=!0,n.value.hour!==null&&(n.value.hour-=12,xe()))}function lu(){D.value===!0&&(D.value=!1,n.value.hour!==null&&(n.value.hour+=12,xe()))}function Ne(t){const a=l.modelValue;r.value!==t&&a!==void 0&&a!==null&&a!==""&&typeof a!="string"&&(r.value=t)}function xe(){if(ne.value!==null&&ne.value(n.value.hour)!==!0){n.value=Ue(),Ne("hour");return}if(ye.value!==null&&ye.value(n.value.minute)!==!0){n.value.minute=null,n.value.second=null,Ne("minute");return}if(l.withSeconds===!0&&be.value!==null&&be.value(n.value.second)!==!0){n.value.second=null,Ne("second");return}n.value.hour===null||n.value.minute===null||l.withSeconds===!0&&n.value.second===null||Re()}function Re(t){const a=Object.assign({...n.value},t),g=l.calendar==="persian"?Ce(a.hour)+":"+Ce(a.minute)+(l.withSeconds===!0?":"+Ce(a.second):""):tt(new Date(a.year,a.month===null?null:a.month-1,a.day,a.hour,a.minute,a.second,a.millisecond),H.value,V.value,a.year,a.timezoneOffset);a.changed=g!==l.modelValue,m("update:modelValue",g,a)}function Su(){const t=[W("div",{class:"q-time__link "+(r.value==="hour"?"q-time__link--active":"cursor-pointer"),tabindex:k.value,onClick:Ke.hour,onKeyup:Du},Q.value.hour),W("div",":"),W("div",ae.value===!0?{class:"q-time__link "+(r.value==="minute"?"q-time__link--active":"cursor-pointer"),tabindex:k.value,onKeyup:xu,onClick:Ke.minute}:{class:"q-time__link"},Q.value.minute)];l.withSeconds===!0&&t.push(W("div",":"),W("div",j.value===!0?{class:"q-time__link "+(r.value==="second"?"q-time__link--active":"cursor-pointer"),tabindex:k.value,onKeyup:wu,onClick:Ke.second}:{class:"q-time__link"},Q.value.second));const a=[W("div",{class:"q-time__header-label row items-center no-wrap",dir:"ltr"},t)];return b.value===!1&&a.push(W("div",{class:"q-time__header-ampm column items-between no-wrap"},[W("div",{class:"q-time__link "+(D.value===!0?"q-time__link--active":"cursor-pointer"),tabindex:k.value,onClick:tu,onKeyup:yu},"AM"),W("div",{class:"q-time__link "+(D.value!==!0?"q-time__link--active":"cursor-pointer"),tabindex:k.value,onClick:lu,onKeyup:bu},"PM")])),W("div",{class:"q-time__header flex flex-center no-wrap "+F.value},a)}function Eu(){const t=n.value[r.value];return W("div",{class:"q-time__content col relative-position"},[W(ju,{name:"q-transition--scale"},()=>W("div",{key:"clock"+r.value,class:"q-time__container-parent absolute-full"},[W("div",{ref:J,class:"q-time__container-child fit overflow-hidden"},[je(W("div",{class:"q-time__clock cursor-pointer non-selectable",onClick:Au,onMousedown:Cu},[W("div",{class:"q-time__clock-circle fit"},[W("div",{class:"q-time__clock-pointer"+(n.value[r.value]===null?" hidden":l.color!==void 0?` text-${l.color}`:""),style:ke.value}),De.value.map(a=>W("div",{class:`q-time__clock-position row flex-center q-time__clock-pos-${a.index}`+(a.val===t?" q-time__clock-position--active "+F.value:a.disable===!0?" q-time__clock-position--disable":"")},[W("span",a.label)]))])]),_.value)])])),l.nowBtn===!0?W(ee,{class:"q-time__now-button absolute",icon:v.iconSet.datetime.now,unelevated:!0,size:"sm",round:!0,color:l.color,textColor:l.textColor,tabindex:k.value,onClick:o}):null])}return p.proxy.setNow=o,()=>{const t=[Eu()],a=Lu(O.default);return a!==void 0&&t.push(W("div",{class:"q-time__actions"},a)),l.name!==void 0&&l.disable!==!0&&y(t,"push"),W("div",{class:U.value,tabindex:-1},[Su(),W("div",{class:"q-time__main col overflow-auto"},t)])}}});const _t={class:"q-pa-md",style:{"max-width":"300px",padding:"0"}},ht={class:"row items-center justify-end"},kt={class:"row items-center justify-end"},yt={__name:"DateTime",props:{evDateTime:h("2019-02-01 12:44")},emits:["update:date"],setup(l,{emit:O}){const m=se("Announce");return h(l.evDateTime),(v,s)=>(c(),L("div",_t,[e(ce,{filled:"",modelValue:i(m).eventTime,"onUpdate:modelValue":s[2]||(s[2]=k=>i(m).eventTime=k),mask:"####-##-## ##:##"},{prepend:u(()=>[e(we,{name:"event",class:"cursor-pointer"},{default:u(()=>[e(iu,{cover:"","transition-show":"scale","transition-hide":"scale"},{default:u(()=>[e(lt,{modelValue:i(m).eventTime,"onUpdate:modelValue":s[0]||(s[0]=k=>i(m).eventTime=k),mask:"YYYY-MM-DD HH:mm"},{default:u(()=>[T("div",ht,[je(e(ee,{label:"\u0417\u0430\u043A\u0440\u044B\u0442\u044C",color:"primary",flat:""},null,512),[[su]])])]),_:1},8,["modelValue"])]),_:1})]),_:1})]),append:u(()=>[e(we,{name:"access_time",class:"cursor-pointer"},{default:u(()=>[e(iu,{cover:"","transition-show":"scale","transition-hide":"scale"},{default:u(()=>[e(gt,{modelValue:i(m).eventTime,"onUpdate:modelValue":s[1]||(s[1]=k=>i(m).eventTime=k),mask:"YYYY-MM-DD HH:mm",format24h:""},{default:u(()=>[T("div",kt,[je(e(ee,{label:"\u0417\u0430\u043A\u0440\u044B\u0442\u044C",color:"primary",flat:""},null,512),[[su]])])]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]))}},bt={__name:"WorkSelectItem",props:{work:Object},setup(l){const O=de();return(m,p)=>(c(),I(z,{clickable:"",dense:""},{default:u(()=>[e(M,null,{default:u(()=>[e(q,null,{default:u(()=>[E(P(l.work.titleRu),1)]),_:1}),e(q,{caption:""},{default:u(()=>[E(P(l.work.titleEn),1)]),_:1})]),_:1}),e(M,{side:"",class:"opus"},{default:u(()=>[e(q,{caption:""},{default:u(()=>{var v;return[E(P((v=l.work.opus)!=null?v:"Op.?"),1)]}),_:1}),e(q,{caption:""},{default:u(()=>{var v;return[E(P((v=l.work.icatno)!=null?v:"cat\u2116.?"),1)]}),_:1}),e(q,{caption:""},{default:u(()=>{var v;return[E(P((v=l.work.catalogIndex)!=null?v:"catIdx: ?"),1)]}),_:1}),e(ee,{dense:"","icon-right":"content_copy",flat:"",label:`ID: ${l.work.id}`,onClick:p[0]||(p[0]=Oe(v=>m.copy(l.work.id,i(O)),["prevent","stop"]))},null,8,["label"])]),_:1})]),_:1}))}},At=Se({__name:"AddWorkDialog",props:{announce:{type:Object,required:!0}},emits:["workSelected","onAddWork"],setup(l,{emit:O}){const m=de(),p=se("isOpenAddWorkDialog"),v=h(!1),s=h(),k=h(),F=O,d=l,C=h([]),f=h([]),y=h([]);function x(r){k.value=r,F("workSelected",r),H(r.id)}function $(r){var n;s.value=r,k.value=void 0,(n=s.value)!=null&&n.id&&J(s.value.id)}async function J(r){v.value=!0,C.value=await Ve.getListByAuthor(m,r),v.value=!1}async function H(r){v.value=!0,f.value=await Je.getList(m,r),v.value=!1}async function V(){v.value=!0,await Ve.linkToAnnounce(m,d.announce.id,k.value.id,y.value)&&(F("onAddWork",k.value),w()),v.value=!1}function w(){p.value=!1}function N(){s.value=void 0,k.value=void 0,v.value=!1}return(r,n)=>(c(),I(vu,{modelValue:i(p),"onUpdate:modelValue":n[3]||(n[3]=D=>Xe(p)?p.value=D:null),onBeforeHide:N},{default:u(()=>[e(Pe,{bordered:"",class:"dialogArea"},{default:u(()=>[e(te,null,{default:u(()=>[e(vt,{onItSel:$})]),_:1}),s.value?(c(),I(te,{key:0},{default:u(()=>[e(Fe,{modelValue:k.value,"onUpdate:modelValue":[n[0]||(n[0]=D=>k.value=D),x],options:C.value,"option-label":"titleRu","option-value":"id","map-options":"",clearable:"",label:"\u041F\u0440\u043E\u0438\u0437\u0432\u0435\u0434\u0435\u043D\u0438\u0435"},{option:u(D=>[e(bt,Yu(D.itemProps,{work:D.opt}),null,16,["work"])]),_:1},8,["modelValue","options"])]),_:1})):K("",!0),k.value?(c(),I(te,{key:1},{default:u(()=>[f.value.length?(c(),I(ze,{key:0,separator:""},{default:u(()=>[(c(!0),L(G,null,$e(f.value,D=>(c(),I(z,{key:`part_${D.id}`,tag:"label"},{default:u(()=>[e(M,null,{default:u(()=>[e(q,null,{default:u(()=>[E(P(D.title),1)]),_:2},1024),e(q,{caption:""},{default:u(()=>[E(P(D.caption),1)]),_:2},1024)]),_:2},1024),e(M,{side:""},{default:u(()=>[e(Ye,{modelValue:y.value,"onUpdate:modelValue":[n[1]||(n[1]=U=>y.value=U),n[2]||(n[2]=()=>{console.log(y.value)})],val:D.id},null,8,["modelValue","val"])]),_:2},1024)]),_:2},1024))),128))]),_:1})):(c(),I(z,{key:1},{default:u(()=>[e(M,null,{default:u(()=>[e(q,null,{default:u(()=>n[4]||(n[4]=[E(" \u0427\u0430\u0441\u0442\u0438 \u043D\u0435 \u043D\u0430\u0439\u0434\u0435\u043D\u044B ")])),_:1}),e(q,{caption:""},{default:u(()=>n[5]||(n[5]=[E(" \u0418\u0445 \u043C\u043E\u0436\u043D\u043E \u0434\u043E\u0431\u0430\u0432\u0438\u0442\u044C \u0432 \u0431\u0438\u0431\u043B\u0438\u043E\u0442\u0435\u043A\u0435 ")])),_:1})]),_:1})]),_:1})),n[6]||(n[6]=T("template",null,null,-1))]),_:1})):K("",!0),e(he,{align:"between"},{default:u(()=>[e(Qe),e(ee,{"icon-right":"save",color:"green",loading:v.value,onClick:V,label:"\u0441\u043E\u0445\u0440\u0430\u043D\u0438\u0442\u044C",flat:""},null,8,["loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"]))}}),Ct=Se({__name:"SuggestSelect",emits:["saved"],setup(l,{emit:O}){const m=de(),p=String("https://sakh-orch.ru/api/"),v=String("https://sakh-orch.ru/stapi/"),s=h(""),k=h(null),F=h([{title:{text:"\u0421\u0430\u0445\u0430\u043B\u0438\u043D\u0441\u043A\u0438\u0439 \u043C\u0435\u0436\u0434\u0443\u043D\u0430\u0440\u043E\u0434\u043D\u044B\u0439 \u0442\u0435\u0430\u0442\u0440\u0430\u043B\u044C\u043D\u044B\u0439 \u0446\u0435\u043D\u0442\u0440 \u0438\u043C\u0435\u043D\u0438 \u0410\u043D\u0442\u043E\u043D\u0430 \u041F\u0430\u0432\u043B\u043E\u0432\u0438\u0447\u0430 \u0427\u0435\u0445\u043E\u0432\u0430",hl:[{begin:26,end:31}]},subtitle:{text:"\u0422\u0435\u0430\u0442\u0440 \xB7 \u041A\u043E\u043C\u043C\u0443\u043D\u0438\u0441\u0442\u0438\u0447\u0435\u0441\u043A\u0438\u0439 \u043F\u0440\u043E\u0441\u043F\u0435\u043A\u0442, 35",hl:[{begin:0,end:5}]},tags:["business","theatre","museum","concert hall"],distance:{value:1178.70231,text:"1.18 \u043A\u043C"}},{title:{text:"\u0421\u0430\u0445\u0430\u043B\u0438\u043D\u0441\u043A\u0438\u0439 \u0442\u0435\u0430\u0442\u0440 \u043A\u0443\u043A\u043E\u043B",hl:[{begin:12,end:17}]},subtitle:{text:"\u0422\u0435\u0430\u0442\u0440 \xB7 \u041A\u043E\u043C\u043C\u0443\u043D\u0438\u0441\u0442\u0438\u0447\u0435\u0441\u043A\u0438\u0439 \u043F\u0440\u043E\u0441\u043F\u0435\u043A\u0442, 28\u0410",hl:[{begin:0,end:5}]},tags:["business","theatre","office service"],distance:{value:1224.330864,text:"1.22 \u043A\u043C"}},{title:{text:"\u041C\u043E\u0441\u043A\u043E\u0432\u0441\u043A\u0438\u0439 \u0434\u0440\u0430\u043C\u0430\u0442\u0438\u0447\u0435\u0441\u043A\u0438\u0439 \u0442\u0435\u0430\u0442\u0440 \u0438\u043C\u0435\u043D\u0438 \u041C. \u041D. \u0415\u0440\u043C\u043E\u043B\u043E\u0432\u043E\u0439",hl:[{begin:25,end:30}]},subtitle:{text:"\u0422\u0435\u0430\u0442\u0440 \xB7 \u041C\u043E\u0441\u043A\u0432\u0430, \u0422\u0432\u0435\u0440\u0441\u043A\u0430\u044F \u0443\u043B\u0438\u0446\u0430, 5/6",hl:[{begin:0,end:5}]},tags:["business","theatre"],distance:{value:6655148389e-3,text:"6655.15 \u043A\u043C"}},{title:{text:"\u0422\u0430\u0442\u0430\u0440\u0441\u043A\u0438\u0439 \u0433\u043E\u0441\u0443\u0434\u0430\u0440\u0441\u0442\u0432\u0435\u043D\u043D\u044B\u0439 \u0442\u0435\u0430\u0442\u0440 \u043A\u0443\u043A\u043E\u043B \u042D\u043A\u0438\u044F\u0442",hl:[{begin:26,end:31}]},subtitle:{text:"\u0422\u0435\u0430\u0442\u0440 \xB7 \u041A\u0430\u0437\u0430\u043D\u044C, \u041F\u0435\u0442\u0435\u0440\u0431\u0443\u0440\u0433\u0441\u043A\u0430\u044F \u0443\u043B\u0438\u0446\u0430, 57",hl:[{begin:0,end:5}]},tags:["business","theatre"],distance:{value:6077098052e-3,text:"6077.10 \u043A\u043C"}},{title:{text:"\u0422\u0435\u0430\u0442\u0440 \u0434\u0440\u0430\u043C\u044B \u0438 \u043A\u043E\u043C\u0435\u0434\u0438\u0438",hl:[{begin:0,end:5}]},subtitle:{text:"\u0422\u0435\u0430\u0442\u0440 \xB7 \u041F\u0435\u0442\u0440\u043E\u043F\u0430\u0432\u043B\u043E\u0432\u0441\u043A-\u041A\u0430\u043C\u0447\u0430\u0442\u0441\u043A\u0438\u0439, \u041B\u0435\u043D\u0438\u043D\u0441\u043A\u0430\u044F \u0443\u043B\u0438\u0446\u0430, 75",hl:[{begin:0,end:5}]},tags:["business","theatre"],distance:{value:1321394665e-3,text:"1321.39 \u043A\u043C"}},{title:{text:"\u0422\u0435\u0430\u0442\u0440 \u041A\u043E\u043B\u0435\u0441\u043E",hl:[{begin:0,end:5}]},subtitle:{text:"\u041E\u0441\u0442\u0430\u043D\u043E\u0432\u043A\u0430 \u043E\u0431\u0449\u0435\u0441\u0442\u0432\u0435\u043D\u043D\u043E\u0433\u043E \u0442\u0440\u0430\u043D\u0441\u043F\u043E\u0440\u0442\u0430 \xB7 \u0422\u043E\u043B\u044C\u044F\u0442\u0442\u0438, \u041B\u0435\u043D\u0438\u043D\u0433\u0440\u0430\u0434\u0441\u043A\u0430\u044F \u0443\u043B\u0438\u0446\u0430, 33\u0410\u04411"},tags:["business","bus stop"],distance:{value:6203127608e-3,text:"6203.13 \u043A\u043C"}},{title:{text:"\u0422\u0435\u0430\u0442\u0440\u0430\u043B\u044C\u043D\u0430\u044F",hl:[{begin:0,end:5}]},subtitle:{text:"\u041E\u0441\u0442\u0430\u043D\u043E\u0432\u043A\u0430 \u043E\u0431\u0449\u0435\u0441\u0442\u0432\u0435\u043D\u043D\u043E\u0433\u043E \u0442\u0440\u0430\u043D\u0441\u043F\u043E\u0440\u0442\u0430 \xB7 \u0421\u043E\u0447\u0438, \u0410-147"},tags:["business","bus stop"],distance:{value:7445799203e-3,text:"7445.80 \u043A\u043C"}}]),d=h([...F.value]),C=O;function f(H,V){if(!H){d.value=[];return}V(()=>{y(H)})}function y(H){const V="https://suggest-maps.yandex.ru/v1/suggest";Iu.get(V,{params:{apikey:s.value,text:H,ull:"142.728060,46.966085",print_address:1,strict_bounds:1,attrs:"uri"},withCredentials:!1,headers:{"Content-Type":"application/json",Accept:"application/json"}}).then(w=>{var r;if(!((r=w==null?void 0:w.data)!=null&&r.results))return;const N=w.data.results;N.forEach((n,D)=>{n.label=n.address.formatted_address,n.value=D}),d.value=N}).catch(w=>{console.error(w),m.notify(ve(w))})}function x(){_e.post(p+"epoint/ya/suggest.php",{params:{method:"add",suggest:k.value}}).then(H=>{var V;if(!((V=H==null?void 0:H.data)!=null&&V.result))throw new Error;C("saved",H.data.data.id)}).catch(H=>{m.notify(ve(H))})}function $(){!k.value||x()}function J(){const H=v+"epoint/ya/suggest.php",V={method:"getApiKey"};_e.post(H,{params:V}).then(w=>{var N;if(!((N=w==null?void 0:w.data)!=null&&N.result))throw new Error("SuggestApiKey Error");s.value=w.data.data.key}).catch(w=>{console.error(w),m.notify(ve(w))})}return Ge(()=>{J()}),(H,V)=>s.value?(c(),I(Fe,{key:0,modelValue:k.value,"onUpdate:modelValue":[V[0]||(V[0]=w=>k.value=w),$],options:d.value,"use-input":"","fill-input":"","hide-selected":"",clearable:"",onFilter:f},{option:u(w=>[e(z,fu(mu(w.itemProps)),{default:u(()=>[e(M,null,{default:u(()=>[e(q,null,{default:u(()=>[E(P(w.opt.title.text),1)]),_:2},1024),e(q,{caption:""},{default:u(()=>{var N,r;return[E(P((r=(N=w.opt)==null?void 0:N.address)==null?void 0:r.formatted_address),1)]}),_:2},1024)]),_:2},1024)]),_:2},1040)]),_:1},8,["modelValue","options"])):K("",!0)}}),Dt={class:"text-h6"},xt=Se({__name:"HallDialog",setup(l){const O=de(),m=se("clickedHall"),p=se("IsHallDialogOpen"),v=h(!1);Ze(()=>{});async function s(){v.value=!0,await m.value.save(O)&&(ge.List.value=await ge.getList(O),p.value=!1),v.value=!1}function k(f){m.value.suggestId=f}function F(){m.value||(m.value=new ge)}function d(){}async function C(f){v.value=!0,await f.del(O)&&(p.value=!1),v.value=!1}return(f,y)=>(c(),I(vu,{modelValue:i(p),"onUpdate:modelValue":y[3]||(y[3]=x=>Xe(p)?p.value=x:null),onBeforeShow:F,onBeforeHide:d},{default:u(()=>[e(Pe,{bordered:"",class:"dialogArea"},{default:u(()=>[e(M,null,{default:u(()=>[T("div",Dt,P(i(m).id>0?"\u0420\u0435\u0434\u0430\u043A\u0442\u0438\u0440\u043E\u0432\u0430\u0442\u044C \u0437\u0430\u043B":"\u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C \u0437\u0430\u043B"),1)]),_:1}),e(te,null,{default:u(()=>[e(ce,{modelValue:i(m).name,"onUpdate:modelValue":y[0]||(y[0]=x=>i(m).name=x),label:"\u041D\u0430\u0437\u0432\u0430\u043D\u0438\u0435","stack-label":""},null,8,["modelValue"]),i(m).id===-1?(c(),I(Ct,{key:0,onSaved:k})):(c(),I(z,{key:1},{default:u(()=>[e(M,null,{default:u(()=>[e(q,null,{default:u(()=>{var x,$,J;return[E(P((J=($=(x=i(m))==null?void 0:x.suggest)==null?void 0:$.address)==null?void 0:J.formatted),1)]}),_:1})]),_:1})]),_:1}))]),_:1}),e(he,null,{default:u(()=>[e(Qe),i(m).id>0?(c(),I(Te,{key:0,label:"\u0423\u0434\u0430\u043B\u0438\u0442\u044C",loading:v.value,"throw-confirm":"",title:"\u0423\u0434\u0430\u043B\u0438\u0442\u044C \u0437\u0430\u043B",danger:"",onOnOk:y[1]||(y[1]=x=>C(i(m)))},null,8,["loading"])):K("",!0),e(ee,{label:"\u0421\u043E\u0445\u0440\u0430\u043D\u0438\u0442\u044C",disable:!i(m).suggestId,loading:v.value,color:"green",onClick:y[2]||(y[2]=x=>s())},null,8,["disable","loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"]))}}),wt=Se({__name:"HallSelect",emits:["selected"],setup(l,{emit:O}){const m=de(),p=se("selectedHall"),v=h(!1),s=h(!1);le("IsHallDialogOpen",v);const k=h(),F=O;function d(x=null){x||(x=new ge),y.value=new ge(x),v.value=!0}function C(){y.value=p.value,F("selected",p.value)}async function f(x){s.value=!0,await x.del(m)&&(v.value=!1),s.value=!1}const y=h(new ge);return le("clickedHall",y),Ge(()=>{}),(x,$)=>{var J,H;return c(),L(G,null,[e(Fe,{modelValue:i(p),"onUpdate:modelValue":[$[1]||($[1]=V=>Xe(p)?p.value=V:null),$[2]||($[2]=V=>C())],label:"\u041C\u0435\u0441\u0442\u043E \u043F\u0440\u043E\u0432\u0435\u0434\u0435\u043D\u0438\u044F","map-options":"","option-label":"name","option-value":"id",options:(H=(J=i(ge).List)==null?void 0:J.value)!=null?H:[],ref_key:"selRef",ref:k},{append:u(()=>[e(ee,{icon:"add",round:"",onClick:$[0]||($[0]=Oe(V=>d(),["prevent","stop"]))},{default:u(()=>[e(gu,null,{default:u(()=>$[3]||($[3]=[E("\u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C \u0437\u0430\u043B")])),_:1})]),_:1})]),option:u(V=>[e(z,fu(mu(V.itemProps)),{default:u(()=>[e(M,null,{default:u(()=>[e(q,null,{default:u(()=>[E(P(V.opt.name),1)]),_:2},1024),e(q,{caption:""},{default:u(()=>[E(P(V.opt.suggest.address.formatted),1)]),_:2},1024)]),_:2},1024),e(M,{side:""},{default:u(()=>[e(Te,{danger:"","throw-confirm":"",flat:"",loading:s.value,tooltip:"\u0423\u0434\u0430\u043B\u0438\u0442\u044C \u0437\u0430\u043B",title:"\u0423\u0434\u0430\u043B\u0438\u0442\u044C \u0437\u0430\u043B: "+V.opt.name,onOnOk:w=>f(V.opt)},null,8,["loading","title","onOnOk"])]),_:2},1024),e(M,{side:""},{default:u(()=>[e(ee,{icon:"edit",flat:"",onClick:Oe(w=>d(V.opt),["prevent","stop"])},null,8,["onClick"])]),_:2},1024)]),_:2},1040)]),_:1},8,["modelValue","options"]),e(xt)],64)}}}),Vt=Se({__name:"WorkList",props:{announce:{type:Object,required:!0}},setup(l){const O=de(),m=l,p=h(!1),v=h(!1);le("isOpenAddWorkDialog",v);function s(){v.value=!0}function k(U){console.log(U)}const F=h([]),d=h([]),C=h([]),f=h(!1);function y(U){const Q=U.map(b=>b.id);C.value=Array.from(new Set([...C.value,...Q]))}function x(U){const Q=U.map(b=>b.id);C.value=C.value.filter(b=>!Q.includes(b))}function $(U){return U.every(Q=>C.value.includes(Q.id))}function J(U){$(U)?x(U):y(U)}const H=h({});function V(U){H.value[U.id]=Y({get(){return $(U.children)},set(Q){J(U.children)}})}async function w(){p.value=!0;const U=m.announce.id;F.value=await Ve.getListByAnnounce(O,U),F.value.length&&(await N(),F.value.forEach(Q=>V(Q))),p.value=!1}async function N(){p.value=!0;const U=m.announce.id;d.value=await Je.getListByAnnounce(O,U),C.value=d.value.map(Q=>Q.id),p.value=!1}async function r(){p.value=!0,await Je.linkListToAnnounce(O,m.announce.id,C.value),p.value=!1}async function n(U){p.value=!0,await Ve.unlinkFromAnnounce(O,m.announce.id,U)&&await w(),p.value=!1}async function D(U,Q){p.value=!0,await Ve.moveSortInAnnounce(O,U,Q,m.announce.id)&&await w(),p.value=!1}return Ge(async()=>{await w()}),(U,Q)=>(c(),L(G,null,[e(Pe,null,{default:u(()=>[e(he,{align:"between"},{default:u(()=>[f.value?(c(),I(ee,{key:0,icon:"add",label:"\u0434\u043E\u0431\u0430\u0432\u0438\u0442\u044C",onClick:s,loading:p.value},null,8,["loading"])):K("",!0),e(Qe),e(ee,{icon:"edit",flat:"",round:"",onClick:Q[0]||(Q[0]=Oe(b=>f.value=!f.value,["stop","prevent"])),color:f.value?"red":"gray"},null,8,["color"])]),_:1}),e(te,null,{default:u(()=>[e(ze,null,{default:u(()=>[(c(!0),L(G,null,$e(F.value,(b,ke)=>{var ae;return c(),L(G,{key:`w${b.id}`},[(ae=b==null?void 0:b.children)!=null&&ae.length?(c(),I(_u,{key:0,"content-inset-level":.1,"expand-separator":""},{header:u(()=>[e(z,{style:{width:"100%"},class:"no-padding"},{default:u(()=>[e(M,{avatar:""},{default:u(()=>[e(q,{caption:""},{default:u(()=>[E(P(b.author.fioRu),1)]),_:2},1024),e(q,null,{default:u(()=>[E(P(b.titleRu),1)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),default:u(()=>[e(ze,null,{default:u(()=>[f.value?(c(),I(z,{key:0,tag:"label"},{default:u(()=>[e(M,null,{default:u(()=>[e(q,null,{default:u(()=>[E(P($(b.children)?"\u0421\u043D\u044F\u0442\u044C \u0432\u0441\u0435":"\u041E\u0442\u043C\u0435\u0442\u0438\u0442\u044C \u0432\u0441\u0435"),1)]),_:2},1024)]),_:2},1024),e(M,{side:""},{default:u(()=>[e(Ye,{modelValue:H.value[b.id],"onUpdate:modelValue":[j=>H.value[b.id]=j,r],disable:p.value,"keep-color":"",color:"green"},null,8,["modelValue","onUpdate:modelValue","disable"])]),_:2},1024)]),_:2},1024)):K("",!0),(c(!0),L(G,null,$e(b.children,j=>(c(),I(z,{key:`ch${j.id}`,tag:"label"},{default:u(()=>[e(M,{avatar:""},{default:u(()=>[e(q,null,{default:u(()=>[E(P(j.num),1)]),_:2},1024)]),_:2},1024),e(M,null,{default:u(()=>[e(q,null,{default:u(()=>[E(P(j.title),1)]),_:2},1024),e(q,{caption:""},{default:u(()=>[E(P(j.caption),1)]),_:2},1024)]),_:2},1024),e(M,{side:""},{default:u(()=>[e(Ye,{modelValue:C.value,"onUpdate:modelValue":[Q[1]||(Q[1]=ne=>C.value=ne),r],disable:!f.value,val:j.id},null,8,["modelValue","disable","val"])]),_:2},1024)]),_:2},1024))),128))]),_:2},1024)]),_:2},1024)):(c(),I(z,{key:1},{default:u(()=>[e(M,null,{default:u(()=>[e(q,{caption:""},{default:u(()=>[E(P(b.author.fioRu),1)]),_:2},1024),e(q,null,{default:u(()=>[E(P(b.titleRu),1)]),_:2},1024)]),_:2},1024)]),_:2},1024)),f.value?(c(),L(G,{key:2},[e(z,null,{default:u(()=>[e(M,{avatar:""},{default:u(()=>[e(ru,{disable:ke<1,onOnClick:j=>D("up",b.id),direction:"up"},null,8,["disable","onOnClick"])]),_:2},1024),e(M,{avatar:""},{default:u(()=>[e(ru,{disable:ke>=F.value.length-1,onOnClick:j=>D("down",b.id),direction:"down"},null,8,["disable","onOnClick"])]),_:2},1024),e(M),e(M,{side:""},{default:u(()=>[e(Te,{flat:"","throw-confirm":"",danger:"",onOnOk:j=>n(b.id),loading:p.value,title:`\u0423\u0434\u0430\u043B\u0438\u0442\u044C: ${b.titleRu}`},null,8,["onOnOk","loading","title"])]),_:2},1024)]),_:2},1024),e(ie)],64)):K("",!0)],64)}),128))]),_:1})]),_:1})]),_:1}),e(At,{announce:l.announce,onWorkSelected:k,onOnAddWork:w},null,8,["announce"])],64))}});const St={key:0,class:"eventsarea"},Et={class:"editArea"},Bt={key:0,class:"card"},Mt={class:"editor"},qt={style:{display:"flex","justify-content":"space-between"}},Ht={key:0,class:"uploads"},Ut={style:{width:"100%"}},It={class:"uploads"},Ot={__name:"AnnounceEditor",emits:["reload","posterUploaded"],setup(l,{expose:O,emit:m}){const p=String("https://sakh-orch.ru/stapi/"),v=String("https://sakh-orch.ru/api/"),s=de(),k=pu(),F=zu(),d=se("Announce"),C=h(d.value.Hall);le("selectedHall",C);function f(_){console.log(_),d.value.hallId=_.id,d.value.Hall=_}const y=h("");le("pwUrl",y);const x=m,$={};function J(){}const H=[{label:"\u0412\u0445\u043E\u0434 \u0441\u0432\u043E\u0431\u043E\u0434\u043D\u044B\u0439",value:2},{label:"\u0411\u0438\u043B\u0435\u0442\u044B \u0432 \u043F\u0440\u043E\u0434\u0430\u0436\u0435",value:3},{label:"\u0412\u0445\u043E\u0434 \u043F\u043E \u043F\u0440\u0438\u0433\u043B\u0430\u0441\u0438\u0442\u0435\u043B\u044C\u043D\u044B\u043C",value:4},{label:"\u041F\u0440\u043E\u0434\u0430\u0436\u0430 \u0437\u0430\u0432\u0435\u0440\u0448\u0435\u043D\u0430",value:5}],V=h(null),w=h(null),N=h([]);le("AuthorSelectList",N);const r=h(!1);le("loadingAuthors",r);const n=h(0);le("selectedAuthorId",n);const D=h(null);le("selectedAuthor",D),Ie(n,()=>{D.value=N.value.find(_=>_.id===n.value)});function U(){r.value=!0,_e.post(p+"epoint/lib/author.php",{params:{method:"all"}}).then(_=>{var o,A;N.value=(A=(o=_==null?void 0:_.data)==null?void 0:o.data)!=null?A:[]}).catch(_=>{N.value=[],s.notify(ve(_))}).finally(()=>{r.value=!1})}function Q(_){return{url:v+"epoint/event/poster.php",headers:[{name:"ACCESSTOKEN",value:ct.self.AccessToken}],formFields:[{name:"id",value:d.value.id},{name:"method",value:"add"}]}}function b(_){s.notify(du("\u0417\u0430\u0433\u0440\u0443\u0436\u0435\u043D\u043E")),x("posterUploaded")}function ke(_){s.notify(du("\u0417\u0430\u0433\u0440\u0443\u0436\u0435\u043D\u043E")),x("posterUploaded"),V.value.reset(),ae.value=!0}const ae=h(!1);let j=null;Ie(ae,_=>{console.log("photoWatcher"),_&&!j?j=setInterval(Ae,3e3):!_&&j&&(clearInterval(j),j=null)});function ne(_){var A,re,oe;let o=(oe=(re=JSON.parse((A=_==null?void 0:_.xhr)==null?void 0:A.response))==null?void 0:re.error)!=null?oe:"";s.notify(ve(null,o))}function ye(){st.save(s,d.value)}function be(){F.push({path:"/announces"})}function Z(){x("reload")}function fe(){delete d.value.sketch,delete d.value.sketchId}function me(){_e.post(v+"epoint/event/announce.php",{params:{method:"updateMarkdown",id:d.value.id,markdown:d.value.description}}).then(_=>{var o;if(!((o=_==null?void 0:_.data)!=null&&o.result))throw new Error;d.value.parsedMD=_==null?void 0:_.data.data}).catch(_=>{})}function Ae(){_e.post(v+"epoint/event/poster.php",{params:{method:"get",announceId:k.params.evid}}).then(_=>{var o,A,re,oe,Ee;if(!((o=_==null?void 0:_.data)!=null&&o.result))throw new Error;d.value.poster=(re=(A=_==null?void 0:_.data)==null?void 0:A.data)!=null?re:null,((Ee=(oe=d.value)==null?void 0:oe.poster)==null?void 0:Ee.status)!=="process"&&(ae.value=!1)}).catch(_=>{ae.value=!1,s.notify(ve(_))}).finally(()=>{})}const De=h(!1);return O({}),Ze(()=>{U()}),Ju(()=>{j&&clearInterval(j)}),(_,o)=>(c(),L(G,null,[i(d)?(c(),L("div",St,[T("div",Et,[i(s).platform.is.desktop?(c(),L("div",Bt,[i(d).Hall?(c(),I(it,{key:0,onIamDeleted:be,onNewAnnounce:Z,onDelSketch:fe,ref_key:"rAnnounceCard",ref:w,announce:i(d),pwUrl:y.value},null,8,["announce","pwUrl"])):K("",!0)])):K("",!0),T("div",Mt,[T("div",qt,[e(yt,{date:i(d).eventTime,"onUpdate:date":[o[0]||(o[0]=A=>i(d).eventTime=A),o[1]||(o[1]=A=>void 0)]},null,8,["date"])]),o[19]||(o[19]=T("br",null,null,-1)),o[20]||(o[20]=T("hr",null,null,-1)),i(s).platform.is.desktop?(c(),L("div",Ht,[T("div",Ut,[e(dt,{id:i(d).id,type:"event",onOnUploaded:b},null,8,["id"])])])):(c(),I(z,{key:1},{default:u(()=>[e(M,null,{default:u(()=>[e(q,{caption:""},{default:u(()=>o[14]||(o[14]=[E(" \u0417\u0430\u0433\u0440\u0443\u0437\u043A\u0430 \u044D\u0441\u043A\u0438\u0437\u0430 \u043D\u0435 \u043F\u043E\u0434\u0434\u0435\u0440\u0436\u0438\u0432\u0430\u0435\u0442 \u043C\u043E\u0431\u0438\u043B\u044C\u043D\u044B\u0435 \u0443\u0441\u0442\u0440\u043E\u0439\u0441\u0442\u0432\u0430 ")])),_:1})]),_:1})]),_:1})),e(ie,{spaced:"1em"}),e(ce,{name:"progName",modelValue:i(d).progName,"onUpdate:modelValue":o[2]||(o[2]=A=>i(d).progName=A),label:"\u041D\u0430\u0437\u0432\u0430\u043D\u0438\u0435"},null,8,["modelValue"]),e(wt,{onSelected:f}),e(Fe,{modelValue:i(d).pay,"onUpdate:modelValue":o[3]||(o[3]=A=>i(d).pay=A),"emit-value":"","map-options":"",label:"\u0423\u0441\u043B\u043E\u0432\u0438\u044F \u0432\u0445\u043E\u0434\u0430",options:H},null,8,["modelValue"]),o[21]||(o[21]=T("br",null,null,-1)),[3,4].includes(i(d).pay)?(c(),L(G,{key:2},[e(ce,{type:"text",modelValue:i(d).ticketLink,"onUpdate:modelValue":o[4]||(o[4]=A=>i(d).ticketLink=A),label:"\u0421\u0441\u044B\u043B\u043A\u0430 \u043D\u0430 \u043F\u0440\u0438\u043E\u0431\u0440\u0435\u0442\u0435\u043D\u0438\u0435 \u0431\u0438\u043B\u0435\u0442\u043E\u0432"},null,8,["modelValue"]),o[16]||(o[16]=T("br",null,null,-1)),e(ce,{modelValue:i(d).radarioEventId,"onUpdate:modelValue":o[5]||(o[5]=A=>i(d).radarioEventId=A),type:"number","stack-label":"",placeholder:"1234567",label:"ID \u043C\u0435\u0440\u043E\u043F\u0440\u0438\u044F\u0442\u0438\u044F \u043D\u0430 Radario"},{default:u(()=>[e(gu,null,{default:u(()=>o[15]||(o[15]=[E("\u0426\u0438\u0444\u0440\u044B \u0432 \u043A\u043E\u043D\u0446\u0435 \u0441\u0441\u044B\u043B\u043A\u0438 \u043D\u0430 \u043F\u043E\u043A\u0443\u043F\u043A\u0443 \u0431\u0438\u043B\u0435\u0442\u043E\u0432")])),_:1})]),_:1},8,["modelValue"]),o[17]||(o[17]=T("br",null,null,-1)),e(he,null,{default:u(()=>[e(nu,{modelValue:i(d).isPushkin,"onUpdate:modelValue":o[6]||(o[6]=A=>i(d).isPushkin=A),label:"\u041F\u0443\u0448\u043A\u0438\u043D\u0441\u043A\u0430\u044F \u043A\u0430\u0440\u0442\u0430",color:"green"},null,8,["modelValue"]),e(Qe),e(nu,{modelValue:i(d).isShowTicketCount,"onUpdate:modelValue":o[7]||(o[7]=A=>i(d).isShowTicketCount=A),color:"green",label:"\u041E\u0441\u0442\u0430\u0442\u043E\u043A \u0431\u0438\u043B\u0435\u0442\u043E\u0432"},null,8,["modelValue"])]),_:1}),o[18]||(o[18]=T("br",null,null,-1))],64)):K("",!0),e(ce,{type:"number",modelValue:i(d).age,"onUpdate:modelValue":o[8]||(o[8]=A=>i(d).age=A),label:"\u0412\u043E\u0437\u0440\u0430\u0441\u0442\u043D\u044B\u0435 \u043E\u0433\u0440\u0430\u043D\u0438\u0447\u0435\u043D\u0438\u044F"},null,8,["modelValue"]),o[22]||(o[22]=T("br",null,null,-1)),e(ie,{spaced:""}),e(ce,{name:"evDescr",modelValue:i(d).sdescr,"onUpdate:modelValue":o[9]||(o[9]=A=>i(d).sdescr=A),type:"textarea",autogrow:"",label:"\u041A\u0440\u0430\u0442\u043A\u043E\u0435 \u043E\u043F\u0438\u0441\u0430\u043D\u0438\u0435"},null,8,["modelValue"]),o[23]||(o[23]=T("br",null,null,-1)),e(ce,{name:"evText",modelValue:i(d).description,"onUpdate:modelValue":[o[10]||(o[10]=A=>i(d).description=A),o[11]||(o[11]=A=>me())],type:"textarea",autogrow:"",debounce:300,label:"\u041E\u043F\u0438\u0441\u0430\u043D\u0438\u0435"},null,8,["modelValue"]),e(ie,{spaced:"1em"}),T("div",It,[e(Gu,{modelValue:$,"onUpdate:modelValue":o[12]||(o[12]=A=>$=A),style:{width:"100%"},label:"\u0417\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044C \u0430\u0444\u0438\u0448\u0443",factory:Q,ref_key:"posterUploader",ref:V,onUploaded:ke,onFailed:ne,"no-thumbnails":""},null,512)]),e(he,{align:"right"},{default:u(()=>[e(ee,{label:"\u0421\u043E\u0445\u0440\u0430\u043D\u0438\u0442\u044C",onClick:ye,color:"green","icon-right":"save",flat:""})]),_:1})]),e(ie,{spaced:"1em"})])])):K("",!0),e(ie),e(_u,{label:"\u0421\u043F\u0438\u0441\u043E\u043A \u043F\u0440\u043E\u0438\u0437\u0432\u0435\u0434\u0435\u043D\u0438\u0439",modelValue:De.value,"onUpdate:modelValue":o[13]||(o[13]=A=>De.value=A)},{default:u(()=>[De.value?(c(),I(Vt,{key:0,announce:i(d)},null,8,["announce"])):K("",!0)]),_:1},8,["modelValue"]),e(ie),o[24]||(o[24]=T("br",null,null,-1)),o[25]||(o[25]=T("hr",null,null,-1)),o[26]||(o[26]=T("br",null,null,-1))],64))}};var $t=eu(Ot,[["__scopeId","data-v-e7609992"]]);const Pt={key:0,class:"posterArea relative-position"},Ft={key:0,style:{position:"absolute",right:"1em",top:"1em","z-index":"10"}},Qt={class:"eventboxin"},Tt={key:0},Lt=["innerHTML"],Wt={key:1},Kt={key:1,class:"videoItem"},Nt={__name:"AnnounceDescr",emits:["delPoster"],setup(l,{emit:O}){const m=String("https://sakh-orch.ru/api/"),p=de(),v=se("editMode"),s=se("Announce"),k=Y(()=>{let C=p.platform.is.mobile?1080:480;return s.value.poster?at(m,s.value.poster.md5,s.value.poster.ext,C):"/img/news/default_sketch.svg"});function F(){return"https://vk.com/share.php?url="+String("https://sakh-orch.ru/")+"/announce/"+String(s.value.id)+"&title="+String(s.value.progName)+"&noparse=true&image="+String(k.value)}function d(){_e.post(m+"epoint/event/poster.php",{params:{method:"unlink",id:s.value.id}}).then(C=>{var f;if(!((f=C==null?void 0:C.data)!=null&&f.result))throw new Error;delete s.value.poster,delete s.value.posterId}).catch(C=>{p.notify(ve(C))})}return(C,f)=>(c(),L(G,null,[i(s).poster?(c(),L("div",Pt,[i(v)?(c(),L("div",Ft,[e(Te,{"throw-confirm":"",title:"\u0423\u0434\u0430\u043B\u0438\u0442\u044C \u0430\u0444\u0438\u0448\u0443",tooltip:"\u0423\u0434\u0430\u043B\u0438\u0442\u044C \u0430\u0444\u0438\u0448\u0443",onOnOk:f[0]||(f[0]=y=>d())})])):K("",!0),i(s).poster.status==="process"?(c(),I(z,{key:1},{default:u(()=>[e(au),e(M,null,{default:u(()=>[e(rt,{showing:"",label:"\u041E\u0431\u0440\u0430\u0431\u043E\u0442\u043A\u0430"})]),_:1})]),_:1})):(c(),I(au,{key:2,src:k.value},{error:u(()=>f[1]||(f[1]=[T("img",{src:"/img/news/default_sketch.svg"},null,-1)])),_:1},8,["src"]))])):K("",!0),T("div",Qt,[e(Pe,{class:"transparent no-padding",flat:""},{default:u(()=>[e(te,{class:"no-padding"},{default:u(()=>[e(z,null,{default:u(()=>[e(M,null,{default:u(()=>[e(q,{class:"title"},{default:u(()=>[E(P(i(s).progName),1)]),_:1}),e(q,{class:"title"},{default:u(()=>[E(P(i(nt)(i(s).eventTime)),1)]),_:1})]),_:1})]),_:1})]),_:1}),e(te,null,{default:u(()=>[(c(!0),L(G,null,$e(i(s).parsedMD,(y,x)=>(c(),L(G,{key:x},[y.type==="text"?(c(),L("div",Tt,[y.content!==`
`?(c(),L("div",{key:0,innerHTML:y.content,class:"textBlock"},null,8,Lt)):(c(),L("br",Wt))])):K("",!0),y.type==="video"?(c(),L("div",Kt,[e(ft,{ratio:16/9,src:"https://www.youtube.com/embed/"+y.content},null,8,["src"])])):K("",!0)],64))),128))]),_:1}),!i(s).completed&&[3,4].includes(i(s).pay)&&i(s).ticketLink?(c(),I(he,{key:0,align:"right"})):K("",!0),e(te,null,{default:u(()=>[e(z,{dense:""},{default:u(()=>[e(q,{caption:""},{default:u(()=>f[2]||(f[2]=[E(" \u0423\u0432\u0430\u0436\u0430\u0435\u043C\u044B\u0435 \u043F\u043E\u0441\u0435\u0442\u0438\u0442\u0435\u043B\u0438, \u0443\u0431\u0435\u0434\u0438\u0442\u0435\u043B\u044C\u043D\u0430\u044F \u043F\u0440\u043E\u0441\u044C\u0431\u0430 \u0441\u043E\u0431\u043B\u044E\u0434\u0430\u0442\u044C \u043C\u0435\u0440\u044B \u0431\u0435\u0437\u043E\u043F\u0430\u0441\u043D\u043E\u0441\u0442\u0438 \u0432 \u0441\u0432\u044F\u0437\u0438 \u0441 \u0440\u0430\u0441\u043F\u0440\u043E\u0441\u0442\u0440\u0430\u043D\u0435\u043D\u0438\u0435\u043C \u043A\u043E\u0440\u043E\u043D\u0430\u0432\u0438\u0440\u0443\u0441\u043D\u043E\u0439 \u0438\u043D\u0444\u0435\u043A\u0446\u0438\u0438! ")])),_:1})]),_:1})]),_:1}),e(te,null,{default:u(()=>[e(z,{clickable:"",href:i(s).Hall.map,target:"_blank"},{default:u(()=>[e(M,{avatar:""},{default:u(()=>[e(we,{name:"place"})]),_:1}),e(M,null,{default:u(()=>[e(q,null,{default:u(()=>[E(P(i(s).Hall.name),1)]),_:1}),e(q,{caption:""},{default:u(()=>[E(P(i(s).Hall.suggest.address.formatted),1)]),_:1})]),_:1})]),_:1},8,["href"])]),_:1}),!i(s).completed&&[3,4].includes(i(s).pay)&&i(s).ticketLink?(c(),I(te,{key:1},{default:u(()=>[e(z,{clickable:"",href:i(s).ticketLink,target:"_blank"},{default:u(()=>[i(s).pay===3?(c(),L(G,{key:0},[e(M,{avatar:""},{default:u(()=>[e(we,{name:"shopping_cart"})]),_:1}),e(M,null,{default:u(()=>[e(q,null,{default:u(()=>f[3]||(f[3]=[E("\u041A\u0443\u043F\u0438\u0442\u044C \u0431\u0438\u043B\u0435\u0442")])),_:1}),i(s).isPushkin?(c(),I(q,{key:0,caption:""},{default:u(()=>f[4]||(f[4]=[E("+ \u0414\u043E\u0441\u0442\u0443\u043F\u043D\u043E \u043F\u043E \u043F\u0443\u0448\u043A\u0438\u043D\u0441\u043A\u043E\u0439 \u043A\u0430\u0440\u0442\u0435")])),_:1})):K("",!0)]),_:1})],64)):K("",!0),i(s).pay===4?(c(),L(G,{key:1},[e(M,{avatar:""},{default:u(()=>[e(we,{name:"img:/img/uds.svg"})]),_:1}),e(M,null,{default:u(()=>[e(q,null,{default:u(()=>f[5]||(f[5]=[E("\u041F\u043E\u043B\u0443\u0447\u0438\u0442\u044C \u043F\u0440\u0438\u0433\u043B\u0430\u0441\u0438\u0442\u0435\u043B\u044C\u043D\u044B\u0439")])),_:1})]),_:1})],64)):K("",!0)]),_:1},8,["href"])]),_:1})):K("",!0),e(ie),e(te,{class:"no-padding"},{default:u(()=>[e(cu,{"phone-number":"+7-(4242)-300-518"}),e(cu,{"phone-number":"+7-(962)-416-36-89"})]),_:1}),e(ie,{spaced:"1em"}),e(he,{align:"right"},{default:u(()=>[e(ee,{href:F(),target:"_blank",outline:"",icon:"img:/img/logo/vk/VK Logo Black & White.svg",label:"\u041F\u043E\u0434\u0435\u043B\u0438\u0442\u044C\u0441\u044F"},null,8,["href"])]),_:1})]),_:1})])],64))}};var Rt=eu(Nt,[["__scopeId","data-v-f32b83ae"]]);const jt={class:"centralCol"},Yt={class:"eventboxl"},zt={__name:"AnnouncePage",setup(l){const O=ot("\u0410\u043D\u043E\u043D\u0441");Uu(O);const m=de(),v=se("editModes").announce;le("editMode",v);const s=String("https://sakh-orch.ru/api/"),k=pu(),F=h(),d=h(null);le("Announce",d);function C(){_e.post(s+"epoint/event/announce.php",{params:{method:"get",id:k.params.evid}}).then(f=>{var y,x;d.value=(x=(y=f==null?void 0:f.data)==null?void 0:y.data)!=null?x:null,console.log("Announce loaded")}).catch(f=>{m.notify(ve(f))})}return Ze(()=>{C()}),(f,y)=>(c(),I(qu,{class:"col myScrollArea"},{default:u(()=>[T("div",jt,[i(v)&&d.value?(c(),I($t,{key:0,onPosterUploaded:C,onReload:C,ref_key:"editorRef",ref:F},null,512)):K("",!0),T("div",Yt,[d.value?(c(),I(Rt,{key:0,onDelPoster:y[0]||(y[0]=()=>{F.value.delPoster()})})):K("",!0)])]),e(Hu)]),_:1}))}};var $l=eu(zt,[["__scopeId","data-v-6738d0fd"]]);export{$l as default};
