import{Q as G}from"./QImg.ea656cfd.js";import{G as J,s as H,H as K,Z as Y,r as h,f as l,j as i,a4 as N,u as P,d as W,i as X,a as ee,e as ne,J as C,z as t,aY as te,c as v,h as n,B as g,aw as w,a7 as Q,a3 as p,A as b,aZ as d,at as S,g as I,F as B,ax as ae,_ as oe,a8 as D,D as le,E as ue}from"./index.b8d12845.js";import{Q as L,b as y,a as T}from"./QItemSection.b84b5ac1.js";import{Q as ce}from"./QTooltip.268d03bc.js";import{u as j}from"./use-quasar.0da6ace5.js";import{api as q}from"./axios.379fe993.js";import{b as $,n as M,d as ie}from"./myFuncts.24341304.js";const re=["top","middle","bottom"];var E=J({name:"QBadge",props:{color:String,textColor:String,floating:Boolean,transparent:Boolean,multiLine:Boolean,outline:Boolean,rounded:Boolean,label:[Number,String],align:{type:String,validator:e=>re.includes(e)}},setup(e,{slots:k}){const A=H(()=>e.align!==void 0?{verticalAlign:e.align}:null),c=H(()=>{const u=e.outline===!0&&e.color||e.textColor;return`q-badge flex inline items-center no-wrap q-badge--${e.multiLine===!0?"multi":"single"}-line`+(e.outline===!0?" q-badge--outline":e.color!==void 0?` bg-${e.color}`:"")+(u!==void 0?` text-${u}`:"")+(e.floating===!0?" q-badge--floating":"")+(e.rounded===!0?" q-badge--rounded":"")+(e.transparent===!0?" q-badge--transparent":"")});return()=>K("div",{class:c.value,style:A.value,role:"status","aria-label":e.label},Y(k.default,e.label!==void 0?[e.label]:[]))}});const de={__name:"DialogConfirm",props:{color:h({}),label:h({}),message:h({}),title:h({})},emits:["onOk","Cancel","Dismiss"],setup(e,{emit:k}){const A=j(),c=k;function u(_,m){A.dialog({title:m,message:_,cancel:!0,persistent:!0,html:!0}).onOk(()=>{}).onOk(()=>{c("onOk")}).onCancel(()=>{c("Cancel")}).onDismiss(()=>{c("Dismiss")})}return(_,m)=>(l(),i(N,{label:e.label,color:e.color,onClick:m[0]||(m[0]=V=>u(e.message,e.title))},null,8,["label","color"]))}};const O=e=>(le("data-v-3dfc7805"),e=e(),ue(),e),se={class:"mapLink"},me=["innerHTML"],fe=["innerHTML"],ge=O(()=>b("div",null,null,-1)),he=["href"],be=O(()=>b("span",{class:"mapLink"},"\u0421\u043C\u043E\u0442\u0440\u0435\u0442\u044C \u0432\u0438\u0434\u0435\u043E",-1)),ve=O(()=>b("b",null,"\u0422\u0438\u0433\u0440\u0430\u043D \u0410\u0445\u043D\u0430\u0437\u0430\u0440\u044F\u043D",-1)),ye={__name:"AnnounceCard",props:{Announce:h(!1)},emits:["newAnnounce","IamDeleted","changeShow"],setup(e,{expose:k,emit:A}){const c=String("https://api.sakh-orch.ru/"),u=j();P(),W();const _=X("editMode"),m=A;k({saveData:U});const V=h(["","","\u0412\u0445\u043E\u0434 \u0441\u0432\u043E\u0431\u043E\u0434\u043D\u044B\u0439","\u0411\u0438\u043B\u0435\u0442\u044B \u0432 \u043F\u0440\u043E\u0434\u0430\u0436\u0435","\u0412\u0445\u043E\u0434 \u043F\u043E \u043F\u0440\u0438\u0433\u043B\u0430\u0441\u0438\u0442\u0435\u043B\u044C\u043D\u044B\u043C","\u041F\u0440\u043E\u0434\u0430\u0436\u0430 \u0437\u0430\u0432\u0435\u0440\u0448\u0435\u043D\u0430"]),r=e,s=h(r.Announce);function R(){let a=u.platform.is.mobile?1080:480;return c+"/img/posters/sketch/"+a+"/poster_"+r.Announce.id+".jpg?ver="+r.Announce.verString}ee(()=>{});function U(){q.post(c+"api/event/announce.php",{params:{method:"update",announce:r.Announce}}).then(a=>{var o,f;u.notify($((f=(o=a==null?void 0:a.data)==null?void 0:o.result)!=null?f:""))}).catch(a=>{u.notify(M(a))})}function z(){q.post(c+"api/event/announce.php",{params:{method:"del",id:r.Announce.id}}).then(a=>{var o,f,x;if(!((o=a==null?void 0:a.data)!=null&&o.result))throw new Error;u.notify($((x=(f=a==null?void 0:a.data)==null?void 0:f.result)!=null?x:null)),m("IamDeleted")}).catch(a=>{u.notify(M(a))})}function F(){q.post(c+"api/event/announce.php",{params:{method:s.value.isShow?"show":"hide",announceId:s.value.id}}).then(a=>{var o;if(!((o=a==null?void 0:a.data)!=null&&o.result))throw new Error;m("changeShow",s.value.id)}).catch(a=>{u.notify(M(a)),s.value.isShow=!s.value.isShow}).finally(()=>{})}function Z(){return r.Announce.pay?r.Announce.pay===3&&r.Announce.completed?"\u041F\u0440\u043E\u0434\u0430\u0436\u0430 \u0437\u0430\u0432\u0435\u0440\u0448\u0435\u043D\u0430":V.value[r.Announce.pay]:""}return(a,o)=>{const f=ne("router-link");return e.Announce&&(e.Announce.isShow||C(_))?(l(),i(te,{key:0,square:"",class:"eventbox tdno",separator:""},{default:t(()=>[n(f,{to:"/announce/"+e.Announce.id},{default:t(()=>[(l(),i(G,{ratio:1080/608,src:R(),fit:"fill",key:e.Announce.verString},null,8,["src"]))]),_:1},8,["to"]),n(d,{color:"info","expand-separator":""},{default:t(()=>[e.Announce.completed===!1?(l(),i(E,{key:0,class:"absolute bage",color:"green-6",rounded:"",transparent:""},{default:t(()=>[g(" \u0421\u043A\u043E\u0440\u043E ")]),_:1})):v("",!0),e.Announce.age?(l(),i(E,{key:1,rounded:"",style:{"background-color":"orange"},floating:""},{default:t(()=>[g(w(e.Announce.age+"+"),1)]),_:1})):v("",!0),Q((l(),i(L,{dense:""},{default:t(()=>[n(y,{avatar:""},{default:t(()=>[n(p,{name:"schedule"})]),_:1}),n(y,null,{default:t(()=>[n(T,{caption:""},{default:t(()=>[g(w(C(ie)(s.value.eventTime)),1)]),_:1})]),_:1})]),_:1})),[[D]]),Q((l(),i(L,{clickable:"",href:e.Announce.Hall.map,target:"_blank",dense:""},{default:t(()=>[n(y,{avatar:""},{default:t(()=>[n(p,{color:"primary",name:"place"})]),_:1}),n(y,null,{default:t(()=>[n(T,{caption:""},{default:t(()=>[b("span",se,w(e.Announce.Hall.name),1)]),_:1})]),_:1})]),_:1},8,["href"])),[[D]])]),_:1}),n(S,{inset:""}),n(d,null,{default:t(()=>[b("div",{class:"text-subtitle1 text-center prog-name",innerHTML:e.Announce.progName},null,8,me)]),_:1}),n(d,{class:"text-body2 text-center"},{default:t(()=>[b("div",{innerHTML:e.Announce.sdescr},null,8,fe)]),_:1}),n(d,{class:"space"},{default:t(()=>[ge]),_:1}),n(S,{inset:""}),e.Announce.youtubeId?(l(),i(d,{key:0},{default:t(()=>[b("a",{href:"https://www.youtube.com/watch?v="+e.Announce.youtubeId,target:"_blank"},[Q((l(),i(L,{clickable:""},{default:t(()=>[n(y,{avatar:""},{default:t(()=>[n(p,{color:"primary",name:"ion-logo-youtube"})]),_:1}),n(y,null,{default:t(()=>[n(T,{caption:""},{default:t(()=>[be]),_:1})]),_:1})]),_:1})),[[D]])],8,he)]),_:1})):v("",!0),e.Announce.pay?(l(),I(B,{key:1},[n(S,{inset:""}),n(d,{class:"text-body2 text-center"},{default:t(()=>[e.Announce.pay===3&&!e.Announce.completed&&e.Announce.ticketLink?(l(),i(N,{key:0,label:"\u041A\u0443\u043F\u0438\u0442\u044C \u0431\u0438\u043B\u0435\u0442",href:e.Announce.ticketLink},null,8,["href"])):(l(),I(B,{key:1},[g(w(Z()),1)],64))]),_:1})],64)):v("",!0),n(S,{inset:""}),n(d,{class:"text-body2 text-center"},{default:t(()=>[g(" \u0425\u0443\u0434\u043E\u0436\u0435\u0441\u0442\u0432\u0435\u043D\u043D\u044B\u0439 \u0440\u0443\u043A\u043E\u0432\u043E\u0434\u0438\u0442\u0435\u043B\u044C \u0438 \u0433\u043B\u0430\u0432\u043D\u044B\u0439 \u0434\u0438\u0440\u0438\u0436\u0435\u0440 - "),ve,g(". ")]),_:1}),C(_)?(l(),I(B,{key:2},[n(d,null,{default:t(()=>[n(ae,{modelValue:s.value.isShow,"onUpdate:modelValue":[o[0]||(o[0]=x=>s.value.isShow=x),o[1]||(o[1]=x=>F())],label:"\u0432\u043A\u043B",color:"green","checked-icon":"check","unchecked-icon":"clear"},{default:t(()=>[n(ce,null,{default:t(()=>[g("\u041E\u043F\u0443\u0431\u043B\u0438\u043A\u043E\u0432\u0430\u0442\u044C")]),_:1})]),_:1},8,["modelValue"])]),_:1}),n(d,null,{default:t(()=>[n(de,{onOnOk:z,label:"\u0423\u0434\u0430\u043B\u0438\u0442\u044C",color:"red",title:"\u0423\u0434\u0430\u043B\u0435\u043D\u0438\u0435 \u0430\u043D\u043E\u043D\u0441\u0430",message:`
          \u0411\u0443\u0434\u0435\u0442 \u0443\u0434\u0430\u043B\u0435\u043D\u0430 \u0437\u0430\u043F\u0438\u0441\u044C \u043E\u0431 \u0430\u043D\u043E\u043D\u0441\u0435 \u0438 \u0441\u0432\u044F\u0437\u0430\u043D\u043D\u044B\u0435 \u0441 \u043D\u0435\u0439 \u0438\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u044F.
          <br><span style='color: red'>
          \u042D\u0442\u043E \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0435 \u043D\u0435\u043B\u044C\u0437\u044F \u043E\u0442\u043C\u0435\u043D\u0438\u0442\u044C.</span><br>
          \u0412\u044B \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0442\u0435\u043B\u044C\u043D\u043E \u0445\u043E\u0442\u0438\u0442\u0435 \u044D\u0442\u043E \u0441\u0434\u0435\u043B\u0430\u0442\u044C?`})]),_:1})],64)):v("",!0)]),_:1})):v("",!0)}}};var Qe=oe(ye,[["__scopeId","data-v-3dfc7805"]]);export{Qe as A};
