import{Q as pt}from"./QScrollArea.f760e29a.js";import{u as ht}from"./use-meta.28a8d08a.js";import{u as He,Q as L,a as ue}from"./QItem.3add177a.js";import{a as ge}from"./axios.7224dfd6.js";import{S as _t,V as gt,bh as kt,X as yt,d8 as bt,r as H,c as w,w as Ae,aM as wt,U as xt,h as _,g as Vt,da as Mt,au as Dt,a6 as qt,a4 as Ct,ak as Ue,B as se,i as R,m as h,E as A,f as a,q as s,x as o,b9 as te,A as ie,ax as g,u as ze,I as St,p as We,o as Re,a as At,n as O,l as I,D as ke,bn as Ie,F as le,az as Xe,aA as Ge,z as Z,t as F,v as he,G as Ut,y as It}from"./index.a22f9984.js";import{Q as Be}from"./QSelect.218b7f38.js";import{a as Ht}from"./style.423abae7.js";/* empty css               */import{u as Le,b as $t,c as Qt,_ as _e,g as Tt,f as Ot,Q as Fe,a as Pt}from"./QPopupProxy.413f5c85.js";import{T as Nt}from"./TouchPan.c7a8e883.js";import{p as ee}from"./format.de7e9769.js";import{C as Ke}from"./ClosePopup.88275f92.js";import{n as ye,a as Ee,i as Bt,b as Lt,g as Ft}from"./myFuncts.2e7c7e29.js";import{A as Kt}from"./AnnounceCard.d2134545.js";import{S as Et,Q as Yt}from"./QInnerLoading.115e734f.js";import{m as jt}from"./myAuth.f2132660.js";import{_ as $e}from"./plugin-vue_export-helper.21dcd24c.js";import{Q as Ye}from"./QImg.6f2cd42c.js";import{Q as K}from"./QItemLabel.412e3b64.js";import{Q as zt}from"./QVideo.d4510e26.js";import{_ as je}from"./PhoneNumber.0898688b.js";import{_ as Wt}from"./BtnDelete.b7cf3b7e.js";import"./QToolbarTitle.3e54e9fc.js";import"./QToolbar.d21f395b.js";import"./QLinearProgress.48e86289.js";import{M as Rt}from"./MainFooter.ba0c5569.js";import"./QMenu.0080bf31.js";import"./position-engine.fee66cf1.js";import"./selection.803b871e.js";import"./rtl.276c3f1b.js";import"./use-file.aa0bb72f.js";import"./get-emits-object.a3f16783.js";import"./use-render-cache.3aae9b27.js";import"./touch.9135741d.js";import"./QTooltip.08098204.js";import"./QList.4456565c.js";import"./MainFooter.vue_vue_type_style_index_0_scoped_true_lang.6591e99e.js";function Xt(l,P){if(l.hour!==null){if(l.minute===null)return"minute";if(P===!0&&l.second===null)return"second"}return"hour"}function Gt(){const l=new Date;return{hour:l.getHours(),minute:l.getMinutes(),second:l.getSeconds(),millisecond:l.getMilliseconds()}}var Jt=_t({name:"QTime",props:{...gt,...kt,...Le,modelValue:{required:!0,validator:l=>typeof l=="string"||l===null},mask:{...Le.mask,default:null},format24h:{type:Boolean,default:null},defaultDate:{type:String,validator:l=>/^-?[\d]+\/[0-1]\d\/[0-3]\d$/.test(l)},options:Function,hourOptions:Array,minuteOptions:Array,secondOptions:Array,withSeconds:Boolean,nowBtn:Boolean},emits:$t,setup(l,{slots:P,emit:M}){const U=Vt(),{$q:D}=U.proxy,r=yt(l,D),{tabindex:b,headerClass:i,getLocale:N,getCurrentDate:k}=Qt(l,D),V=bt(l),q=Mt(V);let E,X;const ae=H(null),Y=w(()=>et()),G=w(()=>N()),re=w(()=>tt()),J=_e(l.modelValue,Y.value,G.value,l.calendar,re.value),v=H(Xt(J)),n=H(J),x=H(J.hour===null||J.hour<12),be=w(()=>`q-time q-time--${l.landscape===!0?"landscape":"portrait"}`+(r.value===!0?" q-time--dark q-dark":"")+(l.disable===!0?" disabled":l.readonly===!0?" q-time--readonly":"")+(l.bordered===!0?" q-time--bordered":"")+(l.square===!0?" q-time--square no-border-radius":"")+(l.flat===!0?" q-time--flat no-shadow":"")),ne=w(()=>{const e=n.value;return{hour:e.hour===null?"--":C.value===!0?ee(e.hour):String(x.value===!0?e.hour===0?12:e.hour:e.hour>12?e.hour-12:e.hour),minute:e.minute===null?"--":ee(e.minute),second:e.second===null?"--":ee(e.second)}}),C=w(()=>l.format24h!==null?l.format24h:D.lang.date.format24h),we=w(()=>{const e=v.value==="hour",t=e===!0?12:60,u=n.value[v.value];let y=`rotate(${Math.round(u*(360/t))-180}deg) translateX(-50%)`;return e===!0&&C.value===!0&&n.value.hour>=12&&(y+=" scale(.7)"),{transform:y}}),de=w(()=>n.value.hour!==null),xe=w(()=>de.value===!0&&n.value.minute!==null),j=w(()=>l.hourOptions!==void 0?e=>l.hourOptions.includes(e):l.options!==void 0?e=>l.options(e,null,null):null),f=w(()=>l.minuteOptions!==void 0?e=>l.minuteOptions.includes(e):l.options!==void 0?e=>l.options(n.value.hour,e,null):null),d=w(()=>l.secondOptions!==void 0?e=>l.secondOptions.includes(e):l.options!==void 0?e=>l.options(n.value.hour,n.value.minute,e):null),c=w(()=>{if(j.value===null)return null;const e=ce(0,11,j.value),t=ce(12,11,j.value);return{am:e,pm:t,values:e.values.concat(t.values)}}),$=w(()=>f.value!==null?ce(0,59,f.value):null),Q=w(()=>d.value!==null?ce(0,59,d.value):null),z=w(()=>{switch(v.value){case"hour":return c.value;case"minute":return $.value;case"second":return Q.value}}),Je=w(()=>{let e,t,u=0,p=1;const y=z.value!==null?z.value.values:void 0;v.value==="hour"?C.value===!0?(e=0,t=23):(e=0,t=11,x.value===!1&&(u=12)):(e=0,t=55,p=5);const T=[];for(let m=e,S=e;m<=t;m+=p,S++){const W=m+u,mt=y!==void 0&&y.includes(W)===!1,ft=v.value==="hour"&&m===0?C.value===!0?"00":"12":m;T.push({val:W,index:S,disable:mt,label:ft})}return T}),Ze=w(()=>[[Nt,lt,void 0,{stop:!0,prevent:!0,mouse:!0}]]);Ae(()=>l.modelValue,e=>{const t=_e(e,Y.value,G.value,l.calendar,re.value);(t.dateHash!==n.value.dateHash||t.timeHash!==n.value.timeHash)&&(n.value=t,t.hour===null?v.value="hour":x.value=t.hour<12)}),Ae([Y,G],()=>{Dt(()=>{Se()})});function Qe(){const e={...k(),...Gt()};Se(e),Object.assign(n.value,e),v.value="hour"}function ce(e,t,u){const p=Array.apply(null,{length:t+1}).map((y,T)=>{const m=T+e;return{index:m,val:u(m)===!0}}).filter(y=>y.val===!0).map(y=>y.index);return{min:p[0],max:p[p.length-1],values:p,threshold:t+1}}function Te(e,t,u){const p=Math.abs(e-t);return Math.min(p,u-p)}function Ve(e,{min:t,max:u,values:p,threshold:y}){if(e===t)return t;if(e<t||e>u)return Te(e,t,y)<=Te(e,u,y)?t:u;const T=p.findIndex(W=>e<=W),m=p[T-1],S=p[T];return e-m<=S-e?m:S}function et(){return l.calendar!=="persian"&&l.mask!==null?l.mask:`HH:mm${l.withSeconds===!0?":ss":""}`}function tt(){if(typeof l.defaultDate!="string"){const e=k(!0);return e.dateHash=Tt(e),e}return _e(l.defaultDate,"YYYY/MM/DD",void 0,l.calendar)}function Me(){return qt(U)===!0||z.value!==null&&(z.value.values.length===0||v.value==="hour"&&C.value!==!0&&c.value[x.value===!0?"am":"pm"].values.length===0)}function De(){const e=ae.value,{top:t,left:u,width:p}=e.getBoundingClientRect(),y=p/2;return{top:t+y,left:u+y,dist:y*.7}}function lt(e){if(Me()!==!0){if(e.isFirst===!0){E=De(),X=ve(e.evt,E);return}X=ve(e.evt,E,X),e.isFinal===!0&&(E=!1,X=null,Oe())}}function Oe(){v.value==="hour"?v.value="minute":l.withSeconds&&v.value==="minute"&&(v.value="second")}function ve(e,t,u){const p=wt(e),y=Math.abs(p.top-t.top),T=Math.sqrt(Math.pow(Math.abs(p.top-t.top),2)+Math.pow(Math.abs(p.left-t.left),2));let m,S=Math.asin(y/T)*(180/Math.PI);if(p.top<t.top?S=t.left<p.left?90-S:270+S:S=t.left<p.left?S+90:270-S,v.value==="hour"){if(m=S/30,c.value!==null){const W=C.value!==!0?x.value===!0:c.value.am.values.length!==0&&c.value.pm.values.length!==0?T>=t.dist:c.value.am.values.length!==0;m=Ve(m+(W===!0?0:12),c.value[W===!0?"am":"pm"])}else m=Math.round(m),C.value===!0?T<t.dist?m<12&&(m+=12):m===12&&(m=0):x.value===!0&&m===12?m=0:x.value===!1&&m!==12&&(m+=12);C.value===!0&&(x.value=m<12)}else m=Math.round(S/6)%60,v.value==="minute"&&$.value!==null?m=Ve(m,$.value):v.value==="second"&&Q.value!==null&&(m=Ve(m,Q.value));return u!==m&&dt[v.value](m),m}const qe={hour(){v.value="hour"},minute(){v.value="minute"},second(){v.value="second"}};function at(e){e.keyCode===13&&Pe()}function nt(e){e.keyCode===13&&Ne()}function ot(e){Me()!==!0&&(D.platform.is.desktop!==!0&&ve(e,De()),Oe())}function ut(e){Me()!==!0&&ve(e,De())}function it(e){if(e.keyCode===13)v.value="hour";else if([37,39].includes(e.keyCode)){const t=e.keyCode===37?-1:1;if(c.value!==null){const u=C.value===!0?c.value.values:c.value[x.value===!0?"am":"pm"].values;if(u.length===0)return;if(n.value.hour===null)me(u[0]);else{const p=(u.length+u.indexOf(n.value.hour)+t)%u.length;me(u[p])}}else{const u=C.value===!0?24:12,p=C.value!==!0&&x.value===!1?12:0,y=n.value.hour===null?-t:n.value.hour;me(p+(24+y+t)%u)}}}function st(e){if(e.keyCode===13)v.value="minute";else if([37,39].includes(e.keyCode)){const t=e.keyCode===37?-1:1;if($.value!==null){const u=$.value.values;if(u.length===0)return;if(n.value.minute===null)fe(u[0]);else{const p=(u.length+u.indexOf(n.value.minute)+t)%u.length;fe(u[p])}}else{const u=n.value.minute===null?-t:n.value.minute;fe((60+u+t)%60)}}}function rt(e){if(e.keyCode===13)v.value="second";else if([37,39].includes(e.keyCode)){const t=e.keyCode===37?-1:1;if(Q.value!==null){const u=Q.value.values;if(u.length===0)return;if(n.value.seconds===null)pe(u[0]);else{const p=(u.length+u.indexOf(n.value.second)+t)%u.length;pe(u[p])}}else{const u=n.value.second===null?-t:n.value.second;pe((60+u+t)%60)}}}function me(e){n.value.hour!==e&&(n.value.hour=e,oe())}function fe(e){n.value.minute!==e&&(n.value.minute=e,oe())}function pe(e){n.value.second!==e&&(n.value.second=e,oe())}const dt={hour:me,minute:fe,second:pe};function Pe(){x.value===!1&&(x.value=!0,n.value.hour!==null&&(n.value.hour-=12,oe()))}function Ne(){x.value===!0&&(x.value=!1,n.value.hour!==null&&(n.value.hour+=12,oe()))}function Ce(e){const t=l.modelValue;v.value!==e&&t!==void 0&&t!==null&&t!==""&&typeof t!="string"&&(v.value=e)}function oe(){if(j.value!==null&&j.value(n.value.hour)!==!0){n.value=_e(),Ce("hour");return}if(f.value!==null&&f.value(n.value.minute)!==!0){n.value.minute=null,n.value.second=null,Ce("minute");return}if(l.withSeconds===!0&&d.value!==null&&d.value(n.value.second)!==!0){n.value.second=null,Ce("second");return}n.value.hour===null||n.value.minute===null||l.withSeconds===!0&&n.value.second===null||Se()}function Se(e){const t=Object.assign({...n.value},e),u=l.calendar==="persian"?ee(t.hour)+":"+ee(t.minute)+(l.withSeconds===!0?":"+ee(t.second):""):Ot(new Date(t.year,t.month===null?null:t.month-1,t.day,t.hour,t.minute,t.second,t.millisecond),Y.value,G.value,t.year,t.timezoneOffset);t.changed=u!==l.modelValue,M("update:modelValue",u,t)}function ct(){const e=[_("div",{class:"q-time__link "+(v.value==="hour"?"q-time__link--active":"cursor-pointer"),tabindex:b.value,onClick:qe.hour,onKeyup:it},ne.value.hour),_("div",":"),_("div",de.value===!0?{class:"q-time__link "+(v.value==="minute"?"q-time__link--active":"cursor-pointer"),tabindex:b.value,onKeyup:st,onClick:qe.minute}:{class:"q-time__link"},ne.value.minute)];l.withSeconds===!0&&e.push(_("div",":"),_("div",xe.value===!0?{class:"q-time__link "+(v.value==="second"?"q-time__link--active":"cursor-pointer"),tabindex:b.value,onKeyup:rt,onClick:qe.second}:{class:"q-time__link"},ne.value.second));const t=[_("div",{class:"q-time__header-label row items-center no-wrap",dir:"ltr"},e)];return C.value===!1&&t.push(_("div",{class:"q-time__header-ampm column items-between no-wrap"},[_("div",{class:"q-time__link "+(x.value===!0?"q-time__link--active":"cursor-pointer"),tabindex:b.value,onClick:Pe,onKeyup:at},"AM"),_("div",{class:"q-time__link "+(x.value!==!0?"q-time__link--active":"cursor-pointer"),tabindex:b.value,onClick:Ne,onKeyup:nt},"PM")])),_("div",{class:"q-time__header flex flex-center no-wrap "+i.value},t)}function vt(){const e=n.value[v.value];return _("div",{class:"q-time__content col relative-position"},[_(Ct,{name:"q-transition--scale"},()=>_("div",{key:"clock"+v.value,class:"q-time__container-parent absolute-full"},[_("div",{ref:ae,class:"q-time__container-child fit overflow-hidden"},[Ue(_("div",{class:"q-time__clock cursor-pointer non-selectable",onClick:ot,onMousedown:ut},[_("div",{class:"q-time__clock-circle fit"},[_("div",{class:"q-time__clock-pointer"+(n.value[v.value]===null?" hidden":l.color!==void 0?` text-${l.color}`:""),style:we.value}),Je.value.map(t=>_("div",{class:`q-time__clock-position row flex-center q-time__clock-pos-${t.index}`+(t.val===e?" q-time__clock-position--active "+i.value:t.disable===!0?" q-time__clock-position--disable":"")},[_("span",t.label)]))])]),Ze.value)])])),l.nowBtn===!0?_(se,{class:"q-time__now-button absolute",icon:D.iconSet.datetime.now,unelevated:!0,size:"sm",round:!0,color:l.color,textColor:l.textColor,tabindex:b.value,onClick:Qe}):null])}return U.proxy.setNow=Qe,()=>{const e=[vt()],t=xt(P.default);return t!==void 0&&e.push(_("div",{class:"q-time__actions"},t)),l.name!==void 0&&l.disable!==!0&&q(e,"push"),_("div",{class:be.value,tabindex:-1},[ct(),_("div",{class:"q-time__main col overflow-auto"},e)])}}});const Zt={class:"q-pa-md",style:{"max-width":"300px",padding:"0"}},el={class:"row items-center justify-end"},tl={class:"row items-center justify-end"},ll={__name:"DateTime",props:{evDateTime:H("2019-02-01 12:44")},emits:["update:date"],setup(l,{emit:P}){const M=R("Announce");return H(l.evDateTime),(D,r)=>(h(),A("div",Zt,[a(te,{filled:"",modelValue:o(M).eventTime,"onUpdate:modelValue":r[2]||(r[2]=b=>o(M).eventTime=b),mask:"####-##-## ##:##"},{prepend:s(()=>[a(ie,{name:"event",class:"cursor-pointer"},{default:s(()=>[a(Fe,{cover:"","transition-show":"scale","transition-hide":"scale"},{default:s(()=>[a(Pt,{modelValue:o(M).eventTime,"onUpdate:modelValue":r[0]||(r[0]=b=>o(M).eventTime=b),mask:"YYYY-MM-DD HH:mm"},{default:s(()=>[g("div",el,[Ue(a(se,{label:"\u0417\u0430\u043A\u0440\u044B\u0442\u044C",color:"primary",flat:""},null,512),[[Ke]])])]),_:1},8,["modelValue"])]),_:1})]),_:1})]),append:s(()=>[a(ie,{name:"access_time",class:"cursor-pointer"},{default:s(()=>[a(Fe,{cover:"","transition-show":"scale","transition-hide":"scale"},{default:s(()=>[a(Jt,{modelValue:o(M).eventTime,"onUpdate:modelValue":r[1]||(r[1]=b=>o(M).eventTime=b),mask:"YYYY-MM-DD HH:mm",format24h:""},{default:s(()=>[g("div",tl,[Ue(a(se,{label:"\u0417\u0430\u043A\u0440\u044B\u0442\u044C",color:"primary",flat:""},null,512),[[Ke]])])]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]))}};const B=l=>(Xe("data-v-69a909b0"),l=l(),Ge(),l),al={key:0,class:"eventsarea"},nl={class:"editArea"},ol={class:"card"},ul={class:"editor"},il={style:{display:"flex","justify-content":"space-between"}},sl=B(()=>g("br",null,null,-1)),rl=B(()=>g("hr",null,null,-1)),dl={class:"uploads"},cl={style:{width:"100%"}},vl=B(()=>g("br",null,null,-1)),ml=B(()=>g("br",null,null,-1)),fl=B(()=>g("br",null,null,-1)),pl=B(()=>g("br",null,null,-1)),hl={class:"uploads"},_l=B(()=>g("br",null,null,-1)),gl=B(()=>g("hr",null,null,-1)),kl=B(()=>g("br",null,null,-1)),yl={__name:"AnnounceEditor",emits:["reload","posterUploaded"],setup(l,{expose:P,emit:M}){const U=String("https://api.sakh-orch.ru/"),D=He(),r=ze(),b=St();R("editMode");const i=R("Announce"),N=R("Halls"),k=H("");We("pwUrl",k);const V=M,q={};function E(){}const X=[{label:"\u0412\u0445\u043E\u0434 \u0441\u0432\u043E\u0431\u043E\u0434\u043D\u044B\u0439",value:2},{label:"\u0411\u0438\u043B\u0435\u0442\u044B \u0432 \u043F\u0440\u043E\u0434\u0430\u0436\u0435",value:3},{label:"\u0412\u0445\u043E\u0434 \u043F\u043E \u043F\u0440\u0438\u0433\u043B\u0430\u0441\u0438\u0442\u0435\u043B\u044C\u043D\u044B\u043C",value:4},{label:"\u041F\u0440\u043E\u0434\u0430\u0436\u0430 \u0437\u0430\u0432\u0435\u0440\u0448\u0435\u043D\u0430",value:5}],ae=H(null),Y=H(null);function G(f){return{url:U+"api/event/poster.php",headers:[{name:"ACCESSTOKEN",value:jt.self.AccessToken}],formFields:[{name:"id",value:i.value.id},{name:"method",value:"add"}]}}function re(f){D.notify(Ee("\u0417\u0430\u0433\u0440\u0443\u0436\u0435\u043D\u043E")),V("posterUploaded")}function J(f){D.notify(Ee("\u0417\u0430\u0433\u0440\u0443\u0436\u0435\u043D\u043E")),V("posterUploaded"),ae.value.reset(),v.value=!0}const v=H(!1);let n=null;Ae(v,f=>{console.log("photoWatcher"),f&&!n?n=setInterval(j,3e3):!f&&n&&(clearInterval(n),n=null)});function x(f){var c,$,Q;let d=(Q=($=JSON.parse((c=f==null?void 0:f.xhr)==null?void 0:c.response))==null?void 0:$.error)!=null?Q:"";D.notify(ye(null,d))}function be(){Y.value.saveData()}function ne(){b.push({path:"/announces"})}function C(){V("reload")}function we(){delete i.value.sketch,delete i.value.sketchId}function de(){i.value.hallId=i.value.Hall.id}function xe(){ge.post(U+"api/event/announce.php",{params:{method:"updateMarkdown",id:i.value.id,markdown:i.value.description}}).then(f=>{var d;if(!((d=f==null?void 0:f.data)!=null&&d.result))throw new Error;i.value.parsedMD=f==null?void 0:f.data.data}).catch(f=>{})}function j(){ge.post(U+"api/event/poster.php",{params:{method:"get",announceId:r.params.evid}}).then(f=>{var d,c,$,Q,z;if(!((d=f==null?void 0:f.data)!=null&&d.result))throw new Error;i.value.poster=($=(c=f==null?void 0:f.data)==null?void 0:c.data)!=null?$:null,((z=(Q=i.value)==null?void 0:Q.poster)==null?void 0:z.status)!=="process"&&(v.value=!1)}).catch(f=>{v.value=!1,D.notify(ye(f))}).finally(()=>{})}return P({}),Re(()=>{}),At(()=>{n&&clearInterval(n)}),(f,d)=>(h(),A(le,null,[o(i)?(h(),A("div",al,[g("div",nl,[g("div",ol,[o(i).Hall.map?(h(),O(Kt,{key:0,onIamDeleted:ne,onNewAnnounce:C,onDelSketch:we,ref_key:"rAnnounceCard",ref:Y,Announce:o(i),pwUrl:k.value},null,8,["Announce","pwUrl"])):I("",!0)]),g("div",ul,[g("div",il,[a(ll,{date:o(i).eventTime,"onUpdate:date":[d[0]||(d[0]=c=>o(i).eventTime=c),d[1]||(d[1]=c=>void 0)]},null,8,["date"])]),sl,rl,g("div",dl,[g("div",cl,[a(Et,{id:o(i).id,type:"event",onOnUploaded:re},null,8,["id"])])]),a(ke,{spaced:"1em"}),a(te,{name:"progName",modelValue:o(i).progName,"onUpdate:modelValue":d[2]||(d[2]=c=>o(i).progName=c),label:"\u041D\u0430\u0437\u0432\u0430\u043D\u0438\u0435"},null,8,["modelValue"]),a(Be,{modelValue:o(i).Hall,"onUpdate:modelValue":[d[3]||(d[3]=c=>o(i).Hall=c),d[4]||(d[4]=c=>de())],label:"\u041C\u0435\u0441\u0442\u043E \u043F\u0440\u043E\u0432\u0435\u0434\u0435\u043D\u0438\u044F","map-options":"","option-label":"name","option-value":"id",options:o(N)},null,8,["modelValue","options"]),a(Be,{modelValue:o(i).pay,"onUpdate:modelValue":d[5]||(d[5]=c=>o(i).pay=c),"emit-value":"","map-options":"",label:"\u0423\u0441\u043B\u043E\u0432\u0438\u044F \u0432\u0445\u043E\u0434\u0430",options:X},null,8,["modelValue"]),vl,[3,4].includes(o(i).pay)?(h(),O(te,{key:0,type:"text",modelValue:o(i).ticketLink,"onUpdate:modelValue":d[6]||(d[6]=c=>o(i).ticketLink=c),label:"\u0421\u0441\u044B\u043B\u043A\u0430 \u043D\u0430 \u043F\u0440\u0438\u043E\u0431\u0440\u0435\u0442\u0435\u043D\u0438\u0435 \u0431\u0438\u043B\u0435\u0442\u043E\u0432"},null,8,["modelValue"])):I("",!0),ml,a(te,{type:"number",modelValue:o(i).age,"onUpdate:modelValue":d[7]||(d[7]=c=>o(i).age=c),label:"\u0412\u043E\u0437\u0440\u0430\u0441\u0442\u043D\u044B\u0435 \u043E\u0433\u0440\u0430\u043D\u0438\u0447\u0435\u043D\u0438\u044F"},null,8,["modelValue"]),fl,a(te,{name:"evDescr",modelValue:o(i).sdescr,"onUpdate:modelValue":d[8]||(d[8]=c=>o(i).sdescr=c),type:"textarea",autogrow:"",label:"\u041A\u0440\u0430\u0442\u043A\u043E\u0435 \u043E\u043F\u0438\u0441\u0430\u043D\u0438\u0435"},null,8,["modelValue"]),pl,a(te,{name:"evText",modelValue:o(i).description,"onUpdate:modelValue":[d[9]||(d[9]=c=>o(i).description=c),d[10]||(d[10]=c=>xe())],type:"textarea",autogrow:"",debounce:300,label:"\u041E\u043F\u0438\u0441\u0430\u043D\u0438\u0435"},null,8,["modelValue"]),a(ke,{spaced:"1em"}),g("div",hl,[a(Ht,{modelValue:q,"onUpdate:modelValue":d[11]||(d[11]=c=>q=c),style:{width:"100%"},label:"\u0417\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044C \u0430\u0444\u0438\u0448\u0443",factory:G,ref_key:"posterUploader",ref:ae,onUploaded:J,onFailed:x,"no-thumbnails":""},null,512)])])]),a(Ie,{align:"right"},{default:s(()=>[a(se,{label:"\u0421\u043E\u0445\u0440\u0430\u043D\u0438\u0442\u044C",onClick:be,color:"green"})]),_:1})])):I("",!0),_l,gl,kl],64))}};var bl=$e(yl,[["__scopeId","data-v-69a909b0"]]);const wl=l=>(Xe("data-v-10491d29"),l=l(),Ge(),l),xl={key:0,class:"posterArea relative-position"},Vl={key:0,style:{position:"absolute",right:"1em",top:"1em","z-index":"10"}},Ml=wl(()=>g("img",{src:"/img/news/default_sketch.svg"},null,-1)),Dl={class:"eventboxin"},ql={key:0},Cl=["innerHTML"],Sl={key:1},Al={key:1,class:"videoItem"},Ul={__name:"AnnounceDescr",emits:["delPoster"],setup(l,{emit:P}){const M=String("https://api.sakh-orch.ru/"),U=He(),D=R("editMode"),r=R("Announce"),b=w(()=>{let k=U.platform.is.mobile?1080:480;return r.value.poster?Bt(M,r.value.poster.md5,r.value.poster.ext,k):"/error.err"});function i(){return"https://vk.com/share.php?url="+String("https://sakh-orch.ru/")+"/announce/"+String(r.value.id)+"&title="+String(r.value.progName)+"&noparse=true&image="+String(b.value)}function N(){ge.post(M+"api/event/poster.php",{params:{method:"unlink",id:r.value.id}}).then(k=>{var V;if(!((V=k==null?void 0:k.data)!=null&&V.result))throw new Error;delete r.value.poster,delete r.value.posterId}).catch(k=>{U.notify(ye(k))})}return(k,V)=>(h(),A(le,null,[o(r).poster?(h(),A("div",xl,[o(D)?(h(),A("div",Vl,[a(Wt,{"throw-confirm":"",title:"\u0423\u0434\u0430\u043B\u0438\u0442\u044C \u0430\u0444\u0438\u0448\u0443",tooltip:"\u0423\u0434\u0430\u043B\u0438\u0442\u044C \u0430\u0444\u0438\u0448\u0443",onOnOk:V[0]||(V[0]=q=>N())})])):I("",!0),o(r).poster.status==="process"?(h(),O(ue,{key:1},{default:s(()=>[a(Ye),a(L,null,{default:s(()=>[a(Yt,{showing:"",label:"\u041E\u0431\u0440\u0430\u0431\u043E\u0442\u043A\u0430"})]),_:1})]),_:1})):(h(),O(Ye,{key:2,src:b.value},{error:s(()=>[Ml]),_:1},8,["src"]))])):I("",!0),g("div",Dl,[a(It,{class:"transparent no-padding",flat:""},{default:s(()=>[a(Z,{class:"no-padding"},{default:s(()=>[a(ue,null,{default:s(()=>[a(L,null,{default:s(()=>[a(K,{class:"title"},{default:s(()=>[F(he(o(r).progName),1)]),_:1}),a(K,{class:"title"},{default:s(()=>[F(he(o(Lt)(o(r).eventTime)),1)]),_:1})]),_:1})]),_:1})]),_:1}),a(Z,null,{default:s(()=>[(h(!0),A(le,null,Ut(o(r).parsedMD,(q,E)=>(h(),A(le,{key:E},[q.type==="text"?(h(),A("div",ql,[q.content!==`
`?(h(),A("div",{key:0,innerHTML:q.content,class:"textBlock"},null,8,Cl)):(h(),A("br",Sl))])):I("",!0),q.type==="video"?(h(),A("div",Al,[a(zt,{ratio:16/9,src:"https://www.youtube.com/embed/"+q.content},null,8,["src"])])):I("",!0)],64))),128))]),_:1}),!o(r).completed&&[3,4].includes(o(r).pay)&&o(r).ticketLink?(h(),O(Ie,{key:0,align:"right"})):I("",!0),a(Z,null,{default:s(()=>[a(ue,{dense:""},{default:s(()=>[a(K,{caption:""},{default:s(()=>[F(" \u0423\u0432\u0430\u0436\u0430\u0435\u043C\u044B\u0435 \u043F\u043E\u0441\u0435\u0442\u0438\u0442\u0435\u043B\u0438, \u0443\u0431\u0435\u0434\u0438\u0442\u0435\u043B\u044C\u043D\u0430\u044F \u043F\u0440\u043E\u0441\u044C\u0431\u0430 \u0441\u043E\u0431\u043B\u044E\u0434\u0430\u0442\u044C \u043C\u0435\u0440\u044B \u0431\u0435\u0437\u043E\u043F\u0430\u0441\u043D\u043E\u0441\u0442\u0438 \u0432 \u0441\u0432\u044F\u0437\u0438 \u0441 \u0440\u0430\u0441\u043F\u0440\u043E\u0441\u0442\u0440\u0430\u043D\u0435\u043D\u0438\u0435\u043C \u043A\u043E\u0440\u043E\u043D\u0430\u0432\u0438\u0440\u0443\u0441\u043D\u043E\u0439 \u0438\u043D\u0444\u0435\u043A\u0446\u0438\u0438! ")]),_:1})]),_:1})]),_:1}),a(Z,null,{default:s(()=>[a(ue,{clickable:"",href:o(r).Hall.map,target:"_blank"},{default:s(()=>[a(L,{avatar:""},{default:s(()=>[a(ie,{name:"place"})]),_:1}),a(L,null,{default:s(()=>[a(K,null,{default:s(()=>[F(he(o(r).Hall.name),1)]),_:1}),a(K,{caption:""},{default:s(()=>[F(he(o(r).Hall.address),1)]),_:1})]),_:1})]),_:1},8,["href"])]),_:1}),!o(r).completed&&[3,4].includes(o(r).pay)&&o(r).ticketLink?(h(),O(Z,{key:1},{default:s(()=>[a(ue,{clickable:"",href:o(r).ticketLink,target:"_blank"},{default:s(()=>[o(r).pay===3?(h(),A(le,{key:0},[a(L,{avatar:""},{default:s(()=>[a(ie,{name:"shopping_cart"})]),_:1}),a(L,null,{default:s(()=>[a(K,null,{default:s(()=>[F("\u041A\u0443\u043F\u0438\u0442\u044C \u0431\u0438\u043B\u0435\u0442")]),_:1}),(h(),O(K,{key:0,caption:""},{default:s(()=>[F("+ \u0414\u043E\u0441\u0442\u0443\u043F\u043D\u043E \u043F\u043E \u043F\u0443\u0448\u043A\u0438\u043D\u0441\u043A\u043E\u0439 \u043A\u0430\u0440\u0442\u0435")]),_:1}))]),_:1})],64)):I("",!0),o(r).pay===4?(h(),A(le,{key:1},[a(L,{avatar:""},{default:s(()=>[a(ie,{name:"img:/img/uds.svg"})]),_:1}),a(L,null,{default:s(()=>[a(K,null,{default:s(()=>[F("\u041F\u043E\u043B\u0443\u0447\u0438\u0442\u044C \u043F\u0440\u0438\u0433\u043B\u0430\u0441\u0438\u0442\u0435\u043B\u044C\u043D\u044B\u0439")]),_:1})]),_:1})],64)):I("",!0)]),_:1},8,["href"])]),_:1})):I("",!0),a(ke),a(Z,{class:"no-padding"},{default:s(()=>[a(je,{"phone-number":"+7-(4242)-300-518"}),a(je,{"phone-number":"+7-(962)-416-36-89"})]),_:1}),a(ke,{spaced:"1em"}),a(Ie,{align:"right"},{default:s(()=>[a(se,{href:i(),target:"_blank",outline:"",icon:"img:/img/logo/vk/VK Logo Black & White.svg",label:"\u041F\u043E\u0434\u0435\u043B\u0438\u0442\u044C\u0441\u044F"},null,8,["href"])]),_:1})]),_:1})])],64))}};var Il=$e(Ul,[["__scopeId","data-v-10491d29"]]);const Hl={class:"centralCol"},$l={class:"eventboxl"},Ql={__name:"AnnouncePage",setup(l){const P=Ft("\u0410\u043D\u043E\u043D\u0441");ht(P);const M=He(),U=R("editMode"),D=String("https://api.sakh-orch.ru/"),r=ze(),b=H(),i=H(null);We("Announce",i);function N(){ge.post(D+"api/event/announce.php",{params:{method:"get",id:r.params.evid}}).then(k=>{var V,q;i.value=(q=(V=k==null?void 0:k.data)==null?void 0:V.data)!=null?q:null,console.log("Announce loaded")}).catch(k=>{M.notify(ye(k))})}return Re(()=>{N()}),(k,V)=>(h(),O(pt,{class:"col myScrollArea"},{default:s(()=>[g("div",Hl,[o(U)&&i.value?(h(),O(bl,{key:0,onPosterUploaded:N,onReload:N,ref_key:"editorRef",ref:b},null,512)):I("",!0),g("div",$l,[i.value?(h(),O(Il,{key:0,onDelPoster:V[0]||(V[0]=()=>{b.value.delPoster()})})):I("",!0)])]),a(Rt)]),_:1}))}};var ka=$e(Ql,[["__scopeId","data-v-beb09c0a"]]);export{ka as default};
