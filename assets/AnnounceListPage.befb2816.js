import{i as c,m as _,n as v,q as r,f as l,b9 as w,ba as I,t as g,v as y,x as V,b as M,u as N,I as R,r as n,p,B as P,l as U,ax as Q}from"./index.1b0ae8da.js";import{Q as x}from"./QSelect.73aed1f8.js";import{Q as $}from"./QTooltip.a890dd0a.js";import{_ as q}from"./AnnounceList.089ea882.js";import{a as E,Q as F,u as O}from"./QItem.612f6437.js";import{u as W}from"./use-meta.cb4e4ab0.js";import{api as j}from"./axios.756d5463.js";import{g as z,a as K,n as G}from"./myFuncts.54ac28fd.js";import{Q as T}from"./QItemLabel.8028e987.js";import{P as H}from"./PageShell.26f9e343.js";import{_ as J}from"./plugin-vue_export-helper.21dcd24c.js";import"./QMenu.b0f90ed7.js";import"./position-engine.f5258338.js";import"./selection.9c7de808.js";import"./rtl.b51694b1.js";import"./format.3e32b8d9.js";import"./AnnounceCard.49441931.js";import"./QImg.2922e8b7.js";import"./BtnDelete.e00588c8.js";import"./QExpansionItem.df36872d.js";import"./QToolbar.f0c18eb8.js";import"./QScrollArea.cfccd153.js";import"./TouchPan.e59cd5e4.js";import"./touch.3df10340.js";import"./QLinearProgress.1fd3ea12.js";import"./MainFooter.9be60b4c.js";import"./MainFooter.vue_vue_type_style_index_0_scoped_true_lang.ebe4ca2f.js";import"./AnderHeader.847277b6.js";/* empty css                                                    */const X={__name:"SelectSort",emits:["onSelect"],setup(Y,{emit:d}){const s=c("sortType"),i=d,f=[{label:"\u0421\u043D\u0430\u0447\u0430\u043B\u0430 \u043D\u043E\u0432\u044B\u0435",value:"dateDesc",caption:"\u041F\u043E \u0443\u0431\u044B\u0432\u0430\u043D\u0438\u044E \u0434\u0430\u0442\u044B"},{label:"\u0421\u043D\u0430\u0447\u0430\u043B\u0430 \u0434\u0430\u0432\u043D\u0438\u0435",value:"dateAsc",caption:"\u041F\u043E \u0432\u043E\u0437\u0440\u0430\u0441\u0442\u0430\u043D\u0438\u044E \u0434\u0430\u0442\u044B"}];return(h,a)=>(_(),v(x,{modelValue:V(s),"onUpdate:modelValue":[a[0]||(a[0]=o=>M(s)?s.value=o:null),a[1]||(a[1]=o=>i("onSelect"))],borderless:"","map-options":"","emit-value":"",options:f},{option:r(o=>[l(E,w(I(o.itemProps)),{default:r(()=>[l(F,null,{default:r(()=>[l(T,null,{default:r(()=>[g(y(o.opt.label),1)]),_:2},1024),l(T,{caption:""},{default:r(()=>[g(y(o.opt.caption),1)]),_:2},1024)]),_:2},1024)]),_:2},1040)]),_:1},8,["modelValue"]))}};const Z={class:"centralCol"},tt={class:"gridArea"},C="\u0410\u043D\u043E\u043D\u0441\u044B",et={__name:"AnnounceListPage",setup(Y){const d=z(C);W(d);const s=String("https://api.sakh-orch.ru/"),i=O();N();const f=R(),h=c("editMode"),a=n(!1);p("compactCard",a),c("progress");const o=n("dateDesc");p("sortType",o);const u=n(new Date().getFullYear());p("evYear",u);const A=n([]);p("announceList",A);const S=c("scrollWatch"),k=n();function B(){S.value=!1,a.value=!a.value,setTimeout(()=>{S.value=!0},500)}function D(){let t=[];for(let e=2018;e<=new Date().getFullYear();e++)t.push(e);return t.reverse()}function L(){j.post(s+"api/event/announce.php",{params:{method:"add"}}).then(t=>{var e,m,b;if(!((e=t==null?void 0:t.data)!=null&&e.result))throw new Error;i.notify(K((b=(m=t==null?void 0:t.data)==null?void 0:m.result)!=null?b:null)),f.push({path:"/announce/"+t.data.data.id})}).catch(t=>{i.notify(G(t))})}return(t,e)=>(_(),v(H,{pageTitle:C},{ToolPanel:r(()=>[V(h)?(_(),v(P,{key:0,label:"\u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C",stretch:"",flat:"",onClick:L})):U("",!0),l(x,{modelValue:u.value,"onUpdate:modelValue":e[0]||(e[0]=m=>u.value=m),options:D(),"emit-value":"",borderless:""},null,8,["modelValue","options"]),l(X,{onOnSelect:e[1]||(e[1]=()=>{k.value.setScrollPosition("vertical",0,300)})}),l(P,{icon:a.value?"unfold_less":"unfold_more",flat:"",stretch:"",onClick:B},{default:r(()=>[l($,null,{default:r(()=>[g(y(a.value?"\u041F\u043E\u0434\u0440\u043E\u0431\u043D\u043E":"\u041A\u0440\u0430\u0442\u043A\u043E"),1)]),_:1})]),_:1},8,["icon"])]),PageContent:r(()=>[Q("div",Z,[Q("div",tt,[l(q,{evYear:u.value,method:"listByYear",sort:o.value},null,8,["evYear","sort"])])])]),_:1}))}};var Bt=J(et,[["__scopeId","data-v-3d8b61a8"]]);export{Bt as default};
