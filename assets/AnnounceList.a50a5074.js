import{u as w}from"./use-quasar.db85b148.js";import{api as g}from"./axios.4bd335be.js";import{A as y}from"./AnnounceCard.00380cf0.js";import{r as n,i as r,S as D,aR as M,o as A,w as c,h as F,z as l,A as L,G as B,y as i,F as N,D as R}from"./index.9ebc3289.js";const j={__name:"AnnounceList",props:{sort:n(null),evYear:n(null),onlyNew:n(0)},setup(d){const t=d,m=String("https://api.sakh-orch.ru/"),p=w(),v=r("token");r("lvl"),D(),M();const f=r("editMode"),e=n(null);r("Halls");function s(){g.post(m+"api/get/announces/announces.php",{params:{sort:t.sort,year:t.evYear,new:t.onlyNew,token:v.value}}).then(a=>{e.value=a.data.data}).catch(()=>{p.notify({color:"negative",position:"center",message:"\u0421\u0435\u0440\u0432\u0435\u0440 \u043D\u0435 \u043E\u0442\u0432\u0435\u0447\u0430\u0435\u0442",icon:"report_problem"}),e.value=[]})}A(()=>{s()}),c(()=>t.evYear,()=>{s()}),c(()=>t.sort,()=>{});const h=(a,o)=>a.datetime<o.datetime?1:-1,_=(a,o)=>a.datetime>o.datetime?1:-1,k=F(()=>{if(!e.value||!e.value.length)return[];switch(t.sort){case 0:return[...e.value].sort(h);case 1:return[...e.value].sort(_);default:return e.value}});return(a,o)=>(l(!0),L(N,null,B(i(k),u=>(l(),R(y,{key:u.ev_id,evData:u,editMode:i(f),onIamDeleted:s},null,8,["evData","editMode"]))),128))}};export{j as _};
