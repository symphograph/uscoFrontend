import{u as fn}from"./use-meta.03f8629a.js";import{u as pt}from"./use-quasar.a3a8e107.js";import{api as yt}from"./axios.1c44bdcc.js";import{Q as mn}from"./QImg.b42e9670.js";import{r as U,C as b,f as ue,g as Pe,v as Y,j as Xe,c as Ye,av as Yt,G as j,h as Q,a2 as J,F as Pt,_ as Dt,z as Ut,A as Bt,bb as Qt,bc as hn,B as wt,b4 as Lt,aj as Zt,al as zt,bd as Kt,be as gn,w as Me,D as h,aq as Ne,E as Rt,J as kt,bf as Xt,T as _t,bg as yn,ba as _n,aG as Mn,aT as bn,a5 as Mt,i as Ce,t as ye,aZ as Ee,a1 as qt,u as Jt,d as pn,p as Dn,a as wn}from"./index.f4425f64.js";import{d as kn,b as mt,n as rt}from"./myFuncts.8c7f864e.js";import{Q as Ht}from"./QUploader.2c221568.js";import{Q as Vt}from"./QSelect.c3f215a6.js";import{u as xn}from"./use-cache.b0833c75.js";import{p as V}from"./format.3e32b8d9.js";import{Q as Sn}from"./rtl.1c3fa6ce.js";import{u as Cn,c as Yn}from"./position-engine.f8cade4e.js";import{T as qn,C as At}from"./ClosePopup.65f23d70.js";import{A as Hn}from"./AnnounceCard.1f357f3c.js";import"./use-ratio.897a1642.js";import"./jwt-decode.esm.74bd4619.js";import"./QItemSection.5c8788d1.js";import"./touch.3df10340.js";import"./QTooltip.6a47fc5b.js";const re=e=>(Ut("data-v-1265db70"),e=e(),Bt(),e),Vn={class:"eventbox"},An={class:"eventboxin"},On={class:"text"},$n={key:0},In=re(()=>Y("br",null,null,-1)),Tn=re(()=>Y("br",null,null,-1)),jn=["innerHTML"],Fn=re(()=>Y("br",null,null,-1)),Nn=re(()=>Y("small",null," \u0423\u0432\u0430\u0436\u0430\u0435\u043C\u044B\u0435 \u043F\u043E\u0441\u0435\u0442\u0438\u0442\u0435\u043B\u0438, \u0443\u0431\u0435\u0434\u0438\u0442\u0435\u043B\u044C\u043D\u0430\u044F \u043F\u0440\u043E\u0441\u044C\u0431\u0430 \u0441\u043E\u0431\u043B\u044E\u0434\u0430\u0442\u044C \u043C\u0435\u0440\u044B \u0431\u0435\u0437\u043E\u043F\u0430\u0441\u043D\u043E\u0441\u0442\u0438 \u0432 \u0441\u0432\u044F\u0437\u0438 \u0441 \u0440\u0430\u0441\u043F\u0440\u043E\u0441\u0442\u0440\u0430\u043D\u0435\u043D\u0438\u0435\u043C \u043A\u043E\u0440\u043E\u043D\u0430\u0432\u0438\u0440\u0443\u0441\u043D\u043E\u0439 \u0438\u043D\u0444\u0435\u043A\u0446\u0438\u0438! ",-1)),En=re(()=>Y("br",null,null,-1)),Pn=re(()=>Y("br",null,null,-1)),Un=re(()=>Y("p",null,"\u0421\u043F\u0440\u0430\u0432\u043A\u0438 \u043F\u043E \u0442\u0435\u043B:",-1)),Bn=re(()=>Y("div",{class:"tel"},[Y("a",{href:"tel:+74242300518"},"+7-4242-300-518")],-1)),Qn=re(()=>Y("br",null,null,-1)),Ln=re(()=>Y("div",{class:"tel"},[Y("a",{href:"tel:+79624163689"},"+7-962-416-36-89")],-1)),Zn=re(()=>Y("br",null,null,-1)),zn={__name:"AnnounceDescr",props:{Announce:U(null)},setup(e){const l=e,c=String("https://api.sakh-orch.ru/"),i=pt(),f=b(()=>{let g=480;return i.platform.is.mobile&&(g=1080),c+String(l.Announce.Poster.folder)+"/"+String(g)+"/"+l.Announce.Sketch.fileName+"?ver="+l.Announce.Poster.md5});function u(){return"https://vk.com/share.php?url="+c+"/event.php?evid="+String(l.Announce.id)+"&title="+String(l.Announce.progName)+"&noparse=true&image="+String(f)}return(g,s)=>(ue(),Pe(Pt,null,[Y("div",Vn,[e.Announce.verLink?(ue(),Xe(mn,{key:0,ratio:e.Announce.Poster.width/e.Announce.Poster.height,"initial-ratio":"1080/1534",src:f.value},null,8,["ratio","src"])):Ye("",!0)]),Y("div",An,[Y("div",On,[e.Announce.progName?(ue(),Pe("p",$n,[Y("b",null,Yt(e.Announce.progName),1)])):Ye("",!0),In,Y("p",null,[Y("b",null,Yt(j(kn)(e.Announce.datetime)),1)]),Tn,Y("div",{innerHTML:e.Announce.description},null,8,jn),Fn,Nn,En,Pn,Un,Bn,Qn,Ln,Zn,Q(J,{href:u(),target:"_blank",color:"primary",icon:"ion-logo-vk",label:"\u041F\u043E\u0434\u0435\u043B\u0438\u0442\u044C\u0441\u044F"},null,8,["href"])])])],64))}};var Kn=Dt(zn,[["__scopeId","data-v-1265db70"]]);const be=[-61,9,38,199,426,686,756,818,1111,1181,1210,1635,2060,2097,2192,2262,2324,2394,2456,3178];function Rn(e,l,c){return Object.prototype.toString.call(e)==="[object Date]"&&(c=e.getDate(),l=e.getMonth()+1,e=e.getFullYear()),Gn(xt(e,l,c))}function Ot(e,l,c){return Gt(Wn(e,l,c))}function Xn(e){return Jn(e)===0}function it(e,l){return l<=6?31:l<=11||Xn(e)?30:29}function Jn(e){const l=be.length;let c=be[0],i,f,u,g,s;if(e<c||e>=be[l-1])throw new Error("Invalid Jalaali year "+e);for(s=1;s<l&&(i=be[s],f=i-c,!(e<i));s+=1)c=i;return g=e-c,f-g<6&&(g=g-f+E(f+4,33)*33),u=ne(ne(g+1,33)-1,4),u===-1&&(u=4),u}function Wt(e,l){const c=be.length,i=e+621;let f=-14,u=be[0],g,s,d,I,_;if(e<u||e>=be[c-1])throw new Error("Invalid Jalaali year "+e);for(_=1;_<c&&(g=be[_],s=g-u,!(e<g));_+=1)f=f+E(s,33)*8+E(ne(s,33),4),u=g;I=e-u,f=f+E(I,33)*8+E(ne(I,33)+3,4),ne(s,33)===4&&s-I===4&&(f+=1);const D=E(i,4)-E((E(i,100)+1)*3,4)-150,z=20+f-D;return l||(s-I<6&&(I=I-s+E(s+4,33)*33),d=ne(ne(I+1,33)-1,4),d===-1&&(d=4)),{leap:d,gy:i,march:z}}function Wn(e,l,c){const i=Wt(e,!0);return xt(i.gy,3,i.march)+(l-1)*31-E(l,7)*(l-7)+c-1}function Gn(e){const l=Gt(e).gy;let c=l-621,i,f,u;const g=Wt(c,!1),s=xt(l,3,g.march);if(u=e-s,u>=0){if(u<=185)return f=1+E(u,31),i=ne(u,31)+1,{jy:c,jm:f,jd:i};u-=186}else c-=1,u+=179,g.leap===1&&(u+=1);return f=7+E(u,30),i=ne(u,30)+1,{jy:c,jm:f,jd:i}}function xt(e,l,c){let i=E((e+E(l-8,6)+100100)*1461,4)+E(153*ne(l+9,12)+2,5)+c-34840408;return i=i-E(E(e+100100+E(l-8,6),100)*3,4)+752,i}function Gt(e){let l=4*e+139361631;l=l+E(E(4*e+183187720,146097)*3,4)*4-3908;const c=E(ne(l,1461),4)*5+308,i=E(ne(c,153),5)+1,f=ne(E(c,153),12)+1;return{gy:E(l,1461)-100100+E(8-f,6),gm:f,gd:i}}function E(e,l){return~~(e/l)}function ne(e,l){return e-~~(e/l)*l}const ea=["gregorian","persian"],en={modelValue:{required:!0},mask:{type:String},locale:Object,calendar:{type:String,validator:e=>ea.includes(e),default:"gregorian"},landscape:Boolean,color:String,textColor:String,square:Boolean,flat:Boolean,bordered:Boolean,readonly:Boolean,disable:Boolean},tn=["update:modelValue"];function fe(e){return e.year+"/"+V(e.month)+"/"+V(e.day)}function nn(e,l){const c=b(()=>e.disable!==!0&&e.readonly!==!0),i=b(()=>c.value===!0?0:-1),f=b(()=>{const s=[];return e.color!==void 0&&s.push(`bg-${e.color}`),e.textColor!==void 0&&s.push(`text-${e.textColor}`),s.join(" ")});function u(){return e.locale!==void 0?{...l.lang.date,...e.locale}:l.lang.date}function g(s){const d=new Date,I=s===!0?null:0;if(e.calendar==="persian"){const _=Rn(d);return{year:_.jy,month:_.jm,day:_.jd}}return{year:d.getFullYear(),month:d.getMonth()+1,day:d.getDate(),hour:I,minute:I,second:I,millisecond:I}}return{editable:c,tabindex:i,headerClass:f,getLocale:u,getCurrentDate:g}}const an=864e5,ta=36e5,bt=6e4,ln="YYYY-MM-DDTHH:mm:ss.SSSZ",na=/\[((?:[^\]\\]|\\]|\\)*)\]|d{1,4}|M{1,4}|m{1,2}|w{1,2}|Qo|Do|D{1,4}|YY(?:YY)?|H{1,2}|h{1,2}|s{1,2}|S{1,3}|Z{1,2}|a{1,2}|[AQExX]/g,aa=/(\[[^\]]*\])|d{1,4}|M{1,4}|m{1,2}|w{1,2}|Qo|Do|D{1,4}|YY(?:YY)?|H{1,2}|h{1,2}|s{1,2}|S{1,3}|Z{1,2}|a{1,2}|[AQExX]|([.*+:?^,\s${}()|\\]+)/g,ht={};function la(e,l){const c="("+l.days.join("|")+")",i=e+c;if(ht[i]!==void 0)return ht[i];const f="("+l.daysShort.join("|")+")",u="("+l.months.join("|")+")",g="("+l.monthsShort.join("|")+")",s={};let d=0;const I=e.replace(aa,D=>{switch(d++,D){case"YY":return s.YY=d,"(-?\\d{1,2})";case"YYYY":return s.YYYY=d,"(-?\\d{1,4})";case"M":return s.M=d,"(\\d{1,2})";case"MM":return s.M=d,"(\\d{2})";case"MMM":return s.MMM=d,g;case"MMMM":return s.MMMM=d,u;case"D":return s.D=d,"(\\d{1,2})";case"Do":return s.D=d++,"(\\d{1,2}(st|nd|rd|th))";case"DD":return s.D=d,"(\\d{2})";case"H":return s.H=d,"(\\d{1,2})";case"HH":return s.H=d,"(\\d{2})";case"h":return s.h=d,"(\\d{1,2})";case"hh":return s.h=d,"(\\d{2})";case"m":return s.m=d,"(\\d{1,2})";case"mm":return s.m=d,"(\\d{2})";case"s":return s.s=d,"(\\d{1,2})";case"ss":return s.s=d,"(\\d{2})";case"S":return s.S=d,"(\\d{1})";case"SS":return s.S=d,"(\\d{2})";case"SSS":return s.S=d,"(\\d{3})";case"A":return s.A=d,"(AM|PM)";case"a":return s.a=d,"(am|pm)";case"aa":return s.aa=d,"(a\\.m\\.|p\\.m\\.)";case"ddd":return f;case"dddd":return c;case"Q":case"d":case"E":return"(\\d{1})";case"Qo":return"(1st|2nd|3rd|4th)";case"DDD":case"DDDD":return"(\\d{1,3})";case"w":return"(\\d{1,2})";case"ww":return"(\\d{2})";case"Z":return s.Z=d,"(Z|[+-]\\d{2}:\\d{2})";case"ZZ":return s.ZZ=d,"(Z|[+-]\\d{2}\\d{2})";case"X":return s.X=d,"(-?\\d+)";case"x":return s.x=d,"(-?\\d{4,})";default:return d--,D[0]==="["&&(D=D.substring(1,D.length-1)),D.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}}),_={map:s,regex:new RegExp("^"+I)};return ht[i]=_,_}function on(e,l){return e!==void 0?e:l!==void 0?l.date:hn.date}function $t(e,l=""){const c=e>0?"-":"+",i=Math.abs(e),f=Math.floor(i/60),u=i%60;return c+V(f)+l+V(u)}function Re(e,l,c,i,f){const u={year:null,month:null,day:null,hour:null,minute:null,second:null,millisecond:null,timezoneOffset:null,dateHash:null,timeHash:null};if(f!==void 0&&Object.assign(u,f),e==null||e===""||typeof e!="string")return u;l===void 0&&(l=ln);const g=on(c,Qt.props),s=g.months,d=g.monthsShort,{regex:I,map:_}=la(l,g),D=e.match(I);if(D===null)return u;let z="";if(_.X!==void 0||_.x!==void 0){const L=parseInt(D[_.X!==void 0?_.X:_.x],10);if(isNaN(L)===!0||L<0)return u;const K=new Date(L*(_.X!==void 0?1e3:1));u.year=K.getFullYear(),u.month=K.getMonth()+1,u.day=K.getDate(),u.hour=K.getHours(),u.minute=K.getMinutes(),u.second=K.getSeconds(),u.millisecond=K.getMilliseconds()}else{if(_.YYYY!==void 0)u.year=parseInt(D[_.YYYY],10);else if(_.YY!==void 0){const L=parseInt(D[_.YY],10);u.year=L<0?L:2e3+L}if(_.M!==void 0){if(u.month=parseInt(D[_.M],10),u.month<1||u.month>12)return u}else _.MMM!==void 0?u.month=d.indexOf(D[_.MMM])+1:_.MMMM!==void 0&&(u.month=s.indexOf(D[_.MMMM])+1);if(_.D!==void 0){if(u.day=parseInt(D[_.D],10),u.year===null||u.month===null||u.day<1)return u;const L=i!=="persian"?new Date(u.year,u.month,0).getDate():it(u.year,u.month);if(u.day>L)return u}_.H!==void 0?u.hour=parseInt(D[_.H],10)%24:_.h!==void 0&&(u.hour=parseInt(D[_.h],10)%12,(_.A&&D[_.A]==="PM"||_.a&&D[_.a]==="pm"||_.aa&&D[_.aa]==="p.m.")&&(u.hour+=12),u.hour=u.hour%24),_.m!==void 0&&(u.minute=parseInt(D[_.m],10)%60),_.s!==void 0&&(u.second=parseInt(D[_.s],10)%60),_.S!==void 0&&(u.millisecond=parseInt(D[_.S],10)*10**(3-D[_.S].length)),(_.Z!==void 0||_.ZZ!==void 0)&&(z=_.Z!==void 0?D[_.Z].replace(":",""):D[_.ZZ],u.timezoneOffset=(z[0]==="+"?-1:1)*(60*z.slice(1,3)+1*z.slice(3,5)))}return u.dateHash=V(u.year,6)+"/"+V(u.month)+"/"+V(u.day),u.timeHash=V(u.hour)+":"+V(u.minute)+":"+V(u.second)+z,u}function It(e){const l=new Date(e.getFullYear(),e.getMonth(),e.getDate());l.setDate(l.getDate()-(l.getDay()+6)%7+3);const c=new Date(l.getFullYear(),0,4);c.setDate(c.getDate()-(c.getDay()+6)%7+3);const i=l.getTimezoneOffset()-c.getTimezoneOffset();l.setHours(l.getHours()-i);const f=(l-c)/(an*7);return 1+Math.floor(f)}function me(e,l,c){const i=new Date(e),f=`set${c===!0?"UTC":""}`;switch(l){case"year":case"years":i[`${f}Month`](0);case"month":case"months":i[`${f}Date`](1);case"day":case"days":case"date":i[`${f}Hours`](0);case"hour":case"hours":i[`${f}Minutes`](0);case"minute":case"minutes":i[`${f}Seconds`](0);case"second":case"seconds":i[`${f}Milliseconds`](0)}return i}function ut(e,l,c){return(e.getTime()-e.getTimezoneOffset()*bt-(l.getTime()-l.getTimezoneOffset()*bt))/c}function un(e,l,c="days"){const i=new Date(e),f=new Date(l);switch(c){case"years":case"year":return i.getFullYear()-f.getFullYear();case"months":case"month":return(i.getFullYear()-f.getFullYear())*12+i.getMonth()-f.getMonth();case"days":case"day":case"date":return ut(me(i,"day"),me(f,"day"),an);case"hours":case"hour":return ut(me(i,"hour"),me(f,"hour"),ta);case"minutes":case"minute":return ut(me(i,"minute"),me(f,"minute"),bt);case"seconds":case"second":return ut(me(i,"second"),me(f,"second"),1e3)}}function Tt(e){return un(e,me(e,"year"),"days")+1}function jt(e){if(e>=11&&e<=13)return`${e}th`;switch(e%10){case 1:return`${e}st`;case 2:return`${e}nd`;case 3:return`${e}rd`}return`${e}th`}const Ft={YY(e,l,c){const i=this.YYYY(e,l,c)%100;return i>=0?V(i):"-"+V(Math.abs(i))},YYYY(e,l,c){return c!=null?c:e.getFullYear()},M(e){return e.getMonth()+1},MM(e){return V(e.getMonth()+1)},MMM(e,l){return l.monthsShort[e.getMonth()]},MMMM(e,l){return l.months[e.getMonth()]},Q(e){return Math.ceil((e.getMonth()+1)/3)},Qo(e){return jt(this.Q(e))},D(e){return e.getDate()},Do(e){return jt(e.getDate())},DD(e){return V(e.getDate())},DDD(e){return Tt(e)},DDDD(e){return V(Tt(e),3)},d(e){return e.getDay()},dd(e,l){return this.dddd(e,l).slice(0,2)},ddd(e,l){return l.daysShort[e.getDay()]},dddd(e,l){return l.days[e.getDay()]},E(e){return e.getDay()||7},w(e){return It(e)},ww(e){return V(It(e))},H(e){return e.getHours()},HH(e){return V(e.getHours())},h(e){const l=e.getHours();return l===0?12:l>12?l%12:l},hh(e){return V(this.h(e))},m(e){return e.getMinutes()},mm(e){return V(e.getMinutes())},s(e){return e.getSeconds()},ss(e){return V(e.getSeconds())},S(e){return Math.floor(e.getMilliseconds()/100)},SS(e){return V(Math.floor(e.getMilliseconds()/10))},SSS(e){return V(e.getMilliseconds(),3)},A(e){return this.H(e)<12?"AM":"PM"},a(e){return this.H(e)<12?"am":"pm"},aa(e){return this.H(e)<12?"a.m.":"p.m."},Z(e,l,c,i){const f=i==null?e.getTimezoneOffset():i;return $t(f,":")},ZZ(e,l,c,i){const f=i==null?e.getTimezoneOffset():i;return $t(f)},X(e){return Math.floor(e.getTime()/1e3)},x(e){return e.getTime()}};function rn(e,l,c,i,f){if(e!==0&&!e||e===1/0||e===-1/0)return;const u=new Date(e);if(isNaN(u))return;l===void 0&&(l=ln);const g=on(c,Qt.props);return l.replace(na,(s,d)=>s in Ft?Ft[s](u,g,i,f):d===void 0?s:d.split("\\]").join("]"))}const Se=20,oa=["Calendar","Years","Months"],Nt=e=>oa.includes(e),gt=e=>/^-?[\d]+\/[0-1]\d$/.test(e),Fe=" \u2014 ";function _e(e){return e.year+"/"+V(e.month)}var ua=wt({name:"QDate",props:{...en,...Lt,...Zt,multiple:Boolean,range:Boolean,title:String,subtitle:String,mask:{default:"YYYY/MM/DD"},defaultYearMonth:{type:String,validator:gt},yearsInMonthView:Boolean,events:[Array,Function],eventColor:[String,Function],emitImmediately:Boolean,options:[Array,Function],navigationMinYearMonth:{type:String,validator:gt},navigationMaxYearMonth:{type:String,validator:gt},noUnset:Boolean,firstDayOfWeek:[String,Number],todayBtn:Boolean,minimal:Boolean,defaultView:{type:String,default:"Calendar",validator:Nt}},emits:[...tn,"rangeStart","rangeEnd","navigation"],setup(e,{slots:l,emit:c}){const{proxy:i}=kt(),{$q:f}=i,u=zt(e,f),{getCache:g}=xn(),{tabindex:s,headerClass:d,getLocale:I,getCurrentDate:_}=nn(e,f);let D;const z=Kt(e),L=Xt(z),K=U(null),T=U(lt()),O=U(I()),De=b(()=>lt()),he=b(()=>I()),w=b(()=>_()),r=U(o(T.value,O.value)),A=U(e.defaultView),qe=f.lang.rtl===!0?"right":"left",ie=U(qe.value),k=U(qe.value),x=r.value.year,S=U(x-x%Se-(x<0?Se:0)),F=U(null),se=b(()=>{const t=e.landscape===!0?"landscape":"portrait";return`q-date q-date--${t} q-date--${t}-${e.minimal===!0?"minimal":"standard"}`+(u.value===!0?" q-date--dark q-dark":"")+(e.bordered===!0?" q-date--bordered":"")+(e.square===!0?" q-date--square no-border-radius":"")+(e.flat===!0?" q-date--flat no-shadow":"")+(e.disable===!0?" disabled":e.readonly===!0?" q-date--readonly":"")}),ae=b(()=>e.color||"primary"),le=b(()=>e.textColor||"white"),W=b(()=>e.emitImmediately===!0&&e.multiple!==!0&&e.range!==!0),ce=b(()=>Array.isArray(e.modelValue)===!0?e.modelValue:e.modelValue!==null&&e.modelValue!==void 0?[e.modelValue]:[]),X=b(()=>ce.value.filter(t=>typeof t=="string").map(t=>ze(t,T.value,O.value)).filter(t=>t.dateHash!==null&&t.day!==null&&t.month!==null&&t.year!==null)),oe=b(()=>{const t=n=>ze(n,T.value,O.value);return ce.value.filter(n=>gn(n)===!0&&n.from!==void 0&&n.to!==void 0).map(n=>({from:t(n.from),to:t(n.to)})).filter(n=>n.from.dateHash!==null&&n.to.dateHash!==null&&n.from.dateHash<n.to.dateHash)}),He=b(()=>e.calendar!=="persian"?t=>new Date(t.year,t.month-1,t.day):t=>{const n=Ot(t.year,t.month,t.day);return new Date(n.gy,n.gm-1,n.gd)}),Ue=b(()=>e.calendar==="persian"?fe:(t,n,a)=>rn(new Date(t.year,t.month-1,t.day,t.hour,t.minute,t.second,t.millisecond),n===void 0?T.value:n,a===void 0?O.value:a,t.year,t.timezoneOffset)),ge=b(()=>X.value.length+oe.value.reduce((t,n)=>t+1+un(He.value(n.to),He.value(n.from)),0)),we=b(()=>{if(e.title!==void 0&&e.title!==null&&e.title.length!==0)return e.title;if(F.value!==null){const a=F.value.init,y=He.value(a);return O.value.daysShort[y.getDay()]+", "+O.value.monthsShort[a.month-1]+" "+a.day+Fe+"?"}if(ge.value===0)return Fe;if(ge.value>1)return`${ge.value} ${O.value.pluralDay}`;const t=X.value[0],n=He.value(t);return isNaN(n.valueOf())===!0?Fe:O.value.headerTitle!==void 0?O.value.headerTitle(n,t):O.value.daysShort[n.getDay()]+", "+O.value.monthsShort[t.month-1]+" "+t.day}),Je=b(()=>X.value.concat(oe.value.map(n=>n.from)).sort((n,a)=>n.year-a.year||n.month-a.month)[0]),Be=b(()=>X.value.concat(oe.value.map(n=>n.to)).sort((n,a)=>a.year-n.year||a.month-n.month)[0]),We=b(()=>{if(e.subtitle!==void 0&&e.subtitle!==null&&e.subtitle.length!==0)return e.subtitle;if(ge.value===0)return Fe;if(ge.value>1){const t=Je.value,n=Be.value,a=O.value.monthsShort;return a[t.month-1]+(t.year!==n.year?" "+t.year+Fe+a[n.month-1]+" ":t.month!==n.month?Fe+a[n.month-1]:"")+" "+n.year}return X.value[0].year}),Ve=b(()=>{const t=[f.iconSet.datetime.arrowLeft,f.iconSet.datetime.arrowRight];return f.lang.rtl===!0?t.reverse():t}),Ae=b(()=>e.firstDayOfWeek!==void 0?Number(e.firstDayOfWeek):O.value.firstDayOfWeek),Qe=b(()=>{const t=O.value.daysShort,n=Ae.value;return n>0?t.slice(n,7).concat(t.slice(0,n)):t}),de=b(()=>{const t=r.value;return e.calendar!=="persian"?new Date(t.year,t.month,0).getDate():it(t.year,t.month)}),Ge=b(()=>typeof e.eventColor=="function"?e.eventColor:()=>e.eventColor),Z=b(()=>{if(e.navigationMinYearMonth===void 0)return null;const t=e.navigationMinYearMonth.split("/");return{year:parseInt(t[0],10),month:parseInt(t[1],10)}}),R=b(()=>{if(e.navigationMaxYearMonth===void 0)return null;const t=e.navigationMaxYearMonth.split("/");return{year:parseInt(t[0],10),month:parseInt(t[1],10)}}),Le=b(()=>{const t={month:{prev:!0,next:!0},year:{prev:!0,next:!0}};return Z.value!==null&&Z.value.year>=r.value.year&&(t.year.prev=!1,Z.value.year===r.value.year&&Z.value.month>=r.value.month&&(t.month.prev=!1)),R.value!==null&&R.value.year<=r.value.year&&(t.year.next=!1,R.value.year===r.value.year&&R.value.month<=r.value.month&&(t.month.next=!1)),t}),Oe=b(()=>{const t={};return X.value.forEach(n=>{const a=_e(n);t[a]===void 0&&(t[a]=[]),t[a].push(n.day)}),t}),et=b(()=>{const t={};return oe.value.forEach(n=>{const a=_e(n.from),y=_e(n.to);if(t[a]===void 0&&(t[a]=[]),t[a].push({from:n.from.day,to:a===y?n.to.day:void 0,range:n}),a<y){let m;const{year:$,month:M}=n.from,C=M<12?{year:$,month:M+1}:{year:$+1,month:1};for(;(m=_e(C))<=y;)t[m]===void 0&&(t[m]=[]),t[m].push({from:void 0,to:m===y?n.to.day:void 0,range:n}),C.month++,C.month>12&&(C.year++,C.month=1)}}),t}),ke=b(()=>{if(F.value===null)return;const{init:t,initHash:n,final:a,finalHash:y}=F.value,[m,$]=n<=y?[t,a]:[a,t],M=_e(m),C=_e($);if(M!==G.value&&C!==G.value)return;const N={};return M===G.value?(N.from=m.day,N.includeFrom=!0):N.from=1,C===G.value?(N.to=$.day,N.includeTo=!0):N.to=de.value,N}),G=b(()=>_e(r.value)),st=b(()=>{const t={};if(e.options===void 0){for(let a=1;a<=de.value;a++)t[a]=!0;return t}const n=typeof e.options=="function"?e.options:a=>e.options.includes(a);for(let a=1;a<=de.value;a++){const y=G.value+"/"+V(a);t[a]=n(y)}return t}),dt=b(()=>{const t={};if(e.events===void 0)for(let n=1;n<=de.value;n++)t[n]=!1;else{const n=typeof e.events=="function"?e.events:a=>e.events.includes(a);for(let a=1;a<=de.value;a++){const y=G.value+"/"+V(a);t[a]=n(y)===!0&&Ge.value(y)}}return t}),$e=b(()=>{let t,n;const{year:a,month:y}=r.value;if(e.calendar!=="persian")t=new Date(a,y-1,1),n=new Date(a,y-1,0).getDate();else{const m=Ot(a,y,1);t=new Date(m.gy,m.gm-1,m.gd);let $=y-1,M=a;$===0&&($=12,M--),n=it(M,$)}return{days:t.getDay()-Ae.value-1,endDay:n}}),xe=b(()=>{const t=[],{days:n,endDay:a}=$e.value,y=n<0?n+7:n;if(y<6)for(let M=a-y;M<=a;M++)t.push({i:M,fill:!0});const m=t.length;for(let M=1;M<=de.value;M++){const C={i:M,event:dt.value[M],classes:[]};st.value[M]===!0&&(C.in=!0,C.flat=!0),t.push(C)}if(Oe.value[G.value]!==void 0&&Oe.value[G.value].forEach(M=>{const C=m+M-1;Object.assign(t[C],{selected:!0,unelevated:!0,flat:!1,color:ae.value,textColor:le.value})}),et.value[G.value]!==void 0&&et.value[G.value].forEach(M=>{if(M.from!==void 0){const C=m+M.from-1,N=m+(M.to||de.value)-1;for(let Ke=C;Ke<=N;Ke++)Object.assign(t[Ke],{range:M.range,unelevated:!0,color:ae.value,textColor:le.value});Object.assign(t[C],{rangeFrom:!0,flat:!1}),M.to!==void 0&&Object.assign(t[N],{rangeTo:!0,flat:!1})}else if(M.to!==void 0){const C=m+M.to-1;for(let N=m;N<=C;N++)Object.assign(t[N],{range:M.range,unelevated:!0,color:ae.value,textColor:le.value});Object.assign(t[C],{flat:!1,rangeTo:!0})}else{const C=m+de.value-1;for(let N=m;N<=C;N++)Object.assign(t[N],{range:M.range,unelevated:!0,color:ae.value,textColor:le.value})}}),ke.value!==void 0){const M=m+ke.value.from-1,C=m+ke.value.to-1;for(let N=M;N<=C;N++)t[N].color=ae.value,t[N].editRange=!0;ke.value.includeFrom===!0&&(t[M].editRangeFrom=!0),ke.value.includeTo===!0&&(t[C].editRangeTo=!0)}r.value.year===w.value.year&&r.value.month===w.value.month&&(t[m+w.value.day-1].today=!0);const $=t.length%7;if($>0){const M=7-$;for(let C=1;C<=M;C++)t.push({i:C,fill:!0})}return t.forEach(M=>{let C="q-date__calendar-item ";M.fill===!0?C+="q-date__calendar-item--fill":(C+=`q-date__calendar-item--${M.in===!0?"in":"out"}`,M.range!==void 0&&(C+=` q-date__range${M.rangeTo===!0?"-to":M.rangeFrom===!0?"-from":""}`),M.editRange===!0&&(C+=` q-date__edit-range${M.editRangeFrom===!0?"-from":""}${M.editRangeTo===!0?"-to":""}`),(M.range!==void 0||M.editRange===!0)&&(C+=` text-${M.color}`)),M.classes=C}),t}),Ie=b(()=>e.disable===!0?{"aria-disabled":"true"}:e.readonly===!0?{"aria-readonly":"true"}:{});Me(()=>e.modelValue,t=>{if(D===t)D=0;else{const n=o(T.value,O.value);ee(n.year,n.month,n)}}),Me(A,()=>{K.value!==null&&i.$el.contains(document.activeElement)===!0&&K.value.focus()}),Me(()=>r.value.year+"|"+r.value.month,()=>{c("navigation",{year:r.value.year,month:r.value.month})}),Me(De,t=>{Ct(t,O.value,"mask"),T.value=t}),Me(he,t=>{Ct(T.value,t,"locale"),O.value=t});function tt(){const t=w.value,n=Oe.value[_e(t)];(n===void 0||n.includes(t.day)===!1)&&ct(t),ve(t.year,t.month)}function nt(t){Nt(t)===!0&&(A.value=t)}function at(t,n){["month","year"].includes(t)&&(t==="month"?p:q)(n===!0?-1:1)}function ve(t,n){A.value="Calendar",ee(t,n)}function Ze(t,n){if(e.range===!1||!t){F.value=null;return}const a=Object.assign({...r.value},t),y=n!==void 0?Object.assign({...r.value},n):a;F.value={init:a,initHash:fe(a),final:y,finalHash:fe(y)},ve(a.year,a.month)}function lt(){return e.calendar==="persian"?"YYYY/MM/DD":e.mask}function ze(t,n,a){return Re(t,n,a,e.calendar,{hour:0,minute:0,second:0,millisecond:0})}function o(t,n){const a=Array.isArray(e.modelValue)===!0?e.modelValue:e.modelValue?[e.modelValue]:[];if(a.length===0)return v();const y=a[a.length-1],m=ze(y.from!==void 0?y.from:y,t,n);return m.dateHash===null?v():m}function v(){let t,n;if(e.defaultYearMonth!==void 0){const a=e.defaultYearMonth.split("/");t=parseInt(a[0],10),n=parseInt(a[1],10)}else{const a=w.value!==void 0?w.value:_();t=a.year,n=a.month}return{year:t,month:n,day:1,hour:0,minute:0,second:0,millisecond:0,dateHash:t+"/"+V(n)+"/01"}}function p(t){let n=r.value.year,a=Number(r.value.month)+t;a===13?(a=1,n++):a===0&&(a=12,n--),ee(n,a),W.value===!0&&Te("month")}function q(t){const n=Number(r.value.year)+t;ee(n,r.value.month),W.value===!0&&Te("year")}function P(t){ee(t,r.value.month),A.value=e.defaultView==="Years"?"Months":"Calendar",W.value===!0&&Te("year")}function te(t){ee(r.value.year,t),A.value="Calendar",W.value===!0&&Te("month")}function H(t,n){const a=Oe.value[n];(a!==void 0&&a.includes(t.day)===!0?vt:ct)(t)}function B(t){return{year:t.year,month:t.month,day:t.day}}function ee(t,n,a){if(Z.value!==null&&t<=Z.value.year&&(t=Z.value.year,n<Z.value.month&&(n=Z.value.month)),R.value!==null&&t>=R.value.year&&(t=R.value.year,n>R.value.month&&(n=R.value.month)),a!==void 0){const{hour:m,minute:$,second:M,millisecond:C,timezoneOffset:N,timeHash:Ke}=a;Object.assign(r.value,{hour:m,minute:$,second:M,millisecond:C,timezoneOffset:N,timeHash:Ke})}const y=t+"/"+V(n)+"/01";y!==r.value.dateHash&&(ie.value=r.value.dateHash<y==(f.lang.rtl!==!0)?"left":"right",t!==r.value.year&&(k.value=ie.value),_t(()=>{S.value=t-t%Se-(t<0?Se:0),Object.assign(r.value,{year:t,month:n,day:1,dateHash:y})}))}function ot(t,n,a){const y=t!==null&&t.length===1&&e.multiple===!1?t[0]:t;D=y;const{reason:m,details:$}=St(n,a);c("update:modelValue",y,m,$)}function Te(t){const n=X.value[0]!==void 0&&X.value[0].dateHash!==null?{...X.value[0]}:{...r.value};_t(()=>{n.year=r.value.year,n.month=r.value.month;const a=e.calendar!=="persian"?new Date(n.year,n.month,0).getDate():it(n.year,n.month);n.day=Math.min(Math.max(1,n.day),a);const y=je(n);D=y;const{details:m}=St("",n);c("update:modelValue",y,t,m)})}function St(t,n){return n.from!==void 0?{reason:`${t}-range`,details:{...B(n.target),from:B(n.from),to:B(n.to)}}:{reason:`${t}-day`,details:B(n)}}function je(t,n,a){return t.from!==void 0?{from:Ue.value(t.from,n,a),to:Ue.value(t.to,n,a)}:Ue.value(t,n,a)}function ct(t){let n;if(e.multiple===!0)if(t.from!==void 0){const a=fe(t.from),y=fe(t.to),m=X.value.filter(M=>M.dateHash<a||M.dateHash>y),$=oe.value.filter(({from:M,to:C})=>C.dateHash<a||M.dateHash>y);n=m.concat($).concat(t).map(M=>je(M))}else{const a=ce.value.slice();a.push(je(t)),n=a}else n=je(t);ot(n,"add",t)}function vt(t){if(e.noUnset===!0)return;let n=null;if(e.multiple===!0&&Array.isArray(e.modelValue)===!0){const a=je(t);t.from!==void 0?n=e.modelValue.filter(y=>y.from!==void 0?y.from!==a.from&&y.to!==a.to:!0):n=e.modelValue.filter(y=>y!==a),n.length===0&&(n=null)}ot(n,"remove",t)}function Ct(t,n,a){const y=X.value.concat(oe.value).map(m=>je(m,t,n)).filter(m=>m.from!==void 0?m.from.dateHash!==null&&m.to.dateHash!==null:m.dateHash!==null);c("update:modelValue",(e.multiple===!0?y:y[0])||null,a)}function sn(){if(e.minimal!==!0)return h("div",{class:"q-date__header "+d.value},[h("div",{class:"relative-position"},[h(Ne,{name:"q-transition--fade"},()=>h("div",{key:"h-yr-"+We.value,class:"q-date__header-subtitle q-date__header-link "+(A.value==="Years"?"q-date__header-link--active":"cursor-pointer"),tabindex:s.value,...g("vY",{onClick(){A.value="Years"},onKeyup(t){t.keyCode===13&&(A.value="Years")}})},[We.value]))]),h("div",{class:"q-date__header-title relative-position flex no-wrap"},[h("div",{class:"relative-position col"},[h(Ne,{name:"q-transition--fade"},()=>h("div",{key:"h-sub"+we.value,class:"q-date__header-title-label q-date__header-link "+(A.value==="Calendar"?"q-date__header-link--active":"cursor-pointer"),tabindex:s.value,...g("vC",{onClick(){A.value="Calendar"},onKeyup(t){t.keyCode===13&&(A.value="Calendar")}})},[we.value]))]),e.todayBtn===!0?h(J,{class:"q-date__header-today self-start",icon:f.iconSet.datetime.today,flat:!0,size:"sm",round:!0,tabindex:s.value,onClick:tt}):null])])}function ft({label:t,type:n,key:a,dir:y,goTo:m,boundaries:$,cls:M}){return[h("div",{class:"row items-center q-date__arrow"},[h(J,{round:!0,dense:!0,size:"sm",flat:!0,icon:Ve.value[0],tabindex:s.value,disable:$.prev===!1,...g("go-#"+n,{onClick(){m(-1)}})})]),h("div",{class:"relative-position overflow-hidden flex flex-center"+M},[h(Ne,{name:"q-transition--jump-"+y},()=>h("div",{key:a},[h(J,{flat:!0,dense:!0,noCaps:!0,label:t,tabindex:s.value,...g("view#"+n,{onClick:()=>{A.value=n}})})]))]),h("div",{class:"row items-center q-date__arrow"},[h(J,{round:!0,dense:!0,size:"sm",flat:!0,icon:Ve.value[1],tabindex:s.value,disable:$.next===!1,...g("go+#"+n,{onClick(){m(1)}})})])]}const dn={Calendar:()=>[h("div",{key:"calendar-view",class:"q-date__view q-date__calendar"},[h("div",{class:"q-date__navigation row items-center no-wrap"},ft({label:O.value.months[r.value.month-1],type:"Months",key:r.value.month,dir:ie.value,goTo:p,boundaries:Le.value.month,cls:" col"}).concat(ft({label:r.value.year,type:"Years",key:r.value.year,dir:k.value,goTo:q,boundaries:Le.value.year,cls:""}))),h("div",{class:"q-date__calendar-weekdays row items-center no-wrap"},Qe.value.map(t=>h("div",{class:"q-date__calendar-item"},[h("div",t)]))),h("div",{class:"q-date__calendar-days-container relative-position overflow-hidden"},[h(Ne,{name:"q-transition--slide-"+ie.value},()=>h("div",{key:G.value,class:"q-date__calendar-days fit"},xe.value.map(t=>h("div",{class:t.classes},[t.in===!0?h(J,{class:t.today===!0?"q-date__today":"",dense:!0,flat:t.flat,unelevated:t.unelevated,color:t.color,textColor:t.textColor,label:t.i,tabindex:s.value,...g("day#"+t.i,{onClick:()=>{cn(t.i)},onMouseover:()=>{vn(t.i)}})},t.event!==!1?()=>h("div",{class:"q-date__event bg-"+t.event}):null):h("div",""+t.i)]))))])])],Months(){const t=r.value.year===w.value.year,n=y=>Z.value!==null&&r.value.year===Z.value.year&&Z.value.month>y||R.value!==null&&r.value.year===R.value.year&&R.value.month<y,a=O.value.monthsShort.map((y,m)=>{const $=r.value.month===m+1;return h("div",{class:"q-date__months-item flex flex-center"},[h(J,{class:t===!0&&w.value.month===m+1?"q-date__today":null,flat:$!==!0,label:y,unelevated:$,color:$===!0?ae.value:null,textColor:$===!0?le.value:null,tabindex:s.value,disable:n(m+1),...g("month#"+m,{onClick:()=>{te(m+1)}})})])});return e.yearsInMonthView===!0&&a.unshift(h("div",{class:"row no-wrap full-width"},[ft({label:r.value.year,type:"Years",key:r.value.year,dir:k.value,goTo:q,boundaries:Le.value.year,cls:" col"})])),h("div",{key:"months-view",class:"q-date__view q-date__months flex flex-center"},a)},Years(){const t=S.value,n=t+Se,a=[],y=m=>Z.value!==null&&Z.value.year>m||R.value!==null&&R.value.year<m;for(let m=t;m<=n;m++){const $=r.value.year===m;a.push(h("div",{class:"q-date__years-item flex flex-center"},[h(J,{key:"yr"+m,class:w.value.year===m?"q-date__today":null,flat:!$,label:m,dense:!0,unelevated:$,color:$===!0?ae.value:null,textColor:$===!0?le.value:null,tabindex:s.value,disable:y(m),...g("yr#"+m,{onClick:()=>{P(m)}})})]))}return h("div",{class:"q-date__view q-date__years flex flex-center"},[h("div",{class:"col-auto"},[h(J,{round:!0,dense:!0,flat:!0,icon:Ve.value[0],tabindex:s.value,disable:y(t),...g("y-",{onClick:()=>{S.value-=Se}})})]),h("div",{class:"q-date__years-content col self-stretch row items-center"},a),h("div",{class:"col-auto"},[h(J,{round:!0,dense:!0,flat:!0,icon:Ve.value[1],tabindex:s.value,disable:y(n),...g("y+",{onClick:()=>{S.value+=Se}})})])])}};function cn(t){const n={...r.value,day:t};if(e.range===!1){H(n,G.value);return}if(F.value===null){const a=xe.value.find(m=>m.fill!==!0&&m.i===t);if(e.noUnset!==!0&&a.range!==void 0){vt({target:n,from:a.range.from,to:a.range.to});return}if(a.selected===!0){vt(n);return}const y=fe(n);F.value={init:n,initHash:y,final:n,finalHash:y},c("rangeStart",B(n))}else{const a=F.value.initHash,y=fe(n),m=a<=y?{from:F.value.init,to:n}:{from:n,to:F.value.init};F.value=null,ct(a===y?n:{target:n,...m}),c("rangeEnd",{from:B(m.from),to:B(m.to)})}}function vn(t){if(F.value!==null){const n={...r.value,day:t};Object.assign(F.value,{final:n,finalHash:fe(n)})}}return Object.assign(i,{setToday:tt,setView:nt,offsetCalendar:at,setCalendarTo:ve,setEditingRange:Ze}),()=>{const t=[h("div",{class:"q-date__content col relative-position"},[h(Ne,{name:"q-transition--fade"},dn[A.value])])],n=Rt(l.default);return n!==void 0&&t.push(h("div",{class:"q-date__actions"},n)),e.name!==void 0&&e.disable!==!0&&L(t,"push"),h("div",{class:se.value,...Ie.value},[sn(),h("div",{ref:K,class:"q-date__main col column",tabindex:-1},t)])}}}),Et=wt({name:"QPopupProxy",props:{...Cn,breakpoint:{type:[String,Number],default:450}},emits:["show","hide"],setup(e,{slots:l,emit:c,attrs:i}){const{proxy:f}=kt(),{$q:u}=f,g=U(!1),s=U(null),d=b(()=>parseInt(e.breakpoint,10)),{canShow:I}=Yn({showing:g});function _(){return u.screen.width<d.value||u.screen.height<d.value?"dialog":"menu"}const D=U(_()),z=b(()=>D.value==="menu"?{maxHeight:"99vh"}:{});Me(()=>_(),T=>{g.value!==!0&&(D.value=T)});function L(T){g.value=!0,c("show",T)}function K(T){g.value=!1,D.value=_(),c("hide",T)}return Object.assign(f,{show(T){I(T)===!0&&s.value.show(T)},hide(T){s.value.hide(T)},toggle(T){s.value.toggle(T)}}),yn(f,"currentComponent",()=>({type:D.value,ref:s.value})),()=>{const T={ref:s,...z.value,...i,onShow:L,onHide:K};let O;return D.value==="dialog"?O=_n:(O=Sn,Object.assign(T,{target:e.target,contextMenu:e.contextMenu,noParentEvent:!0,separateClosePopup:!0})),h(O,T,l.default)}}});function ra(e,l){if(e.hour!==null){if(e.minute===null)return"minute";if(l===!0&&e.second===null)return"second"}return"hour"}function ia(){const e=new Date;return{hour:e.getHours(),minute:e.getMinutes(),second:e.getSeconds(),millisecond:e.getMilliseconds()}}var sa=wt({name:"QTime",props:{...Zt,...Lt,...en,mask:{default:null},format24h:{type:Boolean,default:null},defaultDate:{type:String,validator:e=>/^-?[\d]+\/[0-1]\d\/[0-3]\d$/.test(e)},options:Function,hourOptions:Array,minuteOptions:Array,secondOptions:Array,withSeconds:Boolean,nowBtn:Boolean},emits:tn,setup(e,{slots:l,emit:c}){const i=kt(),{$q:f}=i.proxy,u=zt(e,f),{tabindex:g,headerClass:s,getLocale:d,getCurrentDate:I}=nn(e,f),_=Kt(e),D=Xt(_);let z,L;const K=U(null),T=b(()=>We()),O=b(()=>d()),De=b(()=>Ve()),he=Re(e.modelValue,T.value,O.value,e.calendar,De.value),w=U(ra(he)),r=U(he),A=U(he.hour===null||he.hour<12),qe=b(()=>`q-time q-time--${e.landscape===!0?"landscape":"portrait"}`+(u.value===!0?" q-time--dark q-dark":"")+(e.disable===!0?" disabled":e.readonly===!0?" q-time--readonly":"")+(e.bordered===!0?" q-time--bordered":"")+(e.square===!0?" q-time--square no-border-radius":"")+(e.flat===!0?" q-time--flat no-shadow":"")),ie=b(()=>{const o=r.value;return{hour:o.hour===null?"--":k.value===!0?V(o.hour):String(A.value===!0?o.hour===0?12:o.hour:o.hour>12?o.hour-12:o.hour),minute:o.minute===null?"--":V(o.minute),second:o.second===null?"--":V(o.second)}}),k=b(()=>e.format24h!==null?e.format24h:f.lang.date.format24h),x=b(()=>{const o=w.value==="hour",v=o===!0?12:60,p=r.value[w.value];let P=`rotate(${Math.round(p*(360/v))-180}deg) translateX(-50%)`;return o===!0&&k.value===!0&&r.value.hour>=12&&(P+=" scale(.7)"),{transform:P}}),S=b(()=>r.value.hour!==null),F=b(()=>S.value===!0&&r.value.minute!==null),se=b(()=>e.hourOptions!==void 0?o=>e.hourOptions.includes(o):e.options!==void 0?o=>e.options(o,null,null):null),ae=b(()=>e.minuteOptions!==void 0?o=>e.minuteOptions.includes(o):e.options!==void 0?o=>e.options(r.value.hour,o,null):null),le=b(()=>e.secondOptions!==void 0?o=>e.secondOptions.includes(o):e.options!==void 0?o=>e.options(r.value.hour,r.value.minute,o):null),W=b(()=>{if(se.value===null)return null;const o=we(0,11,se.value),v=we(12,11,se.value);return{am:o,pm:v,values:o.values.concat(v.values)}}),ce=b(()=>ae.value!==null?we(0,59,ae.value):null),X=b(()=>le.value!==null?we(0,59,le.value):null),oe=b(()=>{switch(w.value){case"hour":return W.value;case"minute":return ce.value;case"second":return X.value}}),He=b(()=>{let o,v,p=0,q=1;const P=oe.value!==null?oe.value.values:void 0;w.value==="hour"?k.value===!0?(o=0,v=23):(o=0,v=11,A.value===!1&&(p=12)):(o=0,v=55,q=5);const te=[];for(let H=o,B=o;H<=v;H+=q,B++){const ee=H+p,ot=P!==void 0&&P.includes(ee)===!1,Te=w.value==="hour"&&H===0?k.value===!0?"00":"12":H;te.push({val:ee,index:B,disable:ot,label:Te})}return te}),Ue=b(()=>[[qn,de,void 0,{stop:!0,prevent:!0,mouse:!0}]]);Me(()=>e.modelValue,o=>{const v=Re(o,T.value,O.value,e.calendar,De.value);(v.dateHash!==r.value.dateHash||v.timeHash!==r.value.timeHash)&&(r.value=v,v.hour===null?w.value="hour":A.value=v.hour<12)}),Me([T,O],()=>{_t(()=>{Ze()})});function ge(){const o={...I(),...ia()};Ze(o),Object.assign(r.value,o),w.value="hour"}function we(o,v,p){const q=Array.apply(null,{length:v+1}).map((P,te)=>{const H=te+o;return{index:H,val:p(H)===!0}}).filter(P=>P.val===!0).map(P=>P.index);return{min:q[0],max:q[q.length-1],values:q,threshold:v+1}}function Je(o,v,p){const q=Math.abs(o-v);return Math.min(q,p-q)}function Be(o,{min:v,max:p,values:q,threshold:P}){if(o===v)return v;if(o<v||o>p)return Je(o,v,P)<=Je(o,p,P)?v:p;const te=q.findIndex(ee=>o<=ee),H=q[te-1],B=q[te];return o-H<=B-o?H:B}function We(){return e.calendar!=="persian"&&e.mask!==null?e.mask:`HH:mm${e.withSeconds===!0?":ss":""}`}function Ve(){if(typeof e.defaultDate!="string"){const o=I(!0);return o.dateHash=fe(o),o}return Re(e.defaultDate,"YYYY/MM/DD",void 0,e.calendar)}function Ae(){return bn(i)===!0||oe.value!==null&&(oe.value.values.length===0||w.value==="hour"&&k.value!==!0&&W.value[A.value===!0?"am":"pm"].values.length===0)}function Qe(){const o=K.value,{top:v,left:p,width:q}=o.getBoundingClientRect(),P=q/2;return{top:v+P,left:p+P,dist:P*.7}}function de(o){if(Ae()!==!0){if(o.isFirst===!0){z=Qe(),L=Z(o.evt,z);return}L=Z(o.evt,z,L),o.isFinal===!0&&(z=!1,L=null,Ge())}}function Ge(){w.value==="hour"?w.value="minute":e.withSeconds&&w.value==="minute"&&(w.value="second")}function Z(o,v,p){const q=Mn(o),P=Math.abs(q.top-v.top),te=Math.sqrt(Math.pow(Math.abs(q.top-v.top),2)+Math.pow(Math.abs(q.left-v.left),2));let H,B=Math.asin(P/te)*(180/Math.PI);if(q.top<v.top?B=v.left<q.left?90-B:270+B:B=v.left<q.left?B+90:270-B,w.value==="hour"){if(H=B/30,W.value!==null){const ee=k.value!==!0?A.value===!0:W.value.am.values.length!==0&&W.value.pm.values.length!==0?te>=v.dist:W.value.am.values.length!==0;H=Be(H+(ee===!0?0:12),W.value[ee===!0?"am":"pm"])}else H=Math.round(H),k.value===!0?te<v.dist?H<12&&(H+=12):H===12&&(H=0):A.value===!0&&H===12?H=0:A.value===!1&&H!==12&&(H+=12);k.value===!0&&(A.value=H<12)}else H=Math.round(B/6)%60,w.value==="minute"&&ce.value!==null?H=Be(H,ce.value):w.value==="second"&&X.value!==null&&(H=Be(H,X.value));return p!==H&&tt[w.value](H),H}const R={hour(){w.value="hour"},minute(){w.value="minute"},second(){w.value="second"}};function Le(o){o.keyCode===13&&nt()}function Oe(o){o.keyCode===13&&at()}function et(o){Ae()!==!0&&(f.platform.is.desktop!==!0&&Z(o,Qe()),Ge())}function ke(o){Ae()!==!0&&Z(o,Qe())}function G(o){if(o.keyCode===13)w.value="hour";else if([37,39].includes(o.keyCode)){const v=o.keyCode===37?-1:1;if(W.value!==null){const p=k.value===!0?W.value.values:W.value[A.value===!0?"am":"pm"].values;if(p.length===0)return;if(r.value.hour===null)$e(p[0]);else{const q=(p.length+p.indexOf(r.value.hour)+v)%p.length;$e(p[q])}}else{const p=k.value===!0?24:12,q=k.value!==!0&&A.value===!1?12:0,P=r.value.hour===null?-v:r.value.hour;$e(q+(24+P+v)%p)}}}function st(o){if(o.keyCode===13)w.value="minute";else if([37,39].includes(o.keyCode)){const v=o.keyCode===37?-1:1;if(ce.value!==null){const p=ce.value.values;if(p.length===0)return;if(r.value.minute===null)xe(p[0]);else{const q=(p.length+p.indexOf(r.value.minute)+v)%p.length;xe(p[q])}}else{const p=r.value.minute===null?-v:r.value.minute;xe((60+p+v)%60)}}}function dt(o){if(o.keyCode===13)w.value="second";else if([37,39].includes(o.keyCode)){const v=o.keyCode===37?-1:1;if(X.value!==null){const p=X.value.values;if(p.length===0)return;if(r.value.seconds===null)Ie(p[0]);else{const q=(p.length+p.indexOf(r.value.second)+v)%p.length;Ie(p[q])}}else{const p=r.value.second===null?-v:r.value.second;Ie((60+p+v)%60)}}}function $e(o){r.value.hour!==o&&(r.value.hour=o,ve())}function xe(o){r.value.minute!==o&&(r.value.minute=o,ve())}function Ie(o){r.value.second!==o&&(r.value.second=o,ve())}const tt={hour:$e,minute:xe,second:Ie};function nt(){A.value===!1&&(A.value=!0,r.value.hour!==null&&(r.value.hour-=12,ve()))}function at(){A.value===!0&&(A.value=!1,r.value.hour!==null&&(r.value.hour+=12,ve()))}function ve(){if(se.value!==null&&se.value(r.value.hour)!==!0){r.value=Re(),w.value="hour";return}if(ae.value!==null&&ae.value(r.value.minute)!==!0){r.value.minute=null,r.value.second=null,w.value="minute";return}if(e.withSeconds===!0&&le.value!==null&&le.value(r.value.second)!==!0){r.value.second=null,w.value="second";return}r.value.hour===null||r.value.minute===null||e.withSeconds===!0&&r.value.second===null||Ze()}function Ze(o){const v=Object.assign({...r.value},o),p=e.calendar==="persian"?V(v.hour)+":"+V(v.minute)+(e.withSeconds===!0?":"+V(v.second):""):rn(new Date(v.year,v.month===null?null:v.month-1,v.day,v.hour,v.minute,v.second,v.millisecond),T.value,O.value,v.year,v.timezoneOffset);v.changed=p!==e.modelValue,c("update:modelValue",p,v)}function lt(){const o=[h("div",{class:"q-time__link "+(w.value==="hour"?"q-time__link--active":"cursor-pointer"),tabindex:g.value,onClick:R.hour,onKeyup:G},ie.value.hour),h("div",":"),h("div",S.value===!0?{class:"q-time__link "+(w.value==="minute"?"q-time__link--active":"cursor-pointer"),tabindex:g.value,onKeyup:st,onClick:R.minute}:{class:"q-time__link"},ie.value.minute)];e.withSeconds===!0&&o.push(h("div",":"),h("div",F.value===!0?{class:"q-time__link "+(w.value==="second"?"q-time__link--active":"cursor-pointer"),tabindex:g.value,onKeyup:dt,onClick:R.second}:{class:"q-time__link"},ie.value.second));const v=[h("div",{class:"q-time__header-label row items-center no-wrap",dir:"ltr"},o)];return k.value===!1&&v.push(h("div",{class:"q-time__header-ampm column items-between no-wrap"},[h("div",{class:"q-time__link "+(A.value===!0?"q-time__link--active":"cursor-pointer"),tabindex:g.value,onClick:nt,onKeyup:Le},"AM"),h("div",{class:"q-time__link "+(A.value!==!0?"q-time__link--active":"cursor-pointer"),tabindex:g.value,onClick:at,onKeyup:Oe},"PM")])),h("div",{class:"q-time__header flex flex-center no-wrap "+s.value},v)}function ze(){const o=r.value[w.value];return h("div",{class:"q-time__content col relative-position"},[h(Ne,{name:"q-transition--scale"},()=>h("div",{key:"clock"+w.value,class:"q-time__container-parent absolute-full"},[h("div",{ref:K,class:"q-time__container-child fit overflow-hidden"},[Mt(h("div",{class:"q-time__clock cursor-pointer non-selectable",onClick:et,onMousedown:ke},[h("div",{class:"q-time__clock-circle fit"},[h("div",{class:"q-time__clock-pointer"+(r.value[w.value]===null?" hidden":e.color!==void 0?` text-${e.color}`:""),style:x.value}),He.value.map(v=>h("div",{class:`q-time__clock-position row flex-center q-time__clock-pos-${v.index}`+(v.val===o?" q-time__clock-position--active "+s.value:v.disable===!0?" q-time__clock-position--disable":"")},[h("span",v.label)]))])]),Ue.value)])])),e.nowBtn===!0?h(J,{class:"q-time__now-button absolute",icon:f.iconSet.datetime.now,unelevated:!0,size:"sm",round:!0,color:e.color,textColor:e.textColor,tabindex:g.value,onClick:ge}):null])}return i.proxy.setNow=ge,()=>{const o=[ze()],v=Rt(l.default);return v!==void 0&&o.push(h("div",{class:"q-time__actions"},v)),e.name!==void 0&&e.disable!==!0&&D(o,"push"),h("div",{class:qe.value,tabindex:-1},[lt(),h("div",{class:"q-time__main col overflow-auto"},o)])}}});const da={class:"q-pa-md",style:{"max-width":"300px",padding:"0"}},ca={class:"row items-center justify-end"},va={class:"row items-center justify-end"},fa={__name:"DateTime",props:{evDateTime:U("2019-02-01 12:44")},emits:["update:date"],setup(e,{emit:l}){const c=e,i=Ce("Announce");return U(c.evDateTime),(f,u)=>(ue(),Pe("div",da,[Q(Ee,{filled:"",modelValue:j(i).datetime,"onUpdate:modelValue":[u[2]||(u[2]=g=>j(i).datetime=g),u[3]||(u[3]=g=>l("update:date"))]},{prepend:ye(()=>[Q(qt,{name:"event",class:"cursor-pointer"},{default:ye(()=>[Q(Et,{cover:"","transition-show":"scale","transition-hide":"scale"},{default:ye(()=>[Q(ua,{modelValue:j(i).datetime,"onUpdate:modelValue":u[0]||(u[0]=g=>j(i).datetime=g),mask:"YYYY-MM-DD HH:mm"},{default:ye(()=>[Y("div",ca,[Mt(Q(J,{label:"\u0417\u0430\u043A\u0440\u044B\u0442\u044C",color:"primary",flat:""},null,512),[[At]])])]),_:1},8,["modelValue"])]),_:1})]),_:1})]),append:ye(()=>[Q(qt,{name:"access_time",class:"cursor-pointer"},{default:ye(()=>[Q(Et,{cover:"","transition-show":"scale","transition-hide":"scale"},{default:ye(()=>[Q(sa,{modelValue:j(i).datetime,"onUpdate:modelValue":u[1]||(u[1]=g=>j(i).datetime=g),mask:"YYYY-MM-DD HH:mm",format24h:""},{default:ye(()=>[Y("div",va,[Mt(Q(J,{label:"\u0417\u0430\u043A\u0440\u044B\u0442\u044C",color:"primary",flat:""},null,512),[[At]])])]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]))}};const pe=e=>(Ut("data-v-cab51470"),e=e(),Bt(),e),ma={key:0,class:"eventsarea"},ha={class:"editArea"},ga={class:"card"},ya={class:"editor"},_a={style:{display:"flex","justify-content":"space-between"}},Ma=pe(()=>Y("br",null,null,-1)),ba={class:"uploads"},pa={style:{display:"flex","justify-content":"space-between","flex-wrap":"wrap"}},Da=pe(()=>Y("br",null,null,-1)),wa=pe(()=>Y("br",null,null,-1)),ka=pe(()=>Y("br",null,null,-1)),xa=pe(()=>Y("br",null,null,-1)),Sa={class:"btns"},Ca=pe(()=>Y("br",null,null,-1)),Ya=pe(()=>Y("hr",null,null,-1)),qa=pe(()=>Y("br",null,null,-1)),Ha={__name:"AnnounceEditor",emits:["reload","posterUploaded"],setup(e,{emit:l}){const c=String("https://api.sakh-orch.ru/"),i=pt();Ce("lvl"),Jt();const f=pn();Ce("editMode");const u=Ce("Halls"),g={},s=Ce("AccessToken"),d=Ce("Announce");function I(){}const _=[{label:"\u0412\u0445\u043E\u0434 \u0441\u0432\u043E\u0431\u043E\u0434\u043D\u044B\u0439",value:2},{label:"\u0411\u0438\u043B\u0435\u0442\u044B \u0432 \u043F\u0440\u043E\u0434\u0430\u0436\u0435",value:3},{label:"\u0412\u0445\u043E\u0434 \u043F\u043E \u043F\u0440\u0438\u0433\u043B\u0430\u0441\u0438\u0442\u0435\u043B\u044C\u043D\u044B\u043C",value:4},{label:"\u041F\u0440\u043E\u0434\u0430\u0436\u0430 \u0437\u0430\u0432\u0435\u0440\u0448\u0435\u043D\u0430",value:5}],D=U(null),z=U(null),L=U(null);function K(k){return{url:c+"api/event/poster/add.php",headers:[{name:"ACCESSTOKEN",value:s.value}],formFields:[{name:"id",value:d.value.id}]}}function T(k){return{url:c+"api/event/sketch/add.php",headers:[{name:"ACCESSTOKEN",value:s.value}],formFields:[{name:"id",value:d.value.id}]}}function O(k){i.notify(mt("\u0417\u0430\u0433\u0440\u0443\u0436\u0435\u043D\u043E")),l("posterUploaded")}function De(k){var S,F,se;let x=(se=(F=JSON.parse((S=k==null?void 0:k.xhr)==null?void 0:S.response))==null?void 0:F.error)!=null?se:"";i.notify(rt(null,x))}function he(){L.value.saveData()}function w(){f.push({path:"/announces"})}function r(){l("reload")}function A(){yt.post(c+"api/event/poster/del.php",{params:{id:d.value.id}}).then(k=>{var x,S,F;if(!((x=k==null?void 0:k.data)!=null&&x.result))throw new Error;l("posterUploaded"),i.notify(mt((F=(S=k==null?void 0:k.data)==null?void 0:S.result)!=null?F:""))}).catch(k=>{i.notify(rt(k))})}function qe(){yt.post(c+"api/event/sketch/del.php",{params:{id:d.value.id}}).then(k=>{var x,S,F;if(!((x=k==null?void 0:k.data)!=null&&x.result))throw new Error;l("posterUploaded"),i.notify(mt((F=(S=k==null?void 0:k.data)==null?void 0:S.result)!=null?F:""))}).catch(k=>{i.notify(rt(k))})}function ie(){d.value.hallId=d.value.Hall.id}return(k,x)=>(ue(),Pe(Pt,null,[j(d)?(ue(),Pe("div",ma,[Y("div",ha,[Y("div",ga,[j(d).Hall.map?(ue(),Xe(Hn,{key:0,onIamDeleted:w,onNewAnnounce:r,ref_key:"rAnnounceCard",ref:L,Announce:j(d)},null,8,["Announce"])):Ye("",!0)]),Y("div",ya,[Y("div",_a,[Q(fa,{date:j(d).datetime,"onUpdate:date":[x[0]||(x[0]=S=>j(d).datetime=S),x[1]||(x[1]=S=>void 0)]},null,8,["date"])]),Ma,Y("div",ba,[Y("div",null,[Q(Ht,{modelValue:g,"onUpdate:modelValue":x[2]||(x[2]=S=>g=S),style:{"max-width":"300px"},label:"\u0417\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044C \u044D\u0441\u043A\u0438\u0437 1080:684",factory:T,ref_key:"uploader",ref:D,onUploaded:O,onFailed:De},null,512)]),Y("div",null,[Q(Ht,{modelValue:g,"onUpdate:modelValue":x[3]||(x[3]=S=>g=S),style:{"max-width":"300px"},label:"\u0417\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044C \u0430\u0444\u0438\u0448\u0443",factory:K,ref_key:"uploader2",ref:z,onUploaded:O,onFailed:De},null,512)])]),Y("div",pa,[Q(J,{label:"\u0423\u0434\u0430\u043B\u0438\u0442\u044C \u044D\u0441\u043A\u0438\u0437",icon:"delete",onClick:x[4]||(x[4]=S=>qe())}),Q(J,{label:"\u0423\u0434\u0430\u043B\u0438\u0442\u044C \u0430\u0444\u0438\u0448\u0443",icon:"delete",onClick:x[5]||(x[5]=S=>A())})]),Q(Ee,{name:"progName",modelValue:j(d).progName,"onUpdate:modelValue":x[6]||(x[6]=S=>j(d).progName=S),label:"\u041D\u0430\u0437\u0432\u0430\u043D\u0438\u0435"},null,8,["modelValue"]),Q(Vt,{modelValue:j(d).Hall,"onUpdate:modelValue":[x[7]||(x[7]=S=>j(d).Hall=S),x[8]||(x[8]=S=>ie())],label:"\u041C\u0435\u0441\u0442\u043E \u043F\u0440\u043E\u0432\u0435\u0434\u0435\u043D\u0438\u044F","map-options":"","option-label":"name","option-value":"id",options:j(u)},null,8,["modelValue","options"]),Q(Vt,{modelValue:j(d).pay,"onUpdate:modelValue":x[9]||(x[9]=S=>j(d).pay=S),"emit-value":"","map-options":"",label:"\u0423\u0441\u043B\u043E\u0432\u0438\u044F \u0432\u0445\u043E\u0434\u0430",options:_},null,8,["modelValue"]),Da,j(d).pay==3?(ue(),Xe(Ee,{key:0,type:"text",modelValue:j(d).ticketLink,"onUpdate:modelValue":x[10]||(x[10]=S=>j(d).ticketLink=S),label:"\u0421\u0441\u044B\u043B\u043A\u0430 \u043D\u0430 \u043F\u0440\u043E\u0434\u0430\u0436\u0443 \u0431\u0438\u043B\u0435\u0442\u043E\u0432"},null,8,["modelValue"])):Ye("",!0),wa,Q(Ee,{type:"number",modelValue:j(d).age,"onUpdate:modelValue":x[11]||(x[11]=S=>j(d).age=S),label:"\u0412\u043E\u0437\u0440\u0430\u0441\u0442\u043D\u044B\u0435 \u043E\u0433\u0440\u0430\u043D\u0438\u0447\u0435\u043D\u0438\u044F"},null,8,["modelValue"]),ka,Q(Ee,{name:"evDescr",modelValue:j(d).sdescr,"onUpdate:modelValue":x[12]||(x[12]=S=>j(d).sdescr=S),type:"textarea",label:"\u041A\u0440\u0430\u0442\u043A\u043E\u0435 \u043E\u043F\u0438\u0441\u0430\u043D\u0438\u0435"},null,8,["modelValue"]),xa,Q(Ee,{name:"evText",modelValue:j(d).description,"onUpdate:modelValue":x[13]||(x[13]=S=>j(d).description=S),type:"textarea",label:"\u041E\u043F\u0438\u0441\u0430\u043D\u0438\u0435"},null,8,["modelValue"])])]),Y("div",Sa,[Q(J,{label:"\u0421\u043E\u0445\u0440\u0430\u043D\u0438\u0442\u044C",onClick:he})])])):Ye("",!0),Ca,Ya,qa],64))}};var Va=Dt(Ha,[["__scopeId","data-v-cab51470"]]);const Aa={class:"content"},Oa={class:"eventboxl"},$a={__name:"AnnouncePage",setup(e){fn({title:"\u0410\u043D\u043E\u043D\u0441"});const c=pt(),i=Ce("editMode"),f=String("https://api.sakh-orch.ru/"),u=Jt(),g=U(null);Dn("Announce",g);function s(){yt.post(f+"api/event/announce.php",{params:{method:"get",id:u.params.evid}}).then(d=>{var I,_;g.value=(_=(I=d==null?void 0:d.data)==null?void 0:I.data)!=null?_:null}).catch(d=>{c.notify(rt(d))})}return wn(()=>{s()}),(d,I)=>(ue(),Pe("div",Aa,[j(i)&&g.value?(ue(),Xe(Va,{key:0,onPosterUploaded:s,onReload:s})):Ye("",!0),Y("div",Oa,[g.value?(ue(),Xe(Kn,{key:0,Announce:g.value},null,8,["Announce"])):Ye("",!0)])]))}};var el=Dt($a,[["__scopeId","data-v-368eb23d"]]);export{el as default};
