import{a as K,b as w,Q as s}from"./QImg.d3ea3630.js";import{V as Y,c as q,h as Z,ac as uu,r as E,m as l,n as c,z as eu,d as nu,i as au,o as tu,J as ou,u as C,p as e,v as lu,l as r,f as u,ax as v,q as d,t as S,ak as $,y as A,x as m,C as y,B as F,F as B,ay as ru,al as L}from"./index.1ed4f0d9.js";import{Q as D}from"./QItemLabel.91ec210f.js";import{Q as iu}from"./QTooltip.4f8868a4.js";import{u as H,b as su,c as du,e as V,i as cu}from"./myFuncts.57fb681f.js";import{_ as fu}from"./BtnDelete.3fcc8c4a.js";import{b as mu}from"./axios.58dd5c85.js";import{m as M,S as gu}from"./announce.75f4185e.js";import{H as pu}from"./hall.dc91fb49.js";import{_ as ku}from"./plugin-vue_export-helper.21dcd24c.js";const vu=["top","middle","bottom"];var x=Y({name:"QBadge",props:{color:String,textColor:String,floating:Boolean,transparent:Boolean,multiLine:Boolean,outline:Boolean,rounded:Boolean,label:[Number,String],align:{type:String,validator:a=>vu.includes(a)}},setup(a,{slots:h}){const _=q(()=>a.align!==void 0?{verticalAlign:a.align}:null),b=q(()=>{const i=a.outline===!0&&a.color||a.textColor;return`q-badge flex inline items-center no-wrap q-badge--${a.multiLine===!0?"multi":"single"}-line`+(a.outline===!0?" q-badge--outline":a.color!==void 0?` bg-${a.color}`:"")+(i!==void 0?` text-${i}`:"")+(a.floating===!0?" q-badge--floating":"")+(a.rounded===!0?" q-badge--rounded":"")+(a.transparent===!0?" q-badge--transparent":"")});return()=>Z("div",{class:b.value,style:_.value,role:"status","aria-label":a.label},uu(h.default,a.label!==void 0?[a.label]:[]))}});const yu={__name:"DialogConfirm",props:{color:E({}),label:E({}),message:E({}),title:E({})},emits:["onOk","Cancel","Dismiss"],setup(a,{emit:h}){const _=H(),b=h;function i(T,g){_.dialog({title:g,message:T,cancel:!0,persistent:!0,html:!0,dark:!0}).onOk(()=>{}).onOk(()=>{b("onOk")}).onCancel(()=>{b("Cancel")}).onDismiss(()=>{b("Dismiss")})}return(T,g)=>(l(),c(eu,{label:a.label,color:a.color,onClick:g[0]||(g[0]=Q=>i(a.message,a.title))},null,8,["label","color"]))}};const Bu={class:"delBtnArea"},bu={class:"mapLink"},Eu=["innerHTML"],Cu=["innerHTML"],Du=nu({__name:"AnnounceCard",props:{announce:{},pwUrl:{},compact:{type:Boolean}},emits:["newAnnounce","IamDeleted","changeShow","delSketch"],setup(a,{expose:h,emit:_}){const b=String("https://sakh-orch.ru/api/"),i=H(),g=au("editModes").announce,Q=_,I=E(null),O=q(()=>pu.findById(o.announce.hallId));function N(){return`https://radario.ru/buy-tickets/${o.announce.radarioEventId}`}h({saveData:j});const z=E(["","","\u0412\u0445\u043E\u0434 \u0441\u0432\u043E\u0431\u043E\u0434\u043D\u044B\u0439","\u0411\u0438\u043B\u0435\u0442\u044B \u0432 \u043F\u0440\u043E\u0434\u0430\u0436\u0435","\u0412\u0445\u043E\u0434 \u043F\u043E \u043F\u0440\u0438\u0433\u043B\u0430\u0441\u0438\u0442\u0435\u043B\u044C\u043D\u044B\u043C","\u041F\u0440\u043E\u0434\u0430\u0436\u0430 \u0437\u0430\u0432\u0435\u0440\u0448\u0435\u043D\u0430"]),o=a,p=E(o.announce);function R(){if(o.pwUrl)return o.pwUrl;let t=i.platform.is.mobile?1080:480;return o.announce.sketch?cu(b,o.announce.sketch.md5,o.announce.sketch.ext,t):"/img/news/default_sketch.svg"}function j(){M.save(i,o.announce)}async function G(){await M.del(i,o.announce.id)&&Q("IamDeleted")}async function J(){await M.hideOrShow(i,p.value.id,p.value.isShow)?Q("changeShow",p.value.id):p.value.isShow=!p.value.isShow}function P(){return o.announce.pay?o.announce.pay===3&&o.announce.completed?"\u041F\u0440\u043E\u0434\u0430\u0436\u0430 \u0437\u0430\u0432\u0435\u0440\u0448\u0435\u043D\u0430":z.value[o.announce.pay]:""}async function W(){await gu.del(i,o.announce.id)&&Q("delSketch",o.announce.id)}function X(){var n;if(!((n=o.announce)!=null&&n.radarioEventId)||o.announce.completed)return;mu.create().get(N(),{params:{distributionType:"api",skipEventsInGroup:!0}}).then(k=>{var f;(f=k==null?void 0:k.data)!=null&&f.result,console.log("radario loaded"),I.value=k.data.event.ticketCount}).catch(k=>{i.notify(su(k,"\u041A\u043E\u043B\u0438\u0447\u0435\u0441\u0442\u0432\u043E \u043E\u0441\u0442\u0430\u0432\u0448\u0438\u0445\u0441\u044F \u0431\u0438\u043B\u0435\u0442\u043E\u0432 \u043D\u0435 \u0437\u0430\u0433\u0440\u0443\u0437\u0438\u043B\u043E\u0441\u044C."))})}return tu(()=>{o.announce.completed===!1&&X()}),(t,n)=>{const k=ou("router-link");return t.announce&&(t.announce.isShow||C(g))?(l(),c(lu,{key:0,square:"",class:"eventbox tdno",separator:""},{default:e(()=>[u(k,{to:"/announce/"+t.announce.id},{default:e(()=>[v("div",Bu,[C(g)&&!t.pwUrl?(l(),c(fu,{key:0,title:"\u0423\u0434\u0430\u043B\u0438\u0442\u044C \u044D\u0441\u043A\u0438\u0437",tooltip:"\u0423\u0434\u0430\u043B\u0438\u0442\u044C \u044D\u0441\u043A\u0438\u0437","throw-confirm":"",danger:"",onOnOk:n[0]||(n[0]=f=>W())})):r("",!0)]),u(K,{ratio:16/9,src:R(),fit:"fill"},{error:e(()=>n[3]||(n[3]=[v("img",{src:"/img/news/default_sketch.svg",alt:"sketch"},null,-1)])),_:1},8,["src"])]),_:1},8,["to"]),u(m,{color:"info","expand-separator":""},{default:e(()=>[t.announce.completed===!1?(l(),c(x,{key:0,class:"absolute bage",color:"green-6",rounded:"",transparent:""},{default:e(()=>n[4]||(n[4]=[d(" \u0421\u043A\u043E\u0440\u043E ")])),_:1})):r("",!0),t.announce.age?(l(),c(x,{key:1,rounded:"",style:{"background-color":"orange"},floating:""},{default:e(()=>[d(S(t.announce.age+"+"),1)]),_:1})):r("",!0),$((l(),c(w,{dense:""},{default:e(()=>[u(s,{avatar:""},{default:e(()=>[u(A,{name:"schedule"})]),_:1}),u(s,null,{default:e(()=>[u(D,{caption:""},{default:e(()=>[d(S(C(du)(p.value.eventTime)),1)]),_:1})]),_:1})]),_:1})),[[L]]),$((l(),c(w,{clickable:"",href:O.value.getMapHref(),target:"_blank",dense:""},{default:e(()=>[u(s,{avatar:""},{default:e(()=>[u(A,{name:"place"})]),_:1}),u(s,null,{default:e(()=>[u(D,{caption:""},{default:e(()=>[v("span",bu,S(O.value.name),1)]),_:1})]),_:1})]),_:1},8,["href"])),[[L]])]),_:1}),t.compact?r("",!0):(l(),y(B,{key:0},[u(F,{inset:""}),u(m,null,{default:e(()=>[v("div",{class:"text-subtitle1 text-center prog-name",innerHTML:t.announce.progName},null,8,Eu)]),_:1}),u(m,{class:"text-body2 text-center"},{default:e(()=>[v("div",{innerHTML:t.announce.sdescr},null,8,Cu)]),_:1}),u(m,{class:"space"},{default:e(()=>n[5]||(n[5]=[v("div",null,null,-1)])),_:1}),u(F,{inset:""}),t.announce.youtubeId?(l(),c(m,{key:0},{default:e(()=>[$((l(),c(w,{clickable:"",href:"https://www.youtube.com/watch?v="+t.announce.youtubeId,target:"_blank"},{default:e(()=>[u(s,{avatar:""},{default:e(()=>[u(A,{name:"ion-logo-youtube"})]),_:1}),u(s,null,{default:e(()=>[u(D,{caption:""},{default:e(()=>n[6]||(n[6]=[v("span",{class:"mapLink"},"\u0421\u043C\u043E\u0442\u0440\u0435\u0442\u044C \u0432\u0438\u0434\u0435\u043E",-1)])),_:1})]),_:1})]),_:1},8,["href"])),[[L]])]),_:1})):r("",!0),t.announce.pay?(l(),y(B,{key:1},[u(F,{inset:""}),u(m,{class:"text-body2 text-center"},{default:e(()=>[[3,4].includes(t.announce.pay)&&!t.announce.completed&&t.announce.ticketLink?(l(),y(B,{key:0},[t.announce.isShowTicketCount&&t.announce.radarioEventId?(l(),y(B,{key:0},[u(w,null,{default:e(()=>[u(s,null,{default:e(()=>{var f,U;return[d(S(`${C(V)((f=I.value)!=null?f:0,["\u041E\u0441\u0442\u0430\u043B\u0441\u044F","\u041E\u0441\u0442\u0430\u043B\u043E\u0441\u044C","\u041E\u0441\u0442\u0430\u043B\u043E\u0441\u044C"])} ${I.value} ${C(V)((U=I.value)!=null?U:0,["\u0431\u0438\u043B\u0435\u0442","\u0431\u0438\u043B\u0435\u0442\u0430","\u0431\u0438\u043B\u0435\u0442\u043E\u0432"])}`),1)]}),_:1})]),_:1}),u(F,{inset:"",spaced:""})],64)):r("",!0),u(w,{clickable:"",href:t.announce.ticketLink,target:"_blank",dense:"",style:{"text-align":"left"}},{default:e(()=>[t.announce.pay===4?(l(),y(B,{key:0},[u(s,{avatar:""},{default:e(()=>[u(A,{name:"img:/img/uds.svg"})]),_:1}),u(s,null,{default:e(()=>[u(D,null,{default:e(()=>n[7]||(n[7]=[d("\u041F\u043E\u043B\u0443\u0447\u0438\u0442\u044C \u043F\u0440\u0438\u0433\u043B\u0430\u0441\u0438\u0442\u0435\u043B\u044C\u043D\u044B\u0439")])),_:1})]),_:1})],64)):r("",!0),t.announce.pay===3?(l(),y(B,{key:1},[u(s,{avatar:""},{default:e(()=>[u(A,{name:"shopping_cart"})]),_:1}),u(s,null,{default:e(()=>[u(D,null,{default:e(()=>n[8]||(n[8]=[d("\u041A\u0443\u043F\u0438\u0442\u044C \u0431\u0438\u043B\u0435\u0442")])),_:1}),t.announce.isPushkin?(l(),c(D,{key:0,caption:""},{default:e(()=>n[9]||(n[9]=[d("+ \u0414\u043E\u0441\u0442\u0443\u043F\u043D\u043E \u043F\u043E \u043F\u0443\u0448\u043A\u0438\u043D\u0441\u043A\u043E\u0439 \u043A\u0430\u0440\u0442\u0435")])),_:1})):r("",!0)]),_:1})],64)):r("",!0)]),_:1},8,["href"])],64)):(l(),y(B,{key:1},[d(S(P()),1)],64))]),_:1})],64)):r("",!0),u(F,{inset:""}),u(m,{class:"text-body2 text-center"},{default:e(()=>n[10]||(n[10]=[d(" X\u0443\u0434\u043E\u0436\u0435\u0441\u0442\u0432\u0435\u043D\u043D\u044B\u0439 \u0440\u0443\u043A\u043E\u0432\u043E\u0434\u0438\u0442\u0435\u043B\u044C \u0438 \u0433\u043B\u0430\u0432\u043D\u044B\u0439 \u0434\u0438\u0440\u0438\u0436\u0435\u0440 - "),v("b",null,"\u0422\u0438\u0433\u0440\u0430\u043D \u0410\u0445\u043D\u0430\u0437\u0430\u0440\u044F\u043D",-1),d(". ")])),_:1}),C(g)?(l(),y(B,{key:2},[u(m,null,{default:e(()=>[u(ru,{modelValue:p.value.isShow,"onUpdate:modelValue":[n[1]||(n[1]=f=>p.value.isShow=f),n[2]||(n[2]=f=>J())],label:"\u0432\u043A\u043B",color:"green","checked-icon":"check","unchecked-icon":"clear"},{default:e(()=>[u(iu,null,{default:e(()=>n[11]||(n[11]=[d("\u041E\u043F\u0443\u0431\u043B\u0438\u043A\u043E\u0432\u0430\u0442\u044C")])),_:1})]),_:1},8,["modelValue"])]),_:1}),u(m,null,{default:e(()=>[u(yu,{onOnOk:G,label:"\u0423\u0434\u0430\u043B\u0438\u0442\u044C",color:"red",title:"\u0423\u0434\u0430\u043B\u0435\u043D\u0438\u0435 \u0430\u043D\u043E\u043D\u0441\u0430",message:`
          \u0411\u0443\u0434\u0435\u0442 \u0443\u0434\u0430\u043B\u0435\u043D\u0430 \u0437\u0430\u043F\u0438\u0441\u044C \u043E\u0431 \u0430\u043D\u043E\u043D\u0441\u0435 \u0438 \u0441\u0432\u044F\u0437\u0430\u043D\u043D\u044B\u0435 \u0441 \u043D\u0435\u0439 \u0438\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u044F.
          <br><span style='color: red'>
          \u042D\u0442\u043E \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0435 \u043D\u0435\u043B\u044C\u0437\u044F \u043E\u0442\u043C\u0435\u043D\u0438\u0442\u044C.</span><br>
          \u0412\u044B \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0442\u0435\u043B\u044C\u043D\u043E \u0445\u043E\u0442\u0438\u0442\u0435 \u044D\u0442\u043E \u0441\u0434\u0435\u043B\u0430\u0442\u044C?`})]),_:1})],64)):r("",!0)],64))]),_:1})):r("",!0)}}});var Lu=ku(Du,[["__scopeId","data-v-ba339826"]]);export{Lu as A};
