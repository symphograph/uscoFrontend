import{a as K,b as Q,Q as r}from"./QImg.c3c20473.js";import{V as Y,c as U,h as Z,ac as ee,r as h,m as o,n as c,A as ne,i as te,o as ae,J as le,v as x,q as t,x as oe,l as u,f as n,ax as v,t as s,u as I,ak as M,z as B,y as f,D as y,C as T,F as b,ay as ue,al as O}from"./index.89609573.js";import{Q as S}from"./QItemLabel.1f0e3975.js";import{Q as ie}from"./QTooltip.31e2ede8.js";import{u as N}from"./use-quasar.06f765f0.js";import{b as re,c as se,e as H,i as ce}from"./myFuncts.2186fc9b.js";import{_ as de}from"./BtnDelete.c36dc1af.js";import{b as fe}from"./axios.e621819c.js";import{m as q}from"./entry.33e05696.js";import{H as me}from"./hall.90e99740.js";import{_ as ge}from"./plugin-vue_export-helper.21dcd24c.js";const ke=["top","middle","bottom"];var E=Y({name:"QBadge",props:{color:String,textColor:String,floating:Boolean,transparent:Boolean,multiLine:Boolean,outline:Boolean,rounded:Boolean,label:[Number,String],align:{type:String,validator:e=>ke.includes(e)}},setup(e,{slots:C}){const p=U(()=>e.align!==void 0?{verticalAlign:e.align}:null),w=U(()=>{const i=e.outline===!0&&e.color||e.textColor;return`q-badge flex inline items-center no-wrap q-badge--${e.multiLine===!0?"multi":"single"}-line`+(e.outline===!0?" q-badge--outline":e.color!==void 0?` bg-${e.color}`:"")+(i!==void 0?` text-${i}`:"")+(e.floating===!0?" q-badge--floating":"")+(e.rounded===!0?" q-badge--rounded":"")+(e.transparent===!0?" q-badge--transparent":"")});return()=>Z("div",{class:w.value,style:p.value,role:"status","aria-label":e.label},ee(C.default,e.label!==void 0?[e.label]:[]))}});const ve={__name:"DialogConfirm",props:{color:h({}),label:h({}),message:h({}),title:h({})},emits:["onOk","Cancel","Dismiss"],setup(e,{emit:C}){const p=N(),w=C;function i(A,m){p.dialog({title:m,message:A,cancel:!0,persistent:!0,html:!0,dark:!0}).onOk(()=>{}).onOk(()=>{w("onOk")}).onCancel(()=>{w("Cancel")}).onDismiss(()=>{w("Dismiss")})}return(A,m)=>(o(),c(ne,{label:e.label,color:e.color,onClick:m[0]||(m[0]=$=>i(e.message,e.title))},null,8,["label","color"]))}};const ye={class:"delBtnArea"},be={class:"mapLink"},he=["innerHTML"],we=["innerHTML"],xe={__name:"AnnounceCard",props:{announce:h(!1),pwUrl:String,compact:{type:Boolean,required:!1,default:!1}},emits:["newAnnounce","IamDeleted","changeShow","delSketch"],setup(e,{expose:C,emit:p}){const w=String("https://sakh-orch.ru/api/"),i=N(),m=te("editModes").announce,$=p,D=h(null),V=U(()=>me.findById(l.announce.hallId));function z(){return`https://radario.ru/buy-tickets/${l.announce.radarioEventId}`}C({saveData:j});const F=h(["","","\u0412\u0445\u043E\u0434 \u0441\u0432\u043E\u0431\u043E\u0434\u043D\u044B\u0439","\u0411\u0438\u043B\u0435\u0442\u044B \u0432 \u043F\u0440\u043E\u0434\u0430\u0436\u0435","\u0412\u0445\u043E\u0434 \u043F\u043E \u043F\u0440\u0438\u0433\u043B\u0430\u0441\u0438\u0442\u0435\u043B\u044C\u043D\u044B\u043C","\u041F\u0440\u043E\u0434\u0430\u0436\u0430 \u0437\u0430\u0432\u0435\u0440\u0448\u0435\u043D\u0430"]),l=e,g=h(l.announce);function R(){if(l.pwUrl)return l.pwUrl;let L=i.platform.is.mobile?1080:480;return l.announce.sketch?ce(w,l.announce.sketch.md5,l.announce.sketch.ext,L):"/img/news/default_sketch.svg"}function j(){q.save(i,l.announce)}async function G(){await q.del(i,l.announce.id)&&$("IamDeleted")}async function J(){await q.hideOrShow(i,g.value.id,g.value.isShow)?$("changeShow",g.value.id):g.value.isShow=!g.value.isShow}function P(){return l.announce.pay?l.announce.pay===3&&l.announce.completed?"\u041F\u0440\u043E\u0434\u0430\u0436\u0430 \u0437\u0430\u0432\u0435\u0440\u0448\u0435\u043D\u0430":F.value[l.announce.pay]:""}async function W(){await q.delSketch(i,l.announce.id)&&$("delSketch",l.announce.id)}function X(){var a;if(!((a=l.announce)!=null&&a.radarioEventId)||l.announce.completed)return;fe.create().get(z(),{params:{distributionType:"api",skipEventsInGroup:!0}}).then(k=>{var d;(d=k==null?void 0:k.data)!=null&&d.result,console.log("radario loaded"),D.value=k.data.event.ticketCount}).catch(k=>{i.notify(re(k,"\u041A\u043E\u043B\u0438\u0447\u0435\u0441\u0442\u0432\u043E \u043E\u0441\u0442\u0430\u0432\u0448\u0438\u0445\u0441\u044F \u0431\u0438\u043B\u0435\u0442\u043E\u0432 \u043D\u0435 \u0437\u0430\u0433\u0440\u0443\u0437\u0438\u043B\u043E\u0441\u044C."))})}return ae(()=>{l.announce.completed===!1&&X()}),(L,a)=>{const k=le("router-link");return e.announce&&(e.announce.isShow||x(m))?(o(),c(oe,{key:0,square:"",class:"eventbox tdno",separator:""},{default:t(()=>[n(k,{to:"/announce/"+e.announce.id},{default:t(()=>[v("div",ye,[x(m)&&!e.pwUrl?(o(),c(de,{key:0,title:"\u0423\u0434\u0430\u043B\u0438\u0442\u044C \u044D\u0441\u043A\u0438\u0437",tooltip:"\u0423\u0434\u0430\u043B\u0438\u0442\u044C \u044D\u0441\u043A\u0438\u0437","throw-confirm":"",danger:"",onOnOk:a[0]||(a[0]=d=>W())})):u("",!0)]),n(K,{ratio:16/9,src:R(),fit:"fill"},{error:t(()=>a[3]||(a[3]=[v("img",{src:"/img/news/default_sketch.svg"},null,-1)])),_:1},8,["src"])]),_:1},8,["to"]),n(f,{color:"info","expand-separator":""},{default:t(()=>[e.announce.completed===!1?(o(),c(E,{key:0,class:"absolute bage",color:"green-6",rounded:"",transparent:""},{default:t(()=>a[4]||(a[4]=[s(" \u0421\u043A\u043E\u0440\u043E ")])),_:1})):u("",!0),e.announce.age?(o(),c(E,{key:1,rounded:"",style:{"background-color":"orange"},floating:""},{default:t(()=>[s(I(e.announce.age+"+"),1)]),_:1})):u("",!0),M((o(),c(Q,{dense:""},{default:t(()=>[n(r,{avatar:""},{default:t(()=>[n(B,{name:"schedule"})]),_:1}),n(r,null,{default:t(()=>[n(S,{caption:""},{default:t(()=>[s(I(x(se)(g.value.eventTime)),1)]),_:1})]),_:1})]),_:1})),[[O]]),M((o(),c(Q,{clickable:"",href:V.value.getMapHref(),target:"_blank",dense:""},{default:t(()=>[n(r,{avatar:""},{default:t(()=>[n(B,{name:"place"})]),_:1}),n(r,null,{default:t(()=>[n(S,{caption:""},{default:t(()=>[v("span",be,I(V.value.name),1)]),_:1})]),_:1})]),_:1},8,["href"])),[[O]])]),_:1}),e.compact?u("",!0):(o(),y(b,{key:0},[n(T,{inset:""}),n(f,null,{default:t(()=>[v("div",{class:"text-subtitle1 text-center prog-name",innerHTML:e.announce.progName},null,8,he)]),_:1}),n(f,{class:"text-body2 text-center"},{default:t(()=>[v("div",{innerHTML:e.announce.sdescr},null,8,we)]),_:1}),n(f,{class:"space"},{default:t(()=>a[5]||(a[5]=[v("div",null,null,-1)])),_:1}),n(T,{inset:""}),e.announce.youtubeId?(o(),c(f,{key:0},{default:t(()=>[M((o(),c(Q,{clickable:"",href:"https://www.youtube.com/watch?v="+e.announce.youtubeId,target:"_blank"},{default:t(()=>[n(r,{avatar:""},{default:t(()=>[n(B,{name:"ion-logo-youtube"})]),_:1}),n(r,null,{default:t(()=>[n(S,{caption:""},{default:t(()=>a[6]||(a[6]=[v("span",{class:"mapLink"},"\u0421\u043C\u043E\u0442\u0440\u0435\u0442\u044C \u0432\u0438\u0434\u0435\u043E",-1)])),_:1})]),_:1})]),_:1},8,["href"])),[[O]])]),_:1})):u("",!0),e.announce.pay?(o(),y(b,{key:1},[n(T,{inset:""}),n(f,{class:"text-body2 text-center"},{default:t(()=>[[3,4].includes(e.announce.pay)&&!e.announce.completed&&e.announce.ticketLink?(o(),y(b,{key:0},[e.announce.isShowTicketCount&&e.announce.radarioEventId?(o(),y(b,{key:0},[n(Q,null,{default:t(()=>[n(r,null,{default:t(()=>{var d,_;return[s(I(`${x(H)((d=D.value)!=null?d:0,["\u041E\u0441\u0442\u0430\u043B\u0441\u044F","\u041E\u0441\u0442\u0430\u043B\u043E\u0441\u044C","\u041E\u0441\u0442\u0430\u043B\u043E\u0441\u044C"])} ${D.value} ${x(H)((_=D.value)!=null?_:0,["\u0431\u0438\u043B\u0435\u0442","\u0431\u0438\u043B\u0435\u0442\u0430","\u0431\u0438\u043B\u0435\u0442\u043E\u0432"])}`),1)]}),_:1})]),_:1}),n(T,{inset:"",spaced:""})],64)):u("",!0),n(Q,{clickable:"",href:e.announce.ticketLink,target:"_blank",dense:"",style:{"text-align":"left"}},{default:t(()=>[e.announce.pay===4?(o(),y(b,{key:0},[n(r,{avatar:""},{default:t(()=>[n(B,{name:"img:/img/uds.svg"})]),_:1}),n(r,null,{default:t(()=>[n(S,null,{default:t(()=>a[7]||(a[7]=[s("\u041F\u043E\u043B\u0443\u0447\u0438\u0442\u044C \u043F\u0440\u0438\u0433\u043B\u0430\u0441\u0438\u0442\u0435\u043B\u044C\u043D\u044B\u0439")])),_:1})]),_:1})],64)):u("",!0),e.announce.pay===3?(o(),y(b,{key:1},[n(r,{avatar:""},{default:t(()=>[n(B,{name:"shopping_cart"})]),_:1}),n(r,null,{default:t(()=>[n(S,null,{default:t(()=>a[8]||(a[8]=[s("\u041A\u0443\u043F\u0438\u0442\u044C \u0431\u0438\u043B\u0435\u0442")])),_:1}),e.announce.isPushkin?(o(),c(S,{key:0,caption:""},{default:t(()=>a[9]||(a[9]=[s("+ \u0414\u043E\u0441\u0442\u0443\u043F\u043D\u043E \u043F\u043E \u043F\u0443\u0448\u043A\u0438\u043D\u0441\u043A\u043E\u0439 \u043A\u0430\u0440\u0442\u0435")])),_:1})):u("",!0)]),_:1})],64)):u("",!0)]),_:1},8,["href"])],64)):(o(),y(b,{key:1},[s(I(P()),1)],64))]),_:1})],64)):u("",!0),n(T,{inset:""}),n(f,{class:"text-body2 text-center"},{default:t(()=>a[10]||(a[10]=[s(" X\u0443\u0434\u043E\u0436\u0435\u0441\u0442\u0432\u0435\u043D\u043D\u044B\u0439 \u0440\u0443\u043A\u043E\u0432\u043E\u0434\u0438\u0442\u0435\u043B\u044C \u0438 \u0433\u043B\u0430\u0432\u043D\u044B\u0439 \u0434\u0438\u0440\u0438\u0436\u0435\u0440 - "),v("b",null,"\u0422\u0438\u0433\u0440\u0430\u043D \u0410\u0445\u043D\u0430\u0437\u0430\u0440\u044F\u043D",-1),s(". ")])),_:1}),x(m)?(o(),y(b,{key:2},[n(f,null,{default:t(()=>[n(ue,{modelValue:g.value.isShow,"onUpdate:modelValue":[a[1]||(a[1]=d=>g.value.isShow=d),a[2]||(a[2]=d=>J())],label:"\u0432\u043A\u043B",color:"green","checked-icon":"check","unchecked-icon":"clear"},{default:t(()=>[n(ie,null,{default:t(()=>a[11]||(a[11]=[s("\u041E\u043F\u0443\u0431\u043B\u0438\u043A\u043E\u0432\u0430\u0442\u044C")])),_:1})]),_:1},8,["modelValue"])]),_:1}),n(f,null,{default:t(()=>[n(ve,{onOnOk:G,label:"\u0423\u0434\u0430\u043B\u0438\u0442\u044C",color:"red",title:"\u0423\u0434\u0430\u043B\u0435\u043D\u0438\u0435 \u0430\u043D\u043E\u043D\u0441\u0430",message:`
          \u0411\u0443\u0434\u0435\u0442 \u0443\u0434\u0430\u043B\u0435\u043D\u0430 \u0437\u0430\u043F\u0438\u0441\u044C \u043E\u0431 \u0430\u043D\u043E\u043D\u0441\u0435 \u0438 \u0441\u0432\u044F\u0437\u0430\u043D\u043D\u044B\u0435 \u0441 \u043D\u0435\u0439 \u0438\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u044F.
          <br><span style='color: red'>
          \u042D\u0442\u043E \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0435 \u043D\u0435\u043B\u044C\u0437\u044F \u043E\u0442\u043C\u0435\u043D\u0438\u0442\u044C.</span><br>
          \u0412\u044B \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0442\u0435\u043B\u044C\u043D\u043E \u0445\u043E\u0442\u0438\u0442\u0435 \u044D\u0442\u043E \u0441\u0434\u0435\u043B\u0430\u0442\u044C?`})]),_:1})],64)):u("",!0)],64))]),_:1})):u("",!0)}}};var Le=ge(xe,[["__scopeId","data-v-6d480f32"]]);export{Le as A};
