import{d as le,i as q,r as s,c as X,m as a,n as p,q as e,v as W,b as de,G as re,f as u,y as h,t as g,u as b,l as w,bi as ue,D as U,bk as oe,bl as ae,F as G,bm as Ce,A as M,x as Z,p as P,B as te,ax as j,aY as Ve,E as ne,k as _e,z as Ee}from"./index.16a1d53f.js";import{a as pe}from"./axios.2f222f0a.js";import{i as Se,n as me}from"./myFuncts.080b71d0.js";import{u as Y}from"./use-quasar.692c4e2e.js";import{Q as we}from"./QList.8696114b.js";import{Q as D}from"./QItemLabel.ff6efd8a.js";import{b as L,Q as A,a as ye}from"./QImg.72472eb0.js";/* empty css                                                             */import{_ as ke}from"./plugin-vue_export-helper.21dcd24c.js";import{P as Te}from"./PageShell.8f5bf166.js";/* empty css                                                               */import{a as $e,Q as Be}from"./AnderHeader.vue_vue_type_style_index_0_lang.607f7eea.js";import{Q as ie}from"./QSelect.4509afbb.js";import{c as De}from"./MainFooter.vue_vue_type_style_index_0_scoped_true_lang.6c29299d.js";/* empty css               */import{W as Oe,T as z,V as ee}from"./lib.72c62d47.js";import{_ as Ae}from"./BtnDelete.07be0356.js";import{u as Fe}from"./myAxios.f7e87135.js";import"./QScrollArea.9db686a4.js";import"./format.de7e9769.js";import"./QLinearProgress.cbcdd4e7.js";import"./QMenu.a2af80de.js";import"./position-engine.a0b75f42.js";import"./selection.4fba61da.js";import"./rtl.276c3f1b.js";import"./touch.9135741d.js";import"./QTooltip.ac435365.js";const be=le({__name:"TimeCodeDialog",props:{video:{type:Object,required:!0},timeCode:{type:Object,default:()=>({id:0,start:"00:00:00",uLabel:"",type:"init"})}},emits:["onDelete","onSave"],setup(i,{emit:$}){const C=Y(),d=q("isTCodeDialogOpen"),B=$,x={id:0,start:"00:00:00",uLabel:"",type:"init"},n=i,r=s(n.timeCode),V=s(!1),T=s([]),_=s(),v=s(),y=X(()=>!n.timeCode.id),E=X(()=>y.value?_.value?v.value?"part":"work":"init":n.timeCode.type);function k(){d.value=!1}X(()=>["work","part"].includes(r.value.type));function S(){y.value&&N(),y.value&&f()}function N(){r.value={...x},_.value=void 0,v.value=void 0}function J(){V.value=!1,y.value&&N()}function Q(c){const o=c.split(":");return+o[0]*60*60+ +o[1]*60+ +o[2]}function H(c){const o=(c%60).toString(),F=Math.floor(c/60%60).toString();return`${Math.floor(c/60/60%60).toString().padStart(2,"0")}:${F.padStart(2,"0")}:${o.padStart(2,"0")}`}function O(c){const o=Q(c);return c===H(o)}async function t(){V.value=!0,(y.value?await l():await z.update(C,r.value))&&(B("onSave"),k()),V.value=!1}async function l(){r.value.type=E.value;const c=r.value,o=n.video.id,F=c.start;switch(c.type){case"init":return z.addInit(C,o,F,c.uLabel);case"work":return z.addWork(C,o,F,_.value.id);case"part":return z.addPartition(C,o,F,v.value.id)}}async function f(){!n.video.announceId||(V.value=!0,T.value=await Oe.getListByAnnounce(C,n.video.announceId),V.value=!1)}function I(){var c,o;(o=(c=_.value)==null?void 0:c.children)!=null&&o.length||(v.value=null),v.value=_.value.children[0]}async function K(){V.value=!0,await z.del(C,n.timeCode.id)&&(B("onDelete"),k()),V.value=!1}return(c,o)=>(a(),p(re,{modelValue:W(d),"onUpdate:modelValue":o[5]||(o[5]=F=>de(d)?d.value=F:null),onBeforeHide:J,onBeforeShow:S},{default:e(()=>[u(Z,{bordered:"",class:"dialogArea"},{default:e(()=>{var F;return[u(h,null,{default:e(()=>[u(L,null,{default:e(()=>[u(A,null,{default:e(()=>[u(D,{caption:""},{default:e(()=>[g(b(y.value?"\u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C \u0442\u0430\u0439\u043C\u043A\u043E\u0434":"\u0418\u043C\u0435\u043D\u0438\u0442\u044C \u0442\u0430\u0439\u043C\u043A\u043E\u0434 \u0434\u043B\u044F:"),1)]),_:1}),y.value?w("",!0):(a(),p(D,{key:0},{default:e(()=>[g(b(i.timeCode.label),1)]),_:1}))]),_:1})]),_:1})]),_:1}),u(h,null,{default:e(()=>{var R,se,ve,fe,ce;return[u(ue,{mask:"##:##:##",clearable:"",label:`${H(0)} - ${H(i.video.duration)}`,"onUpdate:modelValue":[o[0]||(o[0]=m=>Q(String(m))),o[1]||(o[1]=m=>r.value.start=m)],rules:[m=>!!m||"* \u041E\u0431\u044F\u0437\u0430\u0442\u0435\u043B\u044C\u043D\u043E\u0435 \u043F\u043E\u043B\u0435",m=>O(m)||"\u041D\u0443\u0436\u0435\u043D \u0444\u043E\u0440\u043C\u0430\u0442 [HH:MM:SS]",m=>Q(String(m))<=i.video.dur||"\u0417\u0430 \u043F\u0440\u0435\u0434\u0435\u043B\u0430\u043C\u0438 \u0432\u0438\u0434\u0435\u043E"],modelValue:r.value.start},null,8,["label","rules","modelValue"]),E.value==="init"?(a(),p(ue,{key:0,modelValue:r.value.uLabel,"onUpdate:modelValue":o[2]||(o[2]=m=>r.value.uLabel=m),clearable:"",label:"\u041D\u0430\u0437\u0432\u0430\u043D\u0438\u0435 \u0442\u0430\u0439\u043C\u043A\u043E\u0434\u0430","stack-label":""},null,8,["modelValue"])):w("",!0),y.value?(a(),U(G,{key:1},[T.value.length?(a(),p(ie,{key:0,modelValue:_.value,"onUpdate:modelValue":[o[3]||(o[3]=m=>_.value=m),I],label:((R=_.value)==null?void 0:R.author.fioRu)||"\u041F\u0440\u043E\u0438\u0437\u0432\u0435\u0434\u0435\u043D\u0438\u0435",options:T.value,clearable:"","map-options":"","option-value":"id","option-label":"titleRu"},{option:e(m=>[u(L,oe(ae(m.itemProps)),{default:e(()=>[u(A,null,{default:e(()=>[u(D,{caption:""},{default:e(()=>[g(b(m.opt.author.fioRu),1)]),_:2},1024),u(D,null,{default:e(()=>[g(b(m.opt.titleRu),1)]),_:2},1024)]),_:2},1024)]),_:2},1040)]),_:1},8,["modelValue","label","options"])):(a(),p(L,{key:1},{default:e(()=>[u(A,null,{default:e(()=>[u(D,null,{default:e(()=>o[6]||(o[6]=[g("\u0421\u043F\u0438\u0441\u043E\u043A \u043F\u0440\u043E\u0438\u0437\u0432\u0435\u0434\u0435\u043D\u0438\u0439 \u043F\u0443\u0441\u0442")])),_:1}),i.video.announceId?(a(),p(D,{key:0,caption:""},{default:e(()=>o[7]||(o[7]=[g(" \u041F\u043E\u0445\u043E\u0436\u0435, \u0432 \u0430\u043D\u043E\u043D\u0441\u0435 \u043D\u0435 \u0443\u043A\u0430\u0437\u0430\u043D\u0430 \u043F\u0440\u043E\u0433\u0440\u0430\u043C\u043C\u0430 \u043A\u043E\u043D\u0446\u0435\u043D\u0442\u0430. ")])),_:1})):(a(),p(D,{key:1,caption:""},{default:e(()=>o[8]||(o[8]=[g(" \u041F\u0440\u0438\u0432\u044F\u0436\u0438\u0442\u0435 \u0432\u0438\u0434\u0435\u043E \u043A \u0430\u043D\u043E\u043D\u0441\u0443, \u0447\u0442\u043E\u0431\u044B \u043F\u043E\u043B\u0443\u0447\u0438\u0442\u044C \u0441\u043F\u0438\u0441\u043E\u043A \u043F\u0440\u043E\u0438\u0437\u0432\u0435\u0434\u0435\u043D\u0438\u0439. ")])),_:1}))]),_:1})]),_:1})),(ve=(se=_.value)==null?void 0:se.children)!=null&&ve.length?(a(),p(ie,{key:2,modelValue:v.value,"onUpdate:modelValue":o[4]||(o[4]=m=>v.value=m),options:(ce=(fe=_.value)==null?void 0:fe.children)!=null?ce:[],label:"\u0427\u0430\u0441\u0442\u044C, \u043D\u043E\u043C\u0435\u0440, \u0440\u0430\u0437\u0434\u0435\u043B",clearable:"","stack-label":"","map-options":"","option-value":"id","option-label":"title"},{option:e(m=>[u(L,oe(ae(m.itemProps)),{default:e(()=>[u(A,{avatar:""},{default:e(()=>[g(b(m.opt.sortVal),1)]),_:2},1024),u(A,null,{default:e(()=>[u(D,null,{default:e(()=>[g(b(m.opt.title),1)]),_:2},1024),u(D,{caption:""},{default:e(()=>[g(b(m.opt.caption),1)]),_:2},1024)]),_:2},1024)]),_:2},1040)]),_:1},8,["modelValue","options"])):w("",!0)],64)):w("",!0)]}),_:1}),w("",!0),(F=_.value)!=null&&F.children.length?(a(),p(h,{key:1},{default:e(()=>[u(L,null,{default:e(()=>[u(A,null,{default:e(()=>[u(D,null,{default:e(()=>[g(b(v.value?"\u0427\u0430\u0441\u0442\u044C \u0431\u0443\u0434\u0435\u0442 \u043E\u0442\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0430 \u0432 \u0430\u0432\u0442\u043E\u043C\u0430\u0442\u0438\u0447\u0435\u0441\u043A\u0438 \u0441\u043E\u0437\u0434\u0430\u043D\u043D\u043E\u0439 \u043F\u0430\u043F\u043A\u0435":"\u0411\u0443\u0434\u0435\u0442 \u0434\u043E\u0431\u0430\u0432\u043B\u0435\u043D\u043E \u043F\u0440\u043E\u0438\u0437\u0432\u0435\u0434\u0435\u043D\u0438\u0435 \u0431\u0435\u0437 \u0447\u0430\u0441\u0442\u0435\u0439"),1)]),_:1})]),_:1})]),_:1})]),_:1})):w("",!0),g(" "+b(E.value)+" ",1),u(Ce,{align:"right"},{default:e(()=>[i.timeCode.id?(a(),p(Ae,{key:0,label:"\u0423\u0434\u0430\u043B\u0438\u0442\u044C","throw-confirm":"",onOnOk:K,danger:""})):w("",!0),u(De),u(M,{label:"\u041E\u0442\u043C\u0435\u043D\u0430",onClick:k}),u(M,{label:"\u0421\u043E\u0445\u0440\u0430\u043D\u0438\u0442\u044C",loading:V.value,color:"green",onClick:t},null,8,["loading"])]),_:1})]}),_:1})]),_:1},8,["modelValue"]))}}),ge=le({__name:"TimeCodeItem",props:{video:{type:Object,required:!0},timeCode:{type:Object,required:!0}},emits:["goToMoment","onDelete","onSave"],setup(i,{emit:$}){Y();const C=q("editMode"),d=s(!1);P("isTCodeDialogOpen",d);const B=$;return s(!1),(x,n)=>(a(),p(L,{clickable:"",onClick:n[3]||(n[3]=r=>B("goToMoment",i.timeCode.formattedStart))},{default:e(()=>[u(A,{avatar:""},{default:e(()=>[u(D,{caption:""},{default:e(()=>[g(b(i.timeCode.start),1)]),_:1}),w("",!0)]),_:1}),u(A,null,{default:e(()=>[i.timeCode.type!=="part"?(a(),p(D,{key:0,caption:""},{default:e(()=>[g(b(i.timeCode.caption),1)]),_:1})):w("",!0),u(D,null,{default:e(()=>[g(b(i.timeCode.label),1)]),_:1}),i.timeCode.type==="part"?(a(),p(D,{key:1,caption:""},{default:e(()=>[g(b(i.timeCode.caption),1)]),_:1})):w("",!0)]),_:1}),W(C)?(a(),U(G,{key:0},[u(A,{side:""},{default:e(()=>[u(M,{icon:"edit",flat:"",round:"",onClick:n[0]||(n[0]=te(r=>d.value=!0,["stop","prevent"]))})]),_:1}),u(be,{timeCode:i.timeCode,onOnDelete:n[1]||(n[1]=r=>B("onDelete")),onOnSave:n[2]||(n[2]=r=>B("onSave")),video:i.video},null,8,["timeCode","video"])],64)):w("",!0)]),_:1}))}}),xe=["innerHTML"],Me=le({__name:"DescrDialog",props:{video:{type:Object,required:!0}},setup(i){const $=Y(),C=i,d=s(),B=s(!1),x=q("isOpenDescrDialog");function n(){}function r(){}function V(){d.value.hide()}async function T(){B.value=!0,await ee.putDescrToVK($,C.video.id)&&V(),B.value=!1}return(_,v)=>(a(),p(re,{modelValue:W(x),"onUpdate:modelValue":v[0]||(v[0]=y=>de(x)?x.value=y:null),onBeforeHide:n,onBeforeShow:r,ref_key:"refDialog",ref:d},{default:e(()=>[u(Z,{bordered:""},{default:e(()=>[u(h,null,{default:e(()=>[u(L,null,{default:e(()=>[u(A,null,{default:e(()=>[u(D,null,{default:e(()=>v[1]||(v[1]=[g("\u0422\u0435\u043F\u0435\u0440\u044C \u043E\u043F\u0438\u0441\u0430\u043D\u0438\u0435 \u0432\u044B\u0433\u043B\u044F\u0434\u0438\u0442 \u0442\u0430\u043A:")])),_:1})]),_:1})]),_:1})]),_:1}),u(h,null,{default:e(()=>[u(Z,null,{default:e(()=>[u(h,null,{default:e(()=>{var y;return[j("section",{innerHTML:(y=i.video)==null?void 0:y.description,style:{whiteSpace:"pre-line"}},null,8,xe)]}),_:1})]),_:1})]),_:1}),u(h,null,{default:e(()=>v[2]||(v[2]=[g("\u0412\u044B \u043C\u043E\u0436\u0435\u0442\u0435 \u0441\u043E\u0445\u0440\u0430\u043D\u0438\u0442\u044C \u0435\u0433\u043E \u0432 \u0438\u0441\u0445\u043E\u0434\u043D\u043E\u043C \u0432\u0438\u0434\u0435\u043E \u043D\u0430 VK \u0438\u043B\u0438 \u043F\u0440\u043E\u0434\u043E\u043B\u0436\u0438\u0442\u044C \u0440\u0435\u0434\u0430\u043A\u0442\u0438\u0440\u043E\u0432\u0430\u0442\u044C")])),_:1}),u(Ce,{align:"between"},{default:e(()=>[u(De),u(M,{label:"\u041D\u0435 \u0441\u0435\u0439\u0447\u0430\u0441",onClick:V}),u(M,{label:"\u0421\u043E\u0445\u0440\u0430\u043D\u0438\u0442\u044C \u043D\u0430 VK",color:"green",onClick:T})]),_:1})]),_:1})]),_:1},8,["modelValue"]))}}),Ie=le({__name:"VKVideoDialog",props:{video:{type:Object,required:!0}},emits:["onSave"],setup(i,{emit:$}){const C=Y(),d=q("isOpenVKVideoDialog"),B=s(!1),x=Fe.getApiUrl(""),n=q("announceList"),r=s("");function V(t){r.value=t}const T=X(()=>{if(!r.value)return n.value;const t=r.value.toLowerCase().trim();return t?n.value.filter(l=>{var c,o,F,R;const f=((c=l.progName)==null?void 0:c.toLowerCase())||"",I=((o=l.eventTime)==null?void 0:o.toLowerCase())||"",K=((R=(F=l.Hall)==null?void 0:F.name)==null?void 0:R.toLowerCase())||"";return f.includes(t)||I.includes(t)||K.includes(t)}):n.value}),_=$,v=i,y=s(v.video),E=s(),k=s(!1),S=s();function N(){B.value=!1}function J(){!v.video.announceId||(S.value=n.value.find(t=>t.id===v.video.announceId))}function Q(){d.value=!1}function H(t){var K,c;const l=((K=t==null?void 0:t.sketch)==null?void 0:K.md5)||null,f=((c=t==null?void 0:t.sketch)==null?void 0:c.ext)||null;return Se(x,l,f,100)}async function O(){B.value=!0;const t={id:S.value.id,progName:S.value.progName,eventTime:S.value.eventTime};await ee.linkToAnnounce(C,v.video.id,t)&&(_("onSave"),Q())}return(t,l)=>(a(),p(re,{modelValue:W(d),"onUpdate:modelValue":l[4]||(l[4]=f=>de(d)?d.value=f:null),onBeforeShow:J,onBeforeHide:N},{default:e(()=>[u(Z,{bordered:"",class:"dialogArea"},{default:e(()=>[u(h,null,{default:e(()=>[u(ie,{modelValue:S.value,"onUpdate:modelValue":[l[0]||(l[0]=f=>S.value=f),()=>{}],options:T.value,label:"\u0412\u044B\u0431\u0440\u0430\u0442\u044C \u043A\u043E\u043D\u0446\u0435\u0440\u0442","map-options":"","option-label":"progName","option-value":"id",clearable:"","use-input":"",onInputValue:V},Ve({option:e(f=>[u(L,oe(ae(f.itemProps)),{default:e(()=>[u(A,{avatar:""},{default:e(()=>[u(ye,{src:H(f.opt)},null,8,["src"])]),_:2},1024),u(A,null,{default:e(()=>[u(D,null,{default:e(()=>[g(b(f.opt.progName),1)]),_:2},1024),u(D,{caption:""},{default:e(()=>[g(b(f.opt.eventTime),1)]),_:2},1024),u(D,{caption:""},{default:e(()=>[g(b(f.opt.Hall.name),1)]),_:2},1024)]),_:2},1024)]),_:2},1040)]),_:2},[S.value?{name:"append",fn:e(()=>[u(M,{icon:"save",color:"green",onClick:te(O,["stop","prevent"]),flat:"",round:""})]),key:"0"}:void 0]),1032,["modelValue","options"])]),_:1}),u(h,null,{default:e(()=>[u(ue,{modelValue:y.value.title,"onUpdate:modelValue":l[1]||(l[1]=f=>y.value.title=f),label:"\u041D\u0430\u0437\u0432\u0430\u043D\u0438\u0435",onFocus:l[2]||(l[2]=f=>k.value=!0),onBlur:l[3]||(l[3]=f=>k.value=!1),ref_key:"refTitle",ref:E},{append:e(()=>[k.value?(a(),p(M,{key:0,icon:"save",color:"green",label:"\u0421\u043E\u0445\u0440\u0430\u043D\u0438\u0442\u044C"})):w("",!0)]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["modelValue"]))}});const Qe={class:"absolute-top-left text-subtitle2"},Le={key:0,class:"absolute-top-right no-padding"},Ne={key:1,class:"absolute-center",style:{"border-radius":"50%"}},He={__name:"VKVideoItem",props:{video:{type:Object,required:!0}},setup(i){const $=Y(),C=i,d=s(C.video),B=q("announceList");function x(){return B.value.find(O=>O.id===d.value.announceId)}const n=X(()=>{const O=x();return O?`${d.value.recordedAt} - ${O.Hall.name}`:d.value.recordedAt});async function r(){k.value=!0;const O=await ee.get($,C.video.id);O&&Object.assign(d.value,O),k.value=!1}const V=q("editMode"),T=s(!1),_=s(!1);P("isOpenVKVideoDialog",_);const v=s(!1);P("isOpenDescrDialog",v);const y=s(!1),E=s(!1);P("isTCodeDialogOpen",E);const k=s(!1);function S(){_.value=!0}function N(O=null){let t="https://vk.com/video";const l=`${C.video.owner_id}_${C.video.id}`;let f=`list=${C.video.access_key}`;O&&(f=`${f}&t=${O}`),t=`${t}${l}?${f}`;const I=window.open();!I||(I.opener=null,I.location=t)}function J(){E.value=!0}async function Q(){k.value=!0,d.value.timeCodes=await z.getList($,C.video.id),k.value=!1}P("loadTCodes",Q);async function H(){await Q(),d.value.description=await ee.getDescr($,C.video.id),v.value=!0}return(O,t)=>(a(),p(Z,null,{default:e(()=>[u(ye,{style:{cursor:"pointer"},src:i.video.image[4].url,ratio:1920/1080,onMouseover:t[4]||(t[4]=l=>T.value=!0),onMouseleave:t[5]||(t[5]=l=>T.value=!1),class:"rounded-borders"},{default:e(()=>[j("div",Qe,b(n.value),1),W(V)?(a(),U("div",Le,[u(M,{loading:k.value,icon:"edit",flat:"",onClick:t[0]||(t[0]=te(l=>S(),["stop","prevent"]))},null,8,["loading"])])):w("",!0),T.value?(a(),U("div",Ne,[u(M,{icon:"play_circle",style:{cursor:"pointer"},round:"",loading:k.value,onClick:t[1]||(t[1]=l=>N())},null,8,["loading"])])):w("",!0),j("div",{class:"absolute-bottom text-center",style:{display:"flex","justify-content":"space-between"},onClick:t[3]||(t[3]=l=>N())},[t[7]||(t[7]=j("div",null,b(" "),-1)),j("div",null,b(i.video.title),1),j("div",null,[u(M,{icon:"menu",loading:k.value,onClick:t[2]||(t[2]=te(l=>y.value=!y.value,["stop","prevent"]))},null,8,["loading"])])])]),_:1},8,["src"]),W(V)?(a(),p(Ie,{key:0,video:d.value,onOnSave:r},null,8,["video"])):w("",!0),u($e,null,{default:e(()=>[y.value?(a(),p(we,{key:0,separator:""},{default:e(()=>[(a(!0),U(G,null,ne(d.value.timeCodes,(l,f)=>{var I;return a(),U(G,{key:`work_${i.video.id}_${f}`},[(I=l==null?void 0:l.children)!=null&&I.length?(a(),p(Be,{key:0,"content-inset-level":.5},{header:e(()=>[u(L,{class:"full-width"},{default:e(()=>[u(A,null,{default:e(()=>[u(D,{caption:""},{default:e(()=>[g(b(l.caption),1)]),_:2},1024),u(D,null,{default:e(()=>[g(b(l.label),1)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),default:e(()=>[(a(!0),U(G,null,ne(l.children,(K,c)=>(a(),p(ge,{key:`part_${K.workId}_${c}`,timeCode:K,video:i.video,onOnDelete:Q,onOnSave:H,onGoToMoment:N},null,8,["timeCode","video"]))),128))]),_:2},1024)):l.type!=="part"?(a(),p(ge,{key:1,video:i.video,onOnDelete:Q,onGoToMoment:N,onOnSave:H,timeCode:l},null,8,["video","timeCode"])):w("",!0)],64)}),128)),W(V)?(a(),p(L,{key:0,clickable:"",onClick:t[6]||(t[6]=l=>J())},{default:e(()=>[u(A,{avatar:""},{default:e(()=>[u(M,{icon:"add"})]),_:1}),u(A,null,{default:e(()=>[u(D,null,{default:e(()=>t[8]||(t[8]=[g("\u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C \u0442\u0430\u0439\u043C\u043A\u043E\u0434")])),_:1})]),_:1}),u(be,{dur:i.video.duration,video:i.video,onOnSave:H},null,8,["dur","video"]),u(Me,{video:d.value},null,8,["video"])]),_:1})):w("",!0)]),_:1})):w("",!0)]),_:1})]),_:1}))}};var Ke=ke(He,[["__scopeId","data-v-1b54c20e"]]);const Ue={class:"centralCol"},he={key:0,class:"vidarea"},Pe={__name:"VKVideoPage",setup(i){const $=Y(),C=String("https://sakh-orch.ru/stapi/"),d=String("https://sakh-orch.ru/api/"),x=q("editModes").libVideo;P("editMode",x);const n=s(!1);P("progress",n);const r=s([]),V=s(""),T=s([]);P("announceList",T);async function _(){n.value=!0;const E=await ee.getList($);r.value=[...E],n.value=!1}function v(){n.value=!0,pe.post(C+"epoint/lib/video.php",{params:{method:"updateAllFromVK"}}).then(E=>{_()}).catch(E=>{r.value=[],$.notify(me(E))}).finally(()=>{n.value=!1})}function y(){n.value=!0,pe.post(d+"epoint/event/announce.php",{params:{method:"listAll"}}).then(E=>{var k,S;T.value=[],T.value=(S=(k=E==null?void 0:E.data)==null?void 0:k.data)!=null?S:[]}).catch(E=>{$.notify(me(E)),T.value=[]}).finally(()=>{n.value=!1})}return _e(()=>{y(),_()}),(E,k)=>(a(),p(Te,{"page-title":"\u0412\u0438\u0434\u0435\u043E\u0442\u0435\u043A\u0430"},{ToolPanel:e(()=>[u(M,{icon:"refresh",flat:"",stretch:"",onClick:v}),u(ue,{modelValue:V.value,"onUpdate:modelValue":k[0]||(k[0]=S=>V.value=S),style:{width:"100%","max-width":"16em"},label:"\u0444\u0438\u043B\u044C\u0442\u0440","stack-label":"",clearable:""},{append:e(()=>[u(Ee,{name:"search"})]),_:1},8,["modelValue"])]),PageContent:e(()=>[j("div",Ue,[r.value.length?(a(),U("div",he,[(a(!0),U(G,null,ne(r.value,S=>(a(),p(Ke,{key:S.id,video:S},null,8,["video"]))),128))])):w("",!0)])]),_:1}))}};var Cu=ke(Pe,[["__scopeId","data-v-98c5d0c8"]]);export{Cu as default};
