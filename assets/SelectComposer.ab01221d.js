import{a as h,Q as x}from"./QImg.628e9f39.js";import{H as S,r as f,i as V,w,k as C,o as I,m as N,n as b,aY as k,v as o,q as r,f as u,Q as A,cq as y,t as L,u as R,l as E}from"./index.f5e978c0.js";import{Q as P}from"./QItemLabel.4c832645.js";import{Q as U}from"./QSelect.ed6de9a4.js";import{A as B}from"./AuthorItem.68f5c219.js";import{A as t}from"./lib.ab987395.js";/* empty css                                                                   */import{_ as D}from"./plugin-vue_export-helper.21dcd24c.js";const T={__name:"SelectComposer",emits:["itSel"],setup(q,{emit:m}){const v=S(),_=f(),c=f([...t.list.value]),g=m,s=V("loadingAuthors");function Q(p,a,e){a(()=>{if(!p){c.value=[...t.list.value];return}const n=p.toLowerCase();let l=[...t.list.value];p&&(l=l.filter(i=>(i.fioRu?i.fioRu.toLowerCase().includes(n):!1)||(i.iofEn?i.iofEn.toLowerCase().includes(n):!1))),c.value=l})}return w(s,()=>{s.value||(c.value=[...t.list.value],console.log("loadingAuthors",s.value))}),C(()=>{}),I(()=>{}),(p,a)=>(N(),b(U,{options:c.value,ref_key:"refSelect",ref:_,modelValue:o(t).selected.value,"onUpdate:modelValue":[a[1]||(a[1]=e=>o(t).selected.value=e),a[2]||(a[2]=e=>g("itSel",o(t).selected.value))],"option-label":"fioRu","option-value":"id","map-options":"","use-input":!o(s),"hide-selected":"","fill-input":"",autocomplete:"off","input-debounce":"0",onFilter:Q,clearable:"",style:{width:"100%"},label:"\u041A\u043E\u043C\u043F\u043E\u0437\u0438\u0442\u043E\u0440",loading:o(s)},k({option:r(e=>{var n,l,i,d;return[u(B,y(e.itemProps,{id:(n=e.opt)==null?void 0:n.id,iofEn:(l=e.opt)==null?void 0:l.iofEn,iconUrl:(i=e.opt)==null?void 0:i.iconUrl,fioRu:(d=e.opt)==null?void 0:d.fioRu}),{sections:r(()=>[u(x,{side:""},{default:r(()=>[u(P,{caption:""},{default:r(()=>[L(R(e.opt.cntWorks),1)]),_:2},1024)]),_:2},1024)]),_:2},1040,["id","iofEn","iconUrl","fioRu"]),E("",!0)]}),_:2},[o(t).selected.value?{name:"prepend",fn:r(()=>[u(A,null,{default:r(()=>[u(h,{src:o(t).selected.value.iconUrl,class:"authorAva",eager:"","no-spinner":"","no-transition":"","placeholder-src":"/img/avatars/init_ava.png",style:{width:"50px",cursor:"pointer"},onClick:a[0]||(a[0]=()=>o(v).push({path:"/lib/author/"+o(t).selected.value.id}))},null,8,["src"])]),_:1})]),key:"0"}:void 0]),1032,["options","modelValue","use-input","loading"]))}};var K=D(T,[["__scopeId","data-v-a680f74e"]]);export{K as S};
