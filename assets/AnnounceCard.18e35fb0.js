import{Q as G}from"./QImg.97937970.js";import{G as J,s as E,H as K,Z as P,r as y,f as o,j as r,a4 as U,u as W,d as X,i as ee,a as te,e as ne,J as S,z as a,aY as ae,c as g,h as n,B as v,aw as _,a7 as I,a3 as B,A as b,aZ as m,at as p,g as D,F as L,ax as le,_ as oe,a8 as T,D as ue,E as ie}from"./index.50239517.js";import{Q as q,b as A,a as M}from"./QItemSection.f60ff076.js";import{Q as ce}from"./QTooltip.10f580ad.js";import{u as N}from"./use-quasar.e1734797.js";import{api as C}from"./axios.b6965e20.js";import{b as O,n as Q,d as re}from"./myFuncts.24341304.js";const de=["top","middle","bottom"];var H=J({name:"QBadge",props:{color:String,textColor:String,floating:Boolean,transparent:Boolean,multiLine:Boolean,outline:Boolean,rounded:Boolean,label:[Number,String],align:{type:String,validator:e=>de.includes(e)}},setup(e,{slots:w}){const x=E(()=>e.align!==void 0?{verticalAlign:e.align}:null),c=E(()=>{const u=e.outline===!0&&e.color||e.textColor;return`q-badge flex inline items-center no-wrap q-badge--${e.multiLine===!0?"multi":"single"}-line`+(e.outline===!0?" q-badge--outline":e.color!==void 0?` bg-${e.color}`:"")+(u!==void 0?` text-${u}`:"")+(e.floating===!0?" q-badge--floating":"")+(e.rounded===!0?" q-badge--rounded":"")+(e.transparent===!0?" q-badge--transparent":"")});return()=>K("div",{class:c.value,style:x.value,role:"status","aria-label":e.label},P(w.default,e.label!==void 0?[e.label]:[]))}});const se={__name:"DialogConfirm",props:{color:y({}),label:y({}),message:y({}),title:y({})},emits:["onOk","Cancel","Dismiss"],setup(e,{emit:w}){const x=N(),c=w;function u(k,f){x.dialog({title:f,message:k,cancel:!0,persistent:!0,html:!0}).onOk(()=>{}).onOk(()=>{c("onOk")}).onCancel(()=>{c("Cancel")}).onDismiss(()=>{c("Dismiss")})}return(k,f)=>(o(),r(U,{label:e.label,color:e.color,onClick:f[0]||(f[0]=$=>u(e.message,e.title))},null,8,["label","color"]))}};const V=e=>(ue("data-v-087fd2ae"),e=e(),ie(),e),me={class:"mapLink"},fe=["innerHTML"],he=["innerHTML"],ge=V(()=>b("div",null,null,-1)),ve=["href"],ye=V(()=>b("span",{class:"mapLink"},"\u0421\u043C\u043E\u0442\u0440\u0435\u0442\u044C \u0432\u0438\u0434\u0435\u043E",-1)),be=V(()=>b("b",null,"\u0422\u0438\u0433\u0440\u0430\u043D \u0410\u0445\u043D\u0430\u0437\u0430\u0440\u044F\u043D",-1)),ke={__name:"AnnounceCard",props:{Announce:y(!1),pwUrl:String},emits:["newAnnounce","IamDeleted","changeShow"],setup(e,{expose:w,emit:x}){const c=String("https://api.sakh-orch.ru/"),u=N();W(),X();const k=ee("editMode"),f=x;w({saveData:j});const $=y(["","","\u0412\u0445\u043E\u0434 \u0441\u0432\u043E\u0431\u043E\u0434\u043D\u044B\u0439","\u0411\u0438\u043B\u0435\u0442\u044B \u0432 \u043F\u0440\u043E\u0434\u0430\u0436\u0435","\u0412\u0445\u043E\u0434 \u043F\u043E \u043F\u0440\u0438\u0433\u043B\u0430\u0441\u0438\u0442\u0435\u043B\u044C\u043D\u044B\u043C","\u041F\u0440\u043E\u0434\u0430\u0436\u0430 \u0437\u0430\u0432\u0435\u0440\u0448\u0435\u043D\u0430"]),i=e,h=y(i.Announce);function z(){if(i.pwUrl)return i.pwUrl;let t=u.platform.is.mobile?1080:480;return c+"/img/posters/sketch/"+t+"/poster_"+i.Announce.id+".jpg?ver="+i.Announce.verString}te(()=>{});function j(){C.post(c+"api/event/announce.php",{params:{method:"update",announce:i.Announce}}).then(t=>{var l,d;u.notify(O((d=(l=t==null?void 0:t.data)==null?void 0:l.result)!=null?d:""))}).catch(t=>{u.notify(Q(t))})}function R(){C.post(c+"api/event/announce.php",{params:{method:"del",id:i.Announce.id}}).then(t=>{var l,d,s;if(!((l=t==null?void 0:t.data)!=null&&l.result))throw new Error;u.notify(O((s=(d=t==null?void 0:t.data)==null?void 0:d.result)!=null?s:null)),f("IamDeleted")}).catch(t=>{u.notify(Q(t))})}function F(){C.post(c+"api/event/announce.php",{params:{method:h.value.isShow?"show":"hide",announceId:h.value.id}}).then(t=>{var l;if(!((l=t==null?void 0:t.data)!=null&&l.result))throw new Error;f("changeShow",h.value.id)}).catch(t=>{u.notify(Q(t)),h.value.isShow=!h.value.isShow}).finally(()=>{})}function Y(){return i.Announce.pay?i.Announce.pay===3&&i.Announce.completed?"\u041F\u0440\u043E\u0434\u0430\u0436\u0430 \u0437\u0430\u0432\u0435\u0440\u0448\u0435\u043D\u0430":$.value[i.Announce.pay]:""}function Z(){C.post(c+"api/event/sketch.php",{params:{method:"del",announceId:i.Announce.id}}).then(t=>{var l,d,s;if(!((l=t==null?void 0:t.data)!=null&&l.result))throw new Error;f("posterUploaded"),u.notify(O((s=(d=t==null?void 0:t.data)==null?void 0:d.result)!=null?s:""))}).catch(t=>{u.notify(Q(t))})}return(t,l)=>{const d=ne("router-link");return e.Announce&&(e.Announce.isShow||S(k))?(o(),r(ae,{key:0,square:"",class:"eventbox tdno",separator:""},{default:a(()=>[n(d,{to:"/announce/"+e.Announce.id},{default:a(()=>[(o(),r(G,{ratio:1080/608,src:z(),fit:"fill",key:e.Announce.verString},null,8,["src"])),S(k)&&!e.pwUrl?(o(),r(U,{key:0,size:"0.7em",round:"",color:"red",icon:"delete",style:{transform:"translateY(-50%)",right:"1em","z-index":"100",position:"absolute",top:"2em"},onClick:l[0]||(l[0]=s=>Z())})):g("",!0)]),_:1},8,["to"]),n(m,{color:"info","expand-separator":""},{default:a(()=>[e.Announce.completed===!1?(o(),r(H,{key:0,class:"absolute bage",color:"green-6",rounded:"",transparent:""},{default:a(()=>[v(" \u0421\u043A\u043E\u0440\u043E ")]),_:1})):g("",!0),e.Announce.age?(o(),r(H,{key:1,rounded:"",style:{"background-color":"orange"},floating:""},{default:a(()=>[v(_(e.Announce.age+"+"),1)]),_:1})):g("",!0),I((o(),r(q,{dense:""},{default:a(()=>[n(A,{avatar:""},{default:a(()=>[n(B,{name:"schedule"})]),_:1}),n(A,null,{default:a(()=>[n(M,{caption:""},{default:a(()=>[v(_(S(re)(h.value.eventTime)),1)]),_:1})]),_:1})]),_:1})),[[T]]),I((o(),r(q,{clickable:"",href:e.Announce.Hall.map,target:"_blank",dense:""},{default:a(()=>[n(A,{avatar:""},{default:a(()=>[n(B,{color:"primary",name:"place"})]),_:1}),n(A,null,{default:a(()=>[n(M,{caption:""},{default:a(()=>[b("span",me,_(e.Announce.Hall.name),1)]),_:1})]),_:1})]),_:1},8,["href"])),[[T]])]),_:1}),n(p,{inset:""}),n(m,null,{default:a(()=>[b("div",{class:"text-subtitle1 text-center prog-name",innerHTML:e.Announce.progName},null,8,fe)]),_:1}),n(m,{class:"text-body2 text-center"},{default:a(()=>[b("div",{innerHTML:e.Announce.sdescr},null,8,he)]),_:1}),n(m,{class:"space"},{default:a(()=>[ge]),_:1}),n(p,{inset:""}),e.Announce.youtubeId?(o(),r(m,{key:0},{default:a(()=>[b("a",{href:"https://www.youtube.com/watch?v="+e.Announce.youtubeId,target:"_blank"},[I((o(),r(q,{clickable:""},{default:a(()=>[n(A,{avatar:""},{default:a(()=>[n(B,{color:"primary",name:"ion-logo-youtube"})]),_:1}),n(A,null,{default:a(()=>[n(M,{caption:""},{default:a(()=>[ye]),_:1})]),_:1})]),_:1})),[[T]])],8,ve)]),_:1})):g("",!0),e.Announce.pay?(o(),D(L,{key:1},[n(p,{inset:""}),n(m,{class:"text-body2 text-center"},{default:a(()=>[e.Announce.pay===3&&!e.Announce.completed&&e.Announce.ticketLink?(o(),r(U,{key:0,label:"\u041A\u0443\u043F\u0438\u0442\u044C \u0431\u0438\u043B\u0435\u0442",href:e.Announce.ticketLink},null,8,["href"])):(o(),D(L,{key:1},[v(_(Y()),1)],64))]),_:1})],64)):g("",!0),n(p,{inset:""}),n(m,{class:"text-body2 text-center"},{default:a(()=>[v(" \u0425\u0443\u0434\u043E\u0436\u0435\u0441\u0442\u0432\u0435\u043D\u043D\u044B\u0439 \u0440\u0443\u043A\u043E\u0432\u043E\u0434\u0438\u0442\u0435\u043B\u044C \u0438 \u0433\u043B\u0430\u0432\u043D\u044B\u0439 \u0434\u0438\u0440\u0438\u0436\u0435\u0440 - "),be,v(". ")]),_:1}),S(k)?(o(),D(L,{key:2},[n(m,null,{default:a(()=>[n(le,{modelValue:h.value.isShow,"onUpdate:modelValue":[l[1]||(l[1]=s=>h.value.isShow=s),l[2]||(l[2]=s=>F())],label:"\u0432\u043A\u043B",color:"green","checked-icon":"check","unchecked-icon":"clear"},{default:a(()=>[n(ce,null,{default:a(()=>[v("\u041E\u043F\u0443\u0431\u043B\u0438\u043A\u043E\u0432\u0430\u0442\u044C")]),_:1})]),_:1},8,["modelValue"])]),_:1}),n(m,null,{default:a(()=>[n(se,{onOnOk:R,label:"\u0423\u0434\u0430\u043B\u0438\u0442\u044C",color:"red",title:"\u0423\u0434\u0430\u043B\u0435\u043D\u0438\u0435 \u0430\u043D\u043E\u043D\u0441\u0430",message:`
          \u0411\u0443\u0434\u0435\u0442 \u0443\u0434\u0430\u043B\u0435\u043D\u0430 \u0437\u0430\u043F\u0438\u0441\u044C \u043E\u0431 \u0430\u043D\u043E\u043D\u0441\u0435 \u0438 \u0441\u0432\u044F\u0437\u0430\u043D\u043D\u044B\u0435 \u0441 \u043D\u0435\u0439 \u0438\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u044F.
          <br><span style='color: red'>
          \u042D\u0442\u043E \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0435 \u043D\u0435\u043B\u044C\u0437\u044F \u043E\u0442\u043C\u0435\u043D\u0438\u0442\u044C.</span><br>
          \u0412\u044B \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0442\u0435\u043B\u044C\u043D\u043E \u0445\u043E\u0442\u0438\u0442\u0435 \u044D\u0442\u043E \u0441\u0434\u0435\u043B\u0430\u0442\u044C?`})]),_:1})],64)):g("",!0)]),_:1})):g("",!0)}}};var Qe=oe(ke,[["__scopeId","data-v-087fd2ae"]]);export{Qe as A};
