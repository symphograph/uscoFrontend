import{u as h}from"./use-quasar.b69da31b.js";import{api as g}from"./axios.ac8b4bf8.js";import{A as w}from"./AnnounceCard.f500b598.js";import{r as A,u as k,d as y,i as r,a as L,w as F,s as S,f as i,g as T,au as B,F as I,j as Y}from"./index.98761dbe.js";import{n as _}from"./myFuncts.1e6ef4e3.js";const R={__name:"AnnounceList",props:{method:String,evYear:Number,sort:A({})},setup(c){const o=c,l=String("https://api.sakh-orch.ru/"),m=h();k(),y(),r("editMode");const u=r("progress"),n=r("announceList");r("Halls");function s(){u.value=!0,g.post(l+"api/event/announce.php",{params:{method:o.method,year:o.evYear}}).then(e=>{var t,a;n.value=(a=(t=e==null?void 0:e.data)==null?void 0:t.data)!=null?a:[]}).catch(e=>{m.notify(_(e)),n.value=[]}).finally(()=>{u.value=!1})}function j(e){}L(()=>{s()}),F(()=>o.evYear,()=>{s()});const d=(e,t)=>e.eventTime<t.eventTime?1:-1,p=(e,t)=>e.eventTime>t.eventTime?1:-1,v=S(()=>{if(!n.value||!n.value.length)return[];switch(o.sort){case 0:return[...n.value].sort(d);case 1:return[...n.value].sort(p);default:return n.value}});return(e,t)=>(i(!0),T(I,null,B(v.value,a=>(i(),Y(w,{key:a.id,Announce:a,onIamDeleted:t[0]||(t[0]=f=>s()),onChangeShow:t[1]||(t[1]=f=>void 0)},null,8,["Announce"]))),128))}};export{R as _};
