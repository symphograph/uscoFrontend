import{i as p,m as d,n as f,p as a,f as s,bk as w,bl as B,q as _,t as v,u as V,b as I,G as N,r as n,I as u,z as Q,l as R,ax as S}from"./index.7ebe9bab.js";import{Q as x}from"./QSelect.6c21190f.js";import{Q as $}from"./QTooltip.ff27ca0c.js";import{_ as q}from"./AnnounceList.a10c5fb2.js";import{u as z,g as F}from"./myFuncts.0e97ec07.js";import{u as U}from"./use-meta.9fd8737e.js";import{Q as T}from"./QItemLabel.a1211d51.js";import{b as W,Q as j}from"./QImg.480ab182.js";import{P as G}from"./PageShell.db6979fc.js";import{m as O}from"./announce.2e58aef3.js";import{_ as E}from"./plugin-vue_export-helper.21dcd24c.js";import"./QMenu.a650daa3.js";import"./position-engine.59731032.js";import"./selection.a18f75a6.js";import"./use-virtual-scroll.d5730ac6.js";import"./rtl.276c3f1b.js";import"./format.de7e9769.js";import"./AnnounceCard.1c56d55a.js";import"./BtnDelete.0e37f73d.js";import"./axios.5e2b2806.js";import"./hall.d0b1ca13.js";import"./myAxios.c606122d.js";import"./img.4ff49e19.js";import"./SketchImg.5ce9ddcf.js";import"./QExpansionItem.039698b5.js";import"./QSlideTransition.cd6740af.js";import"./touch.9135741d.js";import"./MainFooter.6afd7672.js";import"./QLinearProgress.0e4c1524.js";const H={__name:"SelectSort",emits:["onSelect"],setup(A,{emit:c}){const l=p("sortType"),m=c,g=[{label:"\u0421\u043D\u0430\u0447\u0430\u043B\u0430 \u043D\u043E\u0432\u044B\u0435",value:"dateDesc",caption:"\u041F\u043E \u0443\u0431\u044B\u0432\u0430\u043D\u0438\u044E \u0434\u0430\u0442\u044B"},{label:"\u0421\u043D\u0430\u0447\u0430\u043B\u0430 \u0434\u0430\u0432\u043D\u0438\u0435",value:"dateAsc",caption:"\u041F\u043E \u0432\u043E\u0437\u0440\u0430\u0441\u0442\u0430\u043D\u0438\u044E \u0434\u0430\u0442\u044B"}];return(y,e)=>(d(),f(x,{modelValue:V(l),"onUpdate:modelValue":[e[0]||(e[0]=t=>I(l)?l.value=t:null),e[1]||(e[1]=t=>m("onSelect"))],borderless:"","map-options":"","emit-value":"",options:g},{option:a(t=>[s(W,w(B(t.itemProps)),{default:a(()=>[s(j,null,{default:a(()=>[s(T,null,{default:a(()=>[_(v(t.opt.label),1)]),_:2},1024),s(T,{caption:""},{default:a(()=>[_(v(t.opt.caption),1)]),_:2},1024)]),_:2},1024)]),_:2},1040)]),_:1},8,["modelValue"]))}};const J={class:"centralCol"},K={class:"gridArea"},C="\u0410\u043D\u043E\u043D\u0441\u044B",X={__name:"AnnounceListPage",setup(A){const c=F(C);U(c);const l=z(),m=N(),y=p("editModes").announce,e=n(!1);u("compactCard",e);const t=p("progress"),b=n("dateDesc");u("sortType",b);const i=n(new Date().getFullYear());u("evYear",i);const h=n([]);u("announceList",h);const P=p("scrollWatch"),k=n();function D(){P.value=!1,e.value=!e.value,setTimeout(()=>{P.value=!0},500)}function L(){let o=[];for(let r=2018;r<=new Date().getFullYear();r++)o.push(r);return o.reverse()}async function M(){t.value=!0;const o=await O.create(l);console.log(o),o!=null&&o.id&&await m.push({path:"/announce/"+o.id}),t.value=!1}return(o,r)=>(d(),f(G,{pageTitle:C},{ToolPanel:a(()=>[V(y)?(d(),f(Q,{key:0,label:"\u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C",stretch:"",flat:"",onClick:M})):R("",!0),s(x,{modelValue:i.value,"onUpdate:modelValue":r[0]||(r[0]=Y=>i.value=Y),options:L(),"emit-value":"",borderless:""},null,8,["modelValue","options"]),s(H,{onOnSelect:r[1]||(r[1]=()=>{k.value.setScrollPosition("vertical",0,300)})}),s(Q,{icon:e.value?"unfold_less":"unfold_more",flat:"",stretch:"",onClick:D},{default:a(()=>[s($,null,{default:a(()=>[_(v(e.value?"\u041F\u043E\u0434\u0440\u043E\u0431\u043D\u043E":"\u041A\u0440\u0430\u0442\u043A\u043E"),1)]),_:1})]),_:1},8,["icon"])]),PageContent:a(()=>[S("div",J,[S("div",K,[s(q,{year:i.value,method:"listByYear",sort:b.value},null,8,["year","sort"])])])]),_:1}))}};var he=E(X,[["__scopeId","data-v-2393146c"]]);export{he as default};
