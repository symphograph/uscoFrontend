import{i as p,m as _,n as v,q as a,f as r,bk as B,bl as I,t as g,u as y,v as V,b as N,H as R,r as s,p as c,A as P,l as U,ax as Q}from"./index.7d1b9a4d.js";import{Q as x}from"./QSelect.b07c2952.js";import{Q as $}from"./QTooltip.834cbc11.js";import{_ as q}from"./AnnounceList.99f8d9c0.js";import{u as E}from"./use-quasar.ab0f1e42.js";import{u as F}from"./use-meta.e8a02c93.js";import{a as O}from"./axios.d263a8b0.js";import{g as W,a as j,n as z}from"./myFuncts.c4a4425d.js";import{Q as T}from"./QItemLabel.2d316d6a.js";import{b as H,Q as K}from"./QImg.9eb68109.js";import{P as G}from"./PageShell.a4781e48.js";import{_ as J}from"./plugin-vue_export-helper.21dcd24c.js";import"./QMenu.def2b318.js";import"./position-engine.edee25d0.js";import"./selection.11f3eb57.js";import"./use-virtual-scroll.fd0d31d1.js";import"./rtl.276c3f1b.js";import"./format.de7e9769.js";import"./AnnounceCard.92cbca98.js";import"./BtnDelete.8fb63d02.js";import"./entry.3386aa3b.js";import"./myAxios.afbb5a4e.js";import"./MainFooter.vue_vue_type_style_index_0_scoped_true_lang.c98b8949.js";import"./touch.9135741d.js";import"./QScrollArea.767b0782.js";import"./QLinearProgress.19101882.js";/* empty css                                                    */const X={__name:"SelectSort",emits:["onSelect"],setup(A,{emit:d}){const n=p("sortType"),i=d,f=[{label:"\u0421\u043D\u0430\u0447\u0430\u043B\u0430 \u043D\u043E\u0432\u044B\u0435",value:"dateDesc",caption:"\u041F\u043E \u0443\u0431\u044B\u0432\u0430\u043D\u0438\u044E \u0434\u0430\u0442\u044B"},{label:"\u0421\u043D\u0430\u0447\u0430\u043B\u0430 \u0434\u0430\u0432\u043D\u0438\u0435",value:"dateAsc",caption:"\u041F\u043E \u0432\u043E\u0437\u0440\u0430\u0441\u0442\u0430\u043D\u0438\u044E \u0434\u0430\u0442\u044B"}];return(Y,l)=>(_(),v(x,{modelValue:V(n),"onUpdate:modelValue":[l[0]||(l[0]=e=>N(n)?n.value=e:null),l[1]||(l[1]=e=>i("onSelect"))],borderless:"","map-options":"","emit-value":"",options:f},{option:a(e=>[r(H,B(I(e.itemProps)),{default:a(()=>[r(K,null,{default:a(()=>[r(T,null,{default:a(()=>[g(y(e.opt.label),1)]),_:2},1024),r(T,{caption:""},{default:a(()=>[g(y(e.opt.caption),1)]),_:2},1024)]),_:2},1024)]),_:2},1040)]),_:1},8,["modelValue"]))}};const Z={class:"centralCol"},tt={class:"gridArea"},C="\u0410\u043D\u043E\u043D\u0441\u044B",et={__name:"AnnounceListPage",setup(A){const d=W(C);F(d);const n=String("https://sakh-orch.ru/api/"),i=E(),f=R(),l=p("editModes").announce,e=s(!1);c("compactCard",e),p("progress");const h=s("dateDesc");c("sortType",h);const u=s(new Date().getFullYear());c("evYear",u);const k=s([]);c("announceList",k);const S=p("scrollWatch"),D=s();function L(){S.value=!1,e.value=!e.value,setTimeout(()=>{S.value=!0},500)}function M(){let t=[];for(let o=2018;o<=new Date().getFullYear();o++)t.push(o);return t.reverse()}function w(){O.post(n+"epoint/event/announce.php",{params:{method:"add"}}).then(t=>{var o,m,b;if(!((o=t==null?void 0:t.data)!=null&&o.result))throw new Error;i.notify(j((b=(m=t==null?void 0:t.data)==null?void 0:m.result)!=null?b:null)),f.push({path:"/announce/"+t.data.data.id})}).catch(t=>{i.notify(z(t))})}return(t,o)=>(_(),v(G,{pageTitle:C},{ToolPanel:a(()=>[V(l)?(_(),v(P,{key:0,label:"\u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C",stretch:"",flat:"",onClick:w})):U("",!0),r(x,{modelValue:u.value,"onUpdate:modelValue":o[0]||(o[0]=m=>u.value=m),options:M(),"emit-value":"",borderless:""},null,8,["modelValue","options"]),r(X,{onOnSelect:o[1]||(o[1]=()=>{D.value.setScrollPosition("vertical",0,300)})}),r(P,{icon:e.value?"unfold_less":"unfold_more",flat:"",stretch:"",onClick:L},{default:a(()=>[r($,null,{default:a(()=>[g(y(e.value?"\u041F\u043E\u0434\u0440\u043E\u0431\u043D\u043E":"\u041A\u0440\u0430\u0442\u043A\u043E"),1)]),_:1})]),_:1},8,["icon"])]),PageContent:a(()=>[Q("div",Z,[Q("div",tt,[r(q,{evYear:u.value,method:"listByYear",sort:h.value},null,8,["evYear","sort"])])])]),_:1}))}};var Yt=J(et,[["__scopeId","data-v-1753e738"]]);export{Yt as default};
