import{u as h}from"./use-quasar.692c4e2e.js";import{a as A}from"./axios.2f222f0a.js";import{A as g}from"./AnnounceCard.3bc448c9.js";import{n as k}from"./myFuncts.080b71d0.js";import{r as y,i as s,o as L,w as _,c as w,m as u,D as F,E as T,F as B,n as C,v as D}from"./index.16a1d53f.js";const j={__name:"AnnounceList",props:{method:String,evYear:Number,sort:y({})},setup(m){const i=String("https://sakh-orch.ru/api/"),l=h(),p=s("compactCard"),a=s("announceList"),c=s("progress"),r=m;function o(){c.value=!0,A.post(i+"epoint/event/announce.php",{params:{method:r.method,year:r.evYear}}).then(e=>{var t,n;a.value=(n=(t=e==null?void 0:e.data)==null?void 0:t.data)!=null?n:[]}).catch(e=>{l.notify(k(e)),a.value=[]}).finally(()=>{c.value=!1})}L(()=>{o()}),_(()=>r.evYear,()=>{o()});const v=(e,t)=>e.eventTime<t.eventTime?1:-1,d=(e,t)=>e.eventTime>t.eventTime?1:-1,f=w(()=>{if(!a.value||!a.value.length)return[];switch(r.sort){case"dateDesc":return[...a.value].sort(v);case"dateAsc":return[...a.value].sort(d);default:return a.value}});return(e,t)=>(u(!0),F(B,null,T(f.value,n=>(u(),C(g,{key:n.id,Announce:n,onIamDeleted:t[0]||(t[0]=E=>o()),compact:D(p)},null,8,["Announce","compact"]))),128))}};export{j as _};
