import{u as h}from"./use-quasar.07e2f65a.js";import{api as w}from"./axios.cfeb8a80.js";import{A as y}from"./AnnounceCard.5b566b8b.js";import{r as u,u as _,d as g,i as o,a as k,w as A,C as L,f as c,g as F,au as B,F as N,j as Y}from"./index.e8c7f539.js";import{n as j}from"./myFuncts.8c7f864e.js";const R={__name:"AnnounceList",props:{sort:u(null),evYear:u(null),onlyNew:u(0)},setup(i){const r=i,m=String("https://api.sakh-orch.ru/"),p=h();_(),g(),o("editMode");const l=o("progress"),e=o("announceList");o("Halls");function s(){l.value=!0,w.post(m+"api/event/announce/list.php",{params:{sort:r.sort,year:r.evYear,new:r.onlyNew}}).then(t=>{var a,n;e.value=(n=(a=t==null?void 0:t.data)==null?void 0:a.data)!=null?n:[]}).catch(t=>{p.notify(j(t)),e.value=[]}).finally(()=>{l.value=!1})}k(()=>{s()}),A(()=>r.evYear,()=>{s()});const d=(t,a)=>t.datetime<a.datetime?1:-1,f=(t,a)=>t.datetime>a.datetime?1:-1,v=L(()=>{if(!e.value||!e.value.length)return[];switch(r.sort){case 0:return[...e.value].sort(d);case 1:return[...e.value].sort(f);default:return e.value}});return(t,a)=>(c(!0),F(N,null,B(v.value,n=>(c(),Y(y,{key:n.id,Announce:n,onIamDeleted:s},null,8,["Announce"]))),128))}};export{R as _};
