import{a as x,Q as V}from"./QImg.2e8349d1.js";import{H as w,r as d,i as v,w as C,o as I,m as N,n as b,aY as A,q as l,f as s,Q as k,v as f,cq as y,t as L,u as R,l as E}from"./index.e0f85654.js";import{Q as P}from"./QItemLabel.36b7e39e.js";import{Q as U}from"./QSelect.7622fe6b.js";import{A as B}from"./AuthorItem.f7420d9e.js";/* empty css                                                                   */import{_ as D}from"./plugin-vue_export-helper.21dcd24c.js";const T={__name:"SelectComposer",emits:["itSel"],setup(q,{emit:_}){const g=w(),h=d(),u=v("AuthorSelectList"),c=d([...u.value]),Q=_,a=d(),r=v("loadingAuthors");function S(p,t,e){t(()=>{if(!p){c.value=[...u.value];return}const n=p.toLowerCase();let i=[...u.value];p&&(i=i.filter(o=>(o.fioRu?o.fioRu.toLowerCase().includes(n):!1)||(o.iofEn?o.iofEn.toLowerCase().includes(n):!1))),c.value=i})}return C(r,()=>{r.value||(c.value=[...u.value],console.log("loadingAuthors",r.value))}),I(()=>{}),(p,t)=>(N(),b(U,{options:c.value,ref_key:"refSelect",ref:h,modelValue:a.value,"onUpdate:modelValue":[t[1]||(t[1]=e=>a.value=e),t[2]||(t[2]=e=>Q("itSel",a.value))],"option-label":"fioRu","option-value":"id","map-options":"","use-input":!f(r),"hide-selected":"","fill-input":"",autocomplete:"off","input-debounce":"0",onFilter:S,clearable:"",style:{width:"100%"},label:"\u041A\u043E\u043C\u043F\u043E\u0437\u0438\u0442\u043E\u0440",loading:f(r)},A({option:l(e=>{var n,i,o,m;return[s(B,y(e.itemProps,{id:(n=e.opt)==null?void 0:n.id,iofEn:(i=e.opt)==null?void 0:i.iofEn,iconUrl:(o=e.opt)==null?void 0:o.iconUrl,fioRu:(m=e.opt)==null?void 0:m.fioRu}),{sections:l(()=>[s(V,{side:""},{default:l(()=>[s(P,{caption:""},{default:l(()=>[L(R(e.opt.cntWorks),1)]),_:2},1024)]),_:2},1024)]),_:2},1040,["id","iofEn","iconUrl","fioRu"]),E("",!0)]}),_:2},[a.value?{name:"prepend",fn:l(()=>[s(k,null,{default:l(()=>[s(x,{src:a.value.iconUrl,class:"authorAva",eager:"","no-spinner":"","no-transition":"","placeholder-src":"/img/avatars/init_ava.png",style:{width:"50px",cursor:"pointer"},onClick:t[0]||(t[0]=()=>f(g).push({path:"/lib/author/"+a.value.id}))},null,8,["src"])]),_:1})]),key:"0"}:void 0]),1032,["options","modelValue","use-input","loading"]))}};var J=D(T,[["__scopeId","data-v-7399121c"]]);export{J as S};
