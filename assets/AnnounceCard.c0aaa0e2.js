import{Q as K}from"./QImg.4e81d205.js";import{S as G,c as V,h as P,ab as W,r as b,m as o,n as m,B as X,u as Y,I as Z,i as ee,o as te,J as ne,x as p,q as n,y as ae,l as d,f as t,ax as v,t as s,v as B,ak as O,A as C,z as g,E as _,D as I,F as w,ay as le,al as $,az as oe,aA as ue}from"./index.4b9de749.js";import{u as H,a as q,Q as f}from"./QItem.60a792ed.js";import{Q as x}from"./QItemLabel.13a6839c.js";import{Q as ie}from"./QTooltip.8fbd274b.js";import{api as D}from"./axios.89bf8eae.js";import{a as M,n as L,b as ce,i as re}from"./myFuncts.48b48467.js";import{_ as de}from"./BtnDelete.12534cd8.js";import{_ as se}from"./plugin-vue_export-helper.21dcd24c.js";const fe=["top","middle","bottom"];var E=G({name:"QBadge",props:{color:String,textColor:String,floating:Boolean,transparent:Boolean,multiLine:Boolean,outline:Boolean,rounded:Boolean,label:[Number,String],align:{type:String,validator:e=>fe.includes(e)}},setup(e,{slots:S}){const Q=V(()=>e.align!==void 0?{verticalAlign:e.align}:null),c=V(()=>{const i=e.outline===!0&&e.color||e.textColor;return`q-badge flex inline items-center no-wrap q-badge--${e.multiLine===!0?"multi":"single"}-line`+(e.outline===!0?" q-badge--outline":e.color!==void 0?` bg-${e.color}`:"")+(i!==void 0?` text-${i}`:"")+(e.floating===!0?" q-badge--floating":"")+(e.rounded===!0?" q-badge--rounded":"")+(e.transparent===!0?" q-badge--transparent":"")});return()=>P("div",{class:c.value,style:Q.value,role:"status","aria-label":e.label},W(S.default,e.label!==void 0?[e.label]:[]))}});const me={__name:"DialogConfirm",props:{color:b({}),label:b({}),message:b({}),title:b({})},emits:["onOk","Cancel","Dismiss"],setup(e,{emit:S}){const Q=H(),c=S;function i(A,k){Q.dialog({title:k,message:A,cancel:!0,persistent:!0,html:!0,dark:!0}).onOk(()=>{}).onOk(()=>{c("onOk")}).onCancel(()=>{c("Cancel")}).onDismiss(()=>{c("Dismiss")})}return(A,k)=>(o(),m(X,{label:e.label,color:e.color,onClick:k[0]||(k[0]=U=>i(e.message,e.title))},null,8,["label","color"]))}};const T=e=>(oe("data-v-40ea9e79"),e=e(),ue(),e),he={class:"delBtnArea"},ge=T(()=>v("img",{src:"/img/news/default_sketch.svg"},null,-1)),ke={class:"mapLink"},ye=["innerHTML"],ve=["innerHTML"],be=T(()=>v("div",null,null,-1)),Ae=T(()=>v("span",{class:"mapLink"},"\u0421\u043C\u043E\u0442\u0440\u0435\u0442\u044C \u0432\u0438\u0434\u0435\u043E",-1)),_e=T(()=>v("b",null,"\u0422\u0438\u0433\u0440\u0430\u043D \u0410\u0445\u043D\u0430\u0437\u0430\u0440\u044F\u043D",-1)),we={__name:"AnnounceCard",props:{Announce:b(!1),pwUrl:String,compact:{type:Boolean,required:!1,default:!1}},emits:["newAnnounce","IamDeleted","changeShow","delSketch"],setup(e,{expose:S,emit:Q}){const c=String("https://api.sakh-orch.ru/"),i=H();Y(),Z();const A=ee("editMode"),k=Q;S({saveData:z});const U=b(["","","\u0412\u0445\u043E\u0434 \u0441\u0432\u043E\u0431\u043E\u0434\u043D\u044B\u0439","\u0411\u0438\u043B\u0435\u0442\u044B \u0432 \u043F\u0440\u043E\u0434\u0430\u0436\u0435","\u0412\u0445\u043E\u0434 \u043F\u043E \u043F\u0440\u0438\u0433\u043B\u0430\u0441\u0438\u0442\u0435\u043B\u044C\u043D\u044B\u043C","\u041F\u0440\u043E\u0434\u0430\u0436\u0430 \u0437\u0430\u0432\u0435\u0440\u0448\u0435\u043D\u0430"]),u=e,y=b(u.Announce);function N(){if(u.pwUrl)return u.pwUrl;let a=i.platform.is.mobile?1080:480;return u.Announce.sketch?re(c,u.Announce.sketch.md5,u.Announce.sketch.ext,a):"error.err"}te(()=>{});function z(){D.post(c+"api/event/announce.php",{params:{method:"update",announce:u.Announce}}).then(a=>{var l,r;i.notify(M((r=(l=a==null?void 0:a.data)==null?void 0:l.result)!=null?r:""))}).catch(a=>{i.notify(L(a))})}function R(){D.post(c+"api/event/announce.php",{params:{method:"del",id:u.Announce.id}}).then(a=>{var l,r,h;if(!((l=a==null?void 0:a.data)!=null&&l.result))throw new Error;i.notify(M((h=(r=a==null?void 0:a.data)==null?void 0:r.result)!=null?h:null)),k("IamDeleted")}).catch(a=>{i.notify(L(a))})}function F(){D.post(c+"api/event/announce.php",{params:{method:y.value.isShow?"show":"hide",announceId:y.value.id}}).then(a=>{var l;if(!((l=a==null?void 0:a.data)!=null&&l.result))throw new Error;k("changeShow",y.value.id)}).catch(a=>{i.notify(L(a)),y.value.isShow=!y.value.isShow}).finally(()=>{})}function j(){return u.Announce.pay?u.Announce.pay===3&&u.Announce.completed?"\u041F\u0440\u043E\u0434\u0430\u0436\u0430 \u0437\u0430\u0432\u0435\u0440\u0448\u0435\u043D\u0430":U.value[u.Announce.pay]:""}function J(){D.post(c+"api/event/sketch.php",{params:{method:"unlink",id:u.Announce.id}}).then(a=>{var l,r,h;if(!((l=a==null?void 0:a.data)!=null&&l.result))throw new Error;k("delSketch",u.Announce.id),i.notify(M((h=(r=a==null?void 0:a.data)==null?void 0:r.result)!=null?h:""))}).catch(a=>{i.notify(L(a))})}return(a,l)=>{const r=ne("router-link");return e.Announce&&(e.Announce.isShow||p(A))?(o(),m(ae,{key:0,square:"",class:"eventbox tdno",separator:""},{default:n(()=>[t(r,{to:"/announce/"+e.Announce.id},{default:n(()=>[v("div",he,[p(A)&&!e.pwUrl?(o(),m(de,{key:0,title:"\u0423\u0434\u0430\u043B\u0438\u0442\u044C \u044D\u0441\u043A\u0438\u0437",tooltip:"\u0423\u0434\u0430\u043B\u0438\u0442\u044C \u044D\u0441\u043A\u0438\u0437","throw-confirm":"",onOnOk:l[0]||(l[0]=h=>J())})):d("",!0)]),t(K,{ratio:16/9,src:N(),fit:"fill"},{error:n(()=>[ge]),_:1},8,["src"])]),_:1},8,["to"]),t(g,{color:"info","expand-separator":""},{default:n(()=>[e.Announce.completed===!1?(o(),m(E,{key:0,class:"absolute bage",color:"green-6",rounded:"",transparent:""},{default:n(()=>[s(" \u0421\u043A\u043E\u0440\u043E ")]),_:1})):d("",!0),e.Announce.age?(o(),m(E,{key:1,rounded:"",style:{"background-color":"orange"},floating:""},{default:n(()=>[s(B(e.Announce.age+"+"),1)]),_:1})):d("",!0),O((o(),m(q,{dense:""},{default:n(()=>[t(f,{avatar:""},{default:n(()=>[t(C,{name:"schedule"})]),_:1}),t(f,null,{default:n(()=>[t(x,{caption:""},{default:n(()=>[s(B(p(ce)(y.value.eventTime)),1)]),_:1})]),_:1})]),_:1})),[[$]]),O((o(),m(q,{clickable:"",href:e.Announce.Hall.map,target:"_blank",dense:""},{default:n(()=>[t(f,{avatar:""},{default:n(()=>[t(C,{name:"place"})]),_:1}),t(f,null,{default:n(()=>[t(x,{caption:""},{default:n(()=>[v("span",ke,B(e.Announce.Hall.name),1)]),_:1})]),_:1})]),_:1},8,["href"])),[[$]])]),_:1}),e.compact?d("",!0):(o(),_(w,{key:0},[t(I,{inset:""}),t(g,null,{default:n(()=>[v("div",{class:"text-subtitle1 text-center prog-name",innerHTML:e.Announce.progName},null,8,ye)]),_:1}),t(g,{class:"text-body2 text-center"},{default:n(()=>[v("div",{innerHTML:e.Announce.sdescr},null,8,ve)]),_:1}),t(g,{class:"space"},{default:n(()=>[be]),_:1}),t(I,{inset:""}),e.Announce.youtubeId?(o(),m(g,{key:0},{default:n(()=>[O((o(),m(q,{clickable:"",href:"https://www.youtube.com/watch?v="+e.Announce.youtubeId,target:"_blank"},{default:n(()=>[t(f,{avatar:""},{default:n(()=>[t(C,{name:"ion-logo-youtube"})]),_:1}),t(f,null,{default:n(()=>[t(x,{caption:""},{default:n(()=>[Ae]),_:1})]),_:1})]),_:1},8,["href"])),[[$]])]),_:1})):d("",!0),e.Announce.pay?(o(),_(w,{key:1},[t(I,{inset:""}),t(g,{class:"text-body2 text-center"},{default:n(()=>[[3,4].includes(e.Announce.pay)&&!e.Announce.completed&&e.Announce.ticketLink?(o(),m(q,{key:0,clickable:"",href:e.Announce.ticketLink,target:"_blank",dense:"",style:{"text-align":"left"}},{default:n(()=>[e.Announce.pay===4?(o(),_(w,{key:0},[t(f,{avatar:""},{default:n(()=>[t(C,{name:"img:/img/uds.svg"})]),_:1}),t(f,null,{default:n(()=>[t(x,null,{default:n(()=>[s("\u041F\u043E\u043B\u0443\u0447\u0438\u0442\u044C \u043F\u0440\u0438\u0433\u043B\u0430\u0441\u0438\u0442\u0435\u043B\u044C\u043D\u044B\u0439")]),_:1})]),_:1})],64)):d("",!0),e.Announce.pay===3?(o(),_(w,{key:1},[t(f,{avatar:""},{default:n(()=>[t(C,{name:"shopping_cart"})]),_:1}),t(f,null,{default:n(()=>[t(x,null,{default:n(()=>[s("\u041A\u0443\u043F\u0438\u0442\u044C \u0431\u0438\u043B\u0435\u0442")]),_:1}),t(x,{caption:""},{default:n(()=>[s("+ \u0414\u043E\u0441\u0442\u0443\u043F\u043D\u043E \u043F\u043E \u043F\u0443\u0448\u043A\u0438\u043D\u0441\u043A\u043E\u0439 \u043A\u0430\u0440\u0442\u0435")]),_:1})]),_:1})],64)):d("",!0)]),_:1},8,["href"])):(o(),_(w,{key:1},[s(B(j()),1)],64))]),_:1})],64)):d("",!0),t(I,{inset:""}),t(g,{class:"text-body2 text-center"},{default:n(()=>[s(" \u0425\u0443\u0434\u043E\u0436\u0435\u0441\u0442\u0432\u0435\u043D\u043D\u044B\u0439 \u0440\u0443\u043A\u043E\u0432\u043E\u0434\u0438\u0442\u0435\u043B\u044C \u0438 \u0433\u043B\u0430\u0432\u043D\u044B\u0439 \u0434\u0438\u0440\u0438\u0436\u0435\u0440 - "),_e,s(". ")]),_:1}),p(A)?(o(),_(w,{key:2},[t(g,null,{default:n(()=>[t(le,{modelValue:y.value.isShow,"onUpdate:modelValue":[l[1]||(l[1]=h=>y.value.isShow=h),l[2]||(l[2]=h=>F())],label:"\u0432\u043A\u043B",color:"green","checked-icon":"check","unchecked-icon":"clear"},{default:n(()=>[t(ie,null,{default:n(()=>[s("\u041E\u043F\u0443\u0431\u043B\u0438\u043A\u043E\u0432\u0430\u0442\u044C")]),_:1})]),_:1},8,["modelValue"])]),_:1}),t(g,null,{default:n(()=>[t(me,{onOnOk:R,label:"\u0423\u0434\u0430\u043B\u0438\u0442\u044C",color:"red",title:"\u0423\u0434\u0430\u043B\u0435\u043D\u0438\u0435 \u0430\u043D\u043E\u043D\u0441\u0430",message:`
          \u0411\u0443\u0434\u0435\u0442 \u0443\u0434\u0430\u043B\u0435\u043D\u0430 \u0437\u0430\u043F\u0438\u0441\u044C \u043E\u0431 \u0430\u043D\u043E\u043D\u0441\u0435 \u0438 \u0441\u0432\u044F\u0437\u0430\u043D\u043D\u044B\u0435 \u0441 \u043D\u0435\u0439 \u0438\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u044F.
          <br><span style='color: red'>
          \u042D\u0442\u043E \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0435 \u043D\u0435\u043B\u044C\u0437\u044F \u043E\u0442\u043C\u0435\u043D\u0438\u0442\u044C.</span><br>
          \u0412\u044B \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0442\u0435\u043B\u044C\u043D\u043E \u0445\u043E\u0442\u0438\u0442\u0435 \u044D\u0442\u043E \u0441\u0434\u0435\u043B\u0430\u0442\u044C?`})]),_:1})],64)):d("",!0)],64))]),_:1})):d("",!0)}}};var Le=se(we,[["__scopeId","data-v-40ea9e79"]]);export{Le as A};
