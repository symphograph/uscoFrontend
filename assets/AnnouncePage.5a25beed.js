import{u as fn}from"./use-meta.0cc844c3.js";import{u as Dt}from"./use-quasar.0da6ace5.js";import{api as _t}from"./axios.379fe993.js";import{Q as mn}from"./QImg.ea656cfd.js";import{_ as wt,i as _e,s as M,f as de,g as Be,A as q,h as U,J as V,aw as Yt,c as Pe,a4 as J,F as Ut,D as Pt,E as Bt,bc as Qt,bd as hn,G as kt,b5 as Lt,ak as Zt,am as zt,be as Kt,r as P,bf as gn,w as pe,H as h,ar as Ee,I as Rt,L as xt,bg as Wt,W as pt,bh as yn,bb as _n,aH as pn,aU as Mn,a7 as Mt,z as ge,a_ as Ue,a3 as qt,u as Xt,d as bn,j as st,p as Dn,a as wn}from"./index.b8d12845.js";import{d as kn,b as ht,n as rt}from"./myFuncts.24341304.js";import{Q as Ht}from"./QUploader.a5324832.js";import{Q as Vt}from"./QSelect.d300b8a5.js";import{u as xn}from"./use-cache.b0833c75.js";import{p as I}from"./format.3e32b8d9.js";import{Q as Sn}from"./rtl.776ae730.js";import{u as Cn,c as Yn}from"./position-engine.1d6b4e98.js";import{T as qn,C as It}from"./ClosePopup.d11191ec.js";import{A as Hn}from"./AnnounceCard.cda4726a.js";import"./use-ratio.cba3b1d0.js";import"./jwt-decode.esm.74bd4619.js";import"./get-emits-object.24798346.js";import"./QItemSection.b84b5ac1.js";import"./touch.3df10340.js";import"./QTooltip.268d03bc.js";const ue=e=>(Pt("data-v-a62d9886"),e=e(),Bt(),e),Vn={class:"eventbox"},In={class:"eventboxin"},On={class:"text"},$n={key:0},An=ue(()=>q("br",null,null,-1)),Tn=ue(()=>q("br",null,null,-1)),jn=["innerHTML"],Fn=ue(()=>q("br",null,null,-1)),Nn=ue(()=>q("small",null," \u0423\u0432\u0430\u0436\u0430\u0435\u043C\u044B\u0435 \u043F\u043E\u0441\u0435\u0442\u0438\u0442\u0435\u043B\u0438, \u0443\u0431\u0435\u0434\u0438\u0442\u0435\u043B\u044C\u043D\u0430\u044F \u043F\u0440\u043E\u0441\u044C\u0431\u0430 \u0441\u043E\u0431\u043B\u044E\u0434\u0430\u0442\u044C \u043C\u0435\u0440\u044B \u0431\u0435\u0437\u043E\u043F\u0430\u0441\u043D\u043E\u0441\u0442\u0438 \u0432 \u0441\u0432\u044F\u0437\u0438 \u0441 \u0440\u0430\u0441\u043F\u0440\u043E\u0441\u0442\u0440\u0430\u043D\u0435\u043D\u0438\u0435\u043C \u043A\u043E\u0440\u043E\u043D\u0430\u0432\u0438\u0440\u0443\u0441\u043D\u043E\u0439 \u0438\u043D\u0444\u0435\u043A\u0446\u0438\u0438! ",-1)),En=ue(()=>q("br",null,null,-1)),Un=ue(()=>q("br",null,null,-1)),Pn=ue(()=>q("p",null,"\u0421\u043F\u0440\u0430\u0432\u043A\u0438 \u043F\u043E \u0442\u0435\u043B:",-1)),Bn=ue(()=>q("div",{class:"tel"},[q("a",{href:"tel:+74242300518"},"+7-4242-300-518")],-1)),Qn=ue(()=>q("br",null,null,-1)),Ln=ue(()=>q("div",{class:"tel"},[q("a",{href:"tel:+79624163689"},"+7-962-416-36-89")],-1)),Zn=ue(()=>q("br",null,null,-1)),zn={__name:"AnnounceDescr",setup(e){const o=String("https://api.sakh-orch.ru/"),d=Dt(),r=_e("Announce"),v=M(()=>{let g=d.platform.is.mobile?1080:480;return o+"/img/posters/poster/"+g+"/poster_"+r.value.id+".jpg?ver="+r.value.verString});function s(){return"https://vk.com/share.php?url="+o+"/event.php?evid="+String(r.value.id)+"&title="+String(r.value.progName)+"&noparse=true&image="+String(v)}return(g,i)=>(de(),Be(Ut,null,[q("div",Vn,[U(mn,{src:v.value},null,8,["src"])]),q("div",In,[q("div",On,[V(r).progName?(de(),Be("p",$n,[q("b",null,Yt(V(r).progName),1)])):Pe("",!0),An,q("p",null,[q("b",null,Yt(V(kn)(V(r).eventTime)),1)]),Tn,q("div",{innerHTML:V(r).description},null,8,jn),Fn,Nn,En,Un,Pn,Bn,Qn,Ln,Zn,U(J,{href:s(),target:"_blank",color:"primary",icon:"ion-logo-vk",label:"\u041F\u043E\u0434\u0435\u043B\u0438\u0442\u044C\u0441\u044F"},null,8,["href"])])])],64))}};var Kn=wt(zn,[["__scopeId","data-v-a62d9886"]]);const Me=[-61,9,38,199,426,686,756,818,1111,1181,1210,1635,2060,2097,2192,2262,2324,2394,2456,3178];function Rn(e,o,d){return Object.prototype.toString.call(e)==="[object Date]"&&(d=e.getDate(),o=e.getMonth()+1,e=e.getFullYear()),Gn(St(e,o,d))}function Ot(e,o,d){return Gt(Jn(e,o,d))}function Wn(e){return Xn(e)===0}function it(e,o){return o<=6?31:o<=11||Wn(e)?30:29}function Xn(e){const o=Me.length;let d=Me[0],r,v,s,g,i;if(e<d||e>=Me[o-1])throw new Error("Invalid Jalaali year "+e);for(i=1;i<o&&(r=Me[i],v=r-d,!(e<r));i+=1)d=r;return g=e-d,v-g<6&&(g=g-v+N(v+4,33)*33),s=ae(ae(g+1,33)-1,4),s===-1&&(s=4),s}function Jt(e,o){const d=Me.length,r=e+621;let v=-14,s=Me[0],g,i,_,b,y;if(e<s||e>=Me[d-1])throw new Error("Invalid Jalaali year "+e);for(y=1;y<d&&(g=Me[y],i=g-s,!(e<g));y+=1)v=v+N(i,33)*8+N(ae(i,33),4),s=g;b=e-s,v=v+N(b,33)*8+N(ae(b,33)+3,4),ae(i,33)===4&&i-b===4&&(v+=1);const x=N(r,4)-N((N(r,100)+1)*3,4)-150,K=20+v-x;return o||(i-b<6&&(b=b-i+N(i+4,33)*33),_=ae(ae(b+1,33)-1,4),_===-1&&(_=4)),{leap:_,gy:r,march:K}}function Jn(e,o,d){const r=Jt(e,!0);return St(r.gy,3,r.march)+(o-1)*31-N(o,7)*(o-7)+d-1}function Gn(e){const o=Gt(e).gy;let d=o-621,r,v,s;const g=Jt(d,!1),i=St(o,3,g.march);if(s=e-i,s>=0){if(s<=185)return v=1+N(s,31),r=ae(s,31)+1,{jy:d,jm:v,jd:r};s-=186}else d-=1,s+=179,g.leap===1&&(s+=1);return v=7+N(s,30),r=ae(s,30)+1,{jy:d,jm:v,jd:r}}function St(e,o,d){let r=N((e+N(o-8,6)+100100)*1461,4)+N(153*ae(o+9,12)+2,5)+d-34840408;return r=r-N(N(e+100100+N(o-8,6),100)*3,4)+752,r}function Gt(e){let o=4*e+139361631;o=o+N(N(4*e+183187720,146097)*3,4)*4-3908;const d=N(ae(o,1461),4)*5+308,r=N(ae(d,153),5)+1,v=ae(N(d,153),12)+1;return{gy:N(o,1461)-100100+N(8-v,6),gm:v,gd:r}}function N(e,o){return~~(e/o)}function ae(e,o){return e-~~(e/o)*o}const ea=["gregorian","persian"],en={modelValue:{required:!0},mask:{type:String},locale:Object,calendar:{type:String,validator:e=>ea.includes(e),default:"gregorian"},landscape:Boolean,color:String,textColor:String,square:Boolean,flat:Boolean,bordered:Boolean,readonly:Boolean,disable:Boolean},tn=["update:modelValue"];function fe(e){return e.year+"/"+I(e.month)+"/"+I(e.day)}function nn(e,o){const d=M(()=>e.disable!==!0&&e.readonly!==!0),r=M(()=>d.value===!0?0:-1),v=M(()=>{const i=[];return e.color!==void 0&&i.push(`bg-${e.color}`),e.textColor!==void 0&&i.push(`text-${e.textColor}`),i.join(" ")});function s(){return e.locale!==void 0?{...o.lang.date,...e.locale}:o.lang.date}function g(i){const _=new Date,b=i===!0?null:0;if(e.calendar==="persian"){const y=Rn(_);return{year:y.jy,month:y.jm,day:y.jd}}return{year:_.getFullYear(),month:_.getMonth()+1,day:_.getDate(),hour:b,minute:b,second:b,millisecond:b}}return{editable:d,tabindex:r,headerClass:v,getLocale:s,getCurrentDate:g}}const an=864e5,ta=36e5,bt=6e4,ln="YYYY-MM-DDTHH:mm:ss.SSSZ",na=/\[((?:[^\]\\]|\\]|\\)*)\]|d{1,4}|M{1,4}|m{1,2}|w{1,2}|Qo|Do|D{1,4}|YY(?:YY)?|H{1,2}|h{1,2}|s{1,2}|S{1,3}|Z{1,2}|a{1,2}|[AQExX]/g,aa=/(\[[^\]]*\])|d{1,4}|M{1,4}|m{1,2}|w{1,2}|Qo|Do|D{1,4}|YY(?:YY)?|H{1,2}|h{1,2}|s{1,2}|S{1,3}|Z{1,2}|a{1,2}|[AQExX]|([.*+:?^,\s${}()|\\]+)/g,gt={};function la(e,o){const d="("+o.days.join("|")+")",r=e+d;if(gt[r]!==void 0)return gt[r];const v="("+o.daysShort.join("|")+")",s="("+o.months.join("|")+")",g="("+o.monthsShort.join("|")+")",i={};let _=0;const b=e.replace(aa,x=>{switch(_++,x){case"YY":return i.YY=_,"(-?\\d{1,2})";case"YYYY":return i.YYYY=_,"(-?\\d{1,4})";case"M":return i.M=_,"(\\d{1,2})";case"MM":return i.M=_,"(\\d{2})";case"MMM":return i.MMM=_,g;case"MMMM":return i.MMMM=_,s;case"D":return i.D=_,"(\\d{1,2})";case"Do":return i.D=_++,"(\\d{1,2}(st|nd|rd|th))";case"DD":return i.D=_,"(\\d{2})";case"H":return i.H=_,"(\\d{1,2})";case"HH":return i.H=_,"(\\d{2})";case"h":return i.h=_,"(\\d{1,2})";case"hh":return i.h=_,"(\\d{2})";case"m":return i.m=_,"(\\d{1,2})";case"mm":return i.m=_,"(\\d{2})";case"s":return i.s=_,"(\\d{1,2})";case"ss":return i.s=_,"(\\d{2})";case"S":return i.S=_,"(\\d{1})";case"SS":return i.S=_,"(\\d{2})";case"SSS":return i.S=_,"(\\d{3})";case"A":return i.A=_,"(AM|PM)";case"a":return i.a=_,"(am|pm)";case"aa":return i.aa=_,"(a\\.m\\.|p\\.m\\.)";case"ddd":return v;case"dddd":return d;case"Q":case"d":case"E":return"(\\d{1})";case"Qo":return"(1st|2nd|3rd|4th)";case"DDD":case"DDDD":return"(\\d{1,3})";case"w":return"(\\d{1,2})";case"ww":return"(\\d{2})";case"Z":return i.Z=_,"(Z|[+-]\\d{2}:\\d{2})";case"ZZ":return i.ZZ=_,"(Z|[+-]\\d{2}\\d{2})";case"X":return i.X=_,"(-?\\d+)";case"x":return i.x=_,"(-?\\d{4,})";default:return _--,x[0]==="["&&(x=x.substring(1,x.length-1)),x.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}}),y={map:i,regex:new RegExp("^"+b)};return gt[r]=y,y}function on(e,o){return e!==void 0?e:o!==void 0?o.date:hn.date}function $t(e,o=""){const d=e>0?"-":"+",r=Math.abs(e),v=Math.floor(r/60),s=r%60;return d+I(v)+o+I(s)}function We(e,o,d,r,v){const s={year:null,month:null,day:null,hour:null,minute:null,second:null,millisecond:null,timezoneOffset:null,dateHash:null,timeHash:null};if(v!==void 0&&Object.assign(s,v),e==null||e===""||typeof e!="string")return s;o===void 0&&(o=ln);const g=on(d,Qt.props),i=g.months,_=g.monthsShort,{regex:b,map:y}=la(o,g),x=e.match(b);if(x===null)return s;let K="";if(y.X!==void 0||y.x!==void 0){const Q=parseInt(x[y.X!==void 0?y.X:y.x],10);if(isNaN(Q)===!0||Q<0)return s;const Z=new Date(Q*(y.X!==void 0?1e3:1));s.year=Z.getFullYear(),s.month=Z.getMonth()+1,s.day=Z.getDate(),s.hour=Z.getHours(),s.minute=Z.getMinutes(),s.second=Z.getSeconds(),s.millisecond=Z.getMilliseconds()}else{if(y.YYYY!==void 0)s.year=parseInt(x[y.YYYY],10);else if(y.YY!==void 0){const Q=parseInt(x[y.YY],10);s.year=Q<0?Q:2e3+Q}if(y.M!==void 0){if(s.month=parseInt(x[y.M],10),s.month<1||s.month>12)return s}else y.MMM!==void 0?s.month=_.indexOf(x[y.MMM])+1:y.MMMM!==void 0&&(s.month=i.indexOf(x[y.MMMM])+1);if(y.D!==void 0){if(s.day=parseInt(x[y.D],10),s.year===null||s.month===null||s.day<1)return s;const Q=r!=="persian"?new Date(s.year,s.month,0).getDate():it(s.year,s.month);if(s.day>Q)return s}y.H!==void 0?s.hour=parseInt(x[y.H],10)%24:y.h!==void 0&&(s.hour=parseInt(x[y.h],10)%12,(y.A&&x[y.A]==="PM"||y.a&&x[y.a]==="pm"||y.aa&&x[y.aa]==="p.m.")&&(s.hour+=12),s.hour=s.hour%24),y.m!==void 0&&(s.minute=parseInt(x[y.m],10)%60),y.s!==void 0&&(s.second=parseInt(x[y.s],10)%60),y.S!==void 0&&(s.millisecond=parseInt(x[y.S],10)*10**(3-x[y.S].length)),(y.Z!==void 0||y.ZZ!==void 0)&&(K=y.Z!==void 0?x[y.Z].replace(":",""):x[y.ZZ],s.timezoneOffset=(K[0]==="+"?-1:1)*(60*K.slice(1,3)+1*K.slice(3,5)))}return s.dateHash=I(s.year,6)+"/"+I(s.month)+"/"+I(s.day),s.timeHash=I(s.hour)+":"+I(s.minute)+":"+I(s.second)+K,s}function At(e){const o=new Date(e.getFullYear(),e.getMonth(),e.getDate());o.setDate(o.getDate()-(o.getDay()+6)%7+3);const d=new Date(o.getFullYear(),0,4);d.setDate(d.getDate()-(d.getDay()+6)%7+3);const r=o.getTimezoneOffset()-d.getTimezoneOffset();o.setHours(o.getHours()-r);const v=(o-d)/(an*7);return 1+Math.floor(v)}function me(e,o,d){const r=new Date(e),v=`set${d===!0?"UTC":""}`;switch(o){case"year":case"years":r[`${v}Month`](0);case"month":case"months":r[`${v}Date`](1);case"day":case"days":case"date":r[`${v}Hours`](0);case"hour":case"hours":r[`${v}Minutes`](0);case"minute":case"minutes":r[`${v}Seconds`](0);case"second":case"seconds":r[`${v}Milliseconds`](0)}return r}function ut(e,o,d){return(e.getTime()-e.getTimezoneOffset()*bt-(o.getTime()-o.getTimezoneOffset()*bt))/d}function un(e,o,d="days"){const r=new Date(e),v=new Date(o);switch(d){case"years":case"year":return r.getFullYear()-v.getFullYear();case"months":case"month":return(r.getFullYear()-v.getFullYear())*12+r.getMonth()-v.getMonth();case"days":case"day":case"date":return ut(me(r,"day"),me(v,"day"),an);case"hours":case"hour":return ut(me(r,"hour"),me(v,"hour"),ta);case"minutes":case"minute":return ut(me(r,"minute"),me(v,"minute"),bt);case"seconds":case"second":return ut(me(r,"second"),me(v,"second"),1e3)}}function Tt(e){return un(e,me(e,"year"),"days")+1}function jt(e){if(e>=11&&e<=13)return`${e}th`;switch(e%10){case 1:return`${e}st`;case 2:return`${e}nd`;case 3:return`${e}rd`}return`${e}th`}const Ft={YY(e,o,d){const r=this.YYYY(e,o,d)%100;return r>=0?I(r):"-"+I(Math.abs(r))},YYYY(e,o,d){return d!=null?d:e.getFullYear()},M(e){return e.getMonth()+1},MM(e){return I(e.getMonth()+1)},MMM(e,o){return o.monthsShort[e.getMonth()]},MMMM(e,o){return o.months[e.getMonth()]},Q(e){return Math.ceil((e.getMonth()+1)/3)},Qo(e){return jt(this.Q(e))},D(e){return e.getDate()},Do(e){return jt(e.getDate())},DD(e){return I(e.getDate())},DDD(e){return Tt(e)},DDDD(e){return I(Tt(e),3)},d(e){return e.getDay()},dd(e,o){return this.dddd(e,o).slice(0,2)},ddd(e,o){return o.daysShort[e.getDay()]},dddd(e,o){return o.days[e.getDay()]},E(e){return e.getDay()||7},w(e){return At(e)},ww(e){return I(At(e))},H(e){return e.getHours()},HH(e){return I(e.getHours())},h(e){const o=e.getHours();return o===0?12:o>12?o%12:o},hh(e){return I(this.h(e))},m(e){return e.getMinutes()},mm(e){return I(e.getMinutes())},s(e){return e.getSeconds()},ss(e){return I(e.getSeconds())},S(e){return Math.floor(e.getMilliseconds()/100)},SS(e){return I(Math.floor(e.getMilliseconds()/10))},SSS(e){return I(e.getMilliseconds(),3)},A(e){return this.H(e)<12?"AM":"PM"},a(e){return this.H(e)<12?"am":"pm"},aa(e){return this.H(e)<12?"a.m.":"p.m."},Z(e,o,d,r){const v=r==null?e.getTimezoneOffset():r;return $t(v,":")},ZZ(e,o,d,r){const v=r==null?e.getTimezoneOffset():r;return $t(v)},X(e){return Math.floor(e.getTime()/1e3)},x(e){return e.getTime()}};function rn(e,o,d,r,v){if(e!==0&&!e||e===1/0||e===-1/0)return;const s=new Date(e);if(isNaN(s))return;o===void 0&&(o=ln);const g=on(d,Qt.props);return o.replace(na,(i,_)=>i in Ft?Ft[i](s,g,r,v):_===void 0?i:_.split("\\]").join("]"))}const Ye=20,oa=["Calendar","Years","Months"],Nt=e=>oa.includes(e),yt=e=>/^-?[\d]+\/[0-1]\d$/.test(e),Ne=" \u2014 ";function ye(e){return e.year+"/"+I(e.month)}var ua=kt({name:"QDate",props:{...en,...Lt,...Zt,multiple:Boolean,range:Boolean,title:String,subtitle:String,mask:{default:"YYYY/MM/DD"},defaultYearMonth:{type:String,validator:yt},yearsInMonthView:Boolean,events:[Array,Function],eventColor:[String,Function],emitImmediately:Boolean,options:[Array,Function],navigationMinYearMonth:{type:String,validator:yt},navigationMaxYearMonth:{type:String,validator:yt},noUnset:Boolean,firstDayOfWeek:[String,Number],todayBtn:Boolean,minimal:Boolean,defaultView:{type:String,default:"Calendar",validator:Nt}},emits:[...tn,"rangeStart","rangeEnd","navigation"],setup(e,{slots:o,emit:d}){const{proxy:r}=xt(),{$q:v}=r,s=zt(e,v),{getCache:g}=xn(),{tabindex:i,headerClass:_,getLocale:b,getCurrentDate:y}=nn(e,v);let x;const K=Kt(e),Q=Wt(K),Z=P(null),T=P(Te()),j=P(b()),De=M(()=>Te()),ce=M(()=>b()),S=M(()=>y()),u=P(lt(T.value,j.value)),O=P(e.defaultView),qe=v.lang.rtl===!0?"right":"left",re=P(qe.value),R=P(qe.value),$=u.value.year,k=P($-$%Ye-($<0?Ye:0)),w=P(null),X=M(()=>{const t=e.landscape===!0?"landscape":"portrait";return`q-date q-date--${t} q-date--${t}-${e.minimal===!0?"minimal":"standard"}`+(s.value===!0?" q-date--dark q-dark":"")+(e.bordered===!0?" q-date--bordered":"")+(e.square===!0?" q-date--square no-border-radius":"")+(e.flat===!0?" q-date--flat no-shadow":"")+(e.disable===!0?" disabled":e.readonly===!0?" q-date--readonly":"")}),G=M(()=>e.color||"primary"),le=M(()=>e.textColor||"white"),ee=M(()=>e.emitImmediately===!0&&e.multiple!==!0&&e.range!==!0),ve=M(()=>Array.isArray(e.modelValue)===!0?e.modelValue:e.modelValue!==null&&e.modelValue!==void 0?[e.modelValue]:[]),W=M(()=>ve.value.filter(t=>typeof t=="string").map(t=>Ke(t,T.value,j.value)).filter(t=>t.dateHash!==null&&t.day!==null&&t.month!==null&&t.year!==null)),oe=M(()=>{const t=n=>Ke(n,T.value,j.value);return ve.value.filter(n=>gn(n)===!0&&n.from!==void 0&&n.to!==void 0).map(n=>({from:t(n.from),to:t(n.to)})).filter(n=>n.from.dateHash!==null&&n.to.dateHash!==null&&n.from.dateHash<n.to.dateHash)}),He=M(()=>e.calendar!=="persian"?t=>new Date(t.year,t.month-1,t.day):t=>{const n=Ot(t.year,t.month,t.day);return new Date(n.gy,n.gm-1,n.gd)}),Qe=M(()=>e.calendar==="persian"?fe:(t,n,a)=>rn(new Date(t.year,t.month-1,t.day,t.hour,t.minute,t.second,t.millisecond),n===void 0?T.value:n,a===void 0?j.value:a,t.year,t.timezoneOffset)),he=M(()=>W.value.length+oe.value.reduce((t,n)=>t+1+un(He.value(n.to),He.value(n.from)),0)),we=M(()=>{if(e.title!==void 0&&e.title!==null&&e.title.length!==0)return e.title;if(w.value!==null){const a=w.value.init,f=He.value(a);return j.value.daysShort[f.getDay()]+", "+j.value.monthsShort[a.month-1]+" "+a.day+Ne+"?"}if(he.value===0)return Ne;if(he.value>1)return`${he.value} ${j.value.pluralDay}`;const t=W.value[0],n=He.value(t);return isNaN(n.valueOf())===!0?Ne:j.value.headerTitle!==void 0?j.value.headerTitle(n,t):j.value.daysShort[n.getDay()]+", "+j.value.monthsShort[t.month-1]+" "+t.day}),Xe=M(()=>W.value.concat(oe.value.map(n=>n.from)).sort((n,a)=>n.year-a.year||n.month-a.month)[0]),Le=M(()=>W.value.concat(oe.value.map(n=>n.to)).sort((n,a)=>a.year-n.year||a.month-n.month)[0]),Je=M(()=>{if(e.subtitle!==void 0&&e.subtitle!==null&&e.subtitle.length!==0)return e.subtitle;if(he.value===0)return Ne;if(he.value>1){const t=Xe.value,n=Le.value,a=j.value.monthsShort;return a[t.month-1]+(t.year!==n.year?" "+t.year+Ne+a[n.month-1]+" ":t.month!==n.month?Ne+a[n.month-1]:"")+" "+n.year}return W.value[0].year}),Ve=M(()=>{const t=[v.iconSet.datetime.arrowLeft,v.iconSet.datetime.arrowRight];return v.lang.rtl===!0?t.reverse():t}),Ie=M(()=>e.firstDayOfWeek!==void 0?Number(e.firstDayOfWeek):j.value.firstDayOfWeek),Ze=M(()=>{const t=j.value.daysShort,n=Ie.value;return n>0?t.slice(n,7).concat(t.slice(0,n)):t}),ie=M(()=>{const t=u.value;return e.calendar!=="persian"?new Date(t.year,t.month,0).getDate():it(t.year,t.month)}),Ge=M(()=>typeof e.eventColor=="function"?e.eventColor:()=>e.eventColor),L=M(()=>{if(e.navigationMinYearMonth===void 0)return null;const t=e.navigationMinYearMonth.split("/");return{year:parseInt(t[0],10),month:parseInt(t[1],10)}}),z=M(()=>{if(e.navigationMaxYearMonth===void 0)return null;const t=e.navigationMaxYearMonth.split("/");return{year:parseInt(t[0],10),month:parseInt(t[1],10)}}),ze=M(()=>{const t={month:{prev:!0,next:!0},year:{prev:!0,next:!0}};return L.value!==null&&L.value.year>=u.value.year&&(t.year.prev=!1,L.value.year===u.value.year&&L.value.month>=u.value.month&&(t.month.prev=!1)),z.value!==null&&z.value.year<=u.value.year&&(t.year.next=!1,z.value.year===u.value.year&&z.value.month<=u.value.month&&(t.month.next=!1)),t}),Oe=M(()=>{const t={};return W.value.forEach(n=>{const a=ye(n);t[a]===void 0&&(t[a]=[]),t[a].push(n.day)}),t}),et=M(()=>{const t={};return oe.value.forEach(n=>{const a=ye(n.from),f=ye(n.to);if(t[a]===void 0&&(t[a]=[]),t[a].push({from:n.from.day,to:a===f?n.to.day:void 0,range:n}),a<f){let m;const{year:A,month:p}=n.from,Y=p<12?{year:A,month:p+1}:{year:A+1,month:1};for(;(m=ye(Y))<=f;)t[m]===void 0&&(t[m]=[]),t[m].push({from:void 0,to:m===f?n.to.day:void 0,range:n}),Y.month++,Y.month>12&&(Y.year++,Y.month=1)}}),t}),ke=M(()=>{if(w.value===null)return;const{init:t,initHash:n,final:a,finalHash:f}=w.value,[m,A]=n<=f?[t,a]:[a,t],p=ye(m),Y=ye(A);if(p!==te.value&&Y!==te.value)return;const F={};return p===te.value?(F.from=m.day,F.includeFrom=!0):F.from=1,Y===te.value?(F.to=A.day,F.includeTo=!0):F.to=ie.value,F}),te=M(()=>ye(u.value)),dt=M(()=>{const t={};if(e.options===void 0){for(let a=1;a<=ie.value;a++)t[a]=!0;return t}const n=typeof e.options=="function"?e.options:a=>e.options.includes(a);for(let a=1;a<=ie.value;a++){const f=te.value+"/"+I(a);t[a]=n(f)}return t}),ct=M(()=>{const t={};if(e.events===void 0)for(let n=1;n<=ie.value;n++)t[n]=!1;else{const n=typeof e.events=="function"?e.events:a=>e.events.includes(a);for(let a=1;a<=ie.value;a++){const f=te.value+"/"+I(a);t[a]=n(f)===!0&&Ge.value(f)}}return t}),$e=M(()=>{let t,n;const{year:a,month:f}=u.value;if(e.calendar!=="persian")t=new Date(a,f-1,1),n=new Date(a,f-1,0).getDate();else{const m=Ot(a,f,1);t=new Date(m.gy,m.gm-1,m.gd);let A=f-1,p=a;A===0&&(A=12,p--),n=it(p,A)}return{days:t.getDay()-Ie.value-1,endDay:n}}),xe=M(()=>{const t=[],{days:n,endDay:a}=$e.value,f=n<0?n+7:n;if(f<6)for(let p=a-f;p<=a;p++)t.push({i:p,fill:!0});const m=t.length;for(let p=1;p<=ie.value;p++){const Y={i:p,event:ct.value[p],classes:[]};dt.value[p]===!0&&(Y.in=!0,Y.flat=!0),t.push(Y)}if(Oe.value[te.value]!==void 0&&Oe.value[te.value].forEach(p=>{const Y=m+p-1;Object.assign(t[Y],{selected:!0,unelevated:!0,flat:!1,color:G.value,textColor:le.value})}),et.value[te.value]!==void 0&&et.value[te.value].forEach(p=>{if(p.from!==void 0){const Y=m+p.from-1,F=m+(p.to||ie.value)-1;for(let Re=Y;Re<=F;Re++)Object.assign(t[Re],{range:p.range,unelevated:!0,color:G.value,textColor:le.value});Object.assign(t[Y],{rangeFrom:!0,flat:!1}),p.to!==void 0&&Object.assign(t[F],{rangeTo:!0,flat:!1})}else if(p.to!==void 0){const Y=m+p.to-1;for(let F=m;F<=Y;F++)Object.assign(t[F],{range:p.range,unelevated:!0,color:G.value,textColor:le.value});Object.assign(t[Y],{flat:!1,rangeTo:!0})}else{const Y=m+ie.value-1;for(let F=m;F<=Y;F++)Object.assign(t[F],{range:p.range,unelevated:!0,color:G.value,textColor:le.value})}}),ke.value!==void 0){const p=m+ke.value.from-1,Y=m+ke.value.to-1;for(let F=p;F<=Y;F++)t[F].color=G.value,t[F].editRange=!0;ke.value.includeFrom===!0&&(t[p].editRangeFrom=!0),ke.value.includeTo===!0&&(t[Y].editRangeTo=!0)}u.value.year===S.value.year&&u.value.month===S.value.month&&(t[m+S.value.day-1].today=!0);const A=t.length%7;if(A>0){const p=7-A;for(let Y=1;Y<=p;Y++)t.push({i:Y,fill:!0})}return t.forEach(p=>{let Y="q-date__calendar-item ";p.fill===!0?Y+="q-date__calendar-item--fill":(Y+=`q-date__calendar-item--${p.in===!0?"in":"out"}`,p.range!==void 0&&(Y+=` q-date__range${p.rangeTo===!0?"-to":p.rangeFrom===!0?"-from":""}`),p.editRange===!0&&(Y+=` q-date__edit-range${p.editRangeFrom===!0?"-from":""}${p.editRangeTo===!0?"-to":""}`),(p.range!==void 0||p.editRange===!0)&&(Y+=` text-${p.color}`)),p.classes=Y}),t}),Ae=M(()=>e.disable===!0?{"aria-disabled":"true"}:{});pe(()=>e.modelValue,t=>{if(x===t)x=0;else{const n=lt(T.value,j.value);B(n.year,n.month,n)}}),pe(O,()=>{Z.value!==null&&r.$el.contains(document.activeElement)===!0&&Z.value.focus()}),pe(()=>u.value.year+"|"+u.value.month,()=>{d("navigation",{year:u.value.year,month:u.value.month})}),pe(De,t=>{Ct(t,j.value,"mask"),T.value=t}),pe(ce,t=>{Ct(T.value,t,"locale"),j.value=t});function tt(){const{year:t,month:n,day:a}=S.value,f={...u.value,year:t,month:n,day:a},m=Oe.value[ye(f)];(m===void 0||m.includes(f.day)===!1)&&vt(f),Se(f.year,f.month)}function nt(t){Nt(t)===!0&&(O.value=t)}function at(t,n){["month","year"].includes(t)&&(t==="month"?c:D)(n===!0?-1:1)}function Se(t,n){O.value="Calendar",B(t,n)}function Ce(t,n){if(e.range===!1||!t){w.value=null;return}const a=Object.assign({...u.value},t),f=n!==void 0?Object.assign({...u.value},n):a;w.value={init:a,initHash:fe(a),final:f,finalHash:fe(f)},Se(a.year,a.month)}function Te(){return e.calendar==="persian"?"YYYY/MM/DD":e.mask}function Ke(t,n,a){return We(t,n,a,e.calendar,{hour:0,minute:0,second:0,millisecond:0})}function lt(t,n){const a=Array.isArray(e.modelValue)===!0?e.modelValue:e.modelValue?[e.modelValue]:[];if(a.length===0)return l();const f=a[a.length-1],m=Ke(f.from!==void 0?f.from:f,t,n);return m.dateHash===null?l():m}function l(){let t,n;if(e.defaultYearMonth!==void 0){const a=e.defaultYearMonth.split("/");t=parseInt(a[0],10),n=parseInt(a[1],10)}else{const a=S.value!==void 0?S.value:y();t=a.year,n=a.month}return{year:t,month:n,day:1,hour:0,minute:0,second:0,millisecond:0,dateHash:t+"/"+I(n)+"/01"}}function c(t){let n=u.value.year,a=Number(u.value.month)+t;a===13?(a=1,n++):a===0&&(a=12,n--),B(n,a),ee.value===!0&&je("month")}function D(t){const n=Number(u.value.year)+t;B(n,u.value.month),ee.value===!0&&je("year")}function H(t){B(t,u.value.month),O.value=e.defaultView==="Years"?"Months":"Calendar",ee.value===!0&&je("year")}function E(t){B(u.value.year,t),O.value="Calendar",ee.value===!0&&je("month")}function ne(t,n){const a=Oe.value[n];(a!==void 0&&a.includes(t.day)===!0?ft:vt)(t)}function C(t){return{year:t.year,month:t.month,day:t.day}}function B(t,n,a){if(L.value!==null&&t<=L.value.year&&((n<L.value.month||t<L.value.year)&&(n=L.value.month),t=L.value.year),z.value!==null&&t>=z.value.year&&((n>z.value.month||t>z.value.year)&&(n=z.value.month),t=z.value.year),a!==void 0){const{hour:m,minute:A,second:p,millisecond:Y,timezoneOffset:F,timeHash:Re}=a;Object.assign(u.value,{hour:m,minute:A,second:p,millisecond:Y,timezoneOffset:F,timeHash:Re})}const f=t+"/"+I(n)+"/01";f!==u.value.dateHash&&(re.value=u.value.dateHash<f==(v.lang.rtl!==!0)?"left":"right",t!==u.value.year&&(R.value=re.value),pt(()=>{k.value=t-t%Ye-(t<0?Ye:0),Object.assign(u.value,{year:t,month:n,day:1,dateHash:f})}))}function se(t,n,a){const f=t!==null&&t.length===1&&e.multiple===!1?t[0]:t;x=f;const{reason:m,details:A}=ot(n,a);d("update:modelValue",f,m,A)}function je(t){const n=W.value[0]!==void 0&&W.value[0].dateHash!==null?{...W.value[0]}:{...u.value};pt(()=>{n.year=u.value.year,n.month=u.value.month;const a=e.calendar!=="persian"?new Date(n.year,n.month,0).getDate():it(n.year,n.month);n.day=Math.min(Math.max(1,n.day),a);const f=Fe(n);x=f;const{details:m}=ot("",n);d("update:modelValue",f,t,m)})}function ot(t,n){return n.from!==void 0?{reason:`${t}-range`,details:{...C(n.target),from:C(n.from),to:C(n.to)}}:{reason:`${t}-day`,details:C(n)}}function Fe(t,n,a){return t.from!==void 0?{from:Qe.value(t.from,n,a),to:Qe.value(t.to,n,a)}:Qe.value(t,n,a)}function vt(t){let n;if(e.multiple===!0)if(t.from!==void 0){const a=fe(t.from),f=fe(t.to),m=W.value.filter(p=>p.dateHash<a||p.dateHash>f),A=oe.value.filter(({from:p,to:Y})=>Y.dateHash<a||p.dateHash>f);n=m.concat(A).concat(t).map(p=>Fe(p))}else{const a=ve.value.slice();a.push(Fe(t)),n=a}else n=Fe(t);se(n,"add",t)}function ft(t){if(e.noUnset===!0)return;let n=null;if(e.multiple===!0&&Array.isArray(e.modelValue)===!0){const a=Fe(t);t.from!==void 0?n=e.modelValue.filter(f=>f.from!==void 0?f.from!==a.from&&f.to!==a.to:!0):n=e.modelValue.filter(f=>f!==a),n.length===0&&(n=null)}se(n,"remove",t)}function Ct(t,n,a){const f=W.value.concat(oe.value).map(m=>Fe(m,t,n)).filter(m=>m.from!==void 0?m.from.dateHash!==null&&m.to.dateHash!==null:m.dateHash!==null);d("update:modelValue",(e.multiple===!0?f:f[0])||null,a)}function sn(){if(e.minimal!==!0)return h("div",{class:"q-date__header "+_.value},[h("div",{class:"relative-position"},[h(Ee,{name:"q-transition--fade"},()=>h("div",{key:"h-yr-"+Je.value,class:"q-date__header-subtitle q-date__header-link "+(O.value==="Years"?"q-date__header-link--active":"cursor-pointer"),tabindex:i.value,...g("vY",{onClick(){O.value="Years"},onKeyup(t){t.keyCode===13&&(O.value="Years")}})},[Je.value]))]),h("div",{class:"q-date__header-title relative-position flex no-wrap"},[h("div",{class:"relative-position col"},[h(Ee,{name:"q-transition--fade"},()=>h("div",{key:"h-sub"+we.value,class:"q-date__header-title-label q-date__header-link "+(O.value==="Calendar"?"q-date__header-link--active":"cursor-pointer"),tabindex:i.value,...g("vC",{onClick(){O.value="Calendar"},onKeyup(t){t.keyCode===13&&(O.value="Calendar")}})},[we.value]))]),e.todayBtn===!0?h(J,{class:"q-date__header-today self-start",icon:v.iconSet.datetime.today,flat:!0,size:"sm",round:!0,tabindex:i.value,onClick:tt}):null])])}function mt({label:t,type:n,key:a,dir:f,goTo:m,boundaries:A,cls:p}){return[h("div",{class:"row items-center q-date__arrow"},[h(J,{round:!0,dense:!0,size:"sm",flat:!0,icon:Ve.value[0],tabindex:i.value,disable:A.prev===!1,...g("go-#"+n,{onClick(){m(-1)}})})]),h("div",{class:"relative-position overflow-hidden flex flex-center"+p},[h(Ee,{name:"q-transition--jump-"+f},()=>h("div",{key:a},[h(J,{flat:!0,dense:!0,noCaps:!0,label:t,tabindex:i.value,...g("view#"+n,{onClick:()=>{O.value=n}})})]))]),h("div",{class:"row items-center q-date__arrow"},[h(J,{round:!0,dense:!0,size:"sm",flat:!0,icon:Ve.value[1],tabindex:i.value,disable:A.next===!1,...g("go+#"+n,{onClick(){m(1)}})})])]}const dn={Calendar:()=>[h("div",{key:"calendar-view",class:"q-date__view q-date__calendar"},[h("div",{class:"q-date__navigation row items-center no-wrap"},mt({label:j.value.months[u.value.month-1],type:"Months",key:u.value.month,dir:re.value,goTo:c,boundaries:ze.value.month,cls:" col"}).concat(mt({label:u.value.year,type:"Years",key:u.value.year,dir:R.value,goTo:D,boundaries:ze.value.year,cls:""}))),h("div",{class:"q-date__calendar-weekdays row items-center no-wrap"},Ze.value.map(t=>h("div",{class:"q-date__calendar-item"},[h("div",t)]))),h("div",{class:"q-date__calendar-days-container relative-position overflow-hidden"},[h(Ee,{name:"q-transition--slide-"+re.value},()=>h("div",{key:te.value,class:"q-date__calendar-days fit"},xe.value.map(t=>h("div",{class:t.classes},[t.in===!0?h(J,{class:t.today===!0?"q-date__today":"",dense:!0,flat:t.flat,unelevated:t.unelevated,color:t.color,textColor:t.textColor,label:t.i,tabindex:i.value,...g("day#"+t.i,{onClick:()=>{cn(t.i)},onMouseover:()=>{vn(t.i)}})},t.event!==!1?()=>h("div",{class:"q-date__event bg-"+t.event}):null):h("div",""+t.i)]))))])])],Months(){const t=u.value.year===S.value.year,n=f=>L.value!==null&&u.value.year===L.value.year&&L.value.month>f||z.value!==null&&u.value.year===z.value.year&&z.value.month<f,a=j.value.monthsShort.map((f,m)=>{const A=u.value.month===m+1;return h("div",{class:"q-date__months-item flex flex-center"},[h(J,{class:t===!0&&S.value.month===m+1?"q-date__today":null,flat:A!==!0,label:f,unelevated:A,color:A===!0?G.value:null,textColor:A===!0?le.value:null,tabindex:i.value,disable:n(m+1),...g("month#"+m,{onClick:()=>{E(m+1)}})})])});return e.yearsInMonthView===!0&&a.unshift(h("div",{class:"row no-wrap full-width"},[mt({label:u.value.year,type:"Years",key:u.value.year,dir:R.value,goTo:D,boundaries:ze.value.year,cls:" col"})])),h("div",{key:"months-view",class:"q-date__view q-date__months flex flex-center"},a)},Years(){const t=k.value,n=t+Ye,a=[],f=m=>L.value!==null&&L.value.year>m||z.value!==null&&z.value.year<m;for(let m=t;m<=n;m++){const A=u.value.year===m;a.push(h("div",{class:"q-date__years-item flex flex-center"},[h(J,{key:"yr"+m,class:S.value.year===m?"q-date__today":null,flat:!A,label:m,dense:!0,unelevated:A,color:A===!0?G.value:null,textColor:A===!0?le.value:null,tabindex:i.value,disable:f(m),...g("yr#"+m,{onClick:()=>{H(m)}})})]))}return h("div",{class:"q-date__view q-date__years flex flex-center"},[h("div",{class:"col-auto"},[h(J,{round:!0,dense:!0,flat:!0,icon:Ve.value[0],tabindex:i.value,disable:f(t),...g("y-",{onClick:()=>{k.value-=Ye}})})]),h("div",{class:"q-date__years-content col self-stretch row items-center"},a),h("div",{class:"col-auto"},[h(J,{round:!0,dense:!0,flat:!0,icon:Ve.value[1],tabindex:i.value,disable:f(n),...g("y+",{onClick:()=>{k.value+=Ye}})})])])}};function cn(t){const n={...u.value,day:t};if(e.range===!1){ne(n,te.value);return}if(w.value===null){const a=xe.value.find(m=>m.fill!==!0&&m.i===t);if(e.noUnset!==!0&&a.range!==void 0){ft({target:n,from:a.range.from,to:a.range.to});return}if(a.selected===!0){ft(n);return}const f=fe(n);w.value={init:n,initHash:f,final:n,finalHash:f},d("rangeStart",C(n))}else{const a=w.value.initHash,f=fe(n),m=a<=f?{from:w.value.init,to:n}:{from:n,to:w.value.init};w.value=null,vt(a===f?n:{target:n,...m}),d("rangeEnd",{from:C(m.from),to:C(m.to)})}}function vn(t){if(w.value!==null){const n={...u.value,day:t};Object.assign(w.value,{final:n,finalHash:fe(n)})}}return Object.assign(r,{setToday:tt,setView:nt,offsetCalendar:at,setCalendarTo:Se,setEditingRange:Ce}),()=>{const t=[h("div",{class:"q-date__content col relative-position"},[h(Ee,{name:"q-transition--fade"},dn[O.value])])],n=Rt(o.default);return n!==void 0&&t.push(h("div",{class:"q-date__actions"},n)),e.name!==void 0&&e.disable!==!0&&Q(t,"push"),h("div",{class:X.value,...Ae.value},[sn(),h("div",{ref:Z,class:"q-date__main col column",tabindex:-1},t)])}}}),Et=kt({name:"QPopupProxy",props:{...Cn,breakpoint:{type:[String,Number],default:450}},emits:["show","hide"],setup(e,{slots:o,emit:d,attrs:r}){const{proxy:v}=xt(),{$q:s}=v,g=P(!1),i=P(null),_=M(()=>parseInt(e.breakpoint,10)),{canShow:b}=Yn({showing:g});function y(){return s.screen.width<_.value||s.screen.height<_.value?"dialog":"menu"}const x=P(y()),K=M(()=>x.value==="menu"?{maxHeight:"99vh"}:{});pe(()=>y(),T=>{g.value!==!0&&(x.value=T)});function Q(T){g.value=!0,d("show",T)}function Z(T){g.value=!1,x.value=y(),d("hide",T)}return Object.assign(v,{show(T){b(T)===!0&&i.value.show(T)},hide(T){i.value.hide(T)},toggle(T){i.value.toggle(T)}}),yn(v,"currentComponent",()=>({type:x.value,ref:i.value})),()=>{const T={ref:i,...K.value,...r,onShow:Q,onHide:Z};let j;return x.value==="dialog"?j=_n:(j=Sn,Object.assign(T,{target:e.target,contextMenu:e.contextMenu,noParentEvent:!0,separateClosePopup:!0})),h(j,T,o.default)}}});function ra(e,o){if(e.hour!==null){if(e.minute===null)return"minute";if(o===!0&&e.second===null)return"second"}return"hour"}function ia(){const e=new Date;return{hour:e.getHours(),minute:e.getMinutes(),second:e.getSeconds(),millisecond:e.getMilliseconds()}}var sa=kt({name:"QTime",props:{...Zt,...Lt,...en,mask:{default:null},format24h:{type:Boolean,default:null},defaultDate:{type:String,validator:e=>/^-?[\d]+\/[0-1]\d\/[0-3]\d$/.test(e)},options:Function,hourOptions:Array,minuteOptions:Array,secondOptions:Array,withSeconds:Boolean,nowBtn:Boolean},emits:tn,setup(e,{slots:o,emit:d}){const r=xt(),{$q:v}=r.proxy,s=zt(e,v),{tabindex:g,headerClass:i,getLocale:_,getCurrentDate:b}=nn(e,v),y=Kt(e),x=Wt(y);let K,Q;const Z=P(null),T=M(()=>Je()),j=M(()=>_()),De=M(()=>Ve()),ce=We(e.modelValue,T.value,j.value,e.calendar,De.value),S=P(ra(ce)),u=P(ce),O=P(ce.hour===null||ce.hour<12),qe=M(()=>`q-time q-time--${e.landscape===!0?"landscape":"portrait"}`+(s.value===!0?" q-time--dark q-dark":"")+(e.disable===!0?" disabled":e.readonly===!0?" q-time--readonly":"")+(e.bordered===!0?" q-time--bordered":"")+(e.square===!0?" q-time--square no-border-radius":"")+(e.flat===!0?" q-time--flat no-shadow":"")),re=M(()=>{const l=u.value;return{hour:l.hour===null?"--":R.value===!0?I(l.hour):String(O.value===!0?l.hour===0?12:l.hour:l.hour>12?l.hour-12:l.hour),minute:l.minute===null?"--":I(l.minute),second:l.second===null?"--":I(l.second)}}),R=M(()=>e.format24h!==null?e.format24h:v.lang.date.format24h),$=M(()=>{const l=S.value==="hour",c=l===!0?12:60,D=u.value[S.value];let E=`rotate(${Math.round(D*(360/c))-180}deg) translateX(-50%)`;return l===!0&&R.value===!0&&u.value.hour>=12&&(E+=" scale(.7)"),{transform:E}}),k=M(()=>u.value.hour!==null),w=M(()=>k.value===!0&&u.value.minute!==null),X=M(()=>e.hourOptions!==void 0?l=>e.hourOptions.includes(l):e.options!==void 0?l=>e.options(l,null,null):null),G=M(()=>e.minuteOptions!==void 0?l=>e.minuteOptions.includes(l):e.options!==void 0?l=>e.options(u.value.hour,l,null):null),le=M(()=>e.secondOptions!==void 0?l=>e.secondOptions.includes(l):e.options!==void 0?l=>e.options(u.value.hour,u.value.minute,l):null),ee=M(()=>{if(X.value===null)return null;const l=we(0,11,X.value),c=we(12,11,X.value);return{am:l,pm:c,values:l.values.concat(c.values)}}),ve=M(()=>G.value!==null?we(0,59,G.value):null),W=M(()=>le.value!==null?we(0,59,le.value):null),oe=M(()=>{switch(S.value){case"hour":return ee.value;case"minute":return ve.value;case"second":return W.value}}),He=M(()=>{let l,c,D=0,H=1;const E=oe.value!==null?oe.value.values:void 0;S.value==="hour"?R.value===!0?(l=0,c=23):(l=0,c=11,O.value===!1&&(D=12)):(l=0,c=55,H=5);const ne=[];for(let C=l,B=l;C<=c;C+=H,B++){const se=C+D,je=E!==void 0&&E.includes(se)===!1,ot=S.value==="hour"&&C===0?R.value===!0?"00":"12":C;ne.push({val:se,index:B,disable:je,label:ot})}return ne}),Qe=M(()=>[[qn,ie,void 0,{stop:!0,prevent:!0,mouse:!0}]]);pe(()=>e.modelValue,l=>{const c=We(l,T.value,j.value,e.calendar,De.value);(c.dateHash!==u.value.dateHash||c.timeHash!==u.value.timeHash)&&(u.value=c,c.hour===null?S.value="hour":O.value=c.hour<12)}),pe([T,j],()=>{pt(()=>{Te()})});function he(){const l={...b(),...ia()};Te(l),Object.assign(u.value,l),S.value="hour"}function we(l,c,D){const H=Array.apply(null,{length:c+1}).map((E,ne)=>{const C=ne+l;return{index:C,val:D(C)===!0}}).filter(E=>E.val===!0).map(E=>E.index);return{min:H[0],max:H[H.length-1],values:H,threshold:c+1}}function Xe(l,c,D){const H=Math.abs(l-c);return Math.min(H,D-H)}function Le(l,{min:c,max:D,values:H,threshold:E}){if(l===c)return c;if(l<c||l>D)return Xe(l,c,E)<=Xe(l,D,E)?c:D;const ne=H.findIndex(se=>l<=se),C=H[ne-1],B=H[ne];return l-C<=B-l?C:B}function Je(){return e.calendar!=="persian"&&e.mask!==null?e.mask:`HH:mm${e.withSeconds===!0?":ss":""}`}function Ve(){if(typeof e.defaultDate!="string"){const l=b(!0);return l.dateHash=fe(l),l}return We(e.defaultDate,"YYYY/MM/DD",void 0,e.calendar)}function Ie(){return Mn(r)===!0||oe.value!==null&&(oe.value.values.length===0||S.value==="hour"&&R.value!==!0&&ee.value[O.value===!0?"am":"pm"].values.length===0)}function Ze(){const l=Z.value,{top:c,left:D,width:H}=l.getBoundingClientRect(),E=H/2;return{top:c+E,left:D+E,dist:E*.7}}function ie(l){if(Ie()!==!0){if(l.isFirst===!0){K=Ze(),Q=L(l.evt,K);return}Q=L(l.evt,K,Q),l.isFinal===!0&&(K=!1,Q=null,Ge())}}function Ge(){S.value==="hour"?S.value="minute":e.withSeconds&&S.value==="minute"&&(S.value="second")}function L(l,c,D){const H=pn(l),E=Math.abs(H.top-c.top),ne=Math.sqrt(Math.pow(Math.abs(H.top-c.top),2)+Math.pow(Math.abs(H.left-c.left),2));let C,B=Math.asin(E/ne)*(180/Math.PI);if(H.top<c.top?B=c.left<H.left?90-B:270+B:B=c.left<H.left?B+90:270-B,S.value==="hour"){if(C=B/30,ee.value!==null){const se=R.value!==!0?O.value===!0:ee.value.am.values.length!==0&&ee.value.pm.values.length!==0?ne>=c.dist:ee.value.am.values.length!==0;C=Le(C+(se===!0?0:12),ee.value[se===!0?"am":"pm"])}else C=Math.round(C),R.value===!0?ne<c.dist?C<12&&(C+=12):C===12&&(C=0):O.value===!0&&C===12?C=0:O.value===!1&&C!==12&&(C+=12);R.value===!0&&(O.value=C<12)}else C=Math.round(B/6)%60,S.value==="minute"&&ve.value!==null?C=Le(C,ve.value):S.value==="second"&&W.value!==null&&(C=Le(C,W.value));return D!==C&&tt[S.value](C),C}const z={hour(){S.value="hour"},minute(){S.value="minute"},second(){S.value="second"}};function ze(l){l.keyCode===13&&nt()}function Oe(l){l.keyCode===13&&at()}function et(l){Ie()!==!0&&(v.platform.is.desktop!==!0&&L(l,Ze()),Ge())}function ke(l){Ie()!==!0&&L(l,Ze())}function te(l){if(l.keyCode===13)S.value="hour";else if([37,39].includes(l.keyCode)){const c=l.keyCode===37?-1:1;if(ee.value!==null){const D=R.value===!0?ee.value.values:ee.value[O.value===!0?"am":"pm"].values;if(D.length===0)return;if(u.value.hour===null)$e(D[0]);else{const H=(D.length+D.indexOf(u.value.hour)+c)%D.length;$e(D[H])}}else{const D=R.value===!0?24:12,H=R.value!==!0&&O.value===!1?12:0,E=u.value.hour===null?-c:u.value.hour;$e(H+(24+E+c)%D)}}}function dt(l){if(l.keyCode===13)S.value="minute";else if([37,39].includes(l.keyCode)){const c=l.keyCode===37?-1:1;if(ve.value!==null){const D=ve.value.values;if(D.length===0)return;if(u.value.minute===null)xe(D[0]);else{const H=(D.length+D.indexOf(u.value.minute)+c)%D.length;xe(D[H])}}else{const D=u.value.minute===null?-c:u.value.minute;xe((60+D+c)%60)}}}function ct(l){if(l.keyCode===13)S.value="second";else if([37,39].includes(l.keyCode)){const c=l.keyCode===37?-1:1;if(W.value!==null){const D=W.value.values;if(D.length===0)return;if(u.value.seconds===null)Ae(D[0]);else{const H=(D.length+D.indexOf(u.value.second)+c)%D.length;Ae(D[H])}}else{const D=u.value.second===null?-c:u.value.second;Ae((60+D+c)%60)}}}function $e(l){u.value.hour!==l&&(u.value.hour=l,Ce())}function xe(l){u.value.minute!==l&&(u.value.minute=l,Ce())}function Ae(l){u.value.second!==l&&(u.value.second=l,Ce())}const tt={hour:$e,minute:xe,second:Ae};function nt(){O.value===!1&&(O.value=!0,u.value.hour!==null&&(u.value.hour-=12,Ce()))}function at(){O.value===!0&&(O.value=!1,u.value.hour!==null&&(u.value.hour+=12,Ce()))}function Se(l){const c=e.modelValue;S.value!==l&&c!==void 0&&c!==null&&c!==""&&typeof c!="string"&&(S.value=l)}function Ce(){if(X.value!==null&&X.value(u.value.hour)!==!0){u.value=We(),Se("hour");return}if(G.value!==null&&G.value(u.value.minute)!==!0){u.value.minute=null,u.value.second=null,Se("minute");return}if(e.withSeconds===!0&&le.value!==null&&le.value(u.value.second)!==!0){u.value.second=null,Se("second");return}u.value.hour===null||u.value.minute===null||e.withSeconds===!0&&u.value.second===null||Te()}function Te(l){const c=Object.assign({...u.value},l),D=e.calendar==="persian"?I(c.hour)+":"+I(c.minute)+(e.withSeconds===!0?":"+I(c.second):""):rn(new Date(c.year,c.month===null?null:c.month-1,c.day,c.hour,c.minute,c.second,c.millisecond),T.value,j.value,c.year,c.timezoneOffset);c.changed=D!==e.modelValue,d("update:modelValue",D,c)}function Ke(){const l=[h("div",{class:"q-time__link "+(S.value==="hour"?"q-time__link--active":"cursor-pointer"),tabindex:g.value,onClick:z.hour,onKeyup:te},re.value.hour),h("div",":"),h("div",k.value===!0?{class:"q-time__link "+(S.value==="minute"?"q-time__link--active":"cursor-pointer"),tabindex:g.value,onKeyup:dt,onClick:z.minute}:{class:"q-time__link"},re.value.minute)];e.withSeconds===!0&&l.push(h("div",":"),h("div",w.value===!0?{class:"q-time__link "+(S.value==="second"?"q-time__link--active":"cursor-pointer"),tabindex:g.value,onKeyup:ct,onClick:z.second}:{class:"q-time__link"},re.value.second));const c=[h("div",{class:"q-time__header-label row items-center no-wrap",dir:"ltr"},l)];return R.value===!1&&c.push(h("div",{class:"q-time__header-ampm column items-between no-wrap"},[h("div",{class:"q-time__link "+(O.value===!0?"q-time__link--active":"cursor-pointer"),tabindex:g.value,onClick:nt,onKeyup:ze},"AM"),h("div",{class:"q-time__link "+(O.value!==!0?"q-time__link--active":"cursor-pointer"),tabindex:g.value,onClick:at,onKeyup:Oe},"PM")])),h("div",{class:"q-time__header flex flex-center no-wrap "+i.value},c)}function lt(){const l=u.value[S.value];return h("div",{class:"q-time__content col relative-position"},[h(Ee,{name:"q-transition--scale"},()=>h("div",{key:"clock"+S.value,class:"q-time__container-parent absolute-full"},[h("div",{ref:Z,class:"q-time__container-child fit overflow-hidden"},[Mt(h("div",{class:"q-time__clock cursor-pointer non-selectable",onClick:et,onMousedown:ke},[h("div",{class:"q-time__clock-circle fit"},[h("div",{class:"q-time__clock-pointer"+(u.value[S.value]===null?" hidden":e.color!==void 0?` text-${e.color}`:""),style:$.value}),He.value.map(c=>h("div",{class:`q-time__clock-position row flex-center q-time__clock-pos-${c.index}`+(c.val===l?" q-time__clock-position--active "+i.value:c.disable===!0?" q-time__clock-position--disable":"")},[h("span",c.label)]))])]),Qe.value)])])),e.nowBtn===!0?h(J,{class:"q-time__now-button absolute",icon:v.iconSet.datetime.now,unelevated:!0,size:"sm",round:!0,color:e.color,textColor:e.textColor,tabindex:g.value,onClick:he}):null])}return r.proxy.setNow=he,()=>{const l=[lt()],c=Rt(o.default);return c!==void 0&&l.push(h("div",{class:"q-time__actions"},c)),e.name!==void 0&&e.disable!==!0&&x(l,"push"),h("div",{class:qe.value,tabindex:-1},[Ke(),h("div",{class:"q-time__main col overflow-auto"},l)])}}});const da={class:"q-pa-md",style:{"max-width":"300px",padding:"0"}},ca={class:"row items-center justify-end"},va={class:"row items-center justify-end"},fa={__name:"DateTime",props:{evDateTime:P("2019-02-01 12:44")},emits:["update:date"],setup(e,{emit:o}){const d=_e("Announce"),r=e,v=o;return P(r.evDateTime),(s,g)=>(de(),Be("div",da,[U(Ue,{filled:"",modelValue:V(d).eventTime,"onUpdate:modelValue":[g[2]||(g[2]=i=>V(d).eventTime=i),g[3]||(g[3]=i=>v("update:date"))]},{prepend:ge(()=>[U(qt,{name:"event",class:"cursor-pointer"},{default:ge(()=>[U(Et,{cover:"","transition-show":"scale","transition-hide":"scale"},{default:ge(()=>[U(ua,{modelValue:V(d).eventTime,"onUpdate:modelValue":g[0]||(g[0]=i=>V(d).eventTime=i),mask:"YYYY-MM-DD HH:mm"},{default:ge(()=>[q("div",ca,[Mt(U(J,{label:"\u0417\u0430\u043A\u0440\u044B\u0442\u044C",color:"primary",flat:""},null,512),[[It]])])]),_:1},8,["modelValue"])]),_:1})]),_:1})]),append:ge(()=>[U(qt,{name:"access_time",class:"cursor-pointer"},{default:ge(()=>[U(Et,{cover:"","transition-show":"scale","transition-hide":"scale"},{default:ge(()=>[U(sa,{modelValue:V(d).eventTime,"onUpdate:modelValue":g[1]||(g[1]=i=>V(d).eventTime=i),mask:"YYYY-MM-DD HH:mm",format24h:""},{default:ge(()=>[q("div",va,[Mt(U(J,{label:"\u0417\u0430\u043A\u0440\u044B\u0442\u044C",color:"primary",flat:""},null,512),[[It]])])]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]))}};const be=e=>(Pt("data-v-75569836"),e=e(),Bt(),e),ma={key:0,class:"eventsarea"},ha={class:"editArea"},ga={class:"card"},ya={class:"editor"},_a={style:{display:"flex","justify-content":"space-between"}},pa=be(()=>q("br",null,null,-1)),Ma={class:"uploads"},ba={style:{display:"flex","justify-content":"space-between","flex-wrap":"wrap"}},Da=be(()=>q("br",null,null,-1)),wa=be(()=>q("br",null,null,-1)),ka=be(()=>q("br",null,null,-1)),xa=be(()=>q("br",null,null,-1)),Sa={class:"btns"},Ca=be(()=>q("br",null,null,-1)),Ya=be(()=>q("hr",null,null,-1)),qa=be(()=>q("br",null,null,-1)),Ha={__name:"AnnounceEditor",emits:["reload","posterUploaded"],setup(e,{emit:o}){const d=String("https://api.sakh-orch.ru/"),r=Dt();_e("lvl"),Xt();const v=bn();_e("editMode");const s=_e("Halls"),g=o,i={},_=_e("AccessToken"),b=_e("Announce");function y(){}const x=[{label:"\u0412\u0445\u043E\u0434 \u0441\u0432\u043E\u0431\u043E\u0434\u043D\u044B\u0439",value:2},{label:"\u0411\u0438\u043B\u0435\u0442\u044B \u0432 \u043F\u0440\u043E\u0434\u0430\u0436\u0435",value:3},{label:"\u0412\u0445\u043E\u0434 \u043F\u043E \u043F\u0440\u0438\u0433\u043B\u0430\u0441\u0438\u0442\u0435\u043B\u044C\u043D\u044B\u043C",value:4},{label:"\u041F\u0440\u043E\u0434\u0430\u0436\u0430 \u0437\u0430\u0432\u0435\u0440\u0448\u0435\u043D\u0430",value:5}],K=P(null),Q=P(null),Z=P(null);function T($){return{url:d+"api/event/poster.php",headers:[{name:"ACCESSTOKEN",value:_.value}],formFields:[{name:"announceId",value:b.value.id},{name:"method",value:"add"}]}}function j($){return{url:d+"api/event/sketch.php",headers:[{name:"ACCESSTOKEN",value:_.value}],formFields:[{name:"announceId",value:b.value.id},{name:"method",value:"add"}]}}function De($){r.notify(ht("\u0417\u0430\u0433\u0440\u0443\u0436\u0435\u043D\u043E")),g("posterUploaded")}function ce($){var w,X,G;let k=(G=(X=JSON.parse((w=$==null?void 0:$.xhr)==null?void 0:w.response))==null?void 0:X.error)!=null?G:"";r.notify(rt(null,k))}function S(){Z.value.saveData()}function u(){v.push({path:"/announces"})}function O(){g("reload")}function qe(){_t.post(d+"api/event/poster.php",{params:{method:"del",announceId:b.value.id}}).then($=>{var k,w,X;if(!((k=$==null?void 0:$.data)!=null&&k.result))throw new Error;g("posterUploaded"),r.notify(ht((X=(w=$==null?void 0:$.data)==null?void 0:w.result)!=null?X:""))}).catch($=>{r.notify(rt($))})}function re(){_t.post(d+"api/event/sketch.php",{params:{method:"del",announceId:b.value.id}}).then($=>{var k,w,X;if(!((k=$==null?void 0:$.data)!=null&&k.result))throw new Error;g("posterUploaded"),r.notify(ht((X=(w=$==null?void 0:$.data)==null?void 0:w.result)!=null?X:""))}).catch($=>{r.notify(rt($))})}function R(){b.value.hallId=b.value.Hall.id}return($,k)=>(de(),Be(Ut,null,[V(b)?(de(),Be("div",ma,[q("div",ha,[q("div",ga,[V(b).Hall.map?(de(),st(Hn,{key:0,onIamDeleted:u,onNewAnnounce:O,ref_key:"rAnnounceCard",ref:Z,Announce:V(b)},null,8,["Announce"])):Pe("",!0)]),q("div",ya,[q("div",_a,[U(fa,{date:V(b).eventTime,"onUpdate:date":[k[0]||(k[0]=w=>V(b).eventTime=w),k[1]||(k[1]=w=>void 0)]},null,8,["date"])]),pa,q("div",Ma,[q("div",null,[U(Ht,{modelValue:i,"onUpdate:modelValue":k[2]||(k[2]=w=>i=w),style:{"max-width":"300px"},label:"\u0417\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044C \u044D\u0441\u043A\u0438\u0437 16:9",factory:j,ref_key:"uploader",ref:K,onUploaded:De,onFailed:ce},null,512)]),q("div",null,[U(Ht,{modelValue:i,"onUpdate:modelValue":k[3]||(k[3]=w=>i=w),style:{"max-width":"300px"},label:"\u0417\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044C \u0430\u0444\u0438\u0448\u0443",factory:T,ref_key:"uploader2",ref:Q,onUploaded:De,onFailed:ce},null,512)])]),q("div",ba,[U(J,{label:"\u0423\u0434\u0430\u043B\u0438\u0442\u044C \u044D\u0441\u043A\u0438\u0437",icon:"delete",onClick:k[4]||(k[4]=w=>re())}),U(J,{label:"\u0423\u0434\u0430\u043B\u0438\u0442\u044C \u0430\u0444\u0438\u0448\u0443",icon:"delete",onClick:k[5]||(k[5]=w=>qe())})]),U(Ue,{name:"progName",modelValue:V(b).progName,"onUpdate:modelValue":k[6]||(k[6]=w=>V(b).progName=w),label:"\u041D\u0430\u0437\u0432\u0430\u043D\u0438\u0435"},null,8,["modelValue"]),U(Vt,{modelValue:V(b).Hall,"onUpdate:modelValue":[k[7]||(k[7]=w=>V(b).Hall=w),k[8]||(k[8]=w=>R())],label:"\u041C\u0435\u0441\u0442\u043E \u043F\u0440\u043E\u0432\u0435\u0434\u0435\u043D\u0438\u044F","map-options":"","option-label":"name","option-value":"id",options:V(s)},null,8,["modelValue","options"]),U(Vt,{modelValue:V(b).pay,"onUpdate:modelValue":k[9]||(k[9]=w=>V(b).pay=w),"emit-value":"","map-options":"",label:"\u0423\u0441\u043B\u043E\u0432\u0438\u044F \u0432\u0445\u043E\u0434\u0430",options:x},null,8,["modelValue"]),Da,V(b).pay==3?(de(),st(Ue,{key:0,type:"text",modelValue:V(b).ticketLink,"onUpdate:modelValue":k[10]||(k[10]=w=>V(b).ticketLink=w),label:"\u0421\u0441\u044B\u043B\u043A\u0430 \u043D\u0430 \u043F\u0440\u043E\u0434\u0430\u0436\u0443 \u0431\u0438\u043B\u0435\u0442\u043E\u0432"},null,8,["modelValue"])):Pe("",!0),wa,U(Ue,{type:"number",modelValue:V(b).age,"onUpdate:modelValue":k[11]||(k[11]=w=>V(b).age=w),label:"\u0412\u043E\u0437\u0440\u0430\u0441\u0442\u043D\u044B\u0435 \u043E\u0433\u0440\u0430\u043D\u0438\u0447\u0435\u043D\u0438\u044F"},null,8,["modelValue"]),ka,U(Ue,{name:"evDescr",modelValue:V(b).sdescr,"onUpdate:modelValue":k[12]||(k[12]=w=>V(b).sdescr=w),type:"textarea",label:"\u041A\u0440\u0430\u0442\u043A\u043E\u0435 \u043E\u043F\u0438\u0441\u0430\u043D\u0438\u0435"},null,8,["modelValue"]),xa,U(Ue,{name:"evText",modelValue:V(b).description,"onUpdate:modelValue":k[13]||(k[13]=w=>V(b).description=w),type:"textarea",label:"\u041E\u043F\u0438\u0441\u0430\u043D\u0438\u0435"},null,8,["modelValue"])])]),q("div",Sa,[U(J,{label:"\u0421\u043E\u0445\u0440\u0430\u043D\u0438\u0442\u044C",onClick:S})])])):Pe("",!0),Ca,Ya,qa],64))}};var Va=wt(Ha,[["__scopeId","data-v-75569836"]]);const Ia={class:"content"},Oa={class:"eventboxl"},$a={__name:"AnnouncePage",setup(e){fn({title:"\u0410\u043D\u043E\u043D\u0441"});const d=Dt(),r=_e("editMode"),v=String("https://api.sakh-orch.ru/"),s=Xt(),g=P(null);Dn("Announce",g);function i(){_t.post(v+"api/event/announce.php",{params:{method:"get",id:s.params.evid}}).then(_=>{var b,y;g.value=(y=(b=_==null?void 0:_.data)==null?void 0:b.data)!=null?y:null,console.log("Announce loaded")}).catch(_=>{d.notify(rt(_))})}return wn(()=>{i()}),(_,b)=>(de(),Be("div",Ia,[V(r)&&g.value?(de(),st(Va,{key:0,onPosterUploaded:i,onReload:i})):Pe("",!0),q("div",Oa,[g.value?(de(),st(Kn,{key:0})):Pe("",!0)])]))}};var tl=wt($a,[["__scopeId","data-v-51438290"]]);export{tl as default};
