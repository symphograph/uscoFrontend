import{Q as g}from"./QTooltip.67a45e1b.js";import{i as E,m as c,n as m,q as l,f as e,y as O,z as Q,t as o,D as oe,bm as H,B as p,x as J,b as se,H as re,r as d,p as ue,c as T,E as $,ax as u,l as y,a5 as K,v as z,F as D,ay as de,az as ie,aA as ce,S as fe,V as me,af as pe,X as _e,aP as ve,h as w,a4 as ge,g as ke}from"./index.cdb55744.js";import{Q as be,a as ye,f as he}from"./style.713f61fd.js";import{n as Ce}from"./myFuncts.bfbbf36a.js";import{a as I,Q as j,u as Se}from"./QItem.d03f1607.js";import{m as Ue}from"./myAuth.f2132660.js";import{Q as i}from"./QItemLabel.1ffda0e9.js";import{Q as Qe}from"./QList.ef1a3de3.js";import{Q as P}from"./QImg.5dbdf016.js";/* empty css               */import{_ as xe}from"./plugin-vue_export-helper.21dcd24c.js";const we={__name:"RecommendsDialog",emits:["confirmed"],setup(n,{emit:k}){const f=E("showRecommends"),h=k;function b(){h("confirmed"),f.value=!1}return(C,r)=>(c(),m(re,{modelValue:J(f),"onUpdate:modelValue":r[1]||(r[1]=_=>se(f)?f.value=_:null)},{default:l(()=>[e(O,{className:"dialogArea"},{default:l(()=>[e(Q,{class:"cardTitle"},{default:l(()=>[e(I,{dense:""},{default:l(()=>[e(i,null,{default:l(()=>[o("\u0420\u0435\u043A\u043E\u043C\u0435\u043D\u0434\u0430\u0446\u0438\u0438 \u043A \u042D\u0441\u043A\u0438\u0437\u0443")]),_:1})]),_:1})]),_:1}),e(oe,{inset:""}),e(Q,null,{default:l(()=>[e(Qe,null,{default:l(()=>[e(I,null,{default:l(()=>[e(j,null,{default:l(()=>[e(i,null,{default:l(()=>[o("\u0421\u043E\u043E\u0442\u043D\u043E\u0448\u0435\u043D\u0438\u0435 \u0441\u0442\u043E\u0440\u043E\u043D:")]),_:1}),e(i,{caption:""},{default:l(()=>[o("16:9 \u041D\u0430\u043F\u0440\u0438\u043C\u0435\u0440, 1920x1080")]),_:1}),e(i,{caption:""},{default:l(()=>[o("\u0418\u0437\u043C\u0435\u043D\u0435\u043D\u0438\u0435 \u0441\u043E\u043E\u0442\u043D\u043E\u0448\u0435\u043D\u0438\u044F \u0441\u0442\u043E\u0440\u043E\u043D \u043A\u0440\u0430\u0439\u043D\u0435 \u043D\u0435\u0433\u0430\u0442\u0438\u0432\u043D\u043E \u0441\u043A\u0430\u0437\u044B\u0432\u0430\u0435\u0442\u0441\u044F \u043D\u0430 \u043A\u0430\u0447\u0435\u0441\u0442\u0432\u0435 \u0438\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u044F ")]),_:1})]),_:1})]),_:1}),e(I,null,{default:l(()=>[e(j,null,{default:l(()=>[e(i,null,{default:l(()=>[o("\u0421\u043E\u0434\u0435\u0440\u0436\u0430\u043D\u0438\u0435:")]),_:1}),e(i,{caption:""},{default:l(()=>[o(" \u042D\u0441\u043A\u0438\u0437 \u043F\u0440\u0438\u0437\u0432\u0430\u043D \u043E\u0442\u0440\u0430\u0436\u0430\u0442\u044C \u043E\u0441\u043D\u043E\u0432\u043D\u0443\u044E \u044D\u043C\u043E\u0446\u0438\u043E\u043D\u0430\u043B\u044C\u043D\u0443\u044E \u043C\u044B\u0441\u043B\u044C \u0432 \u0432\u0438\u0434\u0435 \u0440\u0438\u0441\u0443\u043D\u043A\u0430. ")]),_:1}),e(i,{caption:""},{default:l(()=>[o(" \u0421\u043B\u0435\u0434\u0443\u0435\u0442 \u0438\u0437\u0431\u0435\u0433\u0430\u0442\u044C \u043D\u0430\u043B\u0438\u0447\u0438\u044F \u0432 \u043D\u0435\u043C \u043A\u0430\u043A\u043E\u0433\u043E-\u043B\u0438\u0431\u043E \u0442\u0435\u043A\u0441\u0442\u0430. \u0412 \u043E\u0441\u043E\u0431\u0435\u043D\u043D\u043E\u0441\u0442\u0438, \u0434\u0443\u0431\u043B\u0438\u0440\u0443\u044E\u0449\u0435\u0433\u043E \u0442\u0435\u0445\u043D\u0438\u0447\u0435\u0441\u043A\u0443\u044E \u0438\u043D\u0444\u043E\u0440\u043C\u0430\u0446\u0438\u044E, \u0442\u0430\u043A\u0443\u044E \u043A\u0430\u043A \u0432\u0440\u0435\u043C\u044F \u0438 \u043C\u0435\u0441\u0442\u043E. ")]),_:1}),e(i,{caption:""},{default:l(()=>[o(" \u0418\u0441\u043A\u043B\u044E\u0447\u0435\u043D\u0438\u0435\u043C \u043C\u043E\u0436\u0435\u0442 \u0431\u044B\u0442\u044C \u043D\u0430\u0437\u0432\u0430\u043D\u0438\u0435 \u043A\u043E\u043D\u0446\u0435\u0440\u0442\u0430 \u0432 \u0442\u043E\u043C \u0441\u043B\u0443\u0447\u0430\u0435, \u0435\u0441\u043B\u0438 \u0435\u0433\u043E \u0448\u0440\u0438\u0444\u0442, \u0446\u0432\u0435\u0442 \u0438 \u043F\u0440\u043E\u0447\u0438\u0435 \u0441\u0432\u043E\u0439\u0441\u0442\u0432\u0430 \u0438\u043C\u0435\u044E\u0442 \u0432\u044B\u0441\u043E\u043A\u0443\u044E \u0445\u0443\u0434\u043E\u0436\u0435\u0441\u0442\u0432\u0435\u043D\u043D\u0443\u044E \u0446\u0435\u043D\u043D\u043E\u0441\u0442\u044C. ")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),e(Q,null,{default:l(()=>[e(i,null,{default:l(()=>[o("\u0425\u043E\u0440\u043E\u0448\u0438\u0439 \u043F\u0440\u0438\u043C\u0435\u0440")]),_:1}),e(P,{src:"/img/sketch/good-example.png",ratio:16/9})]),_:1}),e(Q,null,{default:l(()=>[e(i,null,{default:l(()=>[o("\u041F\u043B\u043E\u0445\u043E\u0439 \u043F\u0440\u0438\u043C\u0435\u0440")]),_:1}),e(P,{src:"/img/sketch/bad-example.jpg",ratio:16/9})]),_:1}),e(H,{align:"right"},{default:l(()=>[e(p,{class:"goldBtn",label:"\u041F\u043E\u043D\u044F\u0442\u043D\u043E",onClick:r[0]||(r[0]=_=>b())})]),_:1})]),_:1})]),_:1},8,["modelValue"]))}};const M=n=>(ie("data-v-3b89ed68"),n=n(),ce(),n),Re={class:"row no-wrap items-center q-pa-sm q-gutter-xs"},qe={class:"col"},Fe=M(()=>u("div",{class:"q-uploader__title"},"\u0417\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044C \u044D\u0441\u043A\u0438\u0437",-1)),Ve={class:"q-uploader__subtitle"},Ie=M(()=>u("ul",null,[u("li",null,"\u041A\u0430\u0440\u0442\u0438\u043D\u043A\u0443 \u043C\u043E\u0436\u0435\u0442 \u0440\u0430\u0441\u0442\u044F\u043D\u0443\u0442\u044C \u0438\u043B\u0438 \u0441\u043F\u043B\u044E\u0449\u0438\u0442\u044C."),u("li",null,"\u041A\u0432\u0430\u0434\u0440\u0430\u0442\u044B \u0441\u0442\u0430\u043D\u0443\u0442 \u043F\u0440\u044F\u043C\u043E\u0443\u0433\u043E\u043B\u044C\u043D\u0438\u043A\u0430\u043C\u0438."),u("li",null,"\u041A\u0440\u0443\u0433\u0438 \u0441\u0442\u0430\u043D\u0443\u0442 \u043E\u0432\u0430\u043B\u0430\u043C\u0438."),u("li",null,"\u041B\u044E\u0434\u0438 \u0431\u0443\u0434\u0443\u0442 \u0432\u044B\u0433\u043B\u044F\u0434\u0435\u0442\u044C \u043D\u0435\u0435\u0441\u0442\u0435\u0441\u0442\u0432\u0435\u043D\u043D\u043E \u0442\u043E\u043B\u0441\u0442\u044B\u043C\u0438 \u0438\u043B\u0438 \u0445\u0443\u0434\u044B\u043C\u0438."),u("li",null,"\u0418\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u0435 \u043F\u043E\u0442\u0435\u0440\u044F\u0435\u0442 \u0447\u0435\u0442\u043A\u043E\u0441\u0442\u044C"),u("li",null,"\u0418\u0437\u043C\u0435\u043D\u0435\u043D\u0438\u0435 \u043F\u0440\u043E\u043F\u043E\u0440\u0446\u0438\u0439 \u0438\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u044F \u043C\u043E\u0436\u0435\u0442 \u0432\u043E\u0441\u043F\u0440\u0438\u043D\u0438\u043C\u0430\u0442\u044C\u0441\u044F \u043A\u0430\u043A \u0441\u043B\u0435\u0434\u0441\u0442\u0432\u0438\u0435 \u0443\u043F\u043E\u0442\u0440\u0435\u0431\u043B\u0435\u043D\u0438\u044F \u043D\u0430\u0440\u043A\u043E\u0442\u0438\u0447\u0435\u0441\u043A\u0438\u0445 \u0432\u0435\u0449\u0435\u0441\u0442\u0432")],-1)),Te={__name:"SketchUploader",props:{id:Number,type:String},emits:["onUploaded"],setup(n,{emit:k}){const f=String("https://api.sakh-orch.ru/"),h=Se(),b=n,C=d(),r=d();d();const _={},R=k,S=d(!1);ue("showRecommends",S);const U=d(!1),q=d(""),A=d("");d({src:"",type:""}),d({coordinates:null,image:null});const F=E("pwUrl");function X(){L()}let B="image/jpeg";function G(s){q.value=URL.createObjectURL(s[0]),B=s[0].type}function L(){const{canvas:s}=C.value.getResult();s.toBlob(a=>{A.value=a,F.value=URL.createObjectURL(a)},B)}function N(){L();const s=r.value.queuedFiles[0],a=s.name.replace(/[\[\]]/g,"_"),v=new File([A.value],a,{type:s.type});r.value.reset(),r.value.addFiles([v]),r.value.upload()}function W(){q.value="",F.value=""}function Y(s){var v,t,x;let a=(x=(t=JSON.parse((v=s==null?void 0:s.xhr)==null?void 0:v.response))==null?void 0:t.error)!=null?x:"";h.notify(Ce(null,a))}function Z(){r.value.reset(),F.value="",R("onUploaded")}function ee(){return{url:f+`api/${b.type}/sketch.php`,headers:[{name:"ACCESSTOKEN",value:Ue.self.AccessToken}],formFields:[{name:"id",value:b.id},{name:"method",value:"add"}]}}function le({imageSize:s,visibleArea:a}){return{width:(a||s).width,height:(a||s).height}}function ae(){U.value=!0}const te={left:0,top:0},V=d(!1),ne=T(()=>V.value?{}:{aspectRatio:1920/1080});return(s,a)=>{var v;return c(),$(D,null,[e(ye,{modelValue:_,"onUpdate:modelValue":a[2]||(a[2]=t=>_=t),accept:"image/*",style:{width:"100%"},factory:ee,multiple:!1,"hide-upload-btn":"",ref_key:"refUploader",ref:r,onAdded:G,onRemoved:W,onUploaded:Z,onFailed:Y,onStart:a[3]||(a[3]=t=>{console.log(t)}),"no-thumbnails":""},{header:l(t=>[u("div",Re,[t.uploadedFiles.length>0?(c(),m(p,{key:0,icon:"done_all",onClick:t.removeUploadedFiles,round:"",dense:"",flat:""},{default:l(()=>[e(g,null,{default:l(()=>[o("Remove Uploaded Files")]),_:1})]),_:2},1032,["onClick"])):y("",!0),t.isUploading?(c(),m(K,{key:1,class:"q-uploader__spinner"})):y("",!0),u("div",qe,[Fe,u("div",Ve,z(t.uploadSizeLabel)+" / "+z(t.uploadProgressLabel),1)]),U.value?(c(),$(D,{key:2},[t.canAddFiles?(c(),m(p,{key:0,type:"a",icon:"add_box",onClick:t.pickFiles,round:"",dense:"",flat:""},{default:l(()=>[e(be),e(g,null,{default:l(()=>[o("\u0412\u044B\u0431\u0440\u0430\u0442\u044C \u0444\u0430\u0439\u043B")]),_:1})]),_:2},1032,["onClick"])):y("",!0)],64)):(c(),m(p,{key:3,icon:"add_box",onClick:a[0]||(a[0]=x=>S.value=!0),round:"",dense:"",flat:""},{default:l(()=>[e(g,null,{default:l(()=>[o("\u0412\u044B\u0431\u0440\u0430\u0442\u044C \u0444\u0430\u0439\u043B")]),_:1})]),_:1})),t.canUpload?(c(),m(p,{key:4,icon:"cloud_upload",onClick:N,round:"",dense:"",flat:""},{default:l(()=>[e(g,null,{default:l(()=>[o("\u0417\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044C")]),_:1})]),_:1})):y("",!0),t.isUploading?(c(),m(p,{key:5,icon:"clear",onClick:t.abort,round:"",dense:"",flat:""},{default:l(()=>[e(g,null,{default:l(()=>[o("Abort Upload")]),_:1})]),_:2},1032,["onClick"])):y("",!0),e(p,{icon:"help",flat:"",round:"",onClick:a[1]||(a[1]=x=>S.value=!0)},{default:l(()=>[e(g,null,{default:l(()=>[o("\u0420\u0435\u043A\u043E\u043C\u0435\u043D\u0434\u0430\u0446\u0438\u0438 \u043A \u044D\u0441\u043A\u0438\u0437\u0443")]),_:1})]),_:1})])]),_:1},512),(v=r.value)!=null&&v.queuedFiles.length?(c(),m(O,{key:0,dark:"",style:{width:"100%"}},{default:l(()=>[e(Q,null,{default:l(()=>[e(J(he),{class:"cropper",ref_key:"refCropper",ref:C,src:q.value,canvas:{width:1920,height:1080},"stencil-props":ne.value,"default-size":le,"default-position":te,onChange:X},null,8,["src","stencil-props"])]),_:1}),e(H,{align:"between"},{default:l(()=>[e(de,{modelValue:V.value,"onUpdate:modelValue":a[4]||(a[4]=t=>V.value=t),label:"\u0418\u0433\u043D\u043E\u0440\u0438\u0440\u043E\u0432\u0430\u0442\u044C \u0441\u043E\u043E\u0442\u043D\u043E\u0448\u0435\u043D\u0438\u0435 \u0441\u0442\u043E\u0440\u043E\u043D",color:"red"},{default:l(()=>[e(g,{self:"top middle",class:"bg-red text-black text-body2",delay:300},{default:l(()=>[Ie]),_:1})]),_:1},8,["modelValue"]),e(p,{label:"\u0413\u043E\u0442\u043E\u0432\u043E",color:"green",onClick:N})]),_:1})]),_:1})):y("",!0),e(we,{onConfirmed:a[5]||(a[5]=t=>ae())})],64)}}};var He=xe(Te,[["__scopeId","data-v-3b89ed68"]]),Je=fe({name:"QInnerLoading",props:{...me,...pe,showing:Boolean,color:String,size:{type:[String,Number],default:42},label:String,labelClass:String,labelStyle:[String,Array,Object]},setup(n,{slots:k}){const f=ke(),h=_e(n,f.proxy.$q),{transitionProps:b,transitionStyle:C}=ve(n),r=T(()=>"q-inner-loading q--avoid-card-border absolute-full column flex-center"+(h.value===!0?" q-inner-loading--dark":"")),_=T(()=>"q-inner-loading__label"+(n.labelClass!==void 0?` ${n.labelClass}`:""));function R(){const U=[w(K,{size:n.size,color:n.color})];return n.label!==void 0&&U.push(w("div",{class:_.value,style:n.labelStyle},[n.label])),U}function S(){return n.showing===!0?w("div",{class:r.value,style:C.value},k.default!==void 0?k.default():R()):null}return()=>w(ge,b.value,S)}});export{Je as Q,He as S};
