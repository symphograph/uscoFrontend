import{a as h,Q as x}from"./QImg.da576236.js";import{H as S,r as f,i as V,w,k as C,o as I,aa as N,m as b,n as k,aY as A,v as o,q as r,f as u,Q as y,cq as L,t as R,u as U,l as B}from"./index.e7a4ac85.js";import{Q as E}from"./QItemLabel.0376b164.js";import{Q as P}from"./QSelect.f2ed9855.js";import{A as D}from"./AuthorItem.b16977db.js";import{A as e}from"./lib.bd005370.js";/* empty css                                                                   */import{_ as T}from"./plugin-vue_export-helper.21dcd24c.js";const q={__name:"SelectComposer",emits:["itSel"],setup(z,{emit:m}){const v=S(),_=f(),c=f([...e.list.value]),g=m,s=V("loadingAuthors");function Q(d,a,t){a(()=>{if(!d){c.value=[...e.list.value];return}const n=d.toLowerCase();let l=[...e.list.value];d&&(l=l.filter(i=>(i.fioRu?i.fioRu.toLowerCase().includes(n):!1)||(i.iofEn?i.iofEn.toLowerCase().includes(n):!1))),c.value=l})}return w(s,()=>{s.value||(c.value=[...e.list.value],console.log("loadingAuthors",s.value))}),C(()=>{}),I(()=>{}),N(()=>{e.selected.value=void 0}),(d,a)=>(b(),k(P,{options:c.value,ref_key:"refSelect",ref:_,modelValue:o(e).selected.value,"onUpdate:modelValue":[a[1]||(a[1]=t=>o(e).selected.value=t),a[2]||(a[2]=t=>g("itSel",o(e).selected.value))],"option-label":"fioRu","option-value":"id","map-options":"","use-input":!o(s),"hide-selected":"","fill-input":"",autocomplete:"off","input-debounce":"0",onFilter:Q,clearable:"",style:{width:"100%"},label:"\u041A\u043E\u043C\u043F\u043E\u0437\u0438\u0442\u043E\u0440",loading:o(s)},A({option:r(t=>{var n,l,i,p;return[u(D,L(t.itemProps,{id:(n=t.opt)==null?void 0:n.id,iofEn:(l=t.opt)==null?void 0:l.iofEn,iconUrl:(i=t.opt)==null?void 0:i.iconUrl,fioRu:(p=t.opt)==null?void 0:p.fioRu}),{sections:r(()=>[u(x,{side:""},{default:r(()=>[u(E,{caption:""},{default:r(()=>[R(U(t.opt.cntWorks),1)]),_:2},1024)]),_:2},1024)]),_:2},1040,["id","iofEn","iconUrl","fioRu"]),B("",!0)]}),_:2},[o(e).selected.value?{name:"prepend",fn:r(()=>[u(y,null,{default:r(()=>[u(h,{src:o(e).selected.value.iconUrl,class:"authorAva",eager:"","no-spinner":"","no-transition":"","placeholder-src":"/img/avatars/init_ava.png",style:{width:"50px",cursor:"pointer"},onClick:a[0]||(a[0]=()=>o(v).push({path:"/lib/author/"+o(e).selected.value.id}))},null,8,["src"])]),_:1})]),key:"0"}:void 0]),1032,["options","modelValue","use-input","loading"]))}};var O=T(q,[["__scopeId","data-v-67142578"]]);export{O as S};
