import{n as m}from"./myFuncts.7f91abf8.js";import{a as _}from"./axios.8f562e2b.js";import{u as v}from"./use-quasar.894b47c5.js";import{G as A}from"./lib.be306c2e.js";import{i as y,p as e,r as o,w as g,k as L,J as M,m as w,n as b}from"./index.11572179.js";import"./myAxios.d5d7b004.js";const C={__name:"LibLayout",setup(k){const d=String("https://sakh-orch.ru/stapi/"),u=v(),p=y("editModes").lib;e("editMode",p);const a=o([]);e("AuthorSelectList",a);const s=o(!1);e("loadingAuthors",s);const n=o(0);e("selectedAuthorId",n);const l=o(null);e("selectedAuthor",l);const c=o([]);e("genres",c),g(n,()=>{l.value=a.value.find(t=>t.id===n.value)});function f(){s.value=!0,_.post(d+"epoint/lib/author.php",{params:{method:"all"}}).then(t=>{var i,r;a.value=(r=(i=t==null?void 0:t.data)==null?void 0:i.data)!=null?r:[]}).catch(t=>{a.value=[],u.notify(m(t))}).finally(()=>{s.value=!1})}async function h(){c.value=await A.getList(u)}return L(()=>{h(),f()}),(t,i)=>{const r=M("router-view");return w(),b(r)}}};export{C as default};
