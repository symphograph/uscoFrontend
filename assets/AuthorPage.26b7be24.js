import{I,H as P,i as p,r as N,p as E,o as B,m as c,n as f,q as i,f as l,ax as R,v as a,x as T,bi as y,y as b,bm as M,A as O,l as A,t as q,u as g}from"./index.11572179.js";import{Q as D}from"./QItemLabel.06f6b55b.js";import{b as L}from"./QImg.5a36287c.js";import{P as U}from"./PageShell.f9f99083.js";import{S as W}from"./SelectComposer.16f87005.js";import{P as $}from"./LocalStorage.0198308a.js";import{u as j}from"./use-quasar.894b47c5.js";import{a as k}from"./axios.8f562e2b.js";import{e as H,a as V,n as v}from"./myFuncts.7f91abf8.js";import{_ as K}from"./BtnDelete.3d55e9b3.js";import{A as z}from"./lib.be306c2e.js";import"./MainFooter.vue_vue_type_style_index_0_scoped_true_lang.55812a5a.js";import"./touch.9135741d.js";import"./selection.93775355.js";import"./QScrollArea.dd54d94c.js";import"./plugin-vue_export-helper.21dcd24c.js";import"./format.de7e9769.js";import"./QLinearProgress.5ceb5230.js";/* empty css                                                    */import"./QSelect.44bc25a7.js";import"./QMenu.924c0b17.js";import"./position-engine.1bf61849.js";import"./rtl.276c3f1b.js";import"./AuthorItem.6c196834.js";/* empty css                                                               *//* empty css                                                                   */import"./QTooltip.280a1a0c.js";import"./myAxios.d5d7b004.js";const F={class:"centralCol"},wt={__name:"AuthorPage",setup(G){const u=j(),n=I(),w=P(),h=String("https://sakh-orch.ru/stapi/"),s=p("editMode"),C=N(null);E("searchText",C);const d=p("selectedAuthorId"),o=p("selectedAuthor");function Q(t){d.value=t.id,$.set("lastAuthor",t.id),n.params.id=t.id,w.push({path:"/lib/author/"+t.id}),_()}async function _(){!d.value||(o.value=await z.get(u,d.value))}function S(){k.post(h+"epoint/lib/author.php",{params:{method:"update",id:n.params.id,author:o.value}}).then(t=>{var e,r,m;if(!((e=t==null?void 0:t.data)!=null&&e.result))throw new Error;u.notify(V((m=(r=t==null?void 0:t.data)==null?void 0:r.result)!=null?m:null))}).catch(t=>{u.notify(v(t))})}function x(){k.post(h+"epoint/lib/author.php",{params:{method:"del",workId:n.params.id}}).then(t=>{var e,r,m;if(!((e=t==null?void 0:t.data)!=null&&e.result))throw new Error;u.notify(V((m=(r=t==null?void 0:t.data)==null?void 0:r.result)!=null?m:null))}).catch(t=>{u.notify(v(t))})}return B(()=>{d.value=n.params.id*1,_()}),(t,e)=>(c(),f(U,{"page-title":"\u041A\u043E\u043C\u043F\u043E\u0437\u0438\u0442\u043E\u0440 "},{ToolPanel:i(()=>[l(W,{onItSel:Q})]),PageContent:i(()=>[R("div",F,[a(o)?(c(),f(T,{key:0},{default:i(()=>[l(b,null,{default:i(()=>[l(y,{modelValue:a(o).fioRu,"onUpdate:modelValue":e[0]||(e[0]=r=>a(o).fioRu=r),readonly:!a(s),label:"\u0424\u0430\u043C\u0438\u043B\u0438\u044F, \u0418\u043C\u044F \u041E\u0442\u0447\u0435\u0441\u0442\u0432\u043E"},null,8,["modelValue","readonly"]),l(y,{modelValue:a(o).iofEn,"onUpdate:modelValue":e[1]||(e[1]=r=>a(o).iofEn=r),readonly:!a(s),label:"Name LastName"},null,8,["modelValue","readonly"])]),_:1}),a(s)?(c(),f(M,{key:0,align:"right"},{default:i(()=>[l(O,{label:"\u0421\u043E\u0445\u0440\u0430\u043D\u0438\u0442\u044C",color:"green",onClick:S}),l(K,{label:"\u0423\u0434\u0430\u043B\u0438\u0442\u044C",title:"\u0423\u0434\u0430\u043B\u0438\u0442\u044C \u043A\u043E\u043C\u043F\u043E\u0437\u0438\u0442\u043E\u0440\u0430","throw-confirm":"",danger:"",onOnOk:x,tooltip:"\u0423\u0434\u0430\u043B\u0438\u0442\u044C \u043A\u043E\u043C\u043F\u043E\u0437\u0438\u0442\u043E\u0440\u0430"})]),_:1})):A("",!0),l(b,null,{default:i(()=>[l(L,{clickable:"",to:`/lib/works/${a(o).id}`},{default:i(()=>[l(D,null,{default:i(()=>[q(g(a(o).cntWorks)+" "+g(a(H)(a(o).cntWorks,["\u043F\u0440\u043E\u0438\u0437\u0432\u0435\u0434\u0435\u043D\u0438\u0435","\u043F\u0440\u043E\u0438\u0437\u0432\u0435\u0434\u0435\u043D\u0438\u044F","\u043F\u0440\u043E\u0438\u0437\u0432\u0435\u0434\u0435\u043D\u0438\u0439"])),1)]),_:1})]),_:1},8,["to"])]),_:1})]),_:1})):A("",!0)])]),_:1}))}};export{wt as default};
