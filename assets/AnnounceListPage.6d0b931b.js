import{i as p,m as _,n as v,q as r,f as l,bk as w,bl as I,t as g,v as y,x as V,b as M,u as N,I as R,r as s,p as m,B as P,l as E,ax as Q}from"./index.52314c0a.js";import{Q as x}from"./QSelect.f7b7c6b2.js";import{Q as U}from"./QTooltip.b7287151.js";import{_ as $}from"./AnnounceList.f3b16590.js";import{u as q}from"./use-quasar.c9b9d459.js";import{u as F}from"./use-meta.bb1668c8.js";import{a as O}from"./axios.7c1287c1.js";import{g as W,a as j,n as z}from"./myFuncts.671597d2.js";import{Q as T}from"./QItemLabel.1623a9a2.js";import{b as K,Q as G}from"./QImg.596a2b33.js";import{P as H}from"./PageShell.74f1b758.js";import{_ as J}from"./plugin-vue_export-helper.21dcd24c.js";import"./QMenu.e39235f4.js";import"./position-engine.2cf59900.js";import"./selection.0aa390e5.js";import"./rtl.276c3f1b.js";import"./format.de7e9769.js";import"./AnnounceCard.d137d621.js";import"./BtnDelete.e0975511.js";import"./MainFooter.vue_vue_type_style_index_0_scoped_true_lang.fe28985f.js";import"./touch.9135741d.js";import"./AnderHeader.vue_vue_type_style_index_0_lang.956c3b84.js";import"./QScrollArea.546a57de.js";import"./QLinearProgress.1ce87716.js";const X={__name:"SelectSort",emits:["onSelect"],setup(Y,{emit:d}){const n=p("sortType"),i=d,f=[{label:"\u0421\u043D\u0430\u0447\u0430\u043B\u0430 \u043D\u043E\u0432\u044B\u0435",value:"dateDesc",caption:"\u041F\u043E \u0443\u0431\u044B\u0432\u0430\u043D\u0438\u044E \u0434\u0430\u0442\u044B"},{label:"\u0421\u043D\u0430\u0447\u0430\u043B\u0430 \u0434\u0430\u0432\u043D\u0438\u0435",value:"dateAsc",caption:"\u041F\u043E \u0432\u043E\u0437\u0440\u0430\u0441\u0442\u0430\u043D\u0438\u044E \u0434\u0430\u0442\u044B"}];return(h,a)=>(_(),v(x,{modelValue:V(n),"onUpdate:modelValue":[a[0]||(a[0]=o=>M(n)?n.value=o:null),a[1]||(a[1]=o=>i("onSelect"))],borderless:"","map-options":"","emit-value":"",options:f},{option:r(o=>[l(K,w(I(o.itemProps)),{default:r(()=>[l(G,null,{default:r(()=>[l(T,null,{default:r(()=>[g(y(o.opt.label),1)]),_:2},1024),l(T,{caption:""},{default:r(()=>[g(y(o.opt.caption),1)]),_:2},1024)]),_:2},1024)]),_:2},1040)]),_:1},8,["modelValue"]))}};const Z={class:"centralCol"},tt={class:"gridArea"},C="\u0410\u043D\u043E\u043D\u0441\u044B",et={__name:"AnnounceListPage",setup(Y){const d=W(C);F(d);const n=String("https://api.sakh-orch.ru/"),i=q();N();const f=R(),h=p("announceEditMode"),a=s(!1);m("compactCard",a),p("progress");const o=s("dateDesc");m("sortType",o);const u=s(new Date().getFullYear());m("evYear",u);const k=s([]);m("announceList",k);const b=p("scrollWatch"),A=s();function B(){b.value=!1,a.value=!a.value,setTimeout(()=>{b.value=!0},500)}function D(){let t=[];for(let e=2018;e<=new Date().getFullYear();e++)t.push(e);return t.reverse()}function L(){O.post(n+"api/event/announce.php",{params:{method:"add"}}).then(t=>{var e,c,S;if(!((e=t==null?void 0:t.data)!=null&&e.result))throw new Error;i.notify(j((S=(c=t==null?void 0:t.data)==null?void 0:c.result)!=null?S:null)),f.push({path:"/announce/"+t.data.data.id})}).catch(t=>{i.notify(z(t))})}return(t,e)=>(_(),v(H,{pageTitle:C},{ToolPanel:r(()=>[V(h)?(_(),v(P,{key:0,label:"\u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C",stretch:"",flat:"",onClick:L})):E("",!0),l(x,{modelValue:u.value,"onUpdate:modelValue":e[0]||(e[0]=c=>u.value=c),options:D(),"emit-value":"",borderless:""},null,8,["modelValue","options"]),l(X,{onOnSelect:e[1]||(e[1]=()=>{A.value.setScrollPosition("vertical",0,300)})}),l(P,{icon:a.value?"unfold_less":"unfold_more",flat:"",stretch:"",onClick:B},{default:r(()=>[l(U,null,{default:r(()=>[g(y(a.value?"\u041F\u043E\u0434\u0440\u043E\u0431\u043D\u043E":"\u041A\u0440\u0430\u0442\u043A\u043E"),1)]),_:1})]),_:1},8,["icon"])]),PageContent:r(()=>[Q("div",Z,[Q("div",tt,[l($,{evYear:u.value,method:"listByYear",sort:o.value},null,8,["evYear","sort"])])])]),_:1}))}};var Vt=J(et,[["__scopeId","data-v-59b6e2fa"]]);export{Vt as default};
