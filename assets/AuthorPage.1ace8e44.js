import{I,H as P,i as p,r as N,p as E,o as B,m as c,n as f,q as i,f as l,ax as R,v as a,x as T,bi as y,y as b,bm as M,A as O,l as A,t as q,u as g}from"./index.e0f85654.js";import{Q as D}from"./QItemLabel.36b7e39e.js";import{b as L}from"./QImg.2e8349d1.js";import{P as U}from"./PageShell.46b7f308.js";import{S as W}from"./SelectComposer.63640db7.js";import{P as $}from"./LocalStorage.fd40e000.js";import{u as j}from"./use-quasar.f463e671.js";import{a as k}from"./axios.42d422c9.js";import{e as H,a as V,n as v}from"./myFuncts.0887c750.js";import{_ as K}from"./BtnDelete.456e0377.js";import{A as z}from"./lib.beeda29a.js";import"./MainFooter.vue_vue_type_style_index_0_scoped_true_lang.24bd73f4.js";import"./touch.9135741d.js";import"./selection.289153d1.js";import"./QScrollArea.edf23b1f.js";import"./plugin-vue_export-helper.21dcd24c.js";import"./format.de7e9769.js";import"./QLinearProgress.ca3f1b6e.js";/* empty css                                                    */import"./QSelect.7622fe6b.js";import"./QMenu.71680b5c.js";import"./position-engine.6acbd510.js";import"./rtl.276c3f1b.js";import"./AuthorItem.f7420d9e.js";/* empty css                                                                   */import"./QTooltip.cd2ab7d7.js";import"./myAxios.8b50438a.js";const F={class:"centralCol"},vt={__name:"AuthorPage",setup(G){const u=j(),m=I(),w=P(),h=String("https://sakh-orch.ru/stapi/"),s=p("editMode"),C=N(null);E("searchText",C);const d=p("selectedAuthorId"),o=p("selectedAuthor");function Q(t){d.value=t.id,$.set("lastAuthor",t.id),m.params.id=t.id,w.push({path:"/lib/author/"+t.id}),_()}async function _(){!d.value||(o.value=await z.get(u,d.value))}function S(){k.post(h+"epoint/lib/author.php",{params:{method:"update",id:m.params.id,author:o.value}}).then(t=>{var e,r,n;if(!((e=t==null?void 0:t.data)!=null&&e.result))throw new Error;u.notify(V((n=(r=t==null?void 0:t.data)==null?void 0:r.result)!=null?n:null))}).catch(t=>{u.notify(v(t))})}function x(){k.post(h+"epoint/lib/author.php",{params:{method:"del",workId:m.params.id}}).then(t=>{var e,r,n;if(!((e=t==null?void 0:t.data)!=null&&e.result))throw new Error;u.notify(V((n=(r=t==null?void 0:t.data)==null?void 0:r.result)!=null?n:null))}).catch(t=>{u.notify(v(t))})}return B(()=>{d.value=m.params.id*1,_()}),(t,e)=>(c(),f(U,{"page-title":"\u041A\u043E\u043C\u043F\u043E\u0437\u0438\u0442\u043E\u0440 "},{ToolPanel:i(()=>[l(W,{onItSel:Q})]),PageContent:i(()=>[R("div",F,[a(o)?(c(),f(T,{key:0},{default:i(()=>[l(b,null,{default:i(()=>[l(y,{modelValue:a(o).fioRu,"onUpdate:modelValue":e[0]||(e[0]=r=>a(o).fioRu=r),readonly:!a(s),label:"\u0424\u0430\u043C\u0438\u043B\u0438\u044F, \u0418\u043C\u044F \u041E\u0442\u0447\u0435\u0441\u0442\u0432\u043E"},null,8,["modelValue","readonly"]),l(y,{modelValue:a(o).iofEn,"onUpdate:modelValue":e[1]||(e[1]=r=>a(o).iofEn=r),readonly:!a(s),label:"Name LastName"},null,8,["modelValue","readonly"])]),_:1}),a(s)?(c(),f(M,{key:0,align:"right"},{default:i(()=>[l(O,{label:"\u0421\u043E\u0445\u0440\u0430\u043D\u0438\u0442\u044C",color:"green",onClick:S}),l(K,{label:"\u0423\u0434\u0430\u043B\u0438\u0442\u044C",title:"\u0423\u0434\u0430\u043B\u0438\u0442\u044C \u043A\u043E\u043C\u043F\u043E\u0437\u0438\u0442\u043E\u0440\u0430","throw-confirm":"",danger:"",onOnOk:x,tooltip:"\u0423\u0434\u0430\u043B\u0438\u0442\u044C \u043A\u043E\u043C\u043F\u043E\u0437\u0438\u0442\u043E\u0440\u0430"})]),_:1})):A("",!0),l(b,null,{default:i(()=>[l(L,{clickable:"",to:`/lib/works/${a(o).id}`},{default:i(()=>[l(D,null,{default:i(()=>[q(g(a(o).cntWorks)+" "+g(a(H)(a(o).cntWorks,["\u043F\u0440\u043E\u0438\u0437\u0432\u0435\u0434\u0435\u043D\u0438\u0435","\u043F\u0440\u043E\u0438\u0437\u0432\u0435\u0434\u0435\u043D\u0438\u044F","\u043F\u0440\u043E\u0438\u0437\u0432\u0435\u0434\u0435\u043D\u0438\u0439"])),1)]),_:1})]),_:1},8,["to"])]),_:1})]),_:1})):A("",!0)])]),_:1}))}};export{vt as default};
