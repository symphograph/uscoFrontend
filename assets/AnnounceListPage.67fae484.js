import{Q as B}from"./QToolbarTitle.a2a60936.js";import{Q as V}from"./QToolbar.80094866.js";import{Q as D}from"./QSpace.f90d1012.js";import{i as y,n as c,t as b,G as o,f as a,b2 as $,b3 as F,U as f,ax as _,V as d,b as I,u as M,aX as N,r as p,p as m,q as R,H as g,a$ as U,l as k,F as q,a9 as Y}from"./index.d7d1bcb8.js";import{Q as x}from"./QSelect.0366063b.js";import{Q as E}from"./QTooltip.87ead732.js";import{Q as z}from"./QLinearProgress.d8cf207f.js";import{_ as j}from"./AnnounceList.348bc5d4.js";import{u as G}from"./use-quasar.ff1c236f.js";import{u as H}from"./use-meta.6535a57c.js";import{api as K}from"./axios.4ccd572a.js";import{g as O,a as X,n as J}from"./myFuncts.bfee3d05.js";import{b as W,Q as Z,a as w}from"./QItemLabel.225c1518.js";import{_ as ee}from"./plugin-vue_export-helper.21dcd24c.js";import"./rtl.da602a43.js";import"./position-engine.802685a2.js";import"./format.3e32b8d9.js";import"./AnnounceCard.bfde8bfe.js";import"./QImg.83f9a5cf.js";import"./use-ratio.6d8d9949.js";import"./BtnDelete.495bf513.js";const ae={__name:"SelectSort",setup(C){const s=y("sortType"),v=[{label:"\u0421\u043D\u0430\u0447\u0430\u043B\u0430 \u043D\u043E\u0432\u044B\u0435",value:"dateDesc",caption:"\u041F\u043E \u0443\u0431\u044B\u0432\u0430\u043D\u0438\u044E \u0434\u0430\u0442\u044B"},{label:"\u0421\u043D\u0430\u0447\u0430\u043B\u0430 \u0434\u0430\u0432\u043D\u0438\u0435",value:"dateAsc",caption:"\u041F\u043E \u0432\u043E\u0437\u0440\u0430\u0441\u0442\u0430\u043D\u0438\u044E \u0434\u0430\u0442\u044B"}];return(Q,i)=>(c(),b(x,{modelValue:d(s),"onUpdate:modelValue":i[0]||(i[0]=r=>I(s)?s.value=r:null),borderless:"","map-options":"","emit-value":"",options:v},{option:o(r=>[a(W,$(F(r.itemProps)),{default:o(()=>[a(Z,null,{default:o(()=>[a(w,null,{default:o(()=>[f(_(r.opt.label),1)]),_:2},1024),a(w,{caption:""},{default:o(()=>[f(_(r.opt.caption),1)]),_:2},1024)]),_:2},1024)]),_:2},1040)]),_:1},8,["modelValue"]))}};const te={class:"selectors"},oe={class:"gridArea"},re={__name:"AnnounceListPage",setup(C){const s=O("\u0410\u043D\u043E\u043D\u0441\u044B");H(s);const v=String("https://api.sakh-orch.ru/"),Q=G();M();const i=N(),r=y("editMode"),l=p(!1);m("compactCard",l);const L=y("progress"),h=p("dateDesc");m("sortType",h);const u=p(new Date().getFullYear());m("evYear",u);const P=p([]);m("announceList",P);function S(){let e=[];for(let t=2018;t<=new Date().getFullYear();t++)e.push(t);return e.reverse()}function A(){K.post(v+"api/event/announce.php",{params:{method:"add"}}).then(e=>{var t,n,T;if(!((t=e==null?void 0:e.data)!=null&&t.result))throw new Error;Q.notify(X((T=(n=e==null?void 0:e.data)==null?void 0:n.result)!=null?T:null)),i.push({path:"/announce/"+e.data.data.id})}).catch(e=>{Q.notify(J(e))})}return(e,t)=>(c(),R(q,null,[g("div",{class:U(["pageToolbar",e.$q.platform.is.desktop?"no-wrap":"wrap"])},[a(V,null,{default:o(()=>[a(B,null,{default:o(()=>[f(_(d(s).title),1)]),_:1})]),_:1}),a(V,null,{default:o(()=>[a(D),g("div",te,[d(r)?(c(),b(Y,{key:0,label:"\u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C",onClick:A})):k("",!0),a(x,{modelValue:u.value,"onUpdate:modelValue":t[0]||(t[0]=n=>u.value=n),options:S(),"emit-value":"",borderless:""},null,8,["modelValue","options"]),a(ae),a(Y,{icon:l.value?"unfold_less":"unfold_more",flat:"",onClick:t[1]||(t[1]=n=>l.value=!l.value)},{default:o(()=>[a(E,null,{default:o(()=>[f(_(l.value?"\u041F\u043E\u0434\u0440\u043E\u0431\u043D\u043E":"\u041A\u0440\u0430\u0442\u043A\u043E"),1)]),_:1})]),_:1},8,["icon"])])]),_:1})],2),d(L)?(c(),b(z,{key:0,indeterminate:"",color:"secondary"})):k("",!0),g("div",oe,[a(j,{evYear:u.value,method:"listByYear",sort:h.value},null,8,["evYear","sort"])])],64))}};var we=ee(re,[["__scopeId","data-v-73719c07"]]);export{we as default};
