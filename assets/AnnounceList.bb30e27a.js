import{u as h}from"./use-quasar.f7c166b5.js";import{api as w}from"./axios.12c91436.js";import{A as y}from"./AnnounceCard.499694a0.js";import{r as u,u as _,d as g,i as o,a as k,w as A,D as L,f as c,g as F,at as B,F as D,j as N}from"./index.2c6ce450.js";import{n as Y}from"./myFuncts.8c7f864e.js";const q={__name:"AnnounceList",props:{sort:u(null),evYear:u(null),onlyNew:u(0)},setup(i){const r=i,m=String("https://api.sakh-orch.ru/"),p=h();_(),g(),o("editMode");const l=o("progress"),e=o("announceList");o("Halls");function s(){l.value=!0,w.post(m+"api/event/announce/list.php",{params:{sort:r.sort,year:r.evYear,new:r.onlyNew}}).then(t=>{var a,n;e.value=(n=(a=t==null?void 0:t.data)==null?void 0:a.data)!=null?n:[]}).catch(t=>{p.notify(Y(t)),e.value=[]}).finally(()=>{l.value=!1})}k(()=>{s()}),A(()=>r.evYear,()=>{s()});const d=(t,a)=>t.datetime<a.datetime?1:-1,f=(t,a)=>t.datetime>a.datetime?1:-1,v=L(()=>{if(!e.value||!e.value.length)return[];switch(r.sort){case 0:return[...e.value].sort(d);case 1:return[...e.value].sort(f);default:return e.value}});return(t,a)=>(c(!0),F(D,null,B(v.value,n=>(c(),N(y,{key:n.id,Announce:n,onIamDeleted:s},null,8,["Announce"]))),128))}};export{q as _};
