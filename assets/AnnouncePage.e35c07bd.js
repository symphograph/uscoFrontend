import{Q as Ie,M as He}from"./MainFooter.6afd7672.js";import{u as Ue}from"./use-meta.9fd8737e.js";import{u as au,a as Mu,n as le,c as Pe,g as Le}from"./myFuncts.0e97ec07.js";import{c as Qe,a as ne}from"./axios.5e2b2806.js";import{Q as q}from"./QItemLabel.a1211d51.js";import{Q as M,b as z,a as ae}from"./QImg.480ab182.js";import{V as Te,X as We,bb as Ne,Z as Re,di as Ke,r as p,c as K,w as Nu,aJ as je,W as Ye,h as W,g as ze,dk as Je,au as Xe,a6 as Ge,a4 as Ze,ak as Ru,z as J,i as nu,m as v,C as T,f as u,p as e,u as i,bi as ru,y as yu,ax as N,d as ou,k as bu,n as O,l as L,q as V,t as P,bk as me,bl as pe,o as ge,b as Ou,E as Ju,x as eu,bm as cu,v as Au,I as lu,F as uu,A as Ku,cR as ut,cq as _e,D as $u,df as ju,B as su,H as ke,G as et,a as tt,ay as oe}from"./index.7ebe9bab.js";import{Q as Cu}from"./QSelect.6c21190f.js";import{Q as he}from"./QTooltip.ff27ca0c.js";import{b as Iu,Q as ye}from"./QExpansionItem.039698b5.js";import{a as lt}from"./style.01fd64cc.js";/* empty css               */import{u as ie,b as nt,c as at,_ as Fu,g as ot,f as it,Q as se,a as st}from"./QPopupProxy.568e5aa1.js";import{T as rt}from"./QSlideTransition.cd6740af.js";import{p as ku}from"./format.de7e9769.js";import{C as re}from"./ClosePopup.56257794.js";import{A as dt}from"./AnnounceCard.1c56d55a.js";import{S as ct,Q as vt}from"./QInnerLoading.888b5775.js";import{m as ft}from"./myAuth.4904ab28.js";import{_ as Hu}from"./BtnDelete.0e37f73d.js";import{H as du}from"./hall.d0b1ca13.js";import{m as qu,P as Yu}from"./announce.2e58aef3.js";import{Q as de}from"./QList.fd723618.js";import{S as mt}from"./SelectComposer.6e8cf52e.js";import{W as mu,P as zu,A as pt}from"./lib.c1fa19e3.js";import{_ as ce}from"./BtnMoveSort.e1deb428.js";import{u as gt}from"./myAxios.c606122d.js";import{_ as Xu}from"./plugin-vue_export-helper.21dcd24c.js";import{Q as _t}from"./QVideo.16d9bb92.js";import{_ as ve}from"./PhoneNumber.75f17b8b.js";import{S as fe}from"./img.4ff49e19.js";import"./QToolbarTitle.684f783a.js";import"./QLinearProgress.0e4c1524.js";import"./QMenu.a650daa3.js";import"./position-engine.59731032.js";import"./selection.a18f75a6.js";import"./use-virtual-scroll.d5730ac6.js";import"./rtl.276c3f1b.js";import"./use-file.b8d3a767.js";import"./get-emits-object.a3f16783.js";import"./use-render-cache.3aae9b27.js";import"./touch.9135741d.js";import"./SketchImg.5ce9ddcf.js";import"./entry.e32022ee.js";import"./AuthorItem.f076aab1.js";function kt(n,S){if(n.hour!==null){if(n.minute===null)return"minute";if(S===!0&&n.second===null)return"second"}return"hour"}function ht(){const n=new Date;return{hour:n.getHours(),minute:n.getMinutes(),second:n.getSeconds(),millisecond:n.getMilliseconds()}}var yt=Te({name:"QTime",props:{...We,...Ne,...ie,modelValue:{required:!0,validator:n=>typeof n=="string"||n===null},mask:{...ie.mask,default:null},format24h:{type:Boolean,default:null},defaultDate:{type:String,validator:n=>/^-?[\d]+\/[0-1]\d\/[0-3]\d$/.test(n)},options:Function,hourOptions:Array,minuteOptions:Array,secondOptions:Array,withSeconds:Boolean,nowBtn:Boolean},emits:nt,setup(n,{slots:S,emit:c}){const d=ze(),{$q:a}=d.proxy,g=Re(n,a),{tabindex:l,headerClass:D,getLocale:h,getCurrentDate:m}=at(n,a),A=Ke(n),k=Je(A);let C,Q;const j=p(null),I=K(()=>be()),b=K(()=>h()),E=K(()=>Ae()),B=Fu(n.modelValue,I.value,b.value,n.calendar,E.value),f=p(kt(B)),s=p(B),U=p(B.hour===null||B.hour<12),H=K(()=>`q-time q-time--${n.landscape===!0?"landscape":"portrait"}`+(g.value===!0?" q-time--dark q-dark":"")+(n.disable===!0?" disabled":n.readonly===!0?" q-time--readonly":"")+(n.bordered===!0?" q-time--bordered":"")+(n.square===!0?" q-time--square no-border-radius":"")+(n.flat===!0?" q-time--flat no-shadow":"")),w=K(()=>{const t=s.value;return{hour:t.hour===null?"--":y.value===!0?ku(t.hour):String(U.value===!0?t.hour===0?12:t.hour:t.hour>12?t.hour-12:t.hour),minute:t.minute===null?"--":ku(t.minute),second:t.second===null?"--":ku(t.second)}}),y=K(()=>n.format24h!==null?n.format24h:a.lang.date.format24h),pu=K(()=>{const t=f.value==="hour",o=t===!0?12:60,_=s.value[f.value];let Y=`rotate(${Math.round(_*(360/o))-180}deg) translateX(-50%)`;return t===!0&&y.value===!0&&s.value.hour>=12&&(Y+=" scale(.7)"),{transform:Y}}),vu=K(()=>s.value.hour!==null),X=K(()=>vu.value===!0&&s.value.minute!==null),iu=K(()=>n.hourOptions!==void 0?t=>n.hourOptions.includes(t):n.options!==void 0?t=>n.options(t,null,null):null),gu=K(()=>n.minuteOptions!==void 0?t=>n.minuteOptions.includes(t):n.options!==void 0?t=>n.options(s.value.hour,t,null):null),_u=K(()=>n.secondOptions!==void 0?t=>n.secondOptions.includes(t):n.options!==void 0?t=>n.options(s.value.hour,s.value.minute,t):null),G=K(()=>{if(iu.value===null)return null;const t=Bu(0,11,iu.value),o=Bu(12,11,iu.value);return{am:t,pm:o,values:t.values.concat(o.values)}}),R=K(()=>gu.value!==null?Bu(0,59,gu.value):null),r=K(()=>_u.value!==null?Bu(0,59,_u.value):null),F=K(()=>{switch(f.value){case"hour":return G.value;case"minute":return R.value;case"second":return r.value}}),Du=K(()=>{let t,o,_=0,$=1;const Y=F.value!==null?F.value.values:void 0;f.value==="hour"?y.value===!0?(t=0,o=23):(t=0,o=11,U.value===!1&&(_=12)):(t=0,o=55,$=5);const tu=[];for(let x=t,Z=t;x<=o;x+=$,Z++){const fu=x+_,qe=Y!==void 0&&Y.includes(fu)===!1,Oe=f.value==="hour"&&x===0?y.value===!0?"00":"12":x;tu.push({val:fu,index:Z,disable:qe,label:Oe})}return tu}),Eu=K(()=>[[rt,Ce,void 0,{stop:!0,prevent:!0,mouse:!0}]]);Nu(()=>n.modelValue,t=>{const o=Fu(t,I.value,b.value,n.calendar,E.value);(o.dateHash!==s.value.dateHash||o.timeHash!==s.value.timeHash)&&(s.value=o,o.hour===null?f.value="hour":U.value=o.hour<12)}),Nu([I,b],()=>{Xe(()=>{Wu()})});function Gu(){const t={...m(),...ht()};Wu(t),Object.assign(s.value,t),f.value="hour"}function Bu(t,o,_){const $=Array.apply(null,{length:o+1}).map((Y,tu)=>{const x=tu+t;return{index:x,val:_(x)===!0}}).filter(Y=>Y.val===!0).map(Y=>Y.index);return{min:$[0],max:$[$.length-1],values:$,threshold:o+1}}function Zu(t,o,_){const $=Math.abs(t-o);return Math.min($,_-$)}function Uu(t,{min:o,max:_,values:$,threshold:Y}){if(t===o)return o;if(t<o||t>_)return Zu(t,o,Y)<=Zu(t,_,Y)?o:_;const tu=$.findIndex(fu=>t<=fu),x=$[tu-1],Z=$[tu];return t-x<=Z-t?x:Z}function be(){return n.calendar!=="persian"&&n.mask!==null?n.mask:`HH:mm${n.withSeconds===!0?":ss":""}`}function Ae(){if(typeof n.defaultDate!="string"){const t=m(!0);return t.dateHash=ot(t),t}return Fu(n.defaultDate,"YYYY/MM/DD",void 0,n.calendar)}function Pu(){return Ge(d)===!0||F.value!==null&&(F.value.values.length===0||f.value==="hour"&&y.value!==!0&&G.value[U.value===!0?"am":"pm"].values.length===0)}function Lu(){const t=j.value,{top:o,left:_,width:$}=t.getBoundingClientRect(),Y=$/2;return{top:o+Y,left:_+Y,dist:Y*.7}}function Ce(t){if(Pu()!==!0){if(t.isFirst===!0){C=Lu(),Q=wu(t.evt,C);return}Q=wu(t.evt,C,Q),t.isFinal===!0&&(C=!1,Q=null,ue())}}function ue(){f.value==="hour"?f.value="minute":n.withSeconds&&f.value==="minute"&&(f.value="second")}function wu(t,o,_){const $=je(t),Y=Math.abs($.top-o.top),tu=Math.sqrt(Math.pow(Math.abs($.top-o.top),2)+Math.pow(Math.abs($.left-o.left),2));let x,Z=Math.asin(Y/tu)*(180/Math.PI);if($.top<o.top?Z=o.left<$.left?90-Z:270+Z:Z=o.left<$.left?Z+90:270-Z,f.value==="hour"){if(x=Z/30,G.value!==null){const fu=y.value!==!0?U.value===!0:G.value.am.values.length!==0&&G.value.pm.values.length!==0?tu>=o.dist:G.value.am.values.length!==0;x=Uu(x+(fu===!0?0:12),G.value[fu===!0?"am":"pm"])}else x=Math.round(x),y.value===!0?tu<o.dist?x<12&&(x+=12):x===12&&(x=0):U.value===!0&&x===12?x=0:U.value===!1&&x!==12&&(x+=12);y.value===!0&&(U.value=x<12)}else x=Math.round(Z/6)%60,f.value==="minute"&&R.value!==null?x=Uu(x,R.value):f.value==="second"&&r.value!==null&&(x=Uu(x,r.value));return _!==x&&Fe[f.value](x),x}const Qu={hour(){f.value="hour"},minute(){f.value="minute"},second(){f.value="second"}};function De(t){t.keyCode===13&&ee()}function Ee(t){t.keyCode===13&&te()}function Be(t){Pu()!==!0&&(a.platform.is.desktop!==!0&&wu(t,Lu()),ue())}function we(t){Pu()!==!0&&wu(t,Lu())}function xe(t){if(t.keyCode===13)f.value="hour";else if([37,39].includes(t.keyCode)){const o=t.keyCode===37?-1:1;if(G.value!==null){const _=y.value===!0?G.value.values:G.value[U.value===!0?"am":"pm"].values;if(_.length===0)return;if(s.value.hour===null)xu(_[0]);else{const $=(_.length+_.indexOf(s.value.hour)+o)%_.length;xu(_[$])}}else{const _=y.value===!0?24:12,$=y.value!==!0&&U.value===!1?12:0,Y=s.value.hour===null?-o:s.value.hour;xu($+(24+Y+o)%_)}}}function Ve(t){if(t.keyCode===13)f.value="minute";else if([37,39].includes(t.keyCode)){const o=t.keyCode===37?-1:1;if(R.value!==null){const _=R.value.values;if(_.length===0)return;if(s.value.minute===null)Vu(_[0]);else{const $=(_.length+_.indexOf(s.value.minute)+o)%_.length;Vu(_[$])}}else{const _=s.value.minute===null?-o:s.value.minute;Vu((60+_+o)%60)}}}function Se(t){if(t.keyCode===13)f.value="second";else if([37,39].includes(t.keyCode)){const o=t.keyCode===37?-1:1;if(r.value!==null){const _=r.value.values;if(_.length===0)return;if(s.value.seconds===null)Su(_[0]);else{const $=(_.length+_.indexOf(s.value.second)+o)%_.length;Su(_[$])}}else{const _=s.value.second===null?-o:s.value.second;Su((60+_+o)%60)}}}function xu(t){s.value.hour!==t&&(s.value.hour=t,hu())}function Vu(t){s.value.minute!==t&&(s.value.minute=t,hu())}function Su(t){s.value.second!==t&&(s.value.second=t,hu())}const Fe={hour:xu,minute:Vu,second:Su};function ee(){U.value===!1&&(U.value=!0,s.value.hour!==null&&(s.value.hour-=12,hu()))}function te(){U.value===!0&&(U.value=!1,s.value.hour!==null&&(s.value.hour+=12,hu()))}function Tu(t){const o=n.modelValue;f.value!==t&&o!==void 0&&o!==null&&o!==""&&typeof o!="string"&&(f.value=t)}function hu(){if(iu.value!==null&&iu.value(s.value.hour)!==!0){s.value=Fu(),Tu("hour");return}if(gu.value!==null&&gu.value(s.value.minute)!==!0){s.value.minute=null,s.value.second=null,Tu("minute");return}if(n.withSeconds===!0&&_u.value!==null&&_u.value(s.value.second)!==!0){s.value.second=null,Tu("second");return}s.value.hour===null||s.value.minute===null||n.withSeconds===!0&&s.value.second===null||Wu()}function Wu(t){const o=Object.assign({...s.value},t),_=n.calendar==="persian"?ku(o.hour)+":"+ku(o.minute)+(n.withSeconds===!0?":"+ku(o.second):""):it(new Date(o.year,o.month===null?null:o.month-1,o.day,o.hour,o.minute,o.second,o.millisecond),I.value,b.value,o.year,o.timezoneOffset);o.changed=_!==n.modelValue,c("update:modelValue",_,o)}function Me(){const t=[W("div",{class:"q-time__link "+(f.value==="hour"?"q-time__link--active":"cursor-pointer"),tabindex:l.value,onClick:Qu.hour,onKeyup:xe},w.value.hour),W("div",":"),W("div",vu.value===!0?{class:"q-time__link "+(f.value==="minute"?"q-time__link--active":"cursor-pointer"),tabindex:l.value,onKeyup:Ve,onClick:Qu.minute}:{class:"q-time__link"},w.value.minute)];n.withSeconds===!0&&t.push(W("div",":"),W("div",X.value===!0?{class:"q-time__link "+(f.value==="second"?"q-time__link--active":"cursor-pointer"),tabindex:l.value,onKeyup:Se,onClick:Qu.second}:{class:"q-time__link"},w.value.second));const o=[W("div",{class:"q-time__header-label row items-center no-wrap",dir:"ltr"},t)];return y.value===!1&&o.push(W("div",{class:"q-time__header-ampm column items-between no-wrap"},[W("div",{class:"q-time__link "+(U.value===!0?"q-time__link--active":"cursor-pointer"),tabindex:l.value,onClick:ee,onKeyup:De},"AM"),W("div",{class:"q-time__link "+(U.value!==!0?"q-time__link--active":"cursor-pointer"),tabindex:l.value,onClick:te,onKeyup:Ee},"PM")])),W("div",{class:"q-time__header flex flex-center no-wrap "+D.value},o)}function $e(){const t=s.value[f.value];return W("div",{class:"q-time__content col relative-position"},[W(Ze,{name:"q-transition--scale"},()=>W("div",{key:"clock"+f.value,class:"q-time__container-parent absolute-full"},[W("div",{ref:j,class:"q-time__container-child fit overflow-hidden"},[Ru(W("div",{class:"q-time__clock cursor-pointer non-selectable",onClick:Be,onMousedown:we},[W("div",{class:"q-time__clock-circle fit"},[W("div",{class:"q-time__clock-pointer"+(s.value[f.value]===null?" hidden":n.color!==void 0?` text-${n.color}`:""),style:pu.value}),Du.value.map(o=>W("div",{class:`q-time__clock-position row flex-center q-time__clock-pos-${o.index}`+(o.val===t?" q-time__clock-position--active "+D.value:o.disable===!0?" q-time__clock-position--disable":"")},[W("span",o.label)]))])]),Eu.value)])])),n.nowBtn===!0?W(J,{class:"q-time__now-button absolute",icon:a.iconSet.datetime.now,unelevated:!0,size:"sm",round:!0,color:n.color,textColor:n.textColor,tabindex:l.value,onClick:Gu}):null])}return d.proxy.setNow=Gu,()=>{const t=[$e()],o=Ye(S.default);return o!==void 0&&t.push(W("div",{class:"q-time__actions"},o)),n.name!==void 0&&n.disable!==!0&&k(t,"push"),W("div",{class:H.value,tabindex:-1},[Me(),W("div",{class:"q-time__main col overflow-auto"},t)])}}});const bt={class:"q-pa-md",style:{"max-width":"300px",padding:"0"}},At={class:"row items-center justify-end"},Ct={class:"row items-center justify-end"},Dt={__name:"DateTime",props:{evDateTime:p("2019-02-01 12:44")},emits:["update:date"],setup(n,{emit:S}){const c=nu("Announce");return p(n.evDateTime),(a,g)=>(v(),T("div",bt,[u(ru,{filled:"",modelValue:i(c).eventTime,"onUpdate:modelValue":g[2]||(g[2]=l=>i(c).eventTime=l),mask:"####-##-## ##:##"},{prepend:e(()=>[u(yu,{name:"event",class:"cursor-pointer"},{default:e(()=>[u(se,{cover:"","transition-show":"scale","transition-hide":"scale"},{default:e(()=>[u(st,{modelValue:i(c).eventTime,"onUpdate:modelValue":g[0]||(g[0]=l=>i(c).eventTime=l),mask:"YYYY-MM-DD HH:mm"},{default:e(()=>[N("div",At,[Ru(u(J,{label:"\u0417\u0430\u043A\u0440\u044B\u0442\u044C",color:"primary",flat:""},null,512),[[re]])])]),_:1},8,["modelValue"])]),_:1})]),_:1})]),append:e(()=>[u(yu,{name:"access_time",class:"cursor-pointer"},{default:e(()=>[u(se,{cover:"","transition-show":"scale","transition-hide":"scale"},{default:e(()=>[u(yt,{modelValue:i(c).eventTime,"onUpdate:modelValue":g[1]||(g[1]=l=>i(c).eventTime=l),mask:"YYYY-MM-DD HH:mm",format24h:""},{default:e(()=>[N("div",Ct,[Ru(u(J,{label:"\u0417\u0430\u043A\u0440\u044B\u0442\u044C",color:"primary",flat:""},null,512),[[re]])])]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]))}},Et=ou({__name:"SuggestSelect",emits:["saved"],setup(n,{emit:S}){const c=au(),d=String("https://sakh-orch.ru/api/"),a=String("https://sakh-orch.ru/stapi/"),g=p(""),l=p(null),D=p([{title:{text:"\u0421\u0430\u0445\u0430\u043B\u0438\u043D\u0441\u043A\u0438\u0439 \u043C\u0435\u0436\u0434\u0443\u043D\u0430\u0440\u043E\u0434\u043D\u044B\u0439 \u0442\u0435\u0430\u0442\u0440\u0430\u043B\u044C\u043D\u044B\u0439 \u0446\u0435\u043D\u0442\u0440 \u0438\u043C\u0435\u043D\u0438 \u0410\u043D\u0442\u043E\u043D\u0430 \u041F\u0430\u0432\u043B\u043E\u0432\u0438\u0447\u0430 \u0427\u0435\u0445\u043E\u0432\u0430",hl:[{begin:26,end:31}]},subtitle:{text:"\u0422\u0435\u0430\u0442\u0440 \xB7 \u041A\u043E\u043C\u043C\u0443\u043D\u0438\u0441\u0442\u0438\u0447\u0435\u0441\u043A\u0438\u0439 \u043F\u0440\u043E\u0441\u043F\u0435\u043A\u0442, 35",hl:[{begin:0,end:5}]},tags:["business","theatre","museum","concert hall"],distance:{value:1178.70231,text:"1.18 \u043A\u043C"}},{title:{text:"\u0421\u0430\u0445\u0430\u043B\u0438\u043D\u0441\u043A\u0438\u0439 \u0442\u0435\u0430\u0442\u0440 \u043A\u0443\u043A\u043E\u043B",hl:[{begin:12,end:17}]},subtitle:{text:"\u0422\u0435\u0430\u0442\u0440 \xB7 \u041A\u043E\u043C\u043C\u0443\u043D\u0438\u0441\u0442\u0438\u0447\u0435\u0441\u043A\u0438\u0439 \u043F\u0440\u043E\u0441\u043F\u0435\u043A\u0442, 28\u0410",hl:[{begin:0,end:5}]},tags:["business","theatre","office service"],distance:{value:1224.330864,text:"1.22 \u043A\u043C"}},{title:{text:"\u041C\u043E\u0441\u043A\u043E\u0432\u0441\u043A\u0438\u0439 \u0434\u0440\u0430\u043C\u0430\u0442\u0438\u0447\u0435\u0441\u043A\u0438\u0439 \u0442\u0435\u0430\u0442\u0440 \u0438\u043C\u0435\u043D\u0438 \u041C. \u041D. \u0415\u0440\u043C\u043E\u043B\u043E\u0432\u043E\u0439",hl:[{begin:25,end:30}]},subtitle:{text:"\u0422\u0435\u0430\u0442\u0440 \xB7 \u041C\u043E\u0441\u043A\u0432\u0430, \u0422\u0432\u0435\u0440\u0441\u043A\u0430\u044F \u0443\u043B\u0438\u0446\u0430, 5/6",hl:[{begin:0,end:5}]},tags:["business","theatre"],distance:{value:6655148389e-3,text:"6655.15 \u043A\u043C"}},{title:{text:"\u0422\u0430\u0442\u0430\u0440\u0441\u043A\u0438\u0439 \u0433\u043E\u0441\u0443\u0434\u0430\u0440\u0441\u0442\u0432\u0435\u043D\u043D\u044B\u0439 \u0442\u0435\u0430\u0442\u0440 \u043A\u0443\u043A\u043E\u043B \u042D\u043A\u0438\u044F\u0442",hl:[{begin:26,end:31}]},subtitle:{text:"\u0422\u0435\u0430\u0442\u0440 \xB7 \u041A\u0430\u0437\u0430\u043D\u044C, \u041F\u0435\u0442\u0435\u0440\u0431\u0443\u0440\u0433\u0441\u043A\u0430\u044F \u0443\u043B\u0438\u0446\u0430, 57",hl:[{begin:0,end:5}]},tags:["business","theatre"],distance:{value:6077098052e-3,text:"6077.10 \u043A\u043C"}},{title:{text:"\u0422\u0435\u0430\u0442\u0440 \u0434\u0440\u0430\u043C\u044B \u0438 \u043A\u043E\u043C\u0435\u0434\u0438\u0438",hl:[{begin:0,end:5}]},subtitle:{text:"\u0422\u0435\u0430\u0442\u0440 \xB7 \u041F\u0435\u0442\u0440\u043E\u043F\u0430\u0432\u043B\u043E\u0432\u0441\u043A-\u041A\u0430\u043C\u0447\u0430\u0442\u0441\u043A\u0438\u0439, \u041B\u0435\u043D\u0438\u043D\u0441\u043A\u0430\u044F \u0443\u043B\u0438\u0446\u0430, 75",hl:[{begin:0,end:5}]},tags:["business","theatre"],distance:{value:1321394665e-3,text:"1321.39 \u043A\u043C"}},{title:{text:"\u0422\u0435\u0430\u0442\u0440 \u041A\u043E\u043B\u0435\u0441\u043E",hl:[{begin:0,end:5}]},subtitle:{text:"\u041E\u0441\u0442\u0430\u043D\u043E\u0432\u043A\u0430 \u043E\u0431\u0449\u0435\u0441\u0442\u0432\u0435\u043D\u043D\u043E\u0433\u043E \u0442\u0440\u0430\u043D\u0441\u043F\u043E\u0440\u0442\u0430 \xB7 \u0422\u043E\u043B\u044C\u044F\u0442\u0442\u0438, \u041B\u0435\u043D\u0438\u043D\u0433\u0440\u0430\u0434\u0441\u043A\u0430\u044F \u0443\u043B\u0438\u0446\u0430, 33\u0410\u04411"},tags:["business","bus stop"],distance:{value:6203127608e-3,text:"6203.13 \u043A\u043C"}},{title:{text:"\u0422\u0435\u0430\u0442\u0440\u0430\u043B\u044C\u043D\u0430\u044F",hl:[{begin:0,end:5}]},subtitle:{text:"\u041E\u0441\u0442\u0430\u043D\u043E\u0432\u043A\u0430 \u043E\u0431\u0449\u0435\u0441\u0442\u0432\u0435\u043D\u043D\u043E\u0433\u043E \u0442\u0440\u0430\u043D\u0441\u043F\u043E\u0440\u0442\u0430 \xB7 \u0421\u043E\u0447\u0438, \u0410-147"},tags:["business","bus stop"],distance:{value:7445799203e-3,text:"7445.80 \u043A\u043C"}}]),h=p([...D.value]),m=S;function A(I,b){if(!I){h.value=[];return}b(()=>{k(I)})}function k(I){const b="https://suggest-maps.yandex.ru/v1/suggest";Qe.get(b,{params:{apikey:g.value,text:I,ull:"142.728060,46.966085",print_address:1,strict_bounds:1,attrs:"uri"},withCredentials:!1,headers:{"Content-Type":"application/json",Accept:"application/json"}}).then(E=>{var f;if(!((f=E==null?void 0:E.data)!=null&&f.results))return;const B=E.data.results;B.forEach((s,U)=>{s.label=s.address.formatted_address,s.value=U}),h.value=B}).catch(E=>{console.error(E),c.notify(Mu(E))})}function C(){ne.post(d+"epoint/ya/suggest.php",{params:{method:"add",suggest:l.value}}).then(I=>{var b;if(!((b=I==null?void 0:I.data)!=null&&b.result))throw new Error;m("saved",I.data.data.id)}).catch(I=>{c.notify(Mu(I))})}function Q(){!l.value||C()}function j(){const I=a+"epoint/ya/suggest.php",b={method:"getApiKey"};ne.post(I,{params:b}).then(E=>{var B;if(!((B=E==null?void 0:E.data)!=null&&B.result))throw new Error("SuggestApiKey Error");g.value=E.data.data.key}).catch(E=>{console.error(E),c.notify(Mu(E))})}return bu(()=>{j()}),(I,b)=>g.value?(v(),O(Cu,{key:0,modelValue:l.value,"onUpdate:modelValue":[b[0]||(b[0]=E=>l.value=E),Q],options:h.value,"use-input":"","fill-input":"","hide-selected":"",clearable:"",onFilter:A},{option:e(E=>[u(z,me(pe(E.itemProps)),{default:e(()=>[u(M,null,{default:e(()=>[u(q,null,{default:e(()=>[V(P(E.opt.title.text),1)]),_:2},1024),u(q,{caption:""},{default:e(()=>{var B,f;return[V(P((f=(B=E.opt)==null?void 0:B.address)==null?void 0:f.formatted_address),1)]}),_:2},1024)]),_:2},1024)]),_:2},1040)]),_:1},8,["modelValue","options"])):L("",!0)}}),Bt={class:"text-h6"},wt=ou({__name:"HallDialog",setup(n){const S=au(),c=nu("clickedHall"),d=nu("IsHallDialogOpen"),a=p(!1);ge(()=>{});async function g(){a.value=!0,await c.value.save(S)&&(du.List.value=await du.getList(S),d.value=!1),a.value=!1}function l(A){c.value.suggestId=A}function D(){c.value||(c.value=new du)}function h(){}async function m(A){a.value=!0,await A.del(S)&&(d.value=!1),a.value=!1}return(A,k)=>(v(),O(Ju,{modelValue:i(d),"onUpdate:modelValue":k[3]||(k[3]=C=>Ou(d)?d.value=C:null),onBeforeShow:D,onBeforeHide:h},{default:e(()=>[u(Au,{bordered:"",class:"dialogArea"},{default:e(()=>[u(M,null,{default:e(()=>[N("div",Bt,P(i(c).id>0?"\u0420\u0435\u0434\u0430\u043A\u0442\u0438\u0440\u043E\u0432\u0430\u0442\u044C \u0437\u0430\u043B":"\u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C \u0437\u0430\u043B"),1)]),_:1}),u(eu,null,{default:e(()=>[u(ru,{modelValue:i(c).name,"onUpdate:modelValue":k[0]||(k[0]=C=>i(c).name=C),label:"\u041D\u0430\u0437\u0432\u0430\u043D\u0438\u0435","stack-label":""},null,8,["modelValue"]),i(c).id===-1?(v(),O(Et,{key:0,onSaved:l})):(v(),O(z,{key:1},{default:e(()=>[u(M,null,{default:e(()=>[u(q,null,{default:e(()=>{var C,Q,j;return[V(P((j=(Q=(C=i(c))==null?void 0:C.suggest)==null?void 0:Q.address)==null?void 0:j.formatted),1)]}),_:1})]),_:1})]),_:1}))]),_:1}),u(cu,null,{default:e(()=>[u(Iu),i(c).id>0?(v(),O(Hu,{key:0,label:"\u0423\u0434\u0430\u043B\u0438\u0442\u044C",loading:a.value,"throw-confirm":"",title:"\u0423\u0434\u0430\u043B\u0438\u0442\u044C \u0437\u0430\u043B",danger:"",onOnOk:k[1]||(k[1]=C=>m(i(c)))},null,8,["loading"])):L("",!0),u(J,{label:"\u0421\u043E\u0445\u0440\u0430\u043D\u0438\u0442\u044C",disable:!i(c).suggestId,loading:a.value,color:"green",onClick:k[2]||(k[2]=C=>g())},null,8,["disable","loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"]))}}),xt=ou({__name:"HallSelect",emits:["selected"],setup(n,{emit:S}){const c=au(),d=nu("selectedHall"),a=p(!1),g=p(!1);lu("IsHallDialogOpen",a);const l=p(),D=S;function h(C=null){C||(C=new du),k.value=new du(C),a.value=!0}function m(){k.value=d.value,D("selected",d.value)}async function A(C){g.value=!0,await C.del(c)&&(a.value=!1),g.value=!1}const k=p(new du);return lu("clickedHall",k),bu(()=>{}),(C,Q)=>{var j,I;return v(),T(uu,null,[u(Cu,{modelValue:i(d),"onUpdate:modelValue":[Q[1]||(Q[1]=b=>Ou(d)?d.value=b:null),Q[2]||(Q[2]=b=>m())],label:"\u041C\u0435\u0441\u0442\u043E \u043F\u0440\u043E\u0432\u0435\u0434\u0435\u043D\u0438\u044F","map-options":"","option-label":"name","option-value":"id",options:(I=(j=i(du).List)==null?void 0:j.value)!=null?I:[],ref_key:"selRef",ref:l},{append:e(()=>[u(J,{icon:"add",round:"",onClick:Q[0]||(Q[0]=Ku(b=>h(),["prevent","stop"]))},{default:e(()=>[u(he,null,{default:e(()=>Q[3]||(Q[3]=[V("\u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C \u0437\u0430\u043B")])),_:1})]),_:1})]),option:e(b=>[u(z,me(pe(b.itemProps)),{default:e(()=>[u(M,null,{default:e(()=>[u(q,null,{default:e(()=>[V(P(b.opt.name),1)]),_:2},1024),u(q,{caption:""},{default:e(()=>[V(P(b.opt.suggest.address.formatted),1)]),_:2},1024)]),_:2},1024),u(M,{side:""},{default:e(()=>[u(Hu,{danger:"","throw-confirm":"",flat:"",loading:g.value,tooltip:"\u0423\u0434\u0430\u043B\u0438\u0442\u044C \u0437\u0430\u043B",title:"\u0423\u0434\u0430\u043B\u0438\u0442\u044C \u0437\u0430\u043B: "+b.opt.name,onOnOk:E=>A(b.opt)},null,8,["loading","title","onOnOk"])]),_:2},1024),u(M,{side:""},{default:e(()=>[u(J,{icon:"edit",flat:"",onClick:Ku(E=>h(b.opt),["prevent","stop"])},null,8,["onClick"])]),_:2},1024)]),_:2},1040)]),_:1},8,["modelValue","options"]),u(wt)],64)}}}),Vt={__name:"WorkSelectItem",props:{work:Object},setup(n){const S=au();return(c,d)=>(v(),O(z,{clickable:"",dense:""},{default:e(()=>[u(M,null,{default:e(()=>[u(q,null,{default:e(()=>[V(P(n.work.titleRu),1)]),_:1}),u(q,{caption:""},{default:e(()=>[V(P(n.work.titleEn),1)]),_:1})]),_:1}),u(M,{side:"",class:"opus"},{default:e(()=>[u(q,{caption:""},{default:e(()=>{var a;return[V(P((a=n.work.opus)!=null?a:"Op.?"),1)]}),_:1}),u(q,{caption:""},{default:e(()=>{var a;return[V(P((a=n.work.icatno)!=null?a:"cat\u2116.?"),1)]}),_:1}),u(q,{caption:""},{default:e(()=>{var a;return[V(P((a=n.work.catalogIndex)!=null?a:"catIdx: ?"),1)]}),_:1}),L("",!0)]),_:1})]),_:1}))}},St=ou({__name:"WorkSelect",props:{works:{},loading:{type:Boolean}},emits:["onSelect"],setup(n,{emit:S}){const c=p(),d=S,a=n,g=p([...a.works]);ut(()=>{g.value=[...a.works],console.log("works updated"),c.value=void 0});function l(D,h,m){h(()=>{if(!D){g.value=[...a.works];return}const A=D.toLowerCase();let k=[...a.works];D&&(k=k.filter(C=>(C.titleRu?C.titleRu.toLowerCase().includes(A):!1)||(C.titleEn?C.titleEn.toLowerCase().includes(A):!1))),g.value=k})}return(D,h)=>(v(),O(Cu,{modelValue:c.value,"onUpdate:modelValue":[h[0]||(h[0]=m=>c.value=m),h[1]||(h[1]=m=>d("onSelect",c.value))],options:g.value,loading:D.loading,"option-label":"titleRu","option-value":"id","map-options":"","use-input":"",onFilter:l,clearable:"",label:"\u041F\u0440\u043E\u0438\u0437\u0432\u0435\u0434\u0435\u043D\u0438\u0435"},{option:e(m=>[u(Vt,_e(m.itemProps,{work:m.opt}),null,16,["work"])]),_:1},8,["modelValue","options","loading"]))}}),Ft=ou({__name:"AddWorkDialog",props:{announce:{type:Object,required:!0}},emits:["workSelected","onAddWork"],setup(n,{emit:S}){const c=au(),d=nu("isOpenAddWorkDialog"),a=p(!1),g=p(),l=p(),D=S,h=n,m=p([]),A=p([]);function k(B){l.value=B,B&&(D("workSelected",B),j(B.id))}function C(B){var f;g.value=B,l.value=void 0,m.value=[],(f=g.value)!=null&&f.id&&Q(g.value.id)}async function Q(B){a.value=!0,m.value=await mu.getListByAuthor(c,B),a.value=!1}async function j(B){a.value=!0,A.value=await zu.getList(c,B),a.value=!1}async function I(){a.value=!0,await mu.linkToAnnounce(c,h.announce.id,l.value.id)&&(D("onAddWork",l.value),b()),a.value=!1}function b(){d.value=!1}function E(){g.value=void 0,l.value=void 0,a.value=!1}return(B,f)=>(v(),O(Ju,{modelValue:i(d),"onUpdate:modelValue":f[0]||(f[0]=s=>Ou(d)?d.value=s:null),onBeforeHide:E},{default:e(()=>[u(Au,{bordered:"",class:"dialogArea"},{default:e(()=>[u(eu,null,{default:e(()=>[u(mt,{onItSel:C})]),_:1}),g.value?(v(),O(eu,{key:0},{default:e(()=>[u(St,{works:m.value,onOnSelect:k},null,8,["works"])]),_:1})):L("",!0),u(cu,{align:"between"},{default:e(()=>[u(Iu),u(J,{"icon-right":"save",color:"green",loading:a.value,onClick:I,label:"\u0441\u043E\u0445\u0440\u0430\u043D\u0438\u0442\u044C",flat:""},null,8,["loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"]))}}),Mt=ou({__name:"AnnounceSelect",props:{announces:{}},emits:["onSelect"],setup(n,{emit:S}){const c=S,d=p();return(a,g)=>(v(),O(Cu,{modelValue:d.value,"onUpdate:modelValue":[g[0]||(g[0]=l=>d.value=l),g[1]||(g[1]=l=>c("onSelect",d.value))],options:a.announces,"map-options":"","option-value":"id","option-label":"progName"},{option:e(l=>{var D;return[u(z,_e(l.itemProps,{id:`an${(D=l.opt)==null?void 0:D.id}`}),{default:e(()=>[u(M,null,{default:e(()=>[u(q,{caption:""},{default:e(()=>[V(P(l.opt.eventTime),1)]),_:2},1024),u(q,{caption:""},{default:e(()=>[V(P(l.opt.Hall.name),1)]),_:2},1024),u(q,null,{default:e(()=>[V(P(l.opt.progName),1)]),_:2},1024)]),_:2},1024)]),_:2},1040,["id"])]}),_:1},8,["modelValue","options"]))}}),$t=ou({__name:"WorkBatchAddDialog",props:{targetAnnounceId:{}},emits:["onBatchAddWorks"],setup(n,{emit:S}){const c=au(),d=nu("isOpenBatchAddDialog"),a=p(!1),g=n,l=S,D=p(),h=p([]),m=p([]);function A(){d.value=!1}function k(){m.value=[],D.value=[],h.value=[],a.value=!1}async function C(){a.value=!0,D.value=await qu.getList(c),a.value=!1}async function Q(f){a.value=!0,h.value=await mu.getListByAnnounce(c,f),a.value=!1}function j(f){!f||Q(f.id)}async function I(){a.value=!0,await mu.linkListToAnnounce(c,g.targetAnnounceId,m.value)&&(l("onBatchAddWorks"),A()),a.value=!1}function b(){m.value=h.value.map(f=>f.id)}function E(){m.value=[]}const B=K(()=>h.value.length?h.value.length===m.value.length:!1);return bu(()=>{C()}),(f,s)=>(v(),O(Ju,{modelValue:i(d),"onUpdate:modelValue":s[1]||(s[1]=U=>Ou(d)?d.value=U:null),onBeforeHide:k},{default:e(()=>[u(Au,{bordered:"",class:"dialogArea"},{default:e(()=>[u(eu,null,{default:e(()=>[u(Mt,{announces:D.value,onOnSelect:j},null,8,["announces"])]),_:1}),h.value.length?(v(),O(eu,{key:0},{default:e(()=>[u(z,null,{default:e(()=>[u(M,null,{default:e(()=>[B.value?L("",!0):(v(),O(J,{key:0,label:"\u041E\u0442\u043C\u0435\u0442\u0438\u0442\u044C \u0432\u0441\u0435",onClick:b})),B.value?(v(),O(J,{key:1,label:"\u0421\u043D\u044F\u0442\u044C \u0432\u0441\u0435",onClick:E})):L("",!0)]),_:1})]),_:1}),(v(!0),T(uu,null,$u(h.value,U=>(v(),O(z,{key:`add_work${U.id}`,tag:"label"},{default:e(()=>[u(M,null,{default:e(()=>[u(q,{caption:""},{default:e(()=>[V(P(U.author.fioRu),1)]),_:2},1024),u(q,null,{default:e(()=>[V(P(U.titleRu),1)]),_:2},1024)]),_:2},1024),u(M),u(M,{side:""},{default:e(()=>[u(ju,{modelValue:m.value,"onUpdate:modelValue":s[0]||(s[0]=H=>m.value=H),val:U.id},null,8,["modelValue","val"])]),_:2},1024)]),_:2},1024))),128))]),_:1})):L("",!0),u(cu,{align:"right"},{default:e(()=>[u(J,{icon:"save",flat:"",color:"green",disable:!m.value.length,onClick:I,label:"\u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C"},null,8,["disable"])]),_:1})]),_:1})]),_:1},8,["modelValue"]))}}),qt=ou({__name:"WorkList",props:{announce:{type:Object,required:!0}},setup(n){const S=au(),c=n,d=p(!1),a=p(!1);lu("isOpenAddWorkDialog",a);const g=p(!1);lu("isOpenBatchAddDialog",g);const l=p([]),D=p([]),h=p([]),m=p(!1);function A(H){const w=H.map(y=>y.id);h.value=Array.from(new Set([...h.value,...w]))}function k(H){const w=H.map(y=>y.id);h.value=h.value.filter(y=>!w.includes(y))}function C(H){return H.every(w=>h.value.includes(w.id))}function Q(H){C(H)?k(H):A(H)}const j=p({});function I(H){j.value[H.id]=K({get(){return C(H.children)},set(w){Q(H.children)}})}async function b(){d.value=!0;const H=c.announce.id;l.value=await mu.getListByAnnounce(S,H),l.value.length&&(await E(),l.value.forEach(w=>I(w))),d.value=!1}async function E(){d.value=!0;const H=c.announce.id;D.value=await zu.getListByAnnounce(S,H),h.value=D.value.map(w=>w.id),d.value=!1}async function B(){d.value=!0,await zu.linkListToAnnounce(S,c.announce.id,h.value),d.value=!1}async function f(H){d.value=!0,await mu.unlinkFromAnnounce(S,c.announce.id,H)&&await b(),d.value=!1}async function s(H,w){d.value=!0,await mu.moveSortInAnnounce(S,H,w,c.announce.id)&&await b(),d.value=!1}function U(){b(),m.value=!1}return bu(async()=>{await pt.initList(S),await b()}),(H,w)=>(v(),T(uu,null,[u(Au,null,{default:e(()=>[u(cu,{align:"between"},{default:e(()=>[m.value?(v(),O(J,{key:0,icon:"add",label:"\u0434\u043E\u0431\u0430\u0432\u0438\u0442\u044C",onClick:w[0]||(w[0]=y=>a.value=!0),loading:d.value},null,8,["loading"])):L("",!0),m.value?(v(),O(J,{key:1,icon:"add",label:"\u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C \u0432\u0441\u0435 \u0438\u0437 \u0434\u0440\u0443\u0433\u043E\u0433\u043E \u043A\u043E\u043D\u0446\u0435\u0440\u0442\u0430",onClick:w[1]||(w[1]=y=>g.value=!0),loading:d.value},null,8,["loading"])):L("",!0),u(Iu),u(J,{icon:"edit",flat:"",round:"",onClick:w[2]||(w[2]=Ku(y=>m.value=!m.value,["stop","prevent"])),color:m.value?"red":"gray"},null,8,["color"])]),_:1}),u(eu,null,{default:e(()=>[u(de,null,{default:e(()=>[(v(!0),T(uu,null,$u(l.value,(y,pu)=>{var vu;return v(),T(uu,{key:`w${y.id}`},[(vu=y==null?void 0:y.children)!=null&&vu.length?(v(),O(ye,{key:0,"content-inset-level":.1,"expand-separator":""},{header:e(()=>[u(z,{style:{width:"100%"},class:"no-padding"},{default:e(()=>[u(M,{avatar:""},{default:e(()=>[u(q,{caption:""},{default:e(()=>[V(P(y.author.fioRu),1)]),_:2},1024),u(q,null,{default:e(()=>[V(P(y.titleRu),1)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),default:e(()=>[u(de,null,{default:e(()=>[m.value?(v(),O(z,{key:0,tag:"label"},{default:e(()=>[u(M,null,{default:e(()=>[u(q,null,{default:e(()=>[V(P(C(y.children)?"\u0421\u043D\u044F\u0442\u044C \u0432\u0441\u0435":"\u041E\u0442\u043C\u0435\u0442\u0438\u0442\u044C \u0432\u0441\u0435"),1)]),_:2},1024)]),_:2},1024),u(M,{side:""},{default:e(()=>[u(ju,{modelValue:j.value[y.id],"onUpdate:modelValue":[X=>j.value[y.id]=X,B],disable:d.value,"keep-color":"",color:"green"},null,8,["modelValue","onUpdate:modelValue","disable"])]),_:2},1024)]),_:2},1024)):L("",!0),(v(!0),T(uu,null,$u(y.children,X=>(v(),O(z,{key:`ch${X.id}`,tag:"label"},{default:e(()=>[u(M,{avatar:""},{default:e(()=>[u(q,null,{default:e(()=>[V(P(X.num),1)]),_:2},1024)]),_:2},1024),u(M,null,{default:e(()=>[u(q,null,{default:e(()=>[V(P(X.title),1)]),_:2},1024),u(q,{caption:""},{default:e(()=>[V(P(X.caption),1)]),_:2},1024)]),_:2},1024),u(M,{side:""},{default:e(()=>[u(ju,{modelValue:h.value,"onUpdate:modelValue":[w[3]||(w[3]=iu=>h.value=iu),B],disable:!m.value,val:X.id},null,8,["modelValue","disable","val"])]),_:2},1024)]),_:2},1024))),128))]),_:2},1024)]),_:2},1024)):(v(),O(z,{key:1},{default:e(()=>[u(M,null,{default:e(()=>[u(q,{caption:""},{default:e(()=>[V(P(y.author.fioRu),1)]),_:2},1024),u(q,null,{default:e(()=>[V(P(y.titleRu),1)]),_:2},1024)]),_:2},1024)]),_:2},1024)),m.value?(v(),T(uu,{key:2},[u(z,null,{default:e(()=>[u(M,{avatar:""},{default:e(()=>[u(ce,{disable:pu<1,onOnClick:X=>s("up",y.id),direction:"up"},null,8,["disable","onOnClick"])]),_:2},1024),u(M,{avatar:""},{default:e(()=>[u(ce,{disable:pu>=l.value.length-1,onOnClick:X=>s("down",y.id),direction:"down"},null,8,["disable","onOnClick"])]),_:2},1024),u(M),u(M,{side:""},{default:e(()=>[u(Hu,{flat:"","throw-confirm":"",danger:"",onOnOk:X=>f(y.id),loading:d.value,title:`\u0423\u0434\u0430\u043B\u0438\u0442\u044C: ${y.titleRu}`},null,8,["onOnOk","loading","title"])]),_:2},1024)]),_:2},1024),u(su)],64)):L("",!0)],64)}),128))]),_:1})]),_:1})]),_:1}),u(Ft,{announce:n.announce,onOnAddWork:b},null,8,["announce"]),u($t,{"target-announce-id":n.announce.id,onOnBatchAddWorks:U},null,8,["target-announce-id"])],64))}});const Ot={key:0,class:"eventsarea"},It={class:"editArea"},Ht={key:0,class:"card"},Ut={class:"editor"},Pt={style:{display:"flex","justify-content":"space-between"}},Lt={key:0,class:"uploads"},Qt={style:{width:"100%"}},Tt={class:"uploads"},Wt=ou({__name:"AnnounceEditor",emits:["reload","posterUploaded"],setup(n,{expose:S,emit:c}){const d=au(),a=ke(),g=et(),l=nu("Announce"),D=p(l.value.Hall);lu("selectedHall",D);function h(R){l.value.hallId=R.id,l.value.Hall=R}const m=p("");lu("pwUrl",m);const A=c,k={};function C(){}const Q=[{label:"\u0412\u0445\u043E\u0434 \u0441\u0432\u043E\u0431\u043E\u0434\u043D\u044B\u0439",value:2},{label:"\u0411\u0438\u043B\u0435\u0442\u044B \u0432 \u043F\u0440\u043E\u0434\u0430\u0436\u0435",value:3},{label:"\u0412\u0445\u043E\u0434 \u043F\u043E \u043F\u0440\u0438\u0433\u043B\u0430\u0441\u0438\u0442\u0435\u043B\u044C\u043D\u044B\u043C",value:4},{label:"\u041F\u0440\u043E\u0434\u0430\u0436\u0430 \u0437\u0430\u0432\u0435\u0440\u0448\u0435\u043D\u0430",value:5}],j=p(),I=p(),b=p(!1);lu("loadingAuthors",b);const E=p(0);lu("selectedAuthorId",E);const B=p(null);lu("selectedAuthor",B);function f(R){return{url:gt.getApiUrl(Yu.path),headers:[{name:"ACCESSTOKEN",value:ft.self.AccessToken}],formFields:[{name:"id",value:l.value.id},{name:"method",value:"add"}]}}function s(R){d.notify(le("\u0417\u0430\u0433\u0440\u0443\u0436\u0435\u043D\u043E")),A("posterUploaded")}function U(R){d.notify(le("\u0417\u0430\u0433\u0440\u0443\u0436\u0435\u043D\u043E")),A("posterUploaded"),j.value.reset(),H.value=!0}const H=p(!1);let w=null;Nu(H,R=>{console.log("photoWatcher"),R&&!w?w=setInterval(_u,3e3):!R&&w&&(clearInterval(w),w=null)});function y(R){var F,Du,Eu;let r=(Eu=(Du=JSON.parse((F=R==null?void 0:R.xhr)==null?void 0:F.response))==null?void 0:Du.error)!=null?Eu:"";d.notify(Mu(null,r))}function pu(){qu.save(d,l.value)}function vu(){g.push({path:"/announces"})}function X(){A("reload")}function iu(){delete l.value.sketch,delete l.value.sketchId}async function gu(){const R=await qu.updateMarkdown(d,l.value.id,l.value.description);R&&(l.value.parsedMD=R)}async function _u(){l.value.poster=await Yu.get(d,Number(a.params.evid)),H.value=!1}const G=p(!1);return S({}),ge(()=>{}),tt(()=>{w&&clearInterval(w)}),(R,r)=>(v(),T(uu,null,[i(l)?(v(),T("div",Ot,[N("div",It,[i(d).platform.is.desktop?(v(),T("div",Ht,[i(l).Hall?(v(),O(dt,{key:0,onIamDeleted:vu,onNewAnnounce:X,onDelSketch:iu,ref_key:"rAnnounceCard",ref:I,announce:i(l),pwUrl:m.value},null,8,["announce","pwUrl"])):L("",!0)])):L("",!0),N("div",Ut,[N("div",Pt,[u(Dt,{date:i(l).eventTime,"onUpdate:date":[r[0]||(r[0]=F=>i(l).eventTime=F),r[1]||(r[1]=F=>void 0)]},null,8,["date"])]),r[19]||(r[19]=N("br",null,null,-1)),r[20]||(r[20]=N("hr",null,null,-1)),i(d).platform.is.desktop?(v(),T("div",Lt,[N("div",Qt,[u(ct,{id:i(l).id,type:"event",onOnUploaded:s},null,8,["id"])])])):(v(),O(z,{key:1},{default:e(()=>[u(M,null,{default:e(()=>[u(q,{caption:""},{default:e(()=>r[14]||(r[14]=[V(" \u0417\u0430\u0433\u0440\u0443\u0437\u043A\u0430 \u044D\u0441\u043A\u0438\u0437\u0430 \u043D\u0435 \u043F\u043E\u0434\u0434\u0435\u0440\u0436\u0438\u0432\u0430\u0435\u0442 \u043C\u043E\u0431\u0438\u043B\u044C\u043D\u044B\u0435 \u0443\u0441\u0442\u0440\u043E\u0439\u0441\u0442\u0432\u0430 ")])),_:1})]),_:1})]),_:1})),u(su,{spaced:"1em"}),u(ru,{name:"progName",modelValue:i(l).progName,"onUpdate:modelValue":r[2]||(r[2]=F=>i(l).progName=F),label:"\u041D\u0430\u0437\u0432\u0430\u043D\u0438\u0435"},null,8,["modelValue"]),u(xt,{onSelected:h}),u(Cu,{modelValue:i(l).pay,"onUpdate:modelValue":r[3]||(r[3]=F=>i(l).pay=F),"emit-value":"","map-options":"",label:"\u0423\u0441\u043B\u043E\u0432\u0438\u044F \u0432\u0445\u043E\u0434\u0430",options:Q},null,8,["modelValue"]),r[21]||(r[21]=N("br",null,null,-1)),[3,4].includes(i(l).pay)?(v(),T(uu,{key:2},[u(ru,{type:"text",modelValue:i(l).ticketLink,"onUpdate:modelValue":r[4]||(r[4]=F=>i(l).ticketLink=F),label:"\u0421\u0441\u044B\u043B\u043A\u0430 \u043D\u0430 \u043F\u0440\u0438\u043E\u0431\u0440\u0435\u0442\u0435\u043D\u0438\u0435 \u0431\u0438\u043B\u0435\u0442\u043E\u0432"},null,8,["modelValue"]),r[16]||(r[16]=N("br",null,null,-1)),u(ru,{modelValue:i(l).radarioEventId,"onUpdate:modelValue":r[5]||(r[5]=F=>i(l).radarioEventId=F),type:"number","stack-label":"",placeholder:"1234567",label:"ID \u043C\u0435\u0440\u043E\u043F\u0440\u0438\u044F\u0442\u0438\u044F \u043D\u0430 Radario"},{default:e(()=>[u(he,null,{default:e(()=>r[15]||(r[15]=[V("\u0426\u0438\u0444\u0440\u044B \u0432 \u043A\u043E\u043D\u0446\u0435 \u0441\u0441\u044B\u043B\u043A\u0438 \u043D\u0430 \u043F\u043E\u043A\u0443\u043F\u043A\u0443 \u0431\u0438\u043B\u0435\u0442\u043E\u0432")])),_:1})]),_:1},8,["modelValue"]),r[17]||(r[17]=N("br",null,null,-1)),u(cu,null,{default:e(()=>[u(oe,{modelValue:i(l).isPushkin,"onUpdate:modelValue":r[6]||(r[6]=F=>i(l).isPushkin=F),label:"\u041F\u0443\u0448\u043A\u0438\u043D\u0441\u043A\u0430\u044F \u043A\u0430\u0440\u0442\u0430",color:"green"},null,8,["modelValue"]),u(Iu),u(oe,{modelValue:i(l).isShowTicketCount,"onUpdate:modelValue":r[7]||(r[7]=F=>i(l).isShowTicketCount=F),color:"green",label:"\u041E\u0441\u0442\u0430\u0442\u043E\u043A \u0431\u0438\u043B\u0435\u0442\u043E\u0432"},null,8,["modelValue"])]),_:1}),r[18]||(r[18]=N("br",null,null,-1))],64)):L("",!0),u(ru,{type:"number",modelValue:i(l).age,"onUpdate:modelValue":r[8]||(r[8]=F=>i(l).age=F),label:"\u0412\u043E\u0437\u0440\u0430\u0441\u0442\u043D\u044B\u0435 \u043E\u0433\u0440\u0430\u043D\u0438\u0447\u0435\u043D\u0438\u044F"},null,8,["modelValue"]),r[22]||(r[22]=N("br",null,null,-1)),u(su,{spaced:""}),u(ru,{name:"evDescr",modelValue:i(l).sdescr,"onUpdate:modelValue":r[9]||(r[9]=F=>i(l).sdescr=F),type:"textarea",autogrow:"",label:"\u041A\u0440\u0430\u0442\u043A\u043E\u0435 \u043E\u043F\u0438\u0441\u0430\u043D\u0438\u0435"},null,8,["modelValue"]),r[23]||(r[23]=N("br",null,null,-1)),u(ru,{name:"evText",modelValue:i(l).description,"onUpdate:modelValue":[r[10]||(r[10]=F=>i(l).description=F),r[11]||(r[11]=F=>gu())],type:"textarea",autogrow:"",debounce:300,label:"\u041E\u043F\u0438\u0441\u0430\u043D\u0438\u0435"},null,8,["modelValue"]),u(su,{spaced:"1em"}),N("div",Tt,[u(lt,{modelValue:k,"onUpdate:modelValue":r[12]||(r[12]=F=>k=F),style:{width:"100%"},label:"\u0417\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044C \u0430\u0444\u0438\u0448\u0443",factory:f,ref_key:"posterUploader",ref:j,onUploaded:U,onFailed:y,"no-thumbnails":""},null,512)]),u(cu,{align:"right"},{default:e(()=>[u(J,{label:"\u0421\u043E\u0445\u0440\u0430\u043D\u0438\u0442\u044C",onClick:pu,color:"green","icon-right":"save",flat:""})]),_:1})]),u(su,{spaced:"1em"})])])):L("",!0),u(su),u(ye,{label:"\u0421\u043F\u0438\u0441\u043E\u043A \u043F\u0440\u043E\u0438\u0437\u0432\u0435\u0434\u0435\u043D\u0438\u0439",modelValue:G.value,"onUpdate:modelValue":r[13]||(r[13]=F=>G.value=F)},{default:e(()=>[G.value?(v(),O(qt,{key:0,announce:i(l)},null,8,["announce"])):L("",!0)]),_:1},8,["modelValue"]),u(su),r[24]||(r[24]=N("br",null,null,-1)),r[25]||(r[25]=N("hr",null,null,-1)),r[26]||(r[26]=N("br",null,null,-1))],64))}});var Nt=Xu(Wt,[["__scopeId","data-v-36dac896"]]);const Rt={key:0,class:"posterArea relative-position"},Kt={key:0,style:{position:"absolute",right:"1em",top:"1em","z-index":"10"}},jt={class:"eventboxin"},Yt={key:0},zt=["innerHTML"],Jt={key:1},Xt={key:1,class:"videoItem"},Gt=ou({__name:"AnnounceDescr",emits:["delPoster"],setup(n,{emit:S}){const c=au(),d=nu("editMode"),a=nu("Announce"),g=K(()=>{let m=c.platform.is.mobile?1080:480;return a.value.poster?fe.getSrc(a.value.poster.md5,a.value.poster.ext,m):fe.defaultUrl}),l=K(()=>du.findById(a.value.hallId));function D(){return"https://vk.com/share.php?url="+String("https://sakh-orch.ru/")+"/announce/"+String(a.value.id)+"&title="+String(a.value.progName)+"&noparse=true&image="+String(g.value)}async function h(){await Yu.unlink(c,a.value.id)&&(delete a.value.poster,delete a.value.posterId)}return(m,A)=>(v(),T(uu,null,[i(a).poster?(v(),T("div",Rt,[i(d)?(v(),T("div",Kt,[u(Hu,{"throw-confirm":"",title:"\u0423\u0434\u0430\u043B\u0438\u0442\u044C \u0430\u0444\u0438\u0448\u0443",tooltip:"\u0423\u0434\u0430\u043B\u0438\u0442\u044C \u0430\u0444\u0438\u0448\u0443",onOnOk:A[0]||(A[0]=k=>h())})])):L("",!0),i(a).poster.status==="process"?(v(),O(z,{key:1},{default:e(()=>[u(ae),u(M,null,{default:e(()=>[u(vt,{showing:"",label:"\u041E\u0431\u0440\u0430\u0431\u043E\u0442\u043A\u0430"})]),_:1})]),_:1})):(v(),O(ae,{key:2,src:g.value},{error:e(()=>A[1]||(A[1]=[N("img",{src:"/img/news/default_sketch.svg",alt:"sketch"},null,-1)])),_:1},8,["src"]))])):L("",!0),N("div",jt,[u(Au,{class:"transparent no-padding",flat:""},{default:e(()=>[u(eu,{class:"no-padding"},{default:e(()=>[u(z,null,{default:e(()=>[u(M,null,{default:e(()=>[u(q,{class:"title"},{default:e(()=>[V(P(i(a).progName),1)]),_:1}),u(q,{class:"title"},{default:e(()=>[V(P(i(Pe)(i(a).eventTime)),1)]),_:1})]),_:1})]),_:1})]),_:1}),u(eu,null,{default:e(()=>[(v(!0),T(uu,null,$u(i(a).parsedMD,(k,C)=>(v(),T(uu,{key:C},[k.type==="text"?(v(),T("div",Yt,[k.content!==`
`?(v(),T("div",{key:0,innerHTML:k.content,class:"textBlock"},null,8,zt)):(v(),T("br",Jt))])):L("",!0),k.type==="video"?(v(),T("div",Xt,[u(_t,{ratio:16/9,src:"https://www.youtube.com/embed/"+k.content},null,8,["src"])])):L("",!0)],64))),128))]),_:1}),!i(a).completed&&[3,4].includes(i(a).pay)&&i(a).ticketLink?(v(),O(cu,{key:0,align:"right"})):L("",!0),u(eu,null,{default:e(()=>[u(z,{dense:""},{default:e(()=>[u(q,{caption:""},{default:e(()=>A[2]||(A[2]=[V(" \u0423\u0432\u0430\u0436\u0430\u0435\u043C\u044B\u0435 \u043F\u043E\u0441\u0435\u0442\u0438\u0442\u0435\u043B\u0438, \u0443\u0431\u0435\u0434\u0438\u0442\u0435\u043B\u044C\u043D\u0430\u044F \u043F\u0440\u043E\u0441\u044C\u0431\u0430 \u0441\u043E\u0431\u043B\u044E\u0434\u0430\u0442\u044C \u043C\u0435\u0440\u044B \u0431\u0435\u0437\u043E\u043F\u0430\u0441\u043D\u043E\u0441\u0442\u0438 \u0432 \u0441\u0432\u044F\u0437\u0438 \u0441 \u0440\u0430\u0441\u043F\u0440\u043E\u0441\u0442\u0440\u0430\u043D\u0435\u043D\u0438\u0435\u043C \u043A\u043E\u0440\u043E\u043D\u0430\u0432\u0438\u0440\u0443\u0441\u043D\u043E\u0439 \u0438\u043D\u0444\u0435\u043A\u0446\u0438\u0438! ")])),_:1})]),_:1})]),_:1}),u(eu,null,{default:e(()=>[u(z,{clickable:"",href:l.value.getMapHref(),target:"_blank"},{default:e(()=>[u(M,{avatar:""},{default:e(()=>[u(yu,{name:"place"})]),_:1}),u(M,null,{default:e(()=>[u(q,null,{default:e(()=>{var k;return[V(P((k=l.value)==null?void 0:k.name),1)]}),_:1}),u(q,{caption:""},{default:e(()=>{var k;return[V(P((k=l.value)==null?void 0:k.suggest.address.formatted),1)]}),_:1})]),_:1})]),_:1},8,["href"])]),_:1}),!i(a).completed&&[3,4].includes(i(a).pay)&&i(a).ticketLink?(v(),O(eu,{key:1},{default:e(()=>[u(z,{clickable:"",href:i(a).ticketLink,target:"_blank"},{default:e(()=>[i(a).pay===3?(v(),T(uu,{key:0},[u(M,{avatar:""},{default:e(()=>[u(yu,{name:"shopping_cart"})]),_:1}),u(M,null,{default:e(()=>[u(q,null,{default:e(()=>A[3]||(A[3]=[V("\u041A\u0443\u043F\u0438\u0442\u044C \u0431\u0438\u043B\u0435\u0442")])),_:1}),i(a).isPushkin?(v(),O(q,{key:0,caption:""},{default:e(()=>A[4]||(A[4]=[V("+ \u0414\u043E\u0441\u0442\u0443\u043F\u043D\u043E \u043F\u043E \u043F\u0443\u0448\u043A\u0438\u043D\u0441\u043A\u043E\u0439 \u043A\u0430\u0440\u0442\u0435")])),_:1})):L("",!0)]),_:1})],64)):L("",!0),i(a).pay===4?(v(),T(uu,{key:1},[u(M,{avatar:""},{default:e(()=>[u(yu,{name:"img:/img/uds.svg"})]),_:1}),u(M,null,{default:e(()=>[u(q,null,{default:e(()=>A[5]||(A[5]=[V("\u041F\u043E\u043B\u0443\u0447\u0438\u0442\u044C \u043F\u0440\u0438\u0433\u043B\u0430\u0441\u0438\u0442\u0435\u043B\u044C\u043D\u044B\u0439")])),_:1})]),_:1})],64)):L("",!0)]),_:1},8,["href"])]),_:1})):L("",!0),u(su),u(eu,{class:"no-padding"},{default:e(()=>[u(ve,{"phone-number":"+7-(4242)-300-518"}),u(ve,{"phone-number":"+7-(962)-416-36-89"})]),_:1}),u(su,{spaced:"1em"}),u(cu,{align:"right"},{default:e(()=>[u(J,{href:D(),target:"_blank",outline:"",icon:"img:/img/logo/vk/VK Logo Black & White.svg",label:"\u041F\u043E\u0434\u0435\u043B\u0438\u0442\u044C\u0441\u044F"},null,8,["href"])]),_:1})]),_:1})])],64))}});var Zt=Xu(Gt,[["__scopeId","data-v-726e4fe8"]]);const ul={class:"centralCol"},el={class:"eventboxl"},tl={__name:"AnnouncePage",setup(n){const S=Le("\u0410\u043D\u043E\u043D\u0441");Ue(S);const c=au(),a=nu("editModes").announce;lu("editMode",a);const g=ke(),l=p(),D=p(null);lu("Announce",D);const h=p(!1);async function m(){h.value=!0,D.value=await qu.get(c,g.params.evid),h.value=!1}return bu(()=>{m()}),(A,k)=>(v(),O(Ie,{class:"col myScrollArea"},{default:e(()=>[N("div",ul,[i(a)&&D.value?(v(),O(Nt,{key:0,onPosterUploaded:m,onReload:m,ref_key:"editorRef",ref:l},null,512)):L("",!0),N("div",el,[D.value?(v(),O(Zt,{key:0,onDelPoster:k[0]||(k[0]=()=>{l.value.delPoster()})})):L("",!0)])]),u(He)]),_:1}))}};var zl=Xu(tl,[["__scopeId","data-v-830b5bba"]]);export{zl as default};
