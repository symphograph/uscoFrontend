import{d as N,H as x,G as P,i as D,r as $,I as R,c as w,k as M,o as z,m as s,n,p as a,f as t,ax as T,u as i,v as U,bi as C,x as f,q as E,t as W,y as L,B as h,z as k,bh as b,l as d,bm as q}from"./index.b51d6ac9.js";import{Q as A}from"./QItemLabel.44fa218d.js";import{b as O,Q as y}from"./QImg.17b0c661.js";import{P as j}from"./PageShell.5e133f10.js";import{S as G}from"./SelectComposer.106793e8.js";import{P as H}from"./LocalStorage.994d7d0c.js";import{u as J,e as K}from"./myFuncts.226b0de9.js";import{_ as X}from"./BtnDelete.37cd7562.js";import{A as u}from"./lib.761978b0.js";import"./QExpansionItem.f89f8067.js";import"./QSlideTransition.4b2a6b78.js";import"./touch.9135741d.js";import"./selection.96e83ad7.js";import"./MainFooter.7a1f0a13.js";import"./format.de7e9769.js";import"./plugin-vue_export-helper.21dcd24c.js";import"./QLinearProgress.8a53ad5b.js";import"./QSelect.6c76a8de.js";import"./QMenu.fa9d02ae.js";import"./position-engine.846fdfaa.js";import"./use-virtual-scroll.9d7267f0.js";import"./rtl.276c3f1b.js";import"./AuthorItem.6938789a.js";import"./QTooltip.8f8febcf.js";import"./myAxios.432c2c9b.js";import"./axios.12dda01d.js";const Y={class:"centralCol"},Qe=N({__name:"AuthorPage",setup(Z){const r=J(),m=x(),Q=P(),c=D("editMode"),F=$(null);R("searchText",F);function I(e){H.set("lastAuthor",e.id),m.params.id=e.id,Q.push({path:"/lib/author/"+e.id}),e.id&&p(e.id)}async function p(e){!e||(u.selected.value=await u.get(r,e))}const v=w(()=>{var e,o;return(e=u.selected.value)!=null&&e.imslpId?`https://imslp.org/wiki/Category:${(o=u.selected.value)==null?void 0:o.fioEn}`:""}),g=w(()=>{var l,_;const e=(l=u.selected.value)==null?void 0:l.wikiIdRu,o=(_=u.selected.value)==null?void 0:_.wikiIdEn;return e?`https://ru.wikipedia.org/?curid=${e}`:o?`https://en.wikipedia.org/?curid=${o}`:""});async function B(){await u.update(r,u.selected.value)&&await p(u.selected.value.id)}function S(){u.del(r,Number(m.params.id))}function V(){const e=["\u043F\u0440\u043E\u0438\u0437\u0432\u0435\u0434\u0435\u043D\u0438\u0435","\u043F\u0440\u043E\u0438\u0437\u0432\u0435\u0434\u0435\u043D\u0438\u044F","\u043F\u0440\u043E\u0438\u0437\u0432\u0435\u0434\u0435\u043D\u0438\u0439"],o=K(u.selected.value.cntWorks,e);return`${u.selected.value.cntWorks} ${o}`}return M(()=>{let e=Number(m.params.id);e&&p(e)}),z(()=>{}),(e,o)=>(s(),n(j,{"page-title":"\u041A\u043E\u043C\u043F\u043E\u0437\u0438\u0442\u043E\u0440 "},{ToolPanel:a(()=>[t(G,{onItSel:I})]),PageContent:a(()=>[T("div",Y,[i(u).selected.value?(s(),n(U,{key:0},{default:a(()=>[t(f,null,{default:a(()=>[t(C,{modelValue:i(u).selected.value.fioRu,"onUpdate:modelValue":o[0]||(o[0]=l=>i(u).selected.value.fioRu=l),readonly:!i(c),label:"\u0424\u0430\u043C\u0438\u043B\u0438\u044F, \u0418\u043C\u044F \u041E\u0442\u0447\u0435\u0441\u0442\u0432\u043E"},null,8,["modelValue","readonly"]),t(C,{modelValue:i(u).selected.value.iofEn,"onUpdate:modelValue":o[1]||(o[1]=l=>i(u).selected.value.iofEn=l),readonly:!i(c),label:"Name LastName"},null,8,["modelValue","readonly"])]),_:1}),t(f,null,{default:a(()=>[t(O,{clickable:"",to:`/lib/works/${i(u).selected.value.id}`},{default:a(()=>[t(y,null,{default:a(()=>[t(A,null,{default:a(()=>[E(W(V()),1)]),_:1}),t(A,{caption:""},{default:a(()=>o[2]||(o[2]=[E("\u041F\u0435\u0440\u0435\u0439\u0442\u0438 \u043A \u0441\u043F\u0438\u0441\u043A\u0443")])),_:1})]),_:1}),t(y,{side:""},{default:a(()=>[t(L,{name:"open_in_new"})]),_:1})]),_:1},8,["to"])]),_:1}),t(h),t(f,null,{default:a(()=>[g.value?(s(),n(k,{key:0,icon:"img:https://upload.wikimedia.org/wikipedia/commons/f/f6/Wikipedia-logo-v2-wordmark.svg",size:"6em",class:b(i(r).dark.isActive?"invert":void 0),href:g.value,target:"_blank"},null,8,["class","href"])):d("",!0),v.value?(s(),n(k,{key:1,icon:"img:https://upload.wikimedia.org/wikipedia/commons/9/98/IMSLP_logo_%282016%29.svg",size:"6em",class:b(i(r).dark.isActive?"invert":void 0),href:v.value,target:"_blank"},null,8,["class","href"])):d("",!0)]),_:1}),t(h),i(c)?(s(),n(q,{key:0,align:"right"},{default:a(()=>[t(k,{label:"\u0421\u043E\u0445\u0440\u0430\u043D\u0438\u0442\u044C",color:"green",onClick:B}),t(X,{label:"\u0423\u0434\u0430\u043B\u0438\u0442\u044C",title:"\u0423\u0434\u0430\u043B\u0438\u0442\u044C \u043A\u043E\u043C\u043F\u043E\u0437\u0438\u0442\u043E\u0440\u0430","throw-confirm":"",danger:"",onOnOk:S,tooltip:"\u0423\u0434\u0430\u043B\u0438\u0442\u044C \u043A\u043E\u043C\u043F\u043E\u0437\u0438\u0442\u043E\u0440\u0430"})]),_:1})):d("",!0)]),_:1})):d("",!0)])]),_:1}))}});export{Qe as default};
