import{Q as B}from"./QToolbarTitle.943cd697.js";import{Q as V}from"./QToolbar.537561d3.js";import{Q as D}from"./QSpace.373c62ef.js";import{i as y,n as c,t as b,G as o,f as t,b2 as M,b3 as N,M as f,ax as _,N as d,b as $,u as F,aX as I,r as p,p as m,q as R,H as g,a$ as q,l as k,F as E,a9 as Y}from"./index.cd1e76ba.js";import{Q as x}from"./QSelect.1bf9f4be.js";import{Q as U}from"./QTooltip.4fda66b0.js";import{Q as z}from"./QLinearProgress.1cc758cb.js";import{_ as j}from"./AnnounceList.8eec3a21.js";import{u as G}from"./use-quasar.887a5898.js";import{u as H}from"./use-meta.1f2e8af7.js";import{api as K}from"./axios.95308f7a.js";import{g as O,c as X,n as J}from"./myFuncts.9f42497d.js";import{b as W,Q as Z,a as w}from"./QItemLabel.971d5e50.js";import{_ as ee}from"./plugin-vue_export-helper.21dcd24c.js";import"./rtl.61399bdd.js";import"./position-engine.b0415672.js";import"./format.3e32b8d9.js";import"./AnnounceCard.f14fbfbe.js";import"./QImg.8c76714d.js";import"./use-ratio.5639a88d.js";import"./BtnDelete.a2a2705d.js";const te={__name:"SelectSort",setup(C){const s=y("sortType"),v=[{label:"\u0421\u043D\u0430\u0447\u0430\u043B\u0430 \u043D\u043E\u0432\u044B\u0435",value:"dateDesc",caption:"\u041F\u043E \u0443\u0431\u044B\u0432\u0430\u043D\u0438\u044E \u0434\u0430\u0442\u044B"},{label:"\u0421\u043D\u0430\u0447\u0430\u043B\u0430 \u0434\u0430\u0432\u043D\u0438\u0435",value:"dateAsc",caption:"\u041F\u043E \u0432\u043E\u0437\u0440\u0430\u0441\u0442\u0430\u043D\u0438\u044E \u0434\u0430\u0442\u044B"}];return(Q,i)=>(c(),b(x,{modelValue:d(s),"onUpdate:modelValue":i[0]||(i[0]=r=>$(s)?s.value=r:null),borderless:"","map-options":"","emit-value":"",options:v},{option:o(r=>[t(W,M(N(r.itemProps)),{default:o(()=>[t(Z,null,{default:o(()=>[t(w,null,{default:o(()=>[f(_(r.opt.label),1)]),_:2},1024),t(w,{caption:""},{default:o(()=>[f(_(r.opt.caption),1)]),_:2},1024)]),_:2},1024)]),_:2},1040)]),_:1},8,["modelValue"]))}};const ae={class:"selectors"},oe={class:"gridArea"},re={__name:"AnnounceListPage",setup(C){const s=O("\u0410\u043D\u043E\u043D\u0441\u044B");H(s);const v=String("https://api.sakh-orch.ru/"),Q=G();F();const i=I(),r=y("editMode"),l=p(!1);m("compactCard",l);const L=y("progress"),h=p("dateDesc");m("sortType",h);const u=p(new Date().getFullYear());m("evYear",u);const P=p([]);m("announceList",P);function S(){let e=[];for(let a=2018;a<=new Date().getFullYear();a++)e.push(a);return e.reverse()}function A(){K.post(v+"api/event/announce.php",{params:{method:"add"}}).then(e=>{var a,n,T;if(!((a=e==null?void 0:e.data)!=null&&a.result))throw new Error;Q.notify(X((T=(n=e==null?void 0:e.data)==null?void 0:n.result)!=null?T:null)),i.push({path:"/announce/"+e.data.data.id})}).catch(e=>{Q.notify(J(e))})}return(e,a)=>(c(),R(E,null,[g("div",{class:q(["pageToolbar",e.$q.platform.is.desktop?"no-wrap":"wrap"])},[t(V,null,{default:o(()=>[t(B,null,{default:o(()=>[f(_(d(s).title),1)]),_:1})]),_:1}),t(V,null,{default:o(()=>[t(D),g("div",ae,[d(r)?(c(),b(Y,{key:0,label:"\u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C",onClick:A})):k("",!0),t(x,{modelValue:u.value,"onUpdate:modelValue":a[0]||(a[0]=n=>u.value=n),options:S(),"emit-value":"",borderless:""},null,8,["modelValue","options"]),t(te),t(Y,{icon:l.value?"unfold_less":"unfold_more",flat:"",onClick:a[1]||(a[1]=n=>l.value=!l.value)},{default:o(()=>[t(U,null,{default:o(()=>[f(_(l.value?"\u041F\u043E\u0434\u0440\u043E\u0431\u043D\u043E":"\u041A\u0440\u0430\u0442\u043A\u043E"),1)]),_:1})]),_:1},8,["icon"])])]),_:1})],2),d(L)?(c(),b(z,{key:0,indeterminate:"",color:"secondary"})):k("",!0),g("div",oe,[t(j,{evYear:u.value,method:"listByYear",sort:h.value},null,8,["evYear","sort"])])],64))}};var we=ee(re,[["__scopeId","data-v-73719c07"]]);export{we as default};
