import{u as h}from"./use-quasar.6f4393ec.js";import{api as g}from"./axios.1a451455.js";import{A as w}from"./AnnounceCard.0a373d1e.js";import{r as u,u as y,d as _,i as o,a as k,w as A,D as L,f as l,g as F,at as B,F as D,j as N}from"./index.7ade07cd.js";import{n as Y}from"./myFuncts.8c7f864e.js";const q={__name:"AnnounceList",props:{sort:u(null),evYear:u(null),onlyNew:u(0)},setup(i){const r=i,m=String("https://api.sakh-orch.ru/"),p=h();y(),_(),o("editMode");const c=o("progress"),e=o("announceList");o("Halls");function s(){c.value=!0,g.post(m+"api/get/announces/announces.php",{params:{sort:r.sort,year:r.evYear,new:r.onlyNew}}).then(t=>{var a,n;e.value=(n=(a=t==null?void 0:t.data)==null?void 0:a.data)!=null?n:[]}).catch(t=>{p.notify(Y(t)),e.value=[]}).finally(()=>{c.value=!1})}k(()=>{s()}),A(()=>r.evYear,()=>{s()});const d=(t,a)=>t.datetime<a.datetime?1:-1,f=(t,a)=>t.datetime>a.datetime?1:-1,v=L(()=>{if(!e.value||!e.value.length)return[];switch(r.sort){case 0:return[...e.value].sort(d);case 1:return[...e.value].sort(f);default:return e.value}});return(t,a)=>(l(!0),F(D,null,B(v.value,n=>(l(),N(w,{key:n.id,Announce:n,onIamDeleted:s},null,8,["Announce"]))),128))}};export{q as _};
