import{Q as z}from"./QVirtualScroll.ab02d786.js";import{Q as V,M as A}from"./MainFooter.324b29be.js";import{d as x,i as N,r as w,m as i,C as _,ax as y,f as s,p as o,u as d,z as q,l as f,B as O,q as S,t as I,H as j,w as H,o as Y,n as Q,F as B,D as P,aY as R}from"./index.67387e42.js";import{b as $,Q as G}from"./QImg.507e5154.js";import{Q as M}from"./QItemLabel.6b8410e5.js";import{Q as J}from"./QTooltip.123a896d.js";import{u as F,f as K}from"./myFuncts.7cbbd23e.js";import{_ as U}from"./SketchImg.d7a82aa6.js";import{_ as W}from"./BtnDelete.203ed198.js";import{E as g}from"./entry.9ae2cb1c.js";import{S as X}from"./img.f684d0bd.js";import{_ as Z}from"./BtnHideOrShow.17309641.js";import{_ as L}from"./plugin-vue_export-helper.21dcd24c.js";const ee={class:"narea"},te={class:"nimg_block"},se={class:"tcol"},ae={class:"mainText"},oe={key:0,style:{display:"flex","justify-content":"right","grid-gap":"1em"}},ue=x({__name:"NewItem",props:{item:{}},emits:["hideOrShow","delEntry"],setup(k,{emit:E}){const c=F(),p=N("editModes").entry,D=E,r=w(!1),e=k,u=w(e.item);function l(){var t,a;return(t=e.item)!=null&&t.announceId?{to:"/announce/"+e.item.announceId,href:void 0}:(a=e.item)!=null&&a.isExternal?{to:void 0,href:e.item.refLink}:{to:"/new/"+e.item.id,href:void 0}}async function v(){r.value=!0,await g.hideOrShow(c,e.item.id,!u.value.isShow)&&(u.value.isShow=!u.value.isShow),r.value=!1}async function h(){r.value=!0,await g.del(c,e.item.id)&&D("delEntry",e.item.id),r.value=!1}return(t,a)=>(i(),_("div",{key:`en${t.item.id}`},[y("div",ee,[y("div",te,[y("div",null,[s($,{href:l().href,to:l().to,dense:"",class:"no-padding",target:"_blank"},{default:o(()=>[s(U,{url:d(X).srcByProps(d(c),t.item.sketch)},null,8,["url"])]),_:1},8,["href","to"])])]),y("div",se,[s($,{clickable:"",href:l().href,to:l().to,target:"_blank"},{default:o(()=>[s(G,null,{default:o(()=>[s(M,{class:"ItemHeader text-h6"},{default:o(()=>[S(I(t.item.title),1)]),_:1}),s(M,null,{default:o(()=>[y("span",ae,I(t.item.descr),1)]),_:1}),s(M,{caption:""},{default:o(()=>[S(I(d(K)(t.item.date)),1)]),_:1})]),_:1})]),_:1},8,["href","to"])]),d(p)?(i(),_("div",oe,[s(Z,{"is-show":u.value.isShow,onOnOk:a[0]||(a[0]=m=>v()),loading:r.value,"throw-confirm":""},null,8,["is-show","loading"]),s(W,{danger:"",flat:"",title:"\u0423\u0434\u0430\u043B\u0438\u0442\u044C \u043D\u043E\u0432\u043E\u0441\u0442\u044C",tooltip:"\u0423\u0434\u0430\u043B\u0438\u0442\u044C","throw-confirm":"",onOnOk:a[1]||(a[1]=m=>h())}),s(q,{icon:"edit",flat:"",to:"/new/"+t.item.id},{default:o(()=>[s(J,{anchor:"top middle"},{default:o(()=>a[2]||(a[2]=[S("\u0420\u0435\u0434\u0430\u043A\u0442\u0438\u0440\u043E\u0432\u0430\u0442\u044C")])),_:1})]),_:1},8,["to"])])):f("",!0)]),s(O)]))}});var b=L(ue,[["__scopeId","data-v-f25e1e50"]]);const ie={key:2,class:"noEntyes"},re=x({__name:"NewsList",props:{category:{},year:{},isTop:{type:Boolean}},setup(k,{expose:E}){const c=F(),C=j(),p=N("progress"),r=N("editModes").entry,e=w([]),u=k,l=w(u.category);H(C,t=>{l.value=t.params.category,v()});async function v(){p.value=!0,u.isTop?e.value=await g.listTop(c):e.value=await g.listByYear(c,(u==null?void 0:u.year)||0,l.value),p.value=!1}function h(t){const a=e.value.findIndex(m=>m.id===t);a!==-1&&e.value.splice(a,1)}return E({loadData:v}),Y(()=>{v()}),(t,a)=>{var m,T;return i(),_(B,null,[((m=e.value)==null?void 0:m.length)&&!t.isTop?(i(),Q(V,{key:0,id:"scroll-area-with-virtual-scroll-1",style:{height:"100%"}},{default:o(()=>[s(z,{items:e.value,"virtual-scroll-item-size":"40","virtual-scroll-slice-size":"5","virtual-scroll-sticky-size-start":148,"virtual-scroll-sticky-size-end":132,"scroll-target":"#scroll-area-with-virtual-scroll-1 > .scroll"},R({default:o(({item:n})=>[n.isShow||d(r)?(i(),Q(b,{class:"EntryItem",item:n,key:`entry${n.id}`,onDelEntry:h},null,8,["item"])):f("",!0)]),_:2},[t.isTop?void 0:{name:"after",fn:o(()=>[s(A)]),key:"0"}]),1032,["items"])]),_:1})):f("",!0),((T=e.value)==null?void 0:T.length)&&t.isTop?(i(!0),_(B,{key:1},P(e.value,n=>(i(),_(B,{key:n.id},[n.isShow||d(r)?(i(),Q(b,{key:0,item:n,onDelEntry:h},null,8,["item"])):f("",!0),s(O)],64))),128)):f("",!0),!e.value&&!d(p)?(i(),_("h5",ie," \u041E\u0448\u0438\u0431\u043A\u0430 \u043F\u0440\u0438 \u0437\u0430\u0433\u0440\u0443\u0437\u043A\u0435. \u041F\u043E\u043F\u0440\u043E\u0431\u0443\u0439\u0442\u0435 \u043E\u0431\u043D\u043E\u0432\u0438\u0442\u044C \u0441\u0442\u0440\u0430\u043D\u0438\u0446\u0443. ")):f("",!0)],64)}}});var ke=L(re,[["__scopeId","data-v-1f327e09"]]);export{ke as N};
