import{Q as Ou,M as Hu}from"./QScrollArea.dd54d94c.js";import{u as Uu}from"./use-meta.c3104d83.js";import{u as ie}from"./use-quasar.894b47c5.js";import{c as Iu,a as ye}from"./axios.8f562e2b.js";import{Q as B}from"./QItemLabel.06f6b55b.js";import{Q as E,b as Y,a as au}from"./QImg.5a36287c.js";import{V as Pu,X as Fu,bb as Tu,Z as Qu,di as Lu,r as h,c as j,w as Pe,aJ as Wu,W as Nu,h as K,g as Ku,dk as Ru,au as ju,a6 as Yu,a4 as zu,ak as Je,A as X,i as oe,m as v,D as W,f as e,q as u,v as s,bi as fe,z as Se,ax as N,n as M,t as x,u as F,B as Fe,d as Ae,b as Qe,G as Ze,y as ee,cq as fu,l as Q,E as Ee,df as Te,F as G,bm as pe,x as Be,k as Le,bk as mu,bl as pu,o as eu,p as le,C as re,I as gu,H as Ju,a as Xu,ay as ou}from"./index.11572179.js";import{Q as Me}from"./QSelect.44bc25a7.js";import{Q as _u}from"./QTooltip.280a1a0c.js";import{T as Gu,d as We,b as hu}from"./MainFooter.vue_vue_type_style_index_0_scoped_true_lang.55812a5a.js";import{a as Zu}from"./style.f1444523.js";/* empty css               */import{u as iu,b as et,c as ut,_ as Ie,g as tt,f as lt,Q as su,a as nt}from"./QPopupProxy.2670235d.js";import{p as xe}from"./format.de7e9769.js";import{C as du}from"./ClosePopup.c83fc748.js";import{n as me,a as ru,i as at,c as ot,g as it}from"./myFuncts.7f91abf8.js";import{m as ku,A as st}from"./AnnounceCard.d673f67f.js";import{S as dt,Q as rt}from"./QInnerLoading.500a651b.js";import{m as ct}from"./myAuth.5621b016.js";import{Q as Xe}from"./QList.f13a658d.js";import{S as vt}from"./SelectComposer.16f87005.js";import{W as be,P as Ge}from"./lib.be306c2e.js";import{_ as Ne}from"./BtnDelete.3d55e9b3.js";import{H as ke}from"./hall.ee9a33db.js";import{_ as cu}from"./BtnMoveSort.23b38b4e.js";import{_ as uu}from"./plugin-vue_export-helper.21dcd24c.js";import{Q as ft}from"./QVideo.b60a8765.js";import{_ as vu}from"./PhoneNumber.45f1b91f.js";import"./QToolbarTitle.96e7358c.js";import"./QLinearProgress.5ceb5230.js";import"./QMenu.924c0b17.js";import"./position-engine.1bf61849.js";import"./selection.93775355.js";import"./rtl.276c3f1b.js";import"./touch.9135741d.js";import"./use-file.79767200.js";import"./get-emits-object.a3f16783.js";import"./use-render-cache.3aae9b27.js";import"./myAxios.d5d7b004.js";import"./AuthorItem.6c196834.js";/* empty css                                                               *//* empty css                                                                   */function mt(l,H){if(l.hour!==null){if(l.minute===null)return"minute";if(H===!0&&l.second===null)return"second"}return"hour"}function pt(){const l=new Date;return{hour:l.getHours(),minute:l.getMinutes(),second:l.getSeconds(),millisecond:l.getMilliseconds()}}var gt=Pu({name:"QTime",props:{...Fu,...Tu,...iu,modelValue:{required:!0,validator:l=>typeof l=="string"||l===null},mask:{...iu.mask,default:null},format24h:{type:Boolean,default:null},defaultDate:{type:String,validator:l=>/^-?[\d]+\/[0-1]\d\/[0-3]\d$/.test(l)},options:Function,hourOptions:Array,minuteOptions:Array,secondOptions:Array,withSeconds:Boolean,nowBtn:Boolean},emits:et,setup(l,{slots:H,emit:m}){const f=Ku(),{$q:c}=f.proxy,o=Qu(l,c),{tabindex:g,headerClass:U,getLocale:i,getCurrentDate:k}=ut(l,c),p=Lu(l),b=Ru(p);let w,T;const J=h(null),q=j(()=>$e()),S=j(()=>i()),D=j(()=>yu()),L=Ie(l.modelValue,q.value,S.value,l.calendar,D.value),r=h(mt(L)),a=h(L),y=h(L.hour===null||L.hour<12),se=j(()=>`q-time q-time--${l.landscape===!0?"landscape":"portrait"}`+(o.value===!0?" q-time--dark q-dark":"")+(l.disable===!0?" disabled":l.readonly===!0?" q-time--readonly":"")+(l.bordered===!0?" q-time--bordered":"")+(l.square===!0?" q-time--square no-border-radius":"")+(l.flat===!0?" q-time--flat no-shadow":"")),I=j(()=>{const t=a.value;return{hour:t.hour===null?"--":V.value===!0?xe(t.hour):String(y.value===!0?t.hour===0?12:t.hour:t.hour>12?t.hour-12:t.hour),minute:t.minute===null?"--":xe(t.minute),second:t.second===null?"--":xe(t.second)}}),V=j(()=>l.format24h!==null?l.format24h:c.lang.date.format24h),P=j(()=>{const t=r.value==="hour",n=t===!0?12:60,_=a.value[r.value];let R=`rotate(${Math.round(_*(360/n))-180}deg) translateX(-50%)`;return t===!0&&V.value===!0&&a.value.hour>=12&&(R+=" scale(.7)"),{transform:R}}),ae=j(()=>a.value.hour!==null),ue=j(()=>ae.value===!0&&a.value.minute!==null),z=j(()=>l.hourOptions!==void 0?t=>l.hourOptions.includes(t):l.options!==void 0?t=>l.options(t,null,null):null),ce=j(()=>l.minuteOptions!==void 0?t=>l.minuteOptions.includes(t):l.options!==void 0?t=>l.options(a.value.hour,t,null):null),Ce=j(()=>l.secondOptions!==void 0?t=>l.secondOptions.includes(t):l.options!==void 0?t=>l.options(a.value.hour,a.value.minute,t):null),te=j(()=>{if(z.value===null)return null;const t=C(0,11,z.value),n=C(12,11,z.value);return{am:t,pm:n,values:t.values.concat(n.values)}}),ge=j(()=>ce.value!==null?C(0,59,ce.value):null),_e=j(()=>Ce.value!==null?C(0,59,Ce.value):null),De=j(()=>{switch(r.value){case"hour":return te.value;case"minute":return ge.value;case"second":return _e.value}}),we=j(()=>{let t,n,_=0,O=1;const R=De.value!==null?De.value.values:void 0;r.value==="hour"?V.value===!0?(t=0,n=23):(t=0,n=11,y.value===!1&&(_=12)):(t=0,n=55,O=5);const ne=[];for(let $=t,Z=t;$<=n;$+=O,Z++){const he=$+_,$u=R!==void 0&&R.includes(he)===!1,qu=r.value==="hour"&&$===0?V.value===!0?"00":"12":$;ne.push({val:he,index:Z,disable:$u,label:qu})}return ne}),A=j(()=>[[Gu,bu,void 0,{stop:!0,prevent:!0,mouse:!0}]]);Pe(()=>l.modelValue,t=>{const n=Ie(t,q.value,S.value,l.calendar,D.value);(n.dateHash!==a.value.dateHash||n.timeHash!==a.value.timeHash)&&(a.value=n,n.hour===null?r.value="hour":y.value=n.hour<12)}),Pe([q,S],()=>{ju(()=>{ze()})});function d(){const t={...k(),...pt()};ze(t),Object.assign(a.value,t),r.value="hour"}function C(t,n,_){const O=Array.apply(null,{length:n+1}).map((R,ne)=>{const $=ne+t;return{index:$,val:_($)===!0}}).filter(R=>R.val===!0).map(R=>R.index);return{min:O[0],max:O[O.length-1],values:O,threshold:n+1}}function ve(t,n,_){const O=Math.abs(t-n);return Math.min(O,_-O)}function de(t,{min:n,max:_,values:O,threshold:R}){if(t===n)return n;if(t<n||t>_)return ve(t,n,R)<=ve(t,_,R)?n:_;const ne=O.findIndex(he=>t<=he),$=O[ne-1],Z=O[ne];return t-$<=Z-t?$:Z}function $e(){return l.calendar!=="persian"&&l.mask!==null?l.mask:`HH:mm${l.withSeconds===!0?":ss":""}`}function yu(){if(typeof l.defaultDate!="string"){const t=k(!0);return t.dateHash=tt(t),t}return Ie(l.defaultDate,"YYYY/MM/DD",void 0,l.calendar)}function Ke(){return Yu(f)===!0||De.value!==null&&(De.value.values.length===0||r.value==="hour"&&V.value!==!0&&te.value[y.value===!0?"am":"pm"].values.length===0)}function Re(){const t=J.value,{top:n,left:_,width:O}=t.getBoundingClientRect(),R=O/2;return{top:n+R,left:_+R,dist:R*.7}}function bu(t){if(Ke()!==!0){if(t.isFirst===!0){w=Re(),T=qe(t.evt,w);return}T=qe(t.evt,w,T),t.isFinal===!0&&(w=!1,T=null,tu())}}function tu(){r.value==="hour"?r.value="minute":l.withSeconds&&r.value==="minute"&&(r.value="second")}function qe(t,n,_){const O=Wu(t),R=Math.abs(O.top-n.top),ne=Math.sqrt(Math.pow(Math.abs(O.top-n.top),2)+Math.pow(Math.abs(O.left-n.left),2));let $,Z=Math.asin(R/ne)*(180/Math.PI);if(O.top<n.top?Z=n.left<O.left?90-Z:270+Z:Z=n.left<O.left?Z+90:270-Z,r.value==="hour"){if($=Z/30,te.value!==null){const he=V.value!==!0?y.value===!0:te.value.am.values.length!==0&&te.value.pm.values.length!==0?ne>=n.dist:te.value.am.values.length!==0;$=de($+(he===!0?0:12),te.value[he===!0?"am":"pm"])}else $=Math.round($),V.value===!0?ne<n.dist?$<12&&($+=12):$===12&&($=0):y.value===!0&&$===12?$=0:y.value===!1&&$!==12&&($+=12);V.value===!0&&(y.value=$<12)}else $=Math.round(Z/6)%60,r.value==="minute"&&ge.value!==null?$=de($,ge.value):r.value==="second"&&_e.value!==null&&($=de($,_e.value));return _!==$&&Eu[r.value]($),$}const je={hour(){r.value="hour"},minute(){r.value="minute"},second(){r.value="second"}};function Au(t){t.keyCode===13&&lu()}function Cu(t){t.keyCode===13&&nu()}function Du(t){Ke()!==!0&&(c.platform.is.desktop!==!0&&qe(t,Re()),tu())}function xu(t){Ke()!==!0&&qe(t,Re())}function wu(t){if(t.keyCode===13)r.value="hour";else if([37,39].includes(t.keyCode)){const n=t.keyCode===37?-1:1;if(te.value!==null){const _=V.value===!0?te.value.values:te.value[y.value===!0?"am":"pm"].values;if(_.length===0)return;if(a.value.hour===null)Oe(_[0]);else{const O=(_.length+_.indexOf(a.value.hour)+n)%_.length;Oe(_[O])}}else{const _=V.value===!0?24:12,O=V.value!==!0&&y.value===!1?12:0,R=a.value.hour===null?-n:a.value.hour;Oe(O+(24+R+n)%_)}}}function Vu(t){if(t.keyCode===13)r.value="minute";else if([37,39].includes(t.keyCode)){const n=t.keyCode===37?-1:1;if(ge.value!==null){const _=ge.value.values;if(_.length===0)return;if(a.value.minute===null)He(_[0]);else{const O=(_.length+_.indexOf(a.value.minute)+n)%_.length;He(_[O])}}else{const _=a.value.minute===null?-n:a.value.minute;He((60+_+n)%60)}}}function Su(t){if(t.keyCode===13)r.value="second";else if([37,39].includes(t.keyCode)){const n=t.keyCode===37?-1:1;if(_e.value!==null){const _=_e.value.values;if(_.length===0)return;if(a.value.seconds===null)Ue(_[0]);else{const O=(_.length+_.indexOf(a.value.second)+n)%_.length;Ue(_[O])}}else{const _=a.value.second===null?-n:a.value.second;Ue((60+_+n)%60)}}}function Oe(t){a.value.hour!==t&&(a.value.hour=t,Ve())}function He(t){a.value.minute!==t&&(a.value.minute=t,Ve())}function Ue(t){a.value.second!==t&&(a.value.second=t,Ve())}const Eu={hour:Oe,minute:He,second:Ue};function lu(){y.value===!1&&(y.value=!0,a.value.hour!==null&&(a.value.hour-=12,Ve()))}function nu(){y.value===!0&&(y.value=!1,a.value.hour!==null&&(a.value.hour+=12,Ve()))}function Ye(t){const n=l.modelValue;r.value!==t&&n!==void 0&&n!==null&&n!==""&&typeof n!="string"&&(r.value=t)}function Ve(){if(z.value!==null&&z.value(a.value.hour)!==!0){a.value=Ie(),Ye("hour");return}if(ce.value!==null&&ce.value(a.value.minute)!==!0){a.value.minute=null,a.value.second=null,Ye("minute");return}if(l.withSeconds===!0&&Ce.value!==null&&Ce.value(a.value.second)!==!0){a.value.second=null,Ye("second");return}a.value.hour===null||a.value.minute===null||l.withSeconds===!0&&a.value.second===null||ze()}function ze(t){const n=Object.assign({...a.value},t),_=l.calendar==="persian"?xe(n.hour)+":"+xe(n.minute)+(l.withSeconds===!0?":"+xe(n.second):""):lt(new Date(n.year,n.month===null?null:n.month-1,n.day,n.hour,n.minute,n.second,n.millisecond),q.value,S.value,n.year,n.timezoneOffset);n.changed=_!==l.modelValue,m("update:modelValue",_,n)}function Bu(){const t=[K("div",{class:"q-time__link "+(r.value==="hour"?"q-time__link--active":"cursor-pointer"),tabindex:g.value,onClick:je.hour,onKeyup:wu},I.value.hour),K("div",":"),K("div",ae.value===!0?{class:"q-time__link "+(r.value==="minute"?"q-time__link--active":"cursor-pointer"),tabindex:g.value,onKeyup:Vu,onClick:je.minute}:{class:"q-time__link"},I.value.minute)];l.withSeconds===!0&&t.push(K("div",":"),K("div",ue.value===!0?{class:"q-time__link "+(r.value==="second"?"q-time__link--active":"cursor-pointer"),tabindex:g.value,onKeyup:Su,onClick:je.second}:{class:"q-time__link"},I.value.second));const n=[K("div",{class:"q-time__header-label row items-center no-wrap",dir:"ltr"},t)];return V.value===!1&&n.push(K("div",{class:"q-time__header-ampm column items-between no-wrap"},[K("div",{class:"q-time__link "+(y.value===!0?"q-time__link--active":"cursor-pointer"),tabindex:g.value,onClick:lu,onKeyup:Au},"AM"),K("div",{class:"q-time__link "+(y.value!==!0?"q-time__link--active":"cursor-pointer"),tabindex:g.value,onClick:nu,onKeyup:Cu},"PM")])),K("div",{class:"q-time__header flex flex-center no-wrap "+U.value},n)}function Mu(){const t=a.value[r.value];return K("div",{class:"q-time__content col relative-position"},[K(zu,{name:"q-transition--scale"},()=>K("div",{key:"clock"+r.value,class:"q-time__container-parent absolute-full"},[K("div",{ref:J,class:"q-time__container-child fit overflow-hidden"},[Je(K("div",{class:"q-time__clock cursor-pointer non-selectable",onClick:Du,onMousedown:xu},[K("div",{class:"q-time__clock-circle fit"},[K("div",{class:"q-time__clock-pointer"+(a.value[r.value]===null?" hidden":l.color!==void 0?` text-${l.color}`:""),style:P.value}),we.value.map(n=>K("div",{class:`q-time__clock-position row flex-center q-time__clock-pos-${n.index}`+(n.val===t?" q-time__clock-position--active "+U.value:n.disable===!0?" q-time__clock-position--disable":"")},[K("span",n.label)]))])]),A.value)])])),l.nowBtn===!0?K(X,{class:"q-time__now-button absolute",icon:c.iconSet.datetime.now,unelevated:!0,size:"sm",round:!0,color:l.color,textColor:l.textColor,tabindex:g.value,onClick:d}):null])}return f.proxy.setNow=d,()=>{const t=[Mu()],n=Nu(H.default);return n!==void 0&&t.push(K("div",{class:"q-time__actions"},n)),l.name!==void 0&&l.disable!==!0&&b(t,"push"),K("div",{class:se.value,tabindex:-1},[Bu(),K("div",{class:"q-time__main col overflow-auto"},t)])}}});const _t={class:"q-pa-md",style:{"max-width":"300px",padding:"0"}},ht={class:"row items-center justify-end"},kt={class:"row items-center justify-end"},yt={__name:"DateTime",props:{evDateTime:h("2019-02-01 12:44")},emits:["update:date"],setup(l,{emit:H}){const m=oe("Announce");return h(l.evDateTime),(c,o)=>(v(),W("div",_t,[e(fe,{filled:"",modelValue:s(m).eventTime,"onUpdate:modelValue":o[2]||(o[2]=g=>s(m).eventTime=g),mask:"####-##-## ##:##"},{prepend:u(()=>[e(Se,{name:"event",class:"cursor-pointer"},{default:u(()=>[e(su,{cover:"","transition-show":"scale","transition-hide":"scale"},{default:u(()=>[e(nt,{modelValue:s(m).eventTime,"onUpdate:modelValue":o[0]||(o[0]=g=>s(m).eventTime=g),mask:"YYYY-MM-DD HH:mm"},{default:u(()=>[N("div",ht,[Je(e(X,{label:"\u0417\u0430\u043A\u0440\u044B\u0442\u044C",color:"primary",flat:""},null,512),[[du]])])]),_:1},8,["modelValue"])]),_:1})]),_:1})]),append:u(()=>[e(Se,{name:"access_time",class:"cursor-pointer"},{default:u(()=>[e(su,{cover:"","transition-show":"scale","transition-hide":"scale"},{default:u(()=>[e(gt,{modelValue:s(m).eventTime,"onUpdate:modelValue":o[1]||(o[1]=g=>s(m).eventTime=g),mask:"YYYY-MM-DD HH:mm",format24h:""},{default:u(()=>[N("div",kt,[Je(e(X,{label:"\u0417\u0430\u043A\u0440\u044B\u0442\u044C",color:"primary",flat:""},null,512),[[du]])])]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]))}},bt={__name:"WorkSelectItem",props:{work:Object},setup(l){const H=ie();return(m,f)=>(v(),M(Y,{clickable:"",dense:""},{default:u(()=>[e(E,null,{default:u(()=>[e(B,null,{default:u(()=>[x(F(l.work.titleRu),1)]),_:1}),e(B,{caption:""},{default:u(()=>[x(F(l.work.titleEn),1)]),_:1})]),_:1}),e(E,{side:"",class:"opus"},{default:u(()=>[e(B,{caption:""},{default:u(()=>{var c;return[x(F((c=l.work.opus)!=null?c:"Op.?"),1)]}),_:1}),e(B,{caption:""},{default:u(()=>{var c;return[x(F((c=l.work.icatno)!=null?c:"cat\u2116.?"),1)]}),_:1}),e(B,{caption:""},{default:u(()=>{var c;return[x(F((c=l.work.catalogIndex)!=null?c:"catIdx: ?"),1)]}),_:1}),e(X,{dense:"","icon-right":"content_copy",flat:"",label:`ID: ${l.work.id}`,onClick:f[0]||(f[0]=Fe(c=>m.copy(l.work.id,s(H)),["prevent","stop"]))},null,8,["label"])]),_:1})]),_:1}))}},At=Ae({__name:"AddWorkDialog",props:{announce:{type:Object,required:!0}},emits:["workSelected","onAddWork"],setup(l,{emit:H}){const m=ie(),f=oe("isOpenAddWorkDialog"),c=h(!1),o=h(),g=h(),U=H,i=l,k=h([]),p=h([]),b=h([]);function w(r){g.value=r,U("workSelected",r),q(r.id)}function T(r){var a;o.value=r,g.value=void 0,(a=o.value)!=null&&a.id&&J(o.value.id)}async function J(r){c.value=!0,k.value=await be.getListByAuthor(m,r),c.value=!1}async function q(r){c.value=!0,p.value=await Ge.getList(m,r),c.value=!1}async function S(){c.value=!0,await be.linkToAnnounce(m,i.announce.id,g.value.id,b.value)&&(U("onAddWork",g.value),D()),c.value=!1}function D(){f.value=!1}function L(){o.value=void 0,g.value=void 0,c.value=!1}return(r,a)=>(v(),M(Ze,{modelValue:s(f),"onUpdate:modelValue":a[3]||(a[3]=y=>Qe(f)?f.value=y:null),onBeforeHide:L},{default:u(()=>[e(Be,{bordered:"",class:"dialogArea"},{default:u(()=>[e(ee,null,{default:u(()=>[e(vt,{onItSel:T})]),_:1}),o.value?(v(),M(ee,{key:0},{default:u(()=>[e(Me,{modelValue:g.value,"onUpdate:modelValue":[a[0]||(a[0]=y=>g.value=y),w],options:k.value,"option-label":"titleRu","option-value":"id","map-options":"",clearable:"",label:"\u041F\u0440\u043E\u0438\u0437\u0432\u0435\u0434\u0435\u043D\u0438\u0435"},{option:u(y=>[e(bt,fu(y.itemProps,{work:y.opt}),null,16,["work"])]),_:1},8,["modelValue","options"])]),_:1})):Q("",!0),g.value?(v(),M(ee,{key:1},{default:u(()=>[p.value.length?(v(),M(Xe,{key:0,separator:""},{default:u(()=>[(v(!0),W(G,null,Ee(p.value,y=>(v(),M(Y,{key:`part_${y.id}`,tag:"label"},{default:u(()=>[e(E,null,{default:u(()=>[e(B,null,{default:u(()=>[x(F(y.title),1)]),_:2},1024),e(B,{caption:""},{default:u(()=>[x(F(y.caption),1)]),_:2},1024)]),_:2},1024),e(E,{side:""},{default:u(()=>[e(Te,{modelValue:b.value,"onUpdate:modelValue":[a[1]||(a[1]=se=>b.value=se),a[2]||(a[2]=()=>{console.log(b.value)})],val:y.id},null,8,["modelValue","val"])]),_:2},1024)]),_:2},1024))),128))]),_:1})):(v(),M(Y,{key:1},{default:u(()=>[e(E,null,{default:u(()=>[e(B,null,{default:u(()=>a[4]||(a[4]=[x(" \u0427\u0430\u0441\u0442\u0438 \u043D\u0435 \u043D\u0430\u0439\u0434\u0435\u043D\u044B ")])),_:1}),e(B,{caption:""},{default:u(()=>a[5]||(a[5]=[x(" \u0418\u0445 \u043C\u043E\u0436\u043D\u043E \u0434\u043E\u0431\u0430\u0432\u0438\u0442\u044C \u0432 \u0431\u0438\u0431\u043B\u0438\u043E\u0442\u0435\u043A\u0435 ")])),_:1})]),_:1})]),_:1})),a[6]||(a[6]=N("template",null,null,-1))]),_:1})):Q("",!0),e(pe,{align:"between"},{default:u(()=>[e(We),e(X,{"icon-right":"save",color:"green",loading:c.value,onClick:S,label:"\u0441\u043E\u0445\u0440\u0430\u043D\u0438\u0442\u044C",flat:""},null,8,["loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"]))}}),Ct=Ae({__name:"SuggestSelect",emits:["saved"],setup(l,{emit:H}){const m=ie(),f=String("https://sakh-orch.ru/api/"),c=String("https://sakh-orch.ru/stapi/"),o=h(""),g=h(null),U=h([{title:{text:"\u0421\u0430\u0445\u0430\u043B\u0438\u043D\u0441\u043A\u0438\u0439 \u043C\u0435\u0436\u0434\u0443\u043D\u0430\u0440\u043E\u0434\u043D\u044B\u0439 \u0442\u0435\u0430\u0442\u0440\u0430\u043B\u044C\u043D\u044B\u0439 \u0446\u0435\u043D\u0442\u0440 \u0438\u043C\u0435\u043D\u0438 \u0410\u043D\u0442\u043E\u043D\u0430 \u041F\u0430\u0432\u043B\u043E\u0432\u0438\u0447\u0430 \u0427\u0435\u0445\u043E\u0432\u0430",hl:[{begin:26,end:31}]},subtitle:{text:"\u0422\u0435\u0430\u0442\u0440 \xB7 \u041A\u043E\u043C\u043C\u0443\u043D\u0438\u0441\u0442\u0438\u0447\u0435\u0441\u043A\u0438\u0439 \u043F\u0440\u043E\u0441\u043F\u0435\u043A\u0442, 35",hl:[{begin:0,end:5}]},tags:["business","theatre","museum","concert hall"],distance:{value:1178.70231,text:"1.18 \u043A\u043C"}},{title:{text:"\u0421\u0430\u0445\u0430\u043B\u0438\u043D\u0441\u043A\u0438\u0439 \u0442\u0435\u0430\u0442\u0440 \u043A\u0443\u043A\u043E\u043B",hl:[{begin:12,end:17}]},subtitle:{text:"\u0422\u0435\u0430\u0442\u0440 \xB7 \u041A\u043E\u043C\u043C\u0443\u043D\u0438\u0441\u0442\u0438\u0447\u0435\u0441\u043A\u0438\u0439 \u043F\u0440\u043E\u0441\u043F\u0435\u043A\u0442, 28\u0410",hl:[{begin:0,end:5}]},tags:["business","theatre","office service"],distance:{value:1224.330864,text:"1.22 \u043A\u043C"}},{title:{text:"\u041C\u043E\u0441\u043A\u043E\u0432\u0441\u043A\u0438\u0439 \u0434\u0440\u0430\u043C\u0430\u0442\u0438\u0447\u0435\u0441\u043A\u0438\u0439 \u0442\u0435\u0430\u0442\u0440 \u0438\u043C\u0435\u043D\u0438 \u041C. \u041D. \u0415\u0440\u043C\u043E\u043B\u043E\u0432\u043E\u0439",hl:[{begin:25,end:30}]},subtitle:{text:"\u0422\u0435\u0430\u0442\u0440 \xB7 \u041C\u043E\u0441\u043A\u0432\u0430, \u0422\u0432\u0435\u0440\u0441\u043A\u0430\u044F \u0443\u043B\u0438\u0446\u0430, 5/6",hl:[{begin:0,end:5}]},tags:["business","theatre"],distance:{value:6655148389e-3,text:"6655.15 \u043A\u043C"}},{title:{text:"\u0422\u0430\u0442\u0430\u0440\u0441\u043A\u0438\u0439 \u0433\u043E\u0441\u0443\u0434\u0430\u0440\u0441\u0442\u0432\u0435\u043D\u043D\u044B\u0439 \u0442\u0435\u0430\u0442\u0440 \u043A\u0443\u043A\u043E\u043B \u042D\u043A\u0438\u044F\u0442",hl:[{begin:26,end:31}]},subtitle:{text:"\u0422\u0435\u0430\u0442\u0440 \xB7 \u041A\u0430\u0437\u0430\u043D\u044C, \u041F\u0435\u0442\u0435\u0440\u0431\u0443\u0440\u0433\u0441\u043A\u0430\u044F \u0443\u043B\u0438\u0446\u0430, 57",hl:[{begin:0,end:5}]},tags:["business","theatre"],distance:{value:6077098052e-3,text:"6077.10 \u043A\u043C"}},{title:{text:"\u0422\u0435\u0430\u0442\u0440 \u0434\u0440\u0430\u043C\u044B \u0438 \u043A\u043E\u043C\u0435\u0434\u0438\u0438",hl:[{begin:0,end:5}]},subtitle:{text:"\u0422\u0435\u0430\u0442\u0440 \xB7 \u041F\u0435\u0442\u0440\u043E\u043F\u0430\u0432\u043B\u043E\u0432\u0441\u043A-\u041A\u0430\u043C\u0447\u0430\u0442\u0441\u043A\u0438\u0439, \u041B\u0435\u043D\u0438\u043D\u0441\u043A\u0430\u044F \u0443\u043B\u0438\u0446\u0430, 75",hl:[{begin:0,end:5}]},tags:["business","theatre"],distance:{value:1321394665e-3,text:"1321.39 \u043A\u043C"}},{title:{text:"\u0422\u0435\u0430\u0442\u0440 \u041A\u043E\u043B\u0435\u0441\u043E",hl:[{begin:0,end:5}]},subtitle:{text:"\u041E\u0441\u0442\u0430\u043D\u043E\u0432\u043A\u0430 \u043E\u0431\u0449\u0435\u0441\u0442\u0432\u0435\u043D\u043D\u043E\u0433\u043E \u0442\u0440\u0430\u043D\u0441\u043F\u043E\u0440\u0442\u0430 \xB7 \u0422\u043E\u043B\u044C\u044F\u0442\u0442\u0438, \u041B\u0435\u043D\u0438\u043D\u0433\u0440\u0430\u0434\u0441\u043A\u0430\u044F \u0443\u043B\u0438\u0446\u0430, 33\u0410\u04411"},tags:["business","bus stop"],distance:{value:6203127608e-3,text:"6203.13 \u043A\u043C"}},{title:{text:"\u0422\u0435\u0430\u0442\u0440\u0430\u043B\u044C\u043D\u0430\u044F",hl:[{begin:0,end:5}]},subtitle:{text:"\u041E\u0441\u0442\u0430\u043D\u043E\u0432\u043A\u0430 \u043E\u0431\u0449\u0435\u0441\u0442\u0432\u0435\u043D\u043D\u043E\u0433\u043E \u0442\u0440\u0430\u043D\u0441\u043F\u043E\u0440\u0442\u0430 \xB7 \u0421\u043E\u0447\u0438, \u0410-147"},tags:["business","bus stop"],distance:{value:7445799203e-3,text:"7445.80 \u043A\u043C"}}]),i=h([...U.value]),k=H;function p(q,S){if(!q){i.value=[];return}S(()=>{b(q)})}function b(q){const S="https://suggest-maps.yandex.ru/v1/suggest";Iu.get(S,{params:{apikey:o.value,text:q,ull:"142.728060,46.966085",print_address:1,strict_bounds:1,attrs:"uri"},withCredentials:!1,headers:{"Content-Type":"application/json",Accept:"application/json"}}).then(D=>{var r;if(!((r=D==null?void 0:D.data)!=null&&r.results))return;const L=D.data.results;L.forEach((a,y)=>{a.label=a.address.formatted_address,a.value=y}),i.value=L}).catch(D=>{console.error(D),m.notify(me(D))})}function w(){ye.post(f+"epoint/ya/suggest.php",{params:{method:"add",suggest:g.value}}).then(q=>{var S;if(!((S=q==null?void 0:q.data)!=null&&S.result))throw new Error;k("saved",q.data.data.id)}).catch(q=>{m.notify(me(q))})}function T(){!g.value||w()}function J(){const q=c+"epoint/ya/suggest.php",S={method:"getApiKey"};ye.post(q,{params:S}).then(D=>{var L;if(!((L=D==null?void 0:D.data)!=null&&L.result))throw new Error("SuggestApiKey Error");o.value=D.data.data.key}).catch(D=>{console.error(D),m.notify(me(D))})}return Le(()=>{J()}),(q,S)=>o.value?(v(),M(Me,{key:0,modelValue:g.value,"onUpdate:modelValue":[S[0]||(S[0]=D=>g.value=D),T],options:i.value,"use-input":"","fill-input":"","hide-selected":"",clearable:"",onFilter:p},{option:u(D=>[e(Y,mu(pu(D.itemProps)),{default:u(()=>[e(E,null,{default:u(()=>[e(B,null,{default:u(()=>[x(F(D.opt.title.text),1)]),_:2},1024),e(B,{caption:""},{default:u(()=>{var L,r;return[x(F((r=(L=D.opt)==null?void 0:L.address)==null?void 0:r.formatted_address),1)]}),_:2},1024)]),_:2},1024)]),_:2},1040)]),_:1},8,["modelValue","options"])):Q("",!0)}}),Dt={class:"text-h6"},xt=Ae({__name:"HallDialog",setup(l){const H=ie(),m=oe("clickedHall"),f=oe("IsHallDialogOpen"),c=h(!1);eu(()=>{});async function o(){c.value=!0,await m.value.save(H)&&(ke.List.value=await ke.getList(H),f.value=!1),c.value=!1}function g(p){m.value.suggestId=p}function U(){m.value||(m.value=new ke)}function i(){}async function k(p){c.value=!0,await p.del(H)&&(f.value=!1),c.value=!1}return(p,b)=>(v(),M(Ze,{modelValue:s(f),"onUpdate:modelValue":b[3]||(b[3]=w=>Qe(f)?f.value=w:null),onBeforeShow:U,onBeforeHide:i},{default:u(()=>[e(Be,{bordered:"",class:"dialogArea"},{default:u(()=>[e(E,null,{default:u(()=>[N("div",Dt,F(s(m).id>0?"\u0420\u0435\u0434\u0430\u043A\u0442\u0438\u0440\u043E\u0432\u0430\u0442\u044C \u0437\u0430\u043B":"\u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C \u0437\u0430\u043B"),1)]),_:1}),e(ee,null,{default:u(()=>[e(fe,{modelValue:s(m).name,"onUpdate:modelValue":b[0]||(b[0]=w=>s(m).name=w),label:"\u041D\u0430\u0437\u0432\u0430\u043D\u0438\u0435","stack-label":""},null,8,["modelValue"]),s(m).id===-1?(v(),M(Ct,{key:0,onSaved:g})):(v(),M(Y,{key:1},{default:u(()=>[e(E,null,{default:u(()=>[e(B,null,{default:u(()=>{var w,T,J;return[x(F((J=(T=(w=s(m))==null?void 0:w.suggest)==null?void 0:T.address)==null?void 0:J.formatted),1)]}),_:1})]),_:1})]),_:1}))]),_:1}),e(pe,null,{default:u(()=>[e(We),s(m).id>0?(v(),M(Ne,{key:0,label:"\u0423\u0434\u0430\u043B\u0438\u0442\u044C",loading:c.value,"throw-confirm":"",title:"\u0423\u0434\u0430\u043B\u0438\u0442\u044C \u0437\u0430\u043B",danger:"",onOnOk:b[1]||(b[1]=w=>k(s(m)))},null,8,["loading"])):Q("",!0),e(X,{label:"\u0421\u043E\u0445\u0440\u0430\u043D\u0438\u0442\u044C",disable:!s(m).suggestId,loading:c.value,color:"green",onClick:b[2]||(b[2]=w=>o())},null,8,["disable","loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"]))}}),wt=Ae({__name:"HallSelect",emits:["selected"],setup(l,{emit:H}){const m=ie(),f=oe("selectedHall"),c=h(!1),o=h(!1);le("IsHallDialogOpen",c);const g=h(),U=H;function i(w=null){w||(w=new ke),b.value=new ke(w),c.value=!0}function k(){b.value=f.value,U("selected",f.value)}async function p(w){o.value=!0,await w.del(m)&&(c.value=!1),o.value=!1}const b=h(new ke);return le("clickedHall",b),Le(()=>{}),(w,T)=>{var J,q;return v(),W(G,null,[e(Me,{modelValue:s(f),"onUpdate:modelValue":[T[1]||(T[1]=S=>Qe(f)?f.value=S:null),T[2]||(T[2]=S=>k())],label:"\u041C\u0435\u0441\u0442\u043E \u043F\u0440\u043E\u0432\u0435\u0434\u0435\u043D\u0438\u044F","map-options":"","option-label":"name","option-value":"id",options:(q=(J=s(ke).List)==null?void 0:J.value)!=null?q:[],ref_key:"selRef",ref:g},{append:u(()=>[e(X,{icon:"add",round:"",onClick:T[0]||(T[0]=Fe(S=>i(),["prevent","stop"]))},{default:u(()=>[e(_u,null,{default:u(()=>T[3]||(T[3]=[x("\u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C \u0437\u0430\u043B")])),_:1})]),_:1})]),option:u(S=>[e(Y,mu(pu(S.itemProps)),{default:u(()=>[e(E,null,{default:u(()=>[e(B,null,{default:u(()=>[x(F(S.opt.name),1)]),_:2},1024),e(B,{caption:""},{default:u(()=>[x(F(S.opt.suggest.address.formatted),1)]),_:2},1024)]),_:2},1024),e(E,{side:""},{default:u(()=>[e(Ne,{danger:"","throw-confirm":"",flat:"",loading:o.value,tooltip:"\u0423\u0434\u0430\u043B\u0438\u0442\u044C \u0437\u0430\u043B",title:"\u0423\u0434\u0430\u043B\u0438\u0442\u044C \u0437\u0430\u043B: "+S.opt.name,onOnOk:D=>p(S.opt)},null,8,["loading","title","onOnOk"])]),_:2},1024),e(E,{side:""},{default:u(()=>[e(X,{icon:"edit",flat:"",onClick:Fe(D=>i(S.opt),["prevent","stop"])},null,8,["onClick"])]),_:2},1024)]),_:2},1040)]),_:1},8,["modelValue","options"]),e(xt)],64)}}}),Vt=Ae({__name:"AnnounceSelect",props:{announces:{}},emits:["onSelect"],setup(l,{emit:H}){const m=H,f=h();return(c,o)=>(v(),M(Me,{modelValue:f.value,"onUpdate:modelValue":[o[0]||(o[0]=g=>f.value=g),o[1]||(o[1]=g=>m("onSelect",f.value))],options:c.announces,"map-options":"","option-value":"id","option-label":"progName"},{option:u(g=>{var U;return[e(Y,fu(g.itemProps,{id:`an${(U=g.opt)==null?void 0:U.id}`}),{default:u(()=>[e(E,null,{default:u(()=>[e(B,{caption:""},{default:u(()=>[x(F(g.opt.eventTime),1)]),_:2},1024),e(B,{caption:""},{default:u(()=>[x(F(g.opt.Hall.name),1)]),_:2},1024),e(B,null,{default:u(()=>[x(F(g.opt.progName),1)]),_:2},1024)]),_:2},1024)]),_:2},1040,["id"])]}),_:1},8,["modelValue","options"]))}}),St=Ae({__name:"WorkBatchAddDialog",props:{targetAnnounceId:{}},emits:["onBatchAddWorks"],setup(l,{emit:H}){const m=ie(),f=oe("isOpenBatchAddDialog"),c=h(!1),o=l,g=H,U=h(),i=h([]),k=h([]);function p(){f.value=!1}function b(){k.value=[],U.value=[],i.value=[],c.value=!1}async function w(){c.value=!0,U.value=await ku.getList(m),c.value=!1}async function T(r){c.value=!0,i.value=await be.getListByAnnounce(m,r),c.value=!1}function J(r){!r||T(r.id)}async function q(){c.value=!0,await be.linkListToAnnounce(m,o.targetAnnounceId,k.value)&&(g("onBatchAddWorks"),p()),c.value=!1}function S(){k.value=i.value.map(r=>r.id)}function D(){k.value=[]}const L=j(()=>i.value.length?i.value.length===k.value.length:!1);return Le(()=>{w()}),(r,a)=>(v(),M(Ze,{modelValue:s(f),"onUpdate:modelValue":a[1]||(a[1]=y=>Qe(f)?f.value=y:null),onBeforeHide:b},{default:u(()=>[e(Be,{bordered:"",class:"dialogArea"},{default:u(()=>[e(ee,null,{default:u(()=>[e(Vt,{announces:U.value,onOnSelect:J},null,8,["announces"])]),_:1}),i.value.length?(v(),M(ee,{key:0},{default:u(()=>[e(Y,null,{default:u(()=>[e(E,null,{default:u(()=>[L.value?Q("",!0):(v(),M(X,{key:0,label:"\u041E\u0442\u043C\u0435\u0442\u0438\u0442\u044C \u0432\u0441\u0435",onClick:S})),L.value?(v(),M(X,{key:1,label:"\u0421\u043D\u044F\u0442\u044C \u0432\u0441\u0435",onClick:D})):Q("",!0)]),_:1})]),_:1}),(v(!0),W(G,null,Ee(i.value,y=>(v(),M(Y,{key:`add_work${y.id}`,tag:"label"},{default:u(()=>[e(E,null,{default:u(()=>[e(B,{caption:""},{default:u(()=>[x(F(y.author.fioRu),1)]),_:2},1024),e(B,null,{default:u(()=>[x(F(y.titleRu),1)]),_:2},1024)]),_:2},1024),e(E),e(E,{side:""},{default:u(()=>[e(Te,{modelValue:k.value,"onUpdate:modelValue":a[0]||(a[0]=se=>k.value=se),val:y.id},null,8,["modelValue","val"])]),_:2},1024)]),_:2},1024))),128))]),_:1})):Q("",!0),e(pe,{align:"right"},{default:u(()=>[e(X,{icon:"save",flat:"",color:"green",disable:!k.value.length,onClick:q,label:"\u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C"},null,8,["disable"])]),_:1})]),_:1})]),_:1},8,["modelValue"]))}}),Et=Ae({__name:"WorkList",props:{announce:{type:Object,required:!0}},setup(l){const H=ie(),m=l,f=h(!1),c=h(!1);le("isOpenAddWorkDialog",c);const o=h(!1);le("isOpenBatchAddDialog",o);function g(I){console.log(I)}const U=h([]),i=h([]),k=h([]),p=h(!1);function b(I){const V=I.map(P=>P.id);k.value=Array.from(new Set([...k.value,...V]))}function w(I){const V=I.map(P=>P.id);k.value=k.value.filter(P=>!V.includes(P))}function T(I){return I.every(V=>k.value.includes(V.id))}function J(I){T(I)?w(I):b(I)}const q=h({});function S(I){q.value[I.id]=j({get(){return T(I.children)},set(V){J(I.children)}})}async function D(){f.value=!0;const I=m.announce.id;U.value=await be.getListByAnnounce(H,I),U.value.length&&(await L(),U.value.forEach(V=>S(V))),f.value=!1}async function L(){f.value=!0;const I=m.announce.id;i.value=await Ge.getListByAnnounce(H,I),k.value=i.value.map(V=>V.id),f.value=!1}async function r(){f.value=!0,await Ge.linkListToAnnounce(H,m.announce.id,k.value),f.value=!1}async function a(I){f.value=!0,await be.unlinkFromAnnounce(H,m.announce.id,I)&&await D(),f.value=!1}async function y(I,V){f.value=!0,await be.moveSortInAnnounce(H,I,V,m.announce.id)&&await D(),f.value=!1}function se(){D(),p.value=!1}return Le(async()=>{await D()}),(I,V)=>(v(),W(G,null,[e(Be,null,{default:u(()=>[e(pe,{align:"between"},{default:u(()=>[p.value?(v(),M(X,{key:0,icon:"add",label:"\u0434\u043E\u0431\u0430\u0432\u0438\u0442\u044C",onClick:V[0]||(V[0]=P=>c.value=!0),loading:f.value},null,8,["loading"])):Q("",!0),p.value?(v(),M(X,{key:1,icon:"add",label:"\u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C \u0432\u0441\u0435 \u0438\u0437 \u0434\u0440\u0443\u0433\u043E\u0433\u043E \u043A\u043E\u043D\u0446\u0435\u0440\u0442\u0430",onClick:V[1]||(V[1]=P=>o.value=!0),loading:f.value},null,8,["loading"])):Q("",!0),e(We),e(X,{icon:"edit",flat:"",round:"",onClick:V[2]||(V[2]=Fe(P=>p.value=!p.value,["stop","prevent"])),color:p.value?"red":"gray"},null,8,["color"])]),_:1}),e(ee,null,{default:u(()=>[e(Xe,null,{default:u(()=>[(v(!0),W(G,null,Ee(U.value,(P,ae)=>{var ue;return v(),W(G,{key:`w${P.id}`},[(ue=P==null?void 0:P.children)!=null&&ue.length?(v(),M(hu,{key:0,"content-inset-level":.1,"expand-separator":""},{header:u(()=>[e(Y,{style:{width:"100%"},class:"no-padding"},{default:u(()=>[e(E,{avatar:""},{default:u(()=>[e(B,{caption:""},{default:u(()=>[x(F(P.author.fioRu),1)]),_:2},1024),e(B,null,{default:u(()=>[x(F(P.titleRu),1)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),default:u(()=>[e(Xe,null,{default:u(()=>[p.value?(v(),M(Y,{key:0,tag:"label"},{default:u(()=>[e(E,null,{default:u(()=>[e(B,null,{default:u(()=>[x(F(T(P.children)?"\u0421\u043D\u044F\u0442\u044C \u0432\u0441\u0435":"\u041E\u0442\u043C\u0435\u0442\u0438\u0442\u044C \u0432\u0441\u0435"),1)]),_:2},1024)]),_:2},1024),e(E,{side:""},{default:u(()=>[e(Te,{modelValue:q.value[P.id],"onUpdate:modelValue":[z=>q.value[P.id]=z,r],disable:f.value,"keep-color":"",color:"green"},null,8,["modelValue","onUpdate:modelValue","disable"])]),_:2},1024)]),_:2},1024)):Q("",!0),(v(!0),W(G,null,Ee(P.children,z=>(v(),M(Y,{key:`ch${z.id}`,tag:"label"},{default:u(()=>[e(E,{avatar:""},{default:u(()=>[e(B,null,{default:u(()=>[x(F(z.num),1)]),_:2},1024)]),_:2},1024),e(E,null,{default:u(()=>[e(B,null,{default:u(()=>[x(F(z.title),1)]),_:2},1024),e(B,{caption:""},{default:u(()=>[x(F(z.caption),1)]),_:2},1024)]),_:2},1024),e(E,{side:""},{default:u(()=>[e(Te,{modelValue:k.value,"onUpdate:modelValue":[V[3]||(V[3]=ce=>k.value=ce),r],disable:!p.value,val:z.id},null,8,["modelValue","disable","val"])]),_:2},1024)]),_:2},1024))),128))]),_:2},1024)]),_:2},1024)):(v(),M(Y,{key:1},{default:u(()=>[e(E,null,{default:u(()=>[e(B,{caption:""},{default:u(()=>[x(F(P.author.fioRu),1)]),_:2},1024),e(B,null,{default:u(()=>[x(F(P.titleRu),1)]),_:2},1024)]),_:2},1024)]),_:2},1024)),p.value?(v(),W(G,{key:2},[e(Y,null,{default:u(()=>[e(E,{avatar:""},{default:u(()=>[e(cu,{disable:ae<1,onOnClick:z=>y("up",P.id),direction:"up"},null,8,["disable","onOnClick"])]),_:2},1024),e(E,{avatar:""},{default:u(()=>[e(cu,{disable:ae>=U.value.length-1,onOnClick:z=>y("down",P.id),direction:"down"},null,8,["disable","onOnClick"])]),_:2},1024),e(E),e(E,{side:""},{default:u(()=>[e(Ne,{flat:"","throw-confirm":"",danger:"",onOnOk:z=>a(P.id),loading:f.value,title:`\u0423\u0434\u0430\u043B\u0438\u0442\u044C: ${P.titleRu}`},null,8,["onOnOk","loading","title"])]),_:2},1024)]),_:2},1024),e(re)],64)):Q("",!0)],64)}),128))]),_:1})]),_:1})]),_:1}),e(At,{announce:l.announce,onWorkSelected:g,onOnAddWork:D},null,8,["announce"]),e(St,{"target-announce-id":l.announce.id,onOnBatchAddWorks:se},null,8,["target-announce-id"])],64))}});const Bt={key:0,class:"eventsarea"},Mt={class:"editArea"},$t={key:0,class:"card"},qt={class:"editor"},Ot={style:{display:"flex","justify-content":"space-between"}},Ht={key:0,class:"uploads"},Ut={style:{width:"100%"}},It={class:"uploads"},Pt={__name:"AnnounceEditor",emits:["reload","posterUploaded"],setup(l,{expose:H,emit:m}){const f=String("https://sakh-orch.ru/stapi/"),c=String("https://sakh-orch.ru/api/"),o=ie(),g=gu(),U=Ju(),i=oe("Announce"),k=h(i.value.Hall);le("selectedHall",k);function p(A){console.log(A),i.value.hallId=A.id,i.value.Hall=A}const b=h("");le("pwUrl",b);const w=m,T={};function J(){}const q=[{label:"\u0412\u0445\u043E\u0434 \u0441\u0432\u043E\u0431\u043E\u0434\u043D\u044B\u0439",value:2},{label:"\u0411\u0438\u043B\u0435\u0442\u044B \u0432 \u043F\u0440\u043E\u0434\u0430\u0436\u0435",value:3},{label:"\u0412\u0445\u043E\u0434 \u043F\u043E \u043F\u0440\u0438\u0433\u043B\u0430\u0441\u0438\u0442\u0435\u043B\u044C\u043D\u044B\u043C",value:4},{label:"\u041F\u0440\u043E\u0434\u0430\u0436\u0430 \u0437\u0430\u0432\u0435\u0440\u0448\u0435\u043D\u0430",value:5}],S=h(null),D=h(null),L=h([]);le("AuthorSelectList",L);const r=h(!1);le("loadingAuthors",r);const a=h(0);le("selectedAuthorId",a);const y=h(null);le("selectedAuthor",y),Pe(a,()=>{y.value=L.value.find(A=>A.id===a.value)});function se(){r.value=!0,ye.post(f+"epoint/lib/author.php",{params:{method:"all"}}).then(A=>{var d,C;L.value=(C=(d=A==null?void 0:A.data)==null?void 0:d.data)!=null?C:[]}).catch(A=>{L.value=[],o.notify(me(A))}).finally(()=>{r.value=!1})}function I(A){return{url:c+"epoint/event/poster.php",headers:[{name:"ACCESSTOKEN",value:ct.self.AccessToken}],formFields:[{name:"id",value:i.value.id},{name:"method",value:"add"}]}}function V(A){o.notify(ru("\u0417\u0430\u0433\u0440\u0443\u0436\u0435\u043D\u043E")),w("posterUploaded")}function P(A){o.notify(ru("\u0417\u0430\u0433\u0440\u0443\u0436\u0435\u043D\u043E")),w("posterUploaded"),S.value.reset(),ae.value=!0}const ae=h(!1);let ue=null;Pe(ae,A=>{console.log("photoWatcher"),A&&!ue?ue=setInterval(De,3e3):!A&&ue&&(clearInterval(ue),ue=null)});function z(A){var C,ve,de;let d=(de=(ve=JSON.parse((C=A==null?void 0:A.xhr)==null?void 0:C.response))==null?void 0:ve.error)!=null?de:"";o.notify(me(null,d))}function ce(){ku.save(o,i.value)}function Ce(){U.push({path:"/announces"})}function te(){w("reload")}function ge(){delete i.value.sketch,delete i.value.sketchId}function _e(){ye.post(c+"epoint/event/announce.php",{params:{method:"updateMarkdown",id:i.value.id,markdown:i.value.description}}).then(A=>{var d;if(!((d=A==null?void 0:A.data)!=null&&d.result))throw new Error;i.value.parsedMD=A==null?void 0:A.data.data}).catch(A=>{})}function De(){ye.post(c+"epoint/event/poster.php",{params:{method:"get",announceId:g.params.evid}}).then(A=>{var d,C,ve,de,$e;if(!((d=A==null?void 0:A.data)!=null&&d.result))throw new Error;i.value.poster=(ve=(C=A==null?void 0:A.data)==null?void 0:C.data)!=null?ve:null,(($e=(de=i.value)==null?void 0:de.poster)==null?void 0:$e.status)!=="process"&&(ae.value=!1)}).catch(A=>{ae.value=!1,o.notify(me(A))}).finally(()=>{})}const we=h(!1);return H({}),eu(()=>{se()}),Xu(()=>{ue&&clearInterval(ue)}),(A,d)=>(v(),W(G,null,[s(i)?(v(),W("div",Bt,[N("div",Mt,[s(o).platform.is.desktop?(v(),W("div",$t,[s(i).Hall?(v(),M(st,{key:0,onIamDeleted:Ce,onNewAnnounce:te,onDelSketch:ge,ref_key:"rAnnounceCard",ref:D,announce:s(i),pwUrl:b.value},null,8,["announce","pwUrl"])):Q("",!0)])):Q("",!0),N("div",qt,[N("div",Ot,[e(yt,{date:s(i).eventTime,"onUpdate:date":[d[0]||(d[0]=C=>s(i).eventTime=C),d[1]||(d[1]=C=>void 0)]},null,8,["date"])]),d[19]||(d[19]=N("br",null,null,-1)),d[20]||(d[20]=N("hr",null,null,-1)),s(o).platform.is.desktop?(v(),W("div",Ht,[N("div",Ut,[e(dt,{id:s(i).id,type:"event",onOnUploaded:V},null,8,["id"])])])):(v(),M(Y,{key:1},{default:u(()=>[e(E,null,{default:u(()=>[e(B,{caption:""},{default:u(()=>d[14]||(d[14]=[x(" \u0417\u0430\u0433\u0440\u0443\u0437\u043A\u0430 \u044D\u0441\u043A\u0438\u0437\u0430 \u043D\u0435 \u043F\u043E\u0434\u0434\u0435\u0440\u0436\u0438\u0432\u0430\u0435\u0442 \u043C\u043E\u0431\u0438\u043B\u044C\u043D\u044B\u0435 \u0443\u0441\u0442\u0440\u043E\u0439\u0441\u0442\u0432\u0430 ")])),_:1})]),_:1})]),_:1})),e(re,{spaced:"1em"}),e(fe,{name:"progName",modelValue:s(i).progName,"onUpdate:modelValue":d[2]||(d[2]=C=>s(i).progName=C),label:"\u041D\u0430\u0437\u0432\u0430\u043D\u0438\u0435"},null,8,["modelValue"]),e(wt,{onSelected:p}),e(Me,{modelValue:s(i).pay,"onUpdate:modelValue":d[3]||(d[3]=C=>s(i).pay=C),"emit-value":"","map-options":"",label:"\u0423\u0441\u043B\u043E\u0432\u0438\u044F \u0432\u0445\u043E\u0434\u0430",options:q},null,8,["modelValue"]),d[21]||(d[21]=N("br",null,null,-1)),[3,4].includes(s(i).pay)?(v(),W(G,{key:2},[e(fe,{type:"text",modelValue:s(i).ticketLink,"onUpdate:modelValue":d[4]||(d[4]=C=>s(i).ticketLink=C),label:"\u0421\u0441\u044B\u043B\u043A\u0430 \u043D\u0430 \u043F\u0440\u0438\u043E\u0431\u0440\u0435\u0442\u0435\u043D\u0438\u0435 \u0431\u0438\u043B\u0435\u0442\u043E\u0432"},null,8,["modelValue"]),d[16]||(d[16]=N("br",null,null,-1)),e(fe,{modelValue:s(i).radarioEventId,"onUpdate:modelValue":d[5]||(d[5]=C=>s(i).radarioEventId=C),type:"number","stack-label":"",placeholder:"1234567",label:"ID \u043C\u0435\u0440\u043E\u043F\u0440\u0438\u044F\u0442\u0438\u044F \u043D\u0430 Radario"},{default:u(()=>[e(_u,null,{default:u(()=>d[15]||(d[15]=[x("\u0426\u0438\u0444\u0440\u044B \u0432 \u043A\u043E\u043D\u0446\u0435 \u0441\u0441\u044B\u043B\u043A\u0438 \u043D\u0430 \u043F\u043E\u043A\u0443\u043F\u043A\u0443 \u0431\u0438\u043B\u0435\u0442\u043E\u0432")])),_:1})]),_:1},8,["modelValue"]),d[17]||(d[17]=N("br",null,null,-1)),e(pe,null,{default:u(()=>[e(ou,{modelValue:s(i).isPushkin,"onUpdate:modelValue":d[6]||(d[6]=C=>s(i).isPushkin=C),label:"\u041F\u0443\u0448\u043A\u0438\u043D\u0441\u043A\u0430\u044F \u043A\u0430\u0440\u0442\u0430",color:"green"},null,8,["modelValue"]),e(We),e(ou,{modelValue:s(i).isShowTicketCount,"onUpdate:modelValue":d[7]||(d[7]=C=>s(i).isShowTicketCount=C),color:"green",label:"\u041E\u0441\u0442\u0430\u0442\u043E\u043A \u0431\u0438\u043B\u0435\u0442\u043E\u0432"},null,8,["modelValue"])]),_:1}),d[18]||(d[18]=N("br",null,null,-1))],64)):Q("",!0),e(fe,{type:"number",modelValue:s(i).age,"onUpdate:modelValue":d[8]||(d[8]=C=>s(i).age=C),label:"\u0412\u043E\u0437\u0440\u0430\u0441\u0442\u043D\u044B\u0435 \u043E\u0433\u0440\u0430\u043D\u0438\u0447\u0435\u043D\u0438\u044F"},null,8,["modelValue"]),d[22]||(d[22]=N("br",null,null,-1)),e(re,{spaced:""}),e(fe,{name:"evDescr",modelValue:s(i).sdescr,"onUpdate:modelValue":d[9]||(d[9]=C=>s(i).sdescr=C),type:"textarea",autogrow:"",label:"\u041A\u0440\u0430\u0442\u043A\u043E\u0435 \u043E\u043F\u0438\u0441\u0430\u043D\u0438\u0435"},null,8,["modelValue"]),d[23]||(d[23]=N("br",null,null,-1)),e(fe,{name:"evText",modelValue:s(i).description,"onUpdate:modelValue":[d[10]||(d[10]=C=>s(i).description=C),d[11]||(d[11]=C=>_e())],type:"textarea",autogrow:"",debounce:300,label:"\u041E\u043F\u0438\u0441\u0430\u043D\u0438\u0435"},null,8,["modelValue"]),e(re,{spaced:"1em"}),N("div",It,[e(Zu,{modelValue:T,"onUpdate:modelValue":d[12]||(d[12]=C=>T=C),style:{width:"100%"},label:"\u0417\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044C \u0430\u0444\u0438\u0448\u0443",factory:I,ref_key:"posterUploader",ref:S,onUploaded:P,onFailed:z,"no-thumbnails":""},null,512)]),e(pe,{align:"right"},{default:u(()=>[e(X,{label:"\u0421\u043E\u0445\u0440\u0430\u043D\u0438\u0442\u044C",onClick:ce,color:"green","icon-right":"save",flat:""})]),_:1})]),e(re,{spaced:"1em"})])])):Q("",!0),e(re),e(hu,{label:"\u0421\u043F\u0438\u0441\u043E\u043A \u043F\u0440\u043E\u0438\u0437\u0432\u0435\u0434\u0435\u043D\u0438\u0439",modelValue:we.value,"onUpdate:modelValue":d[13]||(d[13]=C=>we.value=C)},{default:u(()=>[we.value?(v(),M(Et,{key:0,announce:s(i)},null,8,["announce"])):Q("",!0)]),_:1},8,["modelValue"]),e(re),d[24]||(d[24]=N("br",null,null,-1)),d[25]||(d[25]=N("hr",null,null,-1)),d[26]||(d[26]=N("br",null,null,-1))],64))}};var Ft=uu(Pt,[["__scopeId","data-v-e7609992"]]);const Tt={key:0,class:"posterArea relative-position"},Qt={key:0,style:{position:"absolute",right:"1em",top:"1em","z-index":"10"}},Lt={class:"eventboxin"},Wt={key:0},Nt=["innerHTML"],Kt={key:1},Rt={key:1,class:"videoItem"},jt={__name:"AnnounceDescr",emits:["delPoster"],setup(l,{emit:H}){const m=String("https://sakh-orch.ru/api/"),f=ie(),c=oe("editMode"),o=oe("Announce"),g=j(()=>{let k=f.platform.is.mobile?1080:480;return o.value.poster?at(m,o.value.poster.md5,o.value.poster.ext,k):"/img/news/default_sketch.svg"});function U(){return"https://vk.com/share.php?url="+String("https://sakh-orch.ru/")+"/announce/"+String(o.value.id)+"&title="+String(o.value.progName)+"&noparse=true&image="+String(g.value)}function i(){ye.post(m+"epoint/event/poster.php",{params:{method:"unlink",id:o.value.id}}).then(k=>{var p;if(!((p=k==null?void 0:k.data)!=null&&p.result))throw new Error;delete o.value.poster,delete o.value.posterId}).catch(k=>{f.notify(me(k))})}return(k,p)=>(v(),W(G,null,[s(o).poster?(v(),W("div",Tt,[s(c)?(v(),W("div",Qt,[e(Ne,{"throw-confirm":"",title:"\u0423\u0434\u0430\u043B\u0438\u0442\u044C \u0430\u0444\u0438\u0448\u0443",tooltip:"\u0423\u0434\u0430\u043B\u0438\u0442\u044C \u0430\u0444\u0438\u0448\u0443",onOnOk:p[0]||(p[0]=b=>i())})])):Q("",!0),s(o).poster.status==="process"?(v(),M(Y,{key:1},{default:u(()=>[e(au),e(E,null,{default:u(()=>[e(rt,{showing:"",label:"\u041E\u0431\u0440\u0430\u0431\u043E\u0442\u043A\u0430"})]),_:1})]),_:1})):(v(),M(au,{key:2,src:g.value},{error:u(()=>p[1]||(p[1]=[N("img",{src:"/img/news/default_sketch.svg"},null,-1)])),_:1},8,["src"]))])):Q("",!0),N("div",Lt,[e(Be,{class:"transparent no-padding",flat:""},{default:u(()=>[e(ee,{class:"no-padding"},{default:u(()=>[e(Y,null,{default:u(()=>[e(E,null,{default:u(()=>[e(B,{class:"title"},{default:u(()=>[x(F(s(o).progName),1)]),_:1}),e(B,{class:"title"},{default:u(()=>[x(F(s(ot)(s(o).eventTime)),1)]),_:1})]),_:1})]),_:1})]),_:1}),e(ee,null,{default:u(()=>[(v(!0),W(G,null,Ee(s(o).parsedMD,(b,w)=>(v(),W(G,{key:w},[b.type==="text"?(v(),W("div",Wt,[b.content!==`
`?(v(),W("div",{key:0,innerHTML:b.content,class:"textBlock"},null,8,Nt)):(v(),W("br",Kt))])):Q("",!0),b.type==="video"?(v(),W("div",Rt,[e(ft,{ratio:16/9,src:"https://www.youtube.com/embed/"+b.content},null,8,["src"])])):Q("",!0)],64))),128))]),_:1}),!s(o).completed&&[3,4].includes(s(o).pay)&&s(o).ticketLink?(v(),M(pe,{key:0,align:"right"})):Q("",!0),e(ee,null,{default:u(()=>[e(Y,{dense:""},{default:u(()=>[e(B,{caption:""},{default:u(()=>p[2]||(p[2]=[x(" \u0423\u0432\u0430\u0436\u0430\u0435\u043C\u044B\u0435 \u043F\u043E\u0441\u0435\u0442\u0438\u0442\u0435\u043B\u0438, \u0443\u0431\u0435\u0434\u0438\u0442\u0435\u043B\u044C\u043D\u0430\u044F \u043F\u0440\u043E\u0441\u044C\u0431\u0430 \u0441\u043E\u0431\u043B\u044E\u0434\u0430\u0442\u044C \u043C\u0435\u0440\u044B \u0431\u0435\u0437\u043E\u043F\u0430\u0441\u043D\u043E\u0441\u0442\u0438 \u0432 \u0441\u0432\u044F\u0437\u0438 \u0441 \u0440\u0430\u0441\u043F\u0440\u043E\u0441\u0442\u0440\u0430\u043D\u0435\u043D\u0438\u0435\u043C \u043A\u043E\u0440\u043E\u043D\u0430\u0432\u0438\u0440\u0443\u0441\u043D\u043E\u0439 \u0438\u043D\u0444\u0435\u043A\u0446\u0438\u0438! ")])),_:1})]),_:1})]),_:1}),e(ee,null,{default:u(()=>[e(Y,{clickable:"",href:s(o).Hall.map,target:"_blank"},{default:u(()=>[e(E,{avatar:""},{default:u(()=>[e(Se,{name:"place"})]),_:1}),e(E,null,{default:u(()=>[e(B,null,{default:u(()=>[x(F(s(o).Hall.name),1)]),_:1}),e(B,{caption:""},{default:u(()=>[x(F(s(o).Hall.suggest.address.formatted),1)]),_:1})]),_:1})]),_:1},8,["href"])]),_:1}),!s(o).completed&&[3,4].includes(s(o).pay)&&s(o).ticketLink?(v(),M(ee,{key:1},{default:u(()=>[e(Y,{clickable:"",href:s(o).ticketLink,target:"_blank"},{default:u(()=>[s(o).pay===3?(v(),W(G,{key:0},[e(E,{avatar:""},{default:u(()=>[e(Se,{name:"shopping_cart"})]),_:1}),e(E,null,{default:u(()=>[e(B,null,{default:u(()=>p[3]||(p[3]=[x("\u041A\u0443\u043F\u0438\u0442\u044C \u0431\u0438\u043B\u0435\u0442")])),_:1}),s(o).isPushkin?(v(),M(B,{key:0,caption:""},{default:u(()=>p[4]||(p[4]=[x("+ \u0414\u043E\u0441\u0442\u0443\u043F\u043D\u043E \u043F\u043E \u043F\u0443\u0448\u043A\u0438\u043D\u0441\u043A\u043E\u0439 \u043A\u0430\u0440\u0442\u0435")])),_:1})):Q("",!0)]),_:1})],64)):Q("",!0),s(o).pay===4?(v(),W(G,{key:1},[e(E,{avatar:""},{default:u(()=>[e(Se,{name:"img:/img/uds.svg"})]),_:1}),e(E,null,{default:u(()=>[e(B,null,{default:u(()=>p[5]||(p[5]=[x("\u041F\u043E\u043B\u0443\u0447\u0438\u0442\u044C \u043F\u0440\u0438\u0433\u043B\u0430\u0441\u0438\u0442\u0435\u043B\u044C\u043D\u044B\u0439")])),_:1})]),_:1})],64)):Q("",!0)]),_:1},8,["href"])]),_:1})):Q("",!0),e(re),e(ee,{class:"no-padding"},{default:u(()=>[e(vu,{"phone-number":"+7-(4242)-300-518"}),e(vu,{"phone-number":"+7-(962)-416-36-89"})]),_:1}),e(re,{spaced:"1em"}),e(pe,{align:"right"},{default:u(()=>[e(X,{href:U(),target:"_blank",outline:"",icon:"img:/img/logo/vk/VK Logo Black & White.svg",label:"\u041F\u043E\u0434\u0435\u043B\u0438\u0442\u044C\u0441\u044F"},null,8,["href"])]),_:1})]),_:1})])],64))}};var Yt=uu(jt,[["__scopeId","data-v-f32b83ae"]]);const zt={class:"centralCol"},Jt={class:"eventboxl"},Xt={__name:"AnnouncePage",setup(l){const H=it("\u0410\u043D\u043E\u043D\u0441");Uu(H);const m=ie(),c=oe("editModes").announce;le("editMode",c);const o=String("https://sakh-orch.ru/api/"),g=gu(),U=h(),i=h(null);le("Announce",i);function k(){ye.post(o+"epoint/event/announce.php",{params:{method:"get",id:g.params.evid}}).then(p=>{var b,w;i.value=(w=(b=p==null?void 0:p.data)==null?void 0:b.data)!=null?w:null,console.log("Announce loaded")}).catch(p=>{m.notify(me(p))})}return eu(()=>{k()}),(p,b)=>(v(),M(Ou,{class:"col myScrollArea"},{default:u(()=>[N("div",zt,[s(c)&&i.value?(v(),M(Ft,{key:0,onPosterUploaded:k,onReload:k,ref_key:"editorRef",ref:U},null,512)):Q("",!0),N("div",Jt,[i.value?(v(),M(Yt,{key:0,onDelPoster:b[0]||(b[0]=()=>{U.value.delPoster()})})):Q("",!0)])]),e(Hu)]),_:1}))}};var Tl=uu(Xt,[["__scopeId","data-v-6738d0fd"]]);export{Tl as default};
