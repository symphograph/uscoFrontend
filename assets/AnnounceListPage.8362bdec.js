import{i as c,m as _,n as v,q as r,f as l,ba as w,bb as I,t as g,v as y,x as V,b as M,u as N,I as R,r as n,p,B as P,l as U,ax as Q}from"./index.a3581ca9.js";import{Q as x}from"./QSelect.b04e3bb5.js";import{Q as $}from"./QTooltip.8033df5a.js";import{_ as q}from"./AnnounceList.4d6ad399.js";import{a as E,Q as F,u as O}from"./QItem.53c03289.js";import{u as W}from"./use-meta.b891d365.js";import{a as j}from"./axios.de625c8f.js";import{g as z,a as K,n as G}from"./myFuncts.610ef7d3.js";import{Q as T}from"./QItemLabel.4276ab2b.js";import{P as H}from"./PageShell.aac18807.js";import{_ as J}from"./plugin-vue_export-helper.21dcd24c.js";import"./QMenu.c6adbe1b.js";import"./position-engine.cfd9d960.js";import"./selection.dbf8fdca.js";import"./rtl.276c3f1b.js";import"./format.de7e9769.js";import"./AnnounceCard.08c93cc1.js";import"./QImg.c0fd6754.js";import"./BtnDelete.312fcdf6.js";import"./QExpansionItem.4ad6ad5e.js";import"./QToolbar.9e9bee69.js";import"./QScrollArea.e791f7ce.js";import"./TouchPan.84c23bda.js";import"./touch.9135741d.js";import"./QLinearProgress.477735b2.js";import"./MainFooter.b68cd226.js";import"./MainFooter.vue_vue_type_style_index_0_scoped_true_lang.eb6788b2.js";import"./AnderHeader.94280e8d.js";/* empty css                                                    */const X={__name:"SelectSort",emits:["onSelect"],setup(Y,{emit:d}){const s=c("sortType"),i=d,f=[{label:"\u0421\u043D\u0430\u0447\u0430\u043B\u0430 \u043D\u043E\u0432\u044B\u0435",value:"dateDesc",caption:"\u041F\u043E \u0443\u0431\u044B\u0432\u0430\u043D\u0438\u044E \u0434\u0430\u0442\u044B"},{label:"\u0421\u043D\u0430\u0447\u0430\u043B\u0430 \u0434\u0430\u0432\u043D\u0438\u0435",value:"dateAsc",caption:"\u041F\u043E \u0432\u043E\u0437\u0440\u0430\u0441\u0442\u0430\u043D\u0438\u044E \u0434\u0430\u0442\u044B"}];return(h,a)=>(_(),v(x,{modelValue:V(s),"onUpdate:modelValue":[a[0]||(a[0]=o=>M(s)?s.value=o:null),a[1]||(a[1]=o=>i("onSelect"))],borderless:"","map-options":"","emit-value":"",options:f},{option:r(o=>[l(E,w(I(o.itemProps)),{default:r(()=>[l(F,null,{default:r(()=>[l(T,null,{default:r(()=>[g(y(o.opt.label),1)]),_:2},1024),l(T,{caption:""},{default:r(()=>[g(y(o.opt.caption),1)]),_:2},1024)]),_:2},1024)]),_:2},1040)]),_:1},8,["modelValue"]))}};const Z={class:"centralCol"},tt={class:"gridArea"},C="\u0410\u043D\u043E\u043D\u0441\u044B",et={__name:"AnnounceListPage",setup(Y){const d=z(C);W(d);const s=String("https://api.sakh-orch.ru/"),i=O();N();const f=R(),h=c("editMode"),a=n(!1);p("compactCard",a),c("progress");const o=n("dateDesc");p("sortType",o);const u=n(new Date().getFullYear());p("evYear",u);const A=n([]);p("announceList",A);const b=c("scrollWatch"),k=n();function B(){b.value=!1,a.value=!a.value,setTimeout(()=>{b.value=!0},500)}function D(){let t=[];for(let e=2018;e<=new Date().getFullYear();e++)t.push(e);return t.reverse()}function L(){j.post(s+"api/event/announce.php",{params:{method:"add"}}).then(t=>{var e,m,S;if(!((e=t==null?void 0:t.data)!=null&&e.result))throw new Error;i.notify(K((S=(m=t==null?void 0:t.data)==null?void 0:m.result)!=null?S:null)),f.push({path:"/announce/"+t.data.data.id})}).catch(t=>{i.notify(G(t))})}return(t,e)=>(_(),v(H,{pageTitle:C},{ToolPanel:r(()=>[V(h)?(_(),v(P,{key:0,label:"\u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C",stretch:"",flat:"",onClick:L})):U("",!0),l(x,{modelValue:u.value,"onUpdate:modelValue":e[0]||(e[0]=m=>u.value=m),options:D(),"emit-value":"",borderless:""},null,8,["modelValue","options"]),l(X,{onOnSelect:e[1]||(e[1]=()=>{k.value.setScrollPosition("vertical",0,300)})}),l(P,{icon:a.value?"unfold_less":"unfold_more",flat:"",stretch:"",onClick:B},{default:r(()=>[l($,null,{default:r(()=>[g(y(a.value?"\u041F\u043E\u0434\u0440\u043E\u0431\u043D\u043E":"\u041A\u0440\u0430\u0442\u043A\u043E"),1)]),_:1})]),_:1},8,["icon"])]),PageContent:r(()=>[Q("div",Z,[Q("div",tt,[l(q,{evYear:u.value,method:"listByYear",sort:o.value},null,8,["evYear","sort"])])])]),_:1}))}};var Bt=J(et,[["__scopeId","data-v-3d8b61a8"]]);export{Bt as default};
