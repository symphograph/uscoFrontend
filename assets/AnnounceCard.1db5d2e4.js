import{Q as Y}from"./QImg.7e63aac4.js";import{V as Z,c as V,h as ee,ab as te,r as v,m as i,n as g,B as ne,u as ae,I as le,i as oe,o as ue,J as ie,x as C,q as a,y as re,l as d,f as n,ax as h,t as f,v as $,ak as L,A as p,z as k,E as A,D as T,F as w,ay as ce,al as U}from"./index.785ed96a.js";import{a as D,Q as m}from"./QItem.b8c7bc06.js";import{Q}from"./QItemLabel.8e68d9f3.js";import{Q as de}from"./QTooltip.7b7dfa77.js";import{u as _}from"./use-quasar.5f71050e.js";import{a as E,b as se}from"./axios.db5b4ede.js";import{a as M,n as q,b as fe,c as H,i as me}from"./myFuncts.9afd62b9.js";import{_ as ge}from"./BtnDelete.78cbd2e4.js";import{_ as ke}from"./plugin-vue_export-helper.21dcd24c.js";const ve=["top","middle","bottom"];var N=Z({name:"QBadge",props:{color:String,textColor:String,floating:Boolean,transparent:Boolean,multiLine:Boolean,outline:Boolean,rounded:Boolean,label:[Number,String],align:{type:String,validator:e=>ve.includes(e)}},setup(e,{slots:x}){const I=V(()=>e.align!==void 0?{verticalAlign:e.align}:null),s=V(()=>{const c=e.outline===!0&&e.color||e.textColor;return`q-badge flex inline items-center no-wrap q-badge--${e.multiLine===!0?"multi":"single"}-line`+(e.outline===!0?" q-badge--outline":e.color!==void 0?` bg-${e.color}`:"")+(c!==void 0?` text-${c}`:"")+(e.floating===!0?" q-badge--floating":"")+(e.rounded===!0?" q-badge--rounded":"")+(e.transparent===!0?" q-badge--transparent":"")});return()=>ee("div",{class:s.value,style:I.value,role:"status","aria-label":e.label},te(x.default,e.label!==void 0?[e.label]:[]))}});const ye={__name:"DialogConfirm",props:{color:v({}),label:v({}),message:v({}),title:v({})},emits:["onOk","Cancel","Dismiss"],setup(e,{emit:x}){const I=_(),s=x;function c(S,y){I.dialog({title:y,message:S,cancel:!0,persistent:!0,html:!0,dark:!0}).onOk(()=>{}).onOk(()=>{s("onOk")}).onCancel(()=>{s("Cancel")}).onDismiss(()=>{s("Dismiss")})}return(S,y)=>(i(),g(ne,{label:e.label,color:e.color,onClick:y[0]||(y[0]=B=>c(e.message,e.title))},null,8,["label","color"]))}};class be{static getMapUrl(x){return`https://yandex.ru/maps/org/${x}`}}const he={class:"delBtnArea"},Ae={class:"mapLink"},we=["innerHTML"],xe=["innerHTML"],Se={__name:"AnnounceCard",props:{Announce:v(!1),pwUrl:String,compact:{type:Boolean,required:!1,default:!1}},emits:["newAnnounce","IamDeleted","changeShow","delSketch"],setup(e,{expose:x,emit:I}){const s=String("https://api.sakh-orch.ru/"),c=_();ae(),le();const S=oe("editMode"),y=I;v(2316559);const B=v(null);function R(){return`https://radario.ru/buy-tickets/${u.Announce.radarioEventId}`}x({saveData:j});const z=v(["","","\u0412\u0445\u043E\u0434 \u0441\u0432\u043E\u0431\u043E\u0434\u043D\u044B\u0439","\u0411\u0438\u043B\u0435\u0442\u044B \u0432 \u043F\u0440\u043E\u0434\u0430\u0436\u0435","\u0412\u0445\u043E\u0434 \u043F\u043E \u043F\u0440\u0438\u0433\u043B\u0430\u0441\u0438\u0442\u0435\u043B\u044C\u043D\u044B\u043C","\u041F\u0440\u043E\u0434\u0430\u0436\u0430 \u0437\u0430\u0432\u0435\u0440\u0448\u0435\u043D\u0430"]),u=e,b=v(u.Announce);function F(){if(u.pwUrl)return u.pwUrl;let l=c.platform.is.mobile?1080:480;return u.Announce.sketch?me(s,u.Announce.sketch.md5,u.Announce.sketch.ext,l):"error.err"}function j(){E.post(s+"api/event/announce.php",{params:{method:"update",announce:u.Announce}}).then(l=>{var t,o;c.notify(M((o=(t=l==null?void 0:l.data)==null?void 0:t.result)!=null?o:""))}).catch(l=>{c.notify(q(l))})}function G(){E.post(s+"api/event/announce.php",{params:{method:"del",id:u.Announce.id}}).then(l=>{var t,o,r;if(!((t=l==null?void 0:l.data)!=null&&t.result))throw new Error;c.notify(M((r=(o=l==null?void 0:l.data)==null?void 0:o.result)!=null?r:null)),y("IamDeleted")}).catch(l=>{c.notify(q(l))})}function J(){E.post(s+"api/event/announce.php",{params:{method:b.value.isShow?"show":"hide",announceId:b.value.id}}).then(l=>{var t;if(!((t=l==null?void 0:l.data)!=null&&t.result))throw new Error;y("changeShow",b.value.id)}).catch(l=>{c.notify(q(l)),b.value.isShow=!b.value.isShow}).finally(()=>{})}function K(){return u.Announce.pay?u.Announce.pay===3&&u.Announce.completed?"\u041F\u0440\u043E\u0434\u0430\u0436\u0430 \u0437\u0430\u0432\u0435\u0440\u0448\u0435\u043D\u0430":z.value[u.Announce.pay]:""}function P(){E.post(s+"api/event/sketch.php",{params:{method:"unlink",id:u.Announce.id}}).then(l=>{var t,o,r;if(!((t=l==null?void 0:l.data)!=null&&t.result))throw new Error;y("delSketch",u.Announce.id),c.notify(M((r=(o=l==null?void 0:l.data)==null?void 0:o.result)!=null?r:""))}).catch(l=>{c.notify(q(l))})}function W(){var t;if(!((t=u.Announce)!=null&&t.radarioEventId))return;se.create().get(R(),{params:{distributionType:"api",skipEventsInGroup:!0}}).then(o=>{var r;(r=o==null?void 0:o.data)!=null&&r.result,console.log("radario",o.data),B.value=o.data.event.ticketCount}).catch(o=>{c.notify(q(o))})}function X(){var o;const l=u.Announce.Hall.suggest,t=(o=l==null?void 0:l.oid)!=null?o:0;return be.getMapUrl(t)}return ue(()=>{u.Announce.completed===!1&&W()}),(l,t)=>{const o=ie("router-link");return e.Announce&&(e.Announce.isShow||C(S))?(i(),g(re,{key:0,square:"",class:"eventbox tdno",separator:""},{default:a(()=>[n(o,{to:"/announce/"+e.Announce.id},{default:a(()=>[h("div",he,[C(S)&&!e.pwUrl?(i(),g(ge,{key:0,title:"\u0423\u0434\u0430\u043B\u0438\u0442\u044C \u044D\u0441\u043A\u0438\u0437",tooltip:"\u0423\u0434\u0430\u043B\u0438\u0442\u044C \u044D\u0441\u043A\u0438\u0437","throw-confirm":"",onOnOk:t[0]||(t[0]=r=>P())})):d("",!0)]),n(Y,{ratio:16/9,src:F(),fit:"fill"},{error:a(()=>t[3]||(t[3]=[h("img",{src:"/img/news/default_sketch.svg"},null,-1)])),_:1},8,["src"])]),_:1},8,["to"]),n(k,{color:"info","expand-separator":""},{default:a(()=>[e.Announce.completed===!1?(i(),g(N,{key:0,class:"absolute bage",color:"green-6",rounded:"",transparent:""},{default:a(()=>t[4]||(t[4]=[f(" \u0421\u043A\u043E\u0440\u043E ")])),_:1})):d("",!0),e.Announce.age?(i(),g(N,{key:1,rounded:"",style:{"background-color":"orange"},floating:""},{default:a(()=>[f($(e.Announce.age+"+"),1)]),_:1})):d("",!0),L((i(),g(D,{dense:""},{default:a(()=>[n(m,{avatar:""},{default:a(()=>[n(p,{name:"schedule"})]),_:1}),n(m,null,{default:a(()=>[n(Q,{caption:""},{default:a(()=>[f($(C(fe)(b.value.eventTime)),1)]),_:1})]),_:1})]),_:1})),[[U]]),L((i(),g(D,{clickable:"",href:X(),target:"_blank",dense:""},{default:a(()=>[n(m,{avatar:""},{default:a(()=>[n(p,{name:"place"})]),_:1}),n(m,null,{default:a(()=>[n(Q,{caption:""},{default:a(()=>[h("span",Ae,$(e.Announce.Hall.name),1)]),_:1})]),_:1})]),_:1},8,["href"])),[[U]])]),_:1}),e.compact?d("",!0):(i(),A(w,{key:0},[n(T,{inset:""}),n(k,null,{default:a(()=>[h("div",{class:"text-subtitle1 text-center prog-name",innerHTML:e.Announce.progName},null,8,we)]),_:1}),n(k,{class:"text-body2 text-center"},{default:a(()=>[h("div",{innerHTML:e.Announce.sdescr},null,8,xe)]),_:1}),n(k,{class:"space"},{default:a(()=>t[5]||(t[5]=[h("div",null,null,-1)])),_:1}),n(T,{inset:""}),e.Announce.youtubeId?(i(),g(k,{key:0},{default:a(()=>[L((i(),g(D,{clickable:"",href:"https://www.youtube.com/watch?v="+e.Announce.youtubeId,target:"_blank"},{default:a(()=>[n(m,{avatar:""},{default:a(()=>[n(p,{name:"ion-logo-youtube"})]),_:1}),n(m,null,{default:a(()=>[n(Q,{caption:""},{default:a(()=>t[6]||(t[6]=[h("span",{class:"mapLink"},"\u0421\u043C\u043E\u0442\u0440\u0435\u0442\u044C \u0432\u0438\u0434\u0435\u043E",-1)])),_:1})]),_:1})]),_:1},8,["href"])),[[U]])]),_:1})):d("",!0),e.Announce.pay?(i(),A(w,{key:1},[n(T,{inset:""}),n(k,{class:"text-body2 text-center"},{default:a(()=>[[3,4].includes(e.Announce.pay)&&!e.Announce.completed&&e.Announce.ticketLink?(i(),A(w,{key:0},[e.Announce.isShowTicketCount&&e.Announce.radarioEventId?(i(),A(w,{key:0},[n(D,null,{default:a(()=>[n(m,null,{default:a(()=>{var r,O;return[f($(`${C(H)((r=B.value)!=null?r:0,["\u041E\u0441\u0442\u0430\u043B\u0441\u044F","\u041E\u0441\u0442\u0430\u043B\u043E\u0441\u044C","\u041E\u0441\u0442\u0430\u043B\u043E\u0441\u044C"])} ${B.value} ${C(H)((O=B.value)!=null?O:0,["\u0431\u0438\u043B\u0435\u0442","\u0431\u0438\u043B\u0435\u0442\u0430","\u0431\u0438\u043B\u0435\u0442\u043E\u0432"])}`),1)]}),_:1})]),_:1}),n(T,{inset:"",spaced:""})],64)):d("",!0),n(D,{clickable:"",href:e.Announce.ticketLink,target:"_blank",dense:"",style:{"text-align":"left"}},{default:a(()=>[e.Announce.pay===4?(i(),A(w,{key:0},[n(m,{avatar:""},{default:a(()=>[n(p,{name:"img:/img/uds.svg"})]),_:1}),n(m,null,{default:a(()=>[n(Q,null,{default:a(()=>t[7]||(t[7]=[f("\u041F\u043E\u043B\u0443\u0447\u0438\u0442\u044C \u043F\u0440\u0438\u0433\u043B\u0430\u0441\u0438\u0442\u0435\u043B\u044C\u043D\u044B\u0439")])),_:1})]),_:1})],64)):d("",!0),e.Announce.pay===3?(i(),A(w,{key:1},[n(m,{avatar:""},{default:a(()=>[n(p,{name:"shopping_cart"})]),_:1}),n(m,null,{default:a(()=>[n(Q,null,{default:a(()=>t[8]||(t[8]=[f("\u041A\u0443\u043F\u0438\u0442\u044C \u0431\u0438\u043B\u0435\u0442")])),_:1}),e.Announce.isPushkin?(i(),g(Q,{key:0,caption:""},{default:a(()=>t[9]||(t[9]=[f("+ \u0414\u043E\u0441\u0442\u0443\u043F\u043D\u043E \u043F\u043E \u043F\u0443\u0448\u043A\u0438\u043D\u0441\u043A\u043E\u0439 \u043A\u0430\u0440\u0442\u0435")])),_:1})):d("",!0)]),_:1})],64)):d("",!0)]),_:1},8,["href"])],64)):(i(),A(w,{key:1},[f($(K()),1)],64))]),_:1})],64)):d("",!0),n(T,{inset:""}),n(k,{class:"text-body2 text-center"},{default:a(()=>t[10]||(t[10]=[f(" \u0425\u0443\u0434\u043E\u0436\u0435\u0441\u0442\u0432\u0435\u043D\u043D\u044B\u0439 \u0440\u0443\u043A\u043E\u0432\u043E\u0434\u0438\u0442\u0435\u043B\u044C \u0438 \u0433\u043B\u0430\u0432\u043D\u044B\u0439 \u0434\u0438\u0440\u0438\u0436\u0435\u0440 - "),h("b",null,"\u0422\u0438\u0433\u0440\u0430\u043D \u0410\u0445\u043D\u0430\u0437\u0430\u0440\u044F\u043D",-1),f(". ")])),_:1}),C(S)?(i(),A(w,{key:2},[n(k,null,{default:a(()=>[n(ce,{modelValue:b.value.isShow,"onUpdate:modelValue":[t[1]||(t[1]=r=>b.value.isShow=r),t[2]||(t[2]=r=>J())],label:"\u0432\u043A\u043B",color:"green","checked-icon":"check","unchecked-icon":"clear"},{default:a(()=>[n(de,null,{default:a(()=>t[11]||(t[11]=[f("\u041E\u043F\u0443\u0431\u043B\u0438\u043A\u043E\u0432\u0430\u0442\u044C")])),_:1})]),_:1},8,["modelValue"])]),_:1}),n(k,null,{default:a(()=>[n(ye,{onOnOk:G,label:"\u0423\u0434\u0430\u043B\u0438\u0442\u044C",color:"red",title:"\u0423\u0434\u0430\u043B\u0435\u043D\u0438\u0435 \u0430\u043D\u043E\u043D\u0441\u0430",message:`
          \u0411\u0443\u0434\u0435\u0442 \u0443\u0434\u0430\u043B\u0435\u043D\u0430 \u0437\u0430\u043F\u0438\u0441\u044C \u043E\u0431 \u0430\u043D\u043E\u043D\u0441\u0435 \u0438 \u0441\u0432\u044F\u0437\u0430\u043D\u043D\u044B\u0435 \u0441 \u043D\u0435\u0439 \u0438\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u044F.
          <br><span style='color: red'>
          \u042D\u0442\u043E \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0435 \u043D\u0435\u043B\u044C\u0437\u044F \u043E\u0442\u043C\u0435\u043D\u0438\u0442\u044C.</span><br>
          \u0412\u044B \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0442\u0435\u043B\u044C\u043D\u043E \u0445\u043E\u0442\u0438\u0442\u0435 \u044D\u0442\u043E \u0441\u0434\u0435\u043B\u0430\u0442\u044C?`})]),_:1})],64)):d("",!0)],64))]),_:1})):d("",!0)}}};var Le=ke(Se,[["__scopeId","data-v-3f0cbc4c"]]);export{Le as A};
