import{i as c,m as _,n as v,q as r,f as l,b8 as w,b9 as I,t as g,v as y,x as V,b as M,u as N,I as R,r as n,p,B as P,l as U,ax as Q}from"./index.f4463504.js";import{Q as x}from"./QSelect.415e83bf.js";import{Q as $}from"./QTooltip.5ef75d17.js";import{_ as q}from"./AnnounceList.692f95df.js";import{u as E}from"./use-quasar.86558610.js";import{u as F}from"./use-meta.11c13b2e.js";import{a as O}from"./axios.19fad131.js";import{g as W,a as j,n as z}from"./myFuncts.7f03cfe9.js";import{Q as T}from"./QItemLabel.839fe651.js";import{a as K,Q as G}from"./QItem.715ba0d2.js";import{P as H}from"./PageShell.47c0e7cd.js";import{_ as J}from"./plugin-vue_export-helper.21dcd24c.js";import"./QMenu.a498ace6.js";import"./position-engine.67b83f91.js";import"./selection.8d8c36ff.js";import"./rtl.276c3f1b.js";import"./format.de7e9769.js";import"./AnnounceCard.64cefb59.js";import"./QImg.5f3fa204.js";import"./BtnDelete.32b6b7a6.js";import"./TouchPan.da99e94b.js";import"./touch.9135741d.js";import"./QToolbar.12874579.js";import"./QExpansionItem.680a1dab.js";import"./QScrollArea.ed08bae4.js";import"./QLinearProgress.09fdbafb.js";import"./MainFooter.62c4f11e.js";import"./MainFooter.vue_vue_type_style_index_0_scoped_true_lang.3fe2d955.js";import"./AnderHeader.1c9ecd36.js";/* empty css                                                    */const X={__name:"SelectSort",emits:["onSelect"],setup(Y,{emit:d}){const s=c("sortType"),i=d,f=[{label:"\u0421\u043D\u0430\u0447\u0430\u043B\u0430 \u043D\u043E\u0432\u044B\u0435",value:"dateDesc",caption:"\u041F\u043E \u0443\u0431\u044B\u0432\u0430\u043D\u0438\u044E \u0434\u0430\u0442\u044B"},{label:"\u0421\u043D\u0430\u0447\u0430\u043B\u0430 \u0434\u0430\u0432\u043D\u0438\u0435",value:"dateAsc",caption:"\u041F\u043E \u0432\u043E\u0437\u0440\u0430\u0441\u0442\u0430\u043D\u0438\u044E \u0434\u0430\u0442\u044B"}];return(h,a)=>(_(),v(x,{modelValue:V(s),"onUpdate:modelValue":[a[0]||(a[0]=o=>M(s)?s.value=o:null),a[1]||(a[1]=o=>i("onSelect"))],borderless:"","map-options":"","emit-value":"",options:f},{option:r(o=>[l(K,w(I(o.itemProps)),{default:r(()=>[l(G,null,{default:r(()=>[l(T,null,{default:r(()=>[g(y(o.opt.label),1)]),_:2},1024),l(T,{caption:""},{default:r(()=>[g(y(o.opt.caption),1)]),_:2},1024)]),_:2},1024)]),_:2},1040)]),_:1},8,["modelValue"]))}};const Z={class:"centralCol"},tt={class:"gridArea"},C="\u0410\u043D\u043E\u043D\u0441\u044B",et={__name:"AnnounceListPage",setup(Y){const d=W(C);F(d);const s=String("https://api.sakh-orch.ru/"),i=E();N();const f=R(),h=c("editMode"),a=n(!1);p("compactCard",a),c("progress");const o=n("dateDesc");p("sortType",o);const u=n(new Date().getFullYear());p("evYear",u);const A=n([]);p("announceList",A);const S=c("scrollWatch"),k=n();function B(){S.value=!1,a.value=!a.value,setTimeout(()=>{S.value=!0},500)}function D(){let t=[];for(let e=2018;e<=new Date().getFullYear();e++)t.push(e);return t.reverse()}function L(){O.post(s+"api/event/announce.php",{params:{method:"add"}}).then(t=>{var e,m,b;if(!((e=t==null?void 0:t.data)!=null&&e.result))throw new Error;i.notify(j((b=(m=t==null?void 0:t.data)==null?void 0:m.result)!=null?b:null)),f.push({path:"/announce/"+t.data.data.id})}).catch(t=>{i.notify(z(t))})}return(t,e)=>(_(),v(H,{pageTitle:C},{ToolPanel:r(()=>[V(h)?(_(),v(P,{key:0,label:"\u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C",stretch:"",flat:"",onClick:L})):U("",!0),l(x,{modelValue:u.value,"onUpdate:modelValue":e[0]||(e[0]=m=>u.value=m),options:D(),"emit-value":"",borderless:""},null,8,["modelValue","options"]),l(X,{onOnSelect:e[1]||(e[1]=()=>{k.value.setScrollPosition("vertical",0,300)})}),l(P,{icon:a.value?"unfold_less":"unfold_more",flat:"",stretch:"",onClick:B},{default:r(()=>[l($,null,{default:r(()=>[g(y(a.value?"\u041F\u043E\u0434\u0440\u043E\u0431\u043D\u043E":"\u041A\u0440\u0430\u0442\u043A\u043E"),1)]),_:1})]),_:1},8,["icon"])]),PageContent:r(()=>[Q("div",Z,[Q("div",tt,[l(q,{evYear:u.value,method:"listByYear",sort:o.value},null,8,["evYear","sort"])])])]),_:1}))}};var Dt=J(et,[["__scopeId","data-v-3d8b61a8"]]);export{Dt as default};
