import{u as h}from"./use-quasar.b9e4067c.js";import{api as w}from"./axios.808fc3dd.js";import{A as y}from"./AnnounceCard.e22b0443.js";import{r as u,u as _,d as g,i as n,a as k,w as A,D as L,f as c,g as F,at as B,F as D,j as N}from"./index.9a351014.js";import{n as Y}from"./myFuncts.8c7f864e.js";const q={__name:"AnnounceList",props:{sort:u(null),evYear:u(null),onlyNew:u(0)},setup(i){const r=i,m=String("https://api.sakh-orch.ru/"),p=h();_(),g(),n("editMode");const l=n("progress"),e=n("announceList");n("Halls");function s(){l.value=!0,w.post(m+"api/announce/list.php",{params:{sort:r.sort,year:r.evYear,new:r.onlyNew}}).then(t=>{var a,o;e.value=(o=(a=t==null?void 0:t.data)==null?void 0:a.data)!=null?o:[]}).catch(t=>{p.notify(Y(t)),e.value=[]}).finally(()=>{l.value=!1})}k(()=>{s()}),A(()=>r.evYear,()=>{s()});const d=(t,a)=>t.datetime<a.datetime?1:-1,f=(t,a)=>t.datetime>a.datetime?1:-1,v=L(()=>{if(!e.value||!e.value.length)return[];switch(r.sort){case 0:return[...e.value].sort(d);case 1:return[...e.value].sort(f);default:return e.value}});return(t,a)=>(c(!0),F(D,null,B(v.value,o=>(c(),N(y,{key:o.id,Announce:o,onIamDeleted:s},null,8,["Announce"]))),128))}};export{q as _};
