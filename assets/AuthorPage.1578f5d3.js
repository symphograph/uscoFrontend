import{I as N,H as R,i as g,r as B,p as T,c as $,o as z,m,n as c,q as l,f as e,ax as M,v as o,x as O,bi as w,y as f,A as y,bh as U,l as h,C as W,bm as q,t as D,u as b,z as L}from"./index.89609573.js";import{Q as j}from"./QItemLabel.1f0e3975.js";import{b as H,Q as A}from"./QImg.c3c20473.js";import{P as K}from"./PageShell.abd02a6a.js";import{S as F}from"./SelectComposer.33e2c2d9.js";import{P as G}from"./LocalStorage.92da4c15.js";import{u as J}from"./use-quasar.06f765f0.js";import{a as I}from"./axios.e621819c.js";import{e as X,a as Q,n as C}from"./myFuncts.2186fc9b.js";import{_ as Y}from"./BtnDelete.c36dc1af.js";import{A as r}from"./lib.c2e37906.js";import{_ as Z}from"./plugin-vue_export-helper.21dcd24c.js";import"./MainFooter.vue_vue_type_style_index_0_scoped_true_lang.c971ea2c.js";import"./touch.9135741d.js";import"./selection.27c53126.js";import"./QScrollArea.e70a1697.js";import"./format.de7e9769.js";import"./QLinearProgress.313c8bbb.js";/* empty css                                                    */import"./QSelect.6f1d235f.js";import"./QMenu.eedc4e6f.js";import"./position-engine.60b61593.js";import"./use-virtual-scroll.1dab1b66.js";import"./rtl.276c3f1b.js";import"./AuthorItem.eb0ee12c.js";import"./QTooltip.31e2ede8.js";import"./myAxios.f4538610.js";const tt={class:"centralCol"},et={__name:"AuthorPage",setup(at){const u=J(),s=N(),S=R(),_=String("https://sakh-orch.ru/stapi/"),p=g("editMode"),x=B(null);T("searchText",x);const d=g("selectedAuthorId");function V(t){d.value=t.id,G.set("lastAuthor",t.id),s.params.id=t.id,S.push({path:"/lib/author/"+t.id}),v()}async function v(){!d.value||(console.log(d.value),r.selected.value=await r.get(u,d.value))}const k=$(()=>{const{wikiIdRu:t,wikiIdEn:a}=r.selected.value;return t?`https://ru.wikipedia.org/?curid=${t}`:a?`https://en.wikipedia.org/?curid=${a}`:""});function P(){I.post(_+"epoint/lib/author.php",{params:{method:"update",id:s.params.id,author:selectedAuthor.value}}).then(t=>{var a,i,n;if(!((a=t==null?void 0:t.data)!=null&&a.result))throw new Error;u.notify(Q((n=(i=t==null?void 0:t.data)==null?void 0:i.result)!=null?n:null))}).catch(t=>{u.notify(C(t))})}function E(){I.post(_+"epoint/lib/author.php",{params:{method:"del",workId:s.params.id}}).then(t=>{var a,i,n;if(!((a=t==null?void 0:t.data)!=null&&a.result))throw new Error;u.notify(Q((n=(i=t==null?void 0:t.data)==null?void 0:i.result)!=null?n:null))}).catch(t=>{u.notify(C(t))})}return z(()=>{d.value=s.params.id*1,v()}),(t,a)=>(m(),c(K,{"page-title":"\u041A\u043E\u043C\u043F\u043E\u0437\u0438\u0442\u043E\u0440 "},{ToolPanel:l(()=>[e(F,{onItSel:V})]),PageContent:l(()=>[M("div",tt,[o(r).selected.value?(m(),c(O,{key:0},{default:l(()=>[e(f,null,{default:l(()=>[e(w,{modelValue:o(r).selected.value.fioRu,"onUpdate:modelValue":a[0]||(a[0]=i=>o(r).selected.value.fioRu=i),readonly:!o(p),label:"\u0424\u0430\u043C\u0438\u043B\u0438\u044F, \u0418\u043C\u044F \u041E\u0442\u0447\u0435\u0441\u0442\u0432\u043E"},null,8,["modelValue","readonly"]),e(w,{modelValue:o(r).selected.value.iofEn,"onUpdate:modelValue":a[1]||(a[1]=i=>o(r).selected.value.iofEn=i),readonly:!o(p),label:"Name LastName"},null,8,["modelValue","readonly"])]),_:1}),e(f,null,{default:l(()=>[k.value?(m(),c(y,{key:0,icon:"img:https://upload.wikimedia.org/wikipedia/commons/f/f6/Wikipedia-logo-v2-wordmark.svg",size:"6em",class:U(o(u).dark.isActive?"invert":void 0),href:k.value,target:"_blank"},null,8,["class","href"])):h("",!0)]),_:1}),e(W),o(p)?(m(),c(q,{key:0,align:"right"},{default:l(()=>[e(y,{label:"\u0421\u043E\u0445\u0440\u0430\u043D\u0438\u0442\u044C",color:"green",onClick:P}),e(Y,{label:"\u0423\u0434\u0430\u043B\u0438\u0442\u044C",title:"\u0423\u0434\u0430\u043B\u0438\u0442\u044C \u043A\u043E\u043C\u043F\u043E\u0437\u0438\u0442\u043E\u0440\u0430","throw-confirm":"",danger:"",onOnOk:E,tooltip:"\u0423\u0434\u0430\u043B\u0438\u0442\u044C \u043A\u043E\u043C\u043F\u043E\u0437\u0438\u0442\u043E\u0440\u0430"})]),_:1})):h("",!0),e(f,null,{default:l(()=>[e(H,{clickable:"",to:`/lib/works/${o(r).selected.value.id}`},{default:l(()=>[e(A,null,{default:l(()=>[e(j,null,{default:l(()=>[D(b(o(r).selected.value.cntWorks)+" "+b(o(X)(o(r).selected.value.cntWorks,["\u043F\u0440\u043E\u0438\u0437\u0432\u0435\u0434\u0435\u043D\u0438\u0435","\u043F\u0440\u043E\u0438\u0437\u0432\u0435\u0434\u0435\u043D\u0438\u044F","\u043F\u0440\u043E\u0438\u0437\u0432\u0435\u0434\u0435\u043D\u0438\u0439"])),1)]),_:1})]),_:1}),e(A,{side:""},{default:l(()=>[e(L,{name:"open_in_new"})]),_:1})]),_:1},8,["to"])]),_:1})]),_:1})):h("",!0)])]),_:1}))}};var Pt=Z(et,[["__scopeId","data-v-517540be"]]);export{Pt as default};
