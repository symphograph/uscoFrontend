var p=Object.defineProperty;var f=(a,t,u)=>t in a?p(a,t,{enumerable:!0,configurable:!0,writable:!0,value:u}):a[t]=u;var n=(a,t,u)=>(f(a,typeof t!="symbol"?t+"":t,u),u);import{a as d}from"./axios.e621819c.js";import{a as c,n as h}from"./myFuncts.2186fc9b.js";class m{static getMapUrl(t){return`https://yandex.ru/maps/org/${t}`}}const o=class{constructor({id:t=-1,name:u="\u041D\u043E\u0432\u044B\u0439 \u0437\u0430\u043B",suggestId:r=0,suggest:i}={}){n(this,"id",-1);n(this,"name","\u041D\u043E\u0432\u044B\u0439 \u0437\u0430\u043B");n(this,"suggestId",0);n(this,"suggest");this.id=t,this.name=u,this.suggestId=r,this.suggest=i}async save(t){var i;const u=String("https://sakh-orch.ru/api/")+"epoint/hall.php",r={method:this.id>0?"update":"add",id:this.id,name:this.name,suggestId:this.suggestId};try{const s=await d.post(u,{params:r});if(!((i=s==null?void 0:s.data)!=null&&i.result))throw new Error;return this.id=s.data.data.id,t.notify(c()),!0}catch(s){return t.notify(h(s)),!1}}async del(t){var i;const u=String("https://sakh-orch.ru/api/")+"epoint/hall.php",r={method:"del",id:this.id};try{const s=await d.post(u,{params:r});if(!((i=s==null?void 0:s.data)!=null&&i.result))throw new Error;return t.notify(c()),o.List.value=o.List.value.filter(e=>e.id!==this.id),!0}catch(s){return t.notify(h(s)),!1}}getMapHref(){var u,r;const t=(r=(u=this.suggest)==null?void 0:u.oid)!=null?r:0;return m.getMapUrl(t)}static async getList(t){var i;const u=String("https://sakh-orch.ru/api/")+"epoint/hall.php",r={method:"list"};try{const s=await d.post(u,{params:r});if(!((i=s==null?void 0:s.data)!=null&&i.result))throw new Error("\u0421\u043F\u0438\u0441\u043E\u043A \u0437\u0430\u043B\u043E\u0432 \u043D\u0435 \u0437\u0430\u0433\u0440\u0443\u0437\u0438\u043B\u0441\u044F");return s.data.data.map(e=>new o({id:e.id,name:e.name,suggestId:e.suggestId,suggest:e.suggest}))}catch(s){return t.notify(h(s)),[]}}static findById(t){return this.List.value.find(u=>u.id===t)}};let g=o;n(g,"List");export{g as H};
