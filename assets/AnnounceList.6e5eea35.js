import{u as f}from"./use-quasar.c255bf43.js";import{api as h}from"./axios.133cea51.js";import{A as g}from"./AnnounceCard.b7423390.js";import{r as A,u as k,d as y,i as o,a as L,w as _,s as w,f as c,g as F,au as T,F as B,j as Y}from"./index.d91d11de.js";import{n as j}from"./myFuncts.1e6ef4e3.js";const b={__name:"AnnounceList",props:{method:String,evYear:Number,sort:A({})},setup(i){const n=i,l=String("https://api.sakh-orch.ru/"),m=f();k(),y(),o("editMode");const u=o("progress"),a=o("announceList");o("Halls");function s(){u.value=!0,h.post(l+"api/event/announce.php",{params:{method:n.method,year:n.evYear}}).then(e=>{var t,r;a.value=(r=(t=e==null?void 0:e.data)==null?void 0:t.data)!=null?r:[]}).catch(e=>{m.notify(j(e)),a.value=[]}).finally(()=>{u.value=!1})}L(()=>{s()}),_(()=>n.evYear,()=>{s()});const p=(e,t)=>e.eventTime<t.eventTime?1:-1,v=(e,t)=>e.eventTime>t.eventTime?1:-1,d=w(()=>{if(!a.value||!a.value.length)return[];switch(n.sort){case 0:return[...a.value].sort(p);case 1:return[...a.value].sort(v);default:return a.value}});return(e,t)=>(c(!0),F(B,null,T(d.value,r=>(c(),Y(g,{key:r.id,Announce:r,onIamDeleted:t[0]||(t[0]=x=>s())},null,8,["Announce"]))),128))}};export{b as _};
