import{d as le,i as P,r as f,c as X,m as l,n as p,q as e,v as j,b as de,G as re,f as u,y as H,t as C,u as b,l as S,bi as ue,D as U,bk as oe,bl as ae,F as z,bm as me,A as I,x as Z,p as K,B as te,ax as h,aY as De,E as ne,k as Ve,z as be}from"./index.e0f85654.js";import{a as _e}from"./axios.42d422c9.js";import{i as Ee,n as Se}from"./myFuncts.0887c750.js";import{u as G}from"./use-quasar.f463e671.js";import{Q as we}from"./QList.e09df5eb.js";import"./WorkItem.3dbfff00.js";import{P as Te}from"./PageShell.46b7f308.js";import{b as N,Q as O,a as ge}from"./QImg.2e8349d1.js";import{Q as V}from"./QItemLabel.36b7e39e.js";import{W as $e,T as W,V as ee}from"./lib.beeda29a.js";import{_ as Ce}from"./plugin-vue_export-helper.21dcd24c.js";import{d as ye,e as Be,b as Oe}from"./MainFooter.vue_vue_type_style_index_0_scoped_true_lang.24bd73f4.js";import{Q as ie}from"./QSelect.7622fe6b.js";/* empty css               */import{_ as Ae}from"./BtnDelete.456e0377.js";import{u as Fe}from"./myAxios.8b50438a.js";import"./QScrollArea.edf23b1f.js";import"./format.de7e9769.js";import"./QLinearProgress.ca3f1b6e.js";/* empty css                                                    */import"./touch.9135741d.js";import"./selection.289153d1.js";import"./QMenu.71680b5c.js";import"./position-engine.6acbd510.js";import"./rtl.276c3f1b.js";import"./QTooltip.cd2ab7d7.js";const ke=le({__name:"TimeCodeDialog",props:{video:{type:Object,required:!0},timeCode:{type:Object,default:()=>({id:0,start:"00:00:00",uLabel:"",type:"init"})}},emits:["onDelete","onSave"],setup(o,{emit:F}){const $=G(),y=P("isTCodeDialogOpen"),k=F,T={id:0,start:"00:00:00",uLabel:"",type:"init"},i=o,m=f(i.timeCode),_=f(!1),M=f([]),E=f(),s=f(),d=X(()=>!i.timeCode.id),A=X(()=>d.value?E.value?s.value?"part":"work":"init":i.timeCode.type);function w(){y.value=!1}X(()=>["work","part"].includes(m.value.type));function x(){d.value&&Q(),d.value&&a()}function Q(){m.value={...T},E.value=void 0,s.value=void 0}function Y(){_.value=!1,d.value&&Q()}function q(n){const t=n.split(":");return+t[0]*60*60+ +t[1]*60+ +t[2]}function L(n){const t=(n%60).toString(),B=Math.floor(n/60%60).toString();return`${Math.floor(n/60/60%60).toString().padStart(2,"0")}:${B.padStart(2,"0")}:${t.padStart(2,"0")}`}function J(n){const t=q(n);return n===L(t)}async function c(){_.value=!0,(d.value?await D():await W.update($,m.value))&&(k("onSave"),w()),_.value=!1}async function D(){m.value.type=A.value;const n=m.value,t=i.video.id,B=n.start;switch(n.type){case"init":return W.addInit($,t,B,n.uLabel);case"work":return W.addWork($,t,B,E.value.id);case"part":return W.addPartition($,t,B,s.value.id)}}async function a(){!i.video.announceId||(_.value=!0,M.value=await $e.getListByAnnounce($,i.video.announceId),_.value=!1)}function r(){var n,t;(t=(n=E.value)==null?void 0:n.children)!=null&&t.length||(s.value=null),s.value=E.value.children[0]}async function v(){_.value=!0,await W.del($,i.timeCode.id)&&(k("onDelete"),w()),_.value=!1}return(n,t)=>(l(),p(re,{modelValue:j(y),"onUpdate:modelValue":t[5]||(t[5]=B=>de(y)?y.value=B:null),onBeforeHide:Y,onBeforeShow:x},{default:e(()=>[u(Z,{bordered:"",class:"dialogArea"},{default:e(()=>{var B;return[u(H,null,{default:e(()=>[u(N,null,{default:e(()=>[u(O,null,{default:e(()=>[u(V,{caption:""},{default:e(()=>[C(b(d.value?"\u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C \u0442\u0430\u0439\u043C\u043A\u043E\u0434":"\u0418\u043C\u0435\u043D\u0438\u0442\u044C \u0442\u0430\u0439\u043C\u043A\u043E\u0434 \u0434\u043B\u044F:"),1)]),_:1}),d.value?S("",!0):(l(),p(V,{key:0},{default:e(()=>[C(b(o.timeCode.label),1)]),_:1}))]),_:1})]),_:1})]),_:1}),u(H,null,{default:e(()=>{var R,se,ve,fe,ce;return[u(ue,{mask:"##:##:##",clearable:"",label:`${L(0)} - ${L(o.video.duration)}`,"onUpdate:modelValue":[t[0]||(t[0]=g=>q(String(g))),t[1]||(t[1]=g=>m.value.start=g)],rules:[g=>!!g||"* \u041E\u0431\u044F\u0437\u0430\u0442\u0435\u043B\u044C\u043D\u043E\u0435 \u043F\u043E\u043B\u0435",g=>J(g)||"\u041D\u0443\u0436\u0435\u043D \u0444\u043E\u0440\u043C\u0430\u0442 [HH:MM:SS]",g=>q(String(g))<=o.video.duration||"\u0417\u0430 \u043F\u0440\u0435\u0434\u0435\u043B\u0430\u043C\u0438 \u0432\u0438\u0434\u0435\u043E"],modelValue:m.value.start},null,8,["label","rules","modelValue"]),A.value==="init"?(l(),p(ue,{key:0,modelValue:m.value.uLabel,"onUpdate:modelValue":t[2]||(t[2]=g=>m.value.uLabel=g),clearable:"",label:"\u041D\u0430\u0437\u0432\u0430\u043D\u0438\u0435 \u0442\u0430\u0439\u043C\u043A\u043E\u0434\u0430","stack-label":""},null,8,["modelValue"])):S("",!0),d.value?(l(),U(z,{key:1},[M.value.length?(l(),p(ie,{key:0,modelValue:E.value,"onUpdate:modelValue":[t[3]||(t[3]=g=>E.value=g),r],label:((R=E.value)==null?void 0:R.author.fioRu)||"\u041F\u0440\u043E\u0438\u0437\u0432\u0435\u0434\u0435\u043D\u0438\u0435",options:M.value,clearable:"","map-options":"","option-value":"id","option-label":"titleRu"},{option:e(g=>[u(N,oe(ae(g.itemProps)),{default:e(()=>[u(O,null,{default:e(()=>[u(V,{caption:""},{default:e(()=>[C(b(g.opt.author.fioRu),1)]),_:2},1024),u(V,null,{default:e(()=>[C(b(g.opt.titleRu),1)]),_:2},1024)]),_:2},1024)]),_:2},1040)]),_:1},8,["modelValue","label","options"])):(l(),p(N,{key:1},{default:e(()=>[u(O,null,{default:e(()=>[u(V,null,{default:e(()=>t[6]||(t[6]=[C("\u0421\u043F\u0438\u0441\u043E\u043A \u043F\u0440\u043E\u0438\u0437\u0432\u0435\u0434\u0435\u043D\u0438\u0439 \u043F\u0443\u0441\u0442")])),_:1}),o.video.announceId?(l(),p(V,{key:0,caption:""},{default:e(()=>t[7]||(t[7]=[C(" \u041F\u043E\u0445\u043E\u0436\u0435, \u0432 \u0430\u043D\u043E\u043D\u0441\u0435 \u043D\u0435 \u0443\u043A\u0430\u0437\u0430\u043D\u0430 \u043F\u0440\u043E\u0433\u0440\u0430\u043C\u043C\u0430 \u043A\u043E\u043D\u0446\u0435\u043D\u0442\u0430. ")])),_:1})):(l(),p(V,{key:1,caption:""},{default:e(()=>t[8]||(t[8]=[C(" \u041F\u0440\u0438\u0432\u044F\u0436\u0438\u0442\u0435 \u0432\u0438\u0434\u0435\u043E \u043A \u0430\u043D\u043E\u043D\u0441\u0443, \u0447\u0442\u043E\u0431\u044B \u043F\u043E\u043B\u0443\u0447\u0438\u0442\u044C \u0441\u043F\u0438\u0441\u043E\u043A \u043F\u0440\u043E\u0438\u0437\u0432\u0435\u0434\u0435\u043D\u0438\u0439. ")])),_:1}))]),_:1})]),_:1})),(ve=(se=E.value)==null?void 0:se.children)!=null&&ve.length?(l(),p(ie,{key:2,modelValue:s.value,"onUpdate:modelValue":t[4]||(t[4]=g=>s.value=g),options:(ce=(fe=E.value)==null?void 0:fe.children)!=null?ce:[],label:"\u0427\u0430\u0441\u0442\u044C, \u043D\u043E\u043C\u0435\u0440, \u0440\u0430\u0437\u0434\u0435\u043B",clearable:"","stack-label":"","map-options":"","option-value":"id","option-label":"title"},{option:e(g=>[u(N,oe(ae(g.itemProps)),{default:e(()=>[u(O,{avatar:""},{default:e(()=>[C(b(g.opt.sortVal),1)]),_:2},1024),u(O,null,{default:e(()=>[u(V,null,{default:e(()=>[C(b(g.opt.title),1)]),_:2},1024),u(V,{caption:""},{default:e(()=>[C(b(g.opt.caption),1)]),_:2},1024)]),_:2},1024)]),_:2},1040)]),_:1},8,["modelValue","options"])):S("",!0)],64)):S("",!0)]}),_:1}),S("",!0),(B=E.value)!=null&&B.children.length?(l(),p(H,{key:1},{default:e(()=>[u(N,null,{default:e(()=>[u(O,null,{default:e(()=>[u(V,null,{default:e(()=>[C(b(s.value?"\u0427\u0430\u0441\u0442\u044C \u0431\u0443\u0434\u0435\u0442 \u043E\u0442\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0430 \u0432 \u0430\u0432\u0442\u043E\u043C\u0430\u0442\u0438\u0447\u0435\u0441\u043A\u0438 \u0441\u043E\u0437\u0434\u0430\u043D\u043D\u043E\u0439 \u043F\u0430\u043F\u043A\u0435":"\u0411\u0443\u0434\u0435\u0442 \u0434\u043E\u0431\u0430\u0432\u043B\u0435\u043D\u043E \u043F\u0440\u043E\u0438\u0437\u0432\u0435\u0434\u0435\u043D\u0438\u0435 \u0431\u0435\u0437 \u0447\u0430\u0441\u0442\u0435\u0439"),1)]),_:1})]),_:1})]),_:1})]),_:1})):S("",!0),C(" "+b(A.value)+" ",1),u(me,{align:"right"},{default:e(()=>[o.timeCode.id?(l(),p(Ae,{key:0,label:"\u0423\u0434\u0430\u043B\u0438\u0442\u044C","throw-confirm":"",onOnOk:v,danger:""})):S("",!0),u(ye),u(I,{label:"\u041E\u0442\u043C\u0435\u043D\u0430",onClick:w}),u(I,{label:"\u0421\u043E\u0445\u0440\u0430\u043D\u0438\u0442\u044C",loading:_.value,color:"green",onClick:c},null,8,["loading"])]),_:1})]}),_:1})]),_:1},8,["modelValue"]))}}),pe=le({__name:"TimeCodeItem",props:{video:{type:Object,required:!0},timeCode:{type:Object,required:!0}},emits:["goToMoment","onDelete","onSave"],setup(o,{emit:F}){G();const $=P("editMode"),y=f(!1);K("isTCodeDialogOpen",y);const k=F;return f(!1),(T,i)=>(l(),p(N,{clickable:"",onClick:i[3]||(i[3]=m=>k("goToMoment",o.timeCode.formattedStart))},{default:e(()=>[u(O,{avatar:""},{default:e(()=>[u(V,{caption:""},{default:e(()=>[C(b(o.timeCode.start),1)]),_:1}),S("",!0)]),_:1}),u(O,null,{default:e(()=>[o.timeCode.type!=="part"?(l(),p(V,{key:0,caption:""},{default:e(()=>[C(b(o.timeCode.caption),1)]),_:1})):S("",!0),u(V,null,{default:e(()=>[C(b(o.timeCode.label),1)]),_:1}),o.timeCode.type==="part"?(l(),p(V,{key:1,caption:""},{default:e(()=>[C(b(o.timeCode.caption),1)]),_:1})):S("",!0)]),_:1}),j($)?(l(),U(z,{key:0},[u(O,{side:""},{default:e(()=>[u(I,{icon:"edit",flat:"",round:"",onClick:i[0]||(i[0]=te(m=>y.value=!0,["stop","prevent"]))})]),_:1}),u(ke,{timeCode:o.timeCode,onOnDelete:i[1]||(i[1]=m=>k("onDelete")),onOnSave:i[2]||(i[2]=m=>k("onSave")),video:o.video},null,8,["timeCode","video"])],64)):S("",!0)]),_:1}))}}),Me=["innerHTML"],xe=le({__name:"DescrDialog",props:{video:{type:Object,required:!0}},setup(o){const F=G(),$=o,y=f(),k=f(!1),T=P("isOpenDescrDialog");function i(){}function m(){}function _(){y.value.hide()}async function M(){k.value=!0,await ee.putDescrToVK(F,$.video.id)&&_(),k.value=!1}return(E,s)=>(l(),p(re,{modelValue:j(T),"onUpdate:modelValue":s[0]||(s[0]=d=>de(T)?T.value=d:null),onBeforeHide:i,onBeforeShow:m,ref_key:"refDialog",ref:y},{default:e(()=>[u(Z,{bordered:""},{default:e(()=>[u(H,null,{default:e(()=>[u(N,null,{default:e(()=>[u(O,null,{default:e(()=>[u(V,null,{default:e(()=>s[1]||(s[1]=[C("\u0422\u0435\u043F\u0435\u0440\u044C \u043E\u043F\u0438\u0441\u0430\u043D\u0438\u0435 \u0432\u044B\u0433\u043B\u044F\u0434\u0438\u0442 \u0442\u0430\u043A:")])),_:1})]),_:1})]),_:1})]),_:1}),u(H,null,{default:e(()=>[u(Z,null,{default:e(()=>[u(H,null,{default:e(()=>{var d;return[h("section",{innerHTML:(d=o.video)==null?void 0:d.description,style:{whiteSpace:"pre-line"}},null,8,Me)]}),_:1})]),_:1})]),_:1}),u(H,null,{default:e(()=>s[2]||(s[2]=[C("\u0412\u044B \u043C\u043E\u0436\u0435\u0442\u0435 \u0441\u043E\u0445\u0440\u0430\u043D\u0438\u0442\u044C \u0435\u0433\u043E \u0432 \u0438\u0441\u0445\u043E\u0434\u043D\u043E\u043C \u0432\u0438\u0434\u0435\u043E \u043D\u0430 VK \u0438\u043B\u0438 \u043F\u0440\u043E\u0434\u043E\u043B\u0436\u0438\u0442\u044C \u0440\u0435\u0434\u0430\u043A\u0442\u0438\u0440\u043E\u0432\u0430\u0442\u044C")])),_:1}),u(me,{align:"between"},{default:e(()=>[u(ye),u(I,{label:"\u041D\u0435 \u0441\u0435\u0439\u0447\u0430\u0441",onClick:_}),u(I,{label:"\u0421\u043E\u0445\u0440\u0430\u043D\u0438\u0442\u044C \u043D\u0430 VK",color:"green",onClick:M})]),_:1})]),_:1})]),_:1},8,["modelValue"]))}}),Ie=le({__name:"VKVideoDialog",props:{video:{type:Object,required:!0}},emits:["onSave"],setup(o,{emit:F}){const $=G(),y=P("isOpenVKVideoDialog"),k=f(!1),T=Fe.getApiUrl(""),i=P("announceList"),m=f("");function _(c){m.value=c}const M=X(()=>{if(!m.value)return i.value;const c=m.value.toLowerCase().trim();return c?i.value.filter(D=>{var n,t,B,R;const a=((n=D.progName)==null?void 0:n.toLowerCase())||"",r=((t=D.eventTime)==null?void 0:t.toLowerCase())||"",v=((R=(B=D.Hall)==null?void 0:B.name)==null?void 0:R.toLowerCase())||"";return a.includes(c)||r.includes(c)||v.includes(c)}):i.value}),E=F,s=o,d=f(s.video),A=f(),w=f(!1),x=f();function Q(){k.value=!1}function Y(){!s.video.announceId||(x.value=i.value.find(c=>c.id===s.video.announceId))}function q(){y.value=!1}function L(c){var v,n;const D=((v=c==null?void 0:c.sketch)==null?void 0:v.md5)||null,a=((n=c==null?void 0:c.sketch)==null?void 0:n.ext)||null;return Ee(T,D,a,100)}async function J(){k.value=!0;const c={id:x.value.id,progName:x.value.progName,eventTime:x.value.eventTime};await ee.linkToAnnounce($,s.video.id,c)&&(E("onSave"),q())}return(c,D)=>(l(),p(re,{modelValue:j(y),"onUpdate:modelValue":D[4]||(D[4]=a=>de(y)?y.value=a:null),onBeforeShow:Y,onBeforeHide:Q},{default:e(()=>[u(Z,{bordered:"",class:"dialogArea"},{default:e(()=>[u(H,null,{default:e(()=>[u(ie,{modelValue:x.value,"onUpdate:modelValue":[D[0]||(D[0]=a=>x.value=a),()=>{}],options:M.value,label:"\u0412\u044B\u0431\u0440\u0430\u0442\u044C \u043A\u043E\u043D\u0446\u0435\u0440\u0442","map-options":"","option-label":"progName","option-value":"id",clearable:"","use-input":"",onInputValue:_},De({option:e(a=>[u(N,oe(ae(a.itemProps)),{default:e(()=>[u(O,{avatar:""},{default:e(()=>[u(ge,{src:L(a.opt)},null,8,["src"])]),_:2},1024),u(O,null,{default:e(()=>[u(V,null,{default:e(()=>[C(b(a.opt.progName),1)]),_:2},1024),u(V,{caption:""},{default:e(()=>[C(b(a.opt.eventTime),1)]),_:2},1024),u(V,{caption:""},{default:e(()=>[C(b(a.opt.Hall.name),1)]),_:2},1024)]),_:2},1024)]),_:2},1040)]),_:2},[x.value?{name:"append",fn:e(()=>[u(I,{icon:"save",color:"green",onClick:te(J,["stop","prevent"]),flat:"",round:""})]),key:"0"}:void 0]),1032,["modelValue","options"])]),_:1}),u(H,null,{default:e(()=>[u(ue,{modelValue:d.value.title,"onUpdate:modelValue":D[1]||(D[1]=a=>d.value.title=a),label:"\u041D\u0430\u0437\u0432\u0430\u043D\u0438\u0435",onFocus:D[2]||(D[2]=a=>w.value=!0),onBlur:D[3]||(D[3]=a=>w.value=!1),ref_key:"refTitle",ref:A},{append:e(()=>[w.value?(l(),p(I,{key:0,icon:"save",color:"green",label:"\u0421\u043E\u0445\u0440\u0430\u043D\u0438\u0442\u044C"})):S("",!0)]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["modelValue"]))}});const Qe={class:"absolute-top-left text-subtitle2"},Le={key:0,class:"absolute-top-right no-padding"},Ne={key:1,class:"absolute-center",style:{"border-radius":"50%"}},Ue={__name:"VKVideoItem",props:{video:{type:Object,required:!0}},emits:["onSave"],setup(o,{emit:F}){const $=G(),y=o,k=f(y.video),T=P("announceList"),i=F;function m(){return T.value.find(a=>a.id===k.value.announceId)}const _=X(()=>{const a=m();return a?`${k.value.recordedAt} - ${a.Hall.name}`:k.value.recordedAt});async function M(){i("onSave")}const E=P("editMode"),s=f(!1),d=f(!1);K("isOpenVKVideoDialog",d);const A=f(!1);K("isOpenDescrDialog",A);const w=f(!1),x=f(!1);K("isTCodeDialogOpen",x);const Q=f(!1);function Y(){d.value=!0}function q(a=null){let r="https://vk.com/video";const v=`${y.video.owner_id}_${y.video.id}`;let n=`list=${y.video.access_key}`;return a&&(n=`${n}&t=${a}`),`${r}${v}?${n}`}function L(a=null){const r=q(a);window.open(r,"_blank")}function J(){x.value=!0}async function c(){Q.value=!0,k.value.timeCodes=await W.getList($,y.video.id),Q.value=!1}K("loadTCodes",c);async function D(){await c(),k.value.description=await ee.getDescr($,y.video.id),A.value=!0}return(a,r)=>(l(),p(Z,null,{default:e(()=>[u(ge,{style:{cursor:"pointer"},src:o.video.image[4].url,ratio:1920/1080,onMouseover:r[5]||(r[5]=v=>s.value=!0),onMouseleave:r[6]||(r[6]=v=>s.value=!1),class:"rounded-borders"},{default:e(()=>[h("div",Qe,b(_.value),1),j(E)?(l(),U("div",Le,[u(I,{loading:Q.value,icon:"edit",flat:"",onClick:r[0]||(r[0]=te(v=>Y(),["stop","prevent"]))},null,8,["loading"]),S("",!0)])):S("",!0),s.value?(l(),U("div",Ne,[u(I,{icon:"play_circle",style:{cursor:"pointer"},round:"",loading:Q.value,onClick:r[2]||(r[2]=v=>L())},null,8,["loading"])])):S("",!0),h("div",{class:"absolute-bottom text-center",style:{display:"flex","justify-content":"space-between"},onClick:r[4]||(r[4]=v=>L())},[r[8]||(r[8]=h("div",null,b(" "),-1)),h("div",null,b(o.video.title),1),h("div",null,[u(I,{icon:"menu",loading:Q.value,onClick:r[3]||(r[3]=te(v=>w.value=!w.value,["stop","prevent"]))},null,8,["loading"])])])]),_:1},8,["src"]),j(E)?(l(),p(Ie,{key:0,video:k.value,onOnSave:M},null,8,["video"])):S("",!0),u(Be,null,{default:e(()=>[w.value?(l(),p(we,{key:0,separator:""},{default:e(()=>[(l(!0),U(z,null,ne(k.value.timeCodes,v=>{var n;return l(),U(z,{key:`work_${o.video.id}_${v.id}`},[(n=v==null?void 0:v.children)!=null&&n.length?(l(),p(Oe,{key:0,"content-inset-level":.5},{header:e(()=>[u(N,{class:"full-width no-padding"},{default:e(()=>[u(O,null,{default:e(()=>[u(V,{caption:""},{default:e(()=>[C(b(v.caption),1)]),_:2},1024),u(V,null,{default:e(()=>[C(b(v.label),1)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),default:e(()=>[(l(!0),U(z,null,ne(v.children,(t,B)=>(l(),p(pe,{key:`part_${t.workId}_${B}`,timeCode:t,video:o.video,onOnDelete:c,onOnSave:D,onGoToMoment:L},null,8,["timeCode","video"]))),128))]),_:2},1024)):v.type!=="part"?(l(),p(pe,{key:1,video:o.video,onOnDelete:c,onGoToMoment:L,onOnSave:D,timeCode:v},null,8,["video","timeCode"])):S("",!0)],64)}),128)),j(E)?(l(),p(N,{key:0,clickable:"",onClick:r[7]||(r[7]=v=>J())},{default:e(()=>[u(O,{avatar:""},{default:e(()=>[u(I,{icon:"add"})]),_:1}),u(O,null,{default:e(()=>[u(V,null,{default:e(()=>r[9]||(r[9]=[C("\u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C \u0442\u0430\u0439\u043C\u043A\u043E\u0434")])),_:1})]),_:1}),u(ke,{dur:o.video.duration,video:o.video,onOnSave:D},null,8,["dur","video"]),u(xe,{video:k.value},null,8,["video"])]),_:1})):S("",!0)]),_:1})):S("",!0)]),_:1})]),_:1}))}};var He=Ce(Ue,[["__scopeId","data-v-1ab2ae10"]]);const Ke={class:"centralCol"},Pe={key:0,class:"vidarea"},qe={__name:"VKVideoPage",setup(o){const F=G(),$=String("https://sakh-orch.ru/api/"),k=P("editModes").libVideo;K("editMode",k);const T=f(!1);K("progress",T);const i=f([]),m=f(""),_=f([]);K("announceList",_);async function M(){T.value=!0;const d=await ee.getList(F);i.value=[...d],T.value=!1}async function E(){T.value=!0,await ee.updateAllFromVK(F)&&await M(),T.value=!1}function s(){T.value=!0,_e.post($+"epoint/event/announce.php",{params:{method:"listAll"}}).then(d=>{var A,w;_.value=[],_.value=(w=(A=d==null?void 0:d.data)==null?void 0:A.data)!=null?w:[]}).catch(d=>{F.notify(Se(d)),_.value=[]}).finally(()=>{T.value=!1})}return Ve(()=>{s(),M()}),(d,A)=>(l(),p(Te,{"page-title":"\u0412\u0438\u0434\u0435\u043E\u0442\u0435\u043A\u0430"},{ToolPanel:e(()=>[u(I,{icon:"refresh",flat:"",stretch:"",onClick:E}),u(ue,{modelValue:m.value,"onUpdate:modelValue":A[0]||(A[0]=w=>m.value=w),style:{width:"100%","max-width":"16em"},label:"\u0444\u0438\u043B\u044C\u0442\u0440","stack-label":"",clearable:""},{append:e(()=>[u(be,{name:"search"})]),_:1},8,["modelValue"])]),PageContent:e(()=>[h("div",Ke,[i.value.length?(l(),U("div",Pe,[(l(!0),U(z,null,ne(i.value,w=>(l(),p(He,{key:w.id,video:w,onOnSave:M},null,8,["video"]))),128))])):S("",!0)])]),_:1}))}};var Cu=Ce(qe,[["__scopeId","data-v-d9d5fad4"]]);export{Cu as default};
