import{Q as B}from"./QToolbarTitle.af366441.js";import{Q as V}from"./QToolbar.a682b4c4.js";import{Q as D}from"./QSpace.a02a3a36.js";import{i as g,q as c,v as b,H as o,f as t,b2 as I,b3 as $,V as f,ay as _,W as d,b as F,u as M,m as N,r as m,p,t as R,I as y,a$ as q,l as k,F as E,aa as Y}from"./index.98b8ab12.js";import{Q as C}from"./QSelect.7001608c.js";import{Q as U}from"./QTooltip.d195c2cf.js";import{Q as z}from"./QLinearProgress.3dd3c038.js";import{_ as j}from"./AnnounceList.ed599e1d.js";import{u as H}from"./use-quasar.4c5e23ae.js";import{u as K}from"./use-meta.c3ed2819.js";import{api as O}from"./axios.7ec6e0cf.js";import{g as W,a as G,n as J}from"./myFuncts.63144fda.js";import{Q as w}from"./QItemLabel.09ba36af.js";import{a as X,Q as Z}from"./QItem.ae3c8076.js";import{_ as ee}from"./plugin-vue_export-helper.21dcd24c.js";import"./format.8310c22b.js";import"./position-engine.a5509e97.js";import"./rtl.b51694b1.js";import"./AnnounceCard.b74db092.js";import"./QImg.5be400b5.js";import"./use-ratio.9a3cf554.js";import"./BtnDelete.be3235d7.js";const te={__name:"SelectSort",setup(L){const s=g("sortType"),v=[{label:"\u0421\u043D\u0430\u0447\u0430\u043B\u0430 \u043D\u043E\u0432\u044B\u0435",value:"dateDesc",caption:"\u041F\u043E \u0443\u0431\u044B\u0432\u0430\u043D\u0438\u044E \u0434\u0430\u0442\u044B"},{label:"\u0421\u043D\u0430\u0447\u0430\u043B\u0430 \u0434\u0430\u0432\u043D\u0438\u0435",value:"dateAsc",caption:"\u041F\u043E \u0432\u043E\u0437\u0440\u0430\u0441\u0442\u0430\u043D\u0438\u044E \u0434\u0430\u0442\u044B"}];return(Q,i)=>(c(),b(C,{modelValue:d(s),"onUpdate:modelValue":i[0]||(i[0]=r=>F(s)?s.value=r:null),borderless:"","map-options":"","emit-value":"",options:v},{option:o(r=>[t(X,I($(r.itemProps)),{default:o(()=>[t(Z,null,{default:o(()=>[t(w,null,{default:o(()=>[f(_(r.opt.label),1)]),_:2},1024),t(w,{caption:""},{default:o(()=>[f(_(r.opt.caption),1)]),_:2},1024)]),_:2},1024)]),_:2},1040)]),_:1},8,["modelValue"]))}};const ae={class:"selectors"},oe={class:"gridArea"},re={__name:"AnnounceListPage",setup(L){const s=W("\u0410\u043D\u043E\u043D\u0441\u044B");K(s);const v=String("https://api.sakh-orch.ru/"),Q=H();M();const i=N(),r=g("editMode"),l=m(!1);p("compactCard",l);const P=g("progress"),h=m("dateDesc");p("sortType",h);const u=m(new Date().getFullYear());p("evYear",u);const S=m([]);p("announceList",S);function x(){let e=[];for(let a=2018;a<=new Date().getFullYear();a++)e.push(a);return e.reverse()}function A(){O.post(v+"api/event/announce.php",{params:{method:"add"}}).then(e=>{var a,n,T;if(!((a=e==null?void 0:e.data)!=null&&a.result))throw new Error;Q.notify(G((T=(n=e==null?void 0:e.data)==null?void 0:n.result)!=null?T:null)),i.push({path:"/announce/"+e.data.data.id})}).catch(e=>{Q.notify(J(e))})}return(e,a)=>(c(),R(E,null,[y("div",{class:q(["pageToolbar",e.$q.platform.is.desktop?"no-wrap":"wrap"])},[t(V,null,{default:o(()=>[t(B,null,{default:o(()=>[f(_(d(s).title),1)]),_:1})]),_:1}),t(V,null,{default:o(()=>[t(D),y("div",ae,[d(r)?(c(),b(Y,{key:0,label:"\u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C",onClick:A})):k("",!0),t(C,{modelValue:u.value,"onUpdate:modelValue":a[0]||(a[0]=n=>u.value=n),options:x(),"emit-value":"",borderless:""},null,8,["modelValue","options"]),t(te),t(Y,{icon:l.value?"unfold_less":"unfold_more",flat:"",onClick:a[1]||(a[1]=n=>l.value=!l.value)},{default:o(()=>[t(U,null,{default:o(()=>[f(_(l.value?"\u041F\u043E\u0434\u0440\u043E\u0431\u043D\u043E":"\u041A\u0440\u0430\u0442\u043A\u043E"),1)]),_:1})]),_:1},8,["icon"])])]),_:1})],2),d(P)?(c(),b(z,{key:0,indeterminate:"",color:"secondary"})):k("",!0),y("div",oe,[t(j,{evYear:u.value,method:"listByYear",sort:h.value},null,8,["evYear","sort"])])],64))}};var Ce=ee(re,[["__scopeId","data-v-73719c07"]]);export{Ce as default};
