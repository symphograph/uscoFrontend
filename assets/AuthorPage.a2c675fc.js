import{u as I,I as E,i as s,r as P,p as N,o as B,m as c,n as f,q as i,f as r,ax as R,x as o,y as T,b7 as b,z as y,bl as M,B as O,l as k,t as $,v as g}from"./index.0155efd7.js";import{Q as q}from"./QItemLabel.554eb9e3.js";import{a as D}from"./QItem.1c28b386.js";import{P as L}from"./PageShell.d0e74699.js";import{S as U}from"./SelectComposer.b33db017.js";import{P as W}from"./LocalStorage.eae0a54d.js";import{u as j}from"./use-quasar.527a8a9b.js";import{a as A}from"./axios.0b51f5d0.js";import{c as z,a as V,n as C}from"./myFuncts.2385ae5b.js";import{_ as K}from"./BtnDelete.7da7cc21.js";import{_ as F}from"./BtnLibEdit.48d766c7.js";import"./TouchPan.7b9894b8.js";import"./touch.9135741d.js";import"./selection.b5582e5f.js";import"./QToolbar.8537c9fb.js";import"./QExpansionItem.1a4dcab3.js";import"./QScrollArea.7dcee4d9.js";import"./format.de7e9769.js";import"./QLinearProgress.ea9c3560.js";import"./MainFooter.f01ee1b3.js";import"./MainFooter.vue_vue_type_style_index_0_scoped_true_lang.e9c601d0.js";import"./plugin-vue_export-helper.21dcd24c.js";import"./AnderHeader.4c7a9a76.js";import"./QImg.3b6c03a2.js";/* empty css                                                    */import"./QSelect.07ddbdcc.js";import"./QMenu.c5a4b786.js";import"./position-engine.186084c4.js";import"./rtl.276c3f1b.js";import"./AuthorItem.e59d6f0e.js";/* empty css                                                               *//* empty css                                                                   */import"./QTooltip.7c374613.js";import"./myAuth.5621b016.js";const G={class:"centralCol"},Et={__name:"AuthorPage",setup(H){const u=j(),n=I(),Q=E(),h=String("https://api.staff.sakh-orch.ru/"),p=s("libEditMode"),S=P(null);N("searchText",S);const d=s("selectedAuthorId"),_=s("loadAuthor"),l=s("selectedAuthor");function v(){W.set("lastAuthor",d.value),n.params.id=d.value,Q.push({path:"/lib/author/"+d.value}),_()}function w(){A.post(h+"/api/lib/author.php",{params:{method:"update",id:n.params.id,author:l.value}}).then(t=>{var a,e,m;if(!((a=t==null?void 0:t.data)!=null&&a.result))throw new Error;u.notify(V((m=(e=t==null?void 0:t.data)==null?void 0:e.result)!=null?m:null))}).catch(t=>{u.notify(C(t))})}function x(){A.post(h+"/api/lib/author.php",{params:{method:"del",workId:n.params.id}}).then(t=>{var a,e,m;if(!((a=t==null?void 0:t.data)!=null&&a.result))throw new Error;u.notify(V((m=(e=t==null?void 0:t.data)==null?void 0:e.result)!=null?m:null))}).catch(t=>{u.notify(C(t))})}return B(()=>{d.value=n.params.id*1,_()}),(t,a)=>(c(),f(L,{"page-title":"\u041A\u043E\u043C\u043F\u043E\u0437\u0438\u0442\u043E\u0440 "},{ToolPanel:i(()=>[r(U,{onItSel:v}),r(F)]),PageContent:i(()=>[R("div",G,[o(l)?(c(),f(T,{key:0},{default:i(()=>[r(y,null,{default:i(()=>[r(b,{modelValue:o(l).fioRu,"onUpdate:modelValue":a[0]||(a[0]=e=>o(l).fioRu=e),readonly:!o(p),label:"\u0424\u0430\u043C\u0438\u043B\u0438\u044F, \u0418\u043C\u044F \u041E\u0442\u0447\u0435\u0441\u0442\u0432\u043E"},null,8,["modelValue","readonly"]),r(b,{modelValue:o(l).iofEn,"onUpdate:modelValue":a[1]||(a[1]=e=>o(l).iofEn=e),readonly:!o(p),label:"Name LastName"},null,8,["modelValue","readonly"])]),_:1}),o(p)?(c(),f(M,{key:0,align:"right"},{default:i(()=>[r(O,{label:"\u0421\u043E\u0445\u0440\u0430\u043D\u0438\u0442\u044C",color:"green",onClick:w}),r(K,{label:"\u0423\u0434\u0430\u043B\u0438\u0442\u044C",title:"\u0423\u0434\u0430\u043B\u0438\u0442\u044C \u043A\u043E\u043C\u043F\u043E\u0437\u0438\u0442\u043E\u0440\u0430","throw-confirm":"",danger:"",onOnOk:x,tooltip:"\u0423\u0434\u0430\u043B\u0438\u0442\u044C \u043A\u043E\u043C\u043F\u043E\u0437\u0438\u0442\u043E\u0440\u0430"})]),_:1})):k("",!0),r(y,null,{default:i(()=>[r(D,{clickable:"",to:`/lib/works/${o(l).id}`},{default:i(()=>[r(q,null,{default:i(()=>[$(g(o(l).cntWorks)+" "+g(o(z)(o(l).cntWorks,["\u043F\u0440\u043E\u0438\u0437\u0432\u0435\u0434\u0435\u043D\u0438\u0435","\u043F\u0440\u043E\u0438\u0437\u0432\u0435\u0434\u0435\u043D\u0438\u044F","\u043F\u0440\u043E\u0438\u0437\u0432\u0435\u0434\u0435\u043D\u0438\u0439"])),1)]),_:1})]),_:1},8,["to"])]),_:1})]),_:1})):k("",!0)])]),_:1}))}};export{Et as default};
