import{u as v}from"./use-quasar.f802b087.js";import{api as h}from"./axios.4eeeb5eb.js";import{A as g}from"./AnnounceCard.d8be9eed.js";import{r as A,u as k,d as y,i as o,a as L,w as _,C as w,f as c,g as F,au as B,F as Y,j}from"./index.5c3fb0b9.js";import{n as x}from"./myFuncts.8c7f864e.js";const b={__name:"AnnounceList",props:{method:String,evYear:Number,sort:A({})},setup(i){const n=i,l=String("https://api.sakh-orch.ru/"),m=v();k(),y(),o("editMode");const u=o("progress"),a=o("announceList");o("Halls");function s(){u.value=!0,h.post(l+"api/event/announce.php",{params:{method:n.method,year:n.evYear}}).then(e=>{var t,r;a.value=(r=(t=e==null?void 0:e.data)==null?void 0:t.data)!=null?r:[]}).catch(e=>{m.notify(x(e)),a.value=[]}).finally(()=>{u.value=!1})}L(()=>{s()}),_(()=>n.evYear,()=>{s()});const d=(e,t)=>e.datetime<t.datetime?1:-1,p=(e,t)=>e.datetime>t.datetime?1:-1,f=w(()=>{if(!a.value||!a.value.length)return[];switch(n.sort){case 0:return[...a.value].sort(d);case 1:return[...a.value].sort(p);default:return a.value}});return(e,t)=>(c(!0),F(Y,null,B(f.value,r=>(c(),j(g,{key:r.id,Announce:r,onIamDeleted:t[0]||(t[0]=C=>s())},null,8,["Announce"]))),128))}};export{b as _};
